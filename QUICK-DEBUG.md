# üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞:
WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è ‚úÖ, –Ω–æ HTTP API –ø–∞–¥–∞–µ—Ç ‚ùå

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ **–Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ**:
```
http://31.192.110.121:3001/api/health
```

**–ß—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ?**

### –í–∞—Ä–∏–∞–Ω—Ç A: JSON –æ—Ç–≤–µ—Ç
```json
{"status":"ok","version":"3.0.0","uptime":123}
```
‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –≤ CORS –∏–ª–∏ fetch

### –í–∞—Ä–∏–∞–Ω—Ç B: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç C: HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚ùå Nginx —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

---

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DevTools

–í Editor –æ—Ç–∫—Ä–æ–π—Ç–µ **DevTools (F12) ‚Üí Network**

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞.

**–ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/health`**

### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç?

**Status: 200**
- –ó–Ω–∞—á–∏—Ç –æ—Ç–≤–µ—Ç –ø—Ä–∏—à—ë–ª
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Response tab - —á—Ç–æ —Ç–∞–º?
- –ï—Å–ª–∏ JSON - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ
- –ï—Å–ª–∏ HTML - –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–µ—Ä–≤–µ—Ä–µ

**Status: (failed)**
- CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç
- –ò–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**Status: (pending)**
- Timeout
- Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS

–í DevTools Console –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
fetch('http://31.192.110.121:3001/api/health')
  .then(r => r.json())
  .then(d => console.log('‚úÖ Success:', d))
  .catch(e => console.error('‚ùå Error:', e))
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
‚ùå Error: CORS policy...
```

–ó–Ω–∞—á–∏—Ç –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

---

## –®–∞–≥ 4: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CORS (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:

```bash
cat /opt/kiosk/packages/server/.env | grep CORS
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
CORS_ORIGIN=*
```

–ï—Å–ª–∏ –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ:
```bash
echo "CORS_ORIGIN=*" >> /opt/kiosk/packages/server/.env
sudo systemctl restart kiosk-server
```

---

## –®–∞–≥ 5: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–æ–∫–∞ –Ω–µ –Ω–∞–π–¥—ë–º –ø—Ä–æ–±–ª–µ–º—É, –º–æ–∂–Ω–æ **–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å health check**:

–í —Ñ–∞–π–ª–µ `serverStore.ts` —Å—Ç—Ä–æ–∫–∞ 76:

```typescript
// –í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É:
// const health = await apiClient.checkHealth();
// if (health.success && health.data) {

// –°—Ä–∞–∑—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ connected:
set({
  isConnected: true,
  isConnecting: false,
  serverVersion: '3.0.0',
  serverUptime: 0,
  lastError: null,
});

// Initialize WebSocket
const wsUrl = config.url.replace(/^http/, 'ws');
wsClient.init(wsUrl, true);
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ WebSocket** –±–µ–∑ HTTP –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

## –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:

1. **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä:**
   ```
   http://31.192.110.121:3001/api/health
   ```

2. **DevTools Network:**
   - –°—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞ –∫ /api/health
   - Response —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

3. **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   cat /opt/kiosk/packages/server/.env
   ```

–° —ç—Ç–∏–º —è —Ç–æ—á–Ω–æ –Ω–∞–π–¥—É –ø—Ä–æ–±–ª–µ–º—É! üîç
