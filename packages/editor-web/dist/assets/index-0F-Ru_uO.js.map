{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","children","rest","ref","createElement","tag","attrs","createLucideIcon$1","AlertCircle","CheckCircle","Check","Cloud","Download","FolderOpen","Grid","Image","Key","Loader","Lock","LogOut","Magnet","Menu","MousePointer","Package","Play","Plus","Redo2","Save","Search","Square","Trash2","Type","Undo2","Unlock","User","Video","X","ZoomIn","ZoomOut","Logger","level","message","details","entry","logger","ApiClient","stored","data","lastActivity","timeSinceActivity","error","token","organizationName","plan","licenseKey","response","event","filters","params","query","url","id","projectId","file","onProgress","formData","resolve","reject","xhr","progress","fileId","endpoint","options","headers","errorData","apiClient","LoginPage","navigate","useNavigate","setLicenseKey","useState","isLoading","setIsLoading","setError","useEffect","reason","setLogoutMessage","logoutMessage","formatLicenseKey","value","handleInputChange","formatted","handleSubmit","err","handlePaste","pasted","jsxs","jsx","Fragment","getClipPath","shape","w","cornerRadius","usePx","cx","cy","r","fmt","px","py","polygon","sides","startAngle","points","i","angle","pts","sr","MenuWidget","widgetId","commonStyle","items","isHorizontal","backgroundColor","textColor","hoverColor","fontSize","fontFamily","itemPadding","itemHeight","submenuBackgroundColor","submenuTextColor","borderWidth","borderColor","executeActions","hoveredItem","setHoveredItem","expandedItem","setExpandedItem","containerStyle","itemStyle","itemId","submenuStyle","parentId","item","hasChildren","child","PreviewPage","searchParams","useSearchParams","project","setProject","loading","setLoading","popupVisible","setPopupVisible","popupData","setPopupData","hiddenWidgets","setHiddenWidgets","serverProject","localProject","handleKeyDown","actions","action","prev","newSet","el","renderWidget","widget","events","handleClick","shapeType","fillColor","strokeColor","opacity","shapeClip","needsClip","br","scaleX","scaleY","text","fontWeight","textAlign","verticalAlign","src","objectFit","clipShape","borderEnabled","hasClip","clipPath","effectiveObjectFit","autoplay","loop","muted","borderRadius","borderStyle","paddingX","paddingY","shadowEnabled","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","orientation","InactivityWarning","visible","setVisible","countdown","setCountdown","handleWarning","handleLogout","handleActivity","interval","minutes","seconds","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","createStore","React","is","y","objectIs","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","x","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","autoSaveTimer","startAutoSave","saveFunction","stopAutoSave","saveCurrentProjectId","getCurrentProjectId","useEditorStore","set","get","name","canvas","isSaving","snapshotName","snapshotProject","updates","type","defaultProps","pendingWidget","snapToGrid","gridSize","finalX","finalY","defaultSize","width","height","_","__","cleanProps","wId","newWidget","addToSelection","selectedWidgetIds","history","previous","newPast","next","newFuture","selectedWidgets","clipboard","newWidgets","zoom","AutoSaveIndicator","lastSaved","saveError","status","formatLastSaved","date","diff","renderContent","CreateProjectDialog","onClose","onSuccess","setName","description","setDescription","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","creating","setCreating","createProject","presets","preset","ProjectsDialog","onProjectLoaded","projects","setProjects","searchQuery","setSearchQuery","showCreateDialog","setShowCreateDialog","loadProject","loadProjects","handleOpenProject","handleDeleteProject","handleProjectCreated","filteredProjects","BuildDialog","appName","setAppName","iconFile","setIconFile","iconPreview","setIconPreview","building","setBuilding","buildStatus","setBuildStatus","pollTimer","setPollTimer","iconInputRef","handleIconSelect","reader","ev","handleBuild","API_BASE","result","buildId","timer","statusResult","handleDownload","isCompleted","isFailed","isBuilding","Toolbar","gridEnabled","undo","redo","setZoom","toggleGrid","toggleSnapToGrid","saveProject","projectForPreview","savePreviewSnapshot","previewLoading","setPreviewLoading","setOrganizationName","setPlan","showProjectsDialog","setShowProjectsDialog","showBuildDialog","setShowBuildDialog","orgData","handleZoomIn","handleZoomOut","handlePreview","snapshotId","canUndo","canRedo","ClippedImage","image","imageRef","node","ctx","centerX","centerY","radius","drawPolygon","drawRoundedRect","imgRatio","widgetRatio","sx","sy","sw","sh","dx","dy","dw","dh","clippedImage","KonvaImage","ImageGallery","isSelected","onSelect","onDragEnd","onTransformEnd","dragBoundFunc","groupRef","images","setImages","currentIndex","setCurrentIndex","isTransitioning","setIsTransitioning","timerRef","sources","autoSwitch","switchInterval","transition","loadedImages","loadCount","source","img","isLocked","currentSource","currentImage","Group","Rect","ImageWidget","setImage","updateWidget","currentRatio","newHeight","imageProps","cropX","cropY","cropWidth","cropHeight","getStrokeDash","style","handleTransform","renderBorder","strokeProps","Circle","Ellipse","RegularPolygon","Star","ButtonWidget","textRef","fontStyle","getDash","Text","TextWidget","lineHeight","padding","textDecoration","getTextDecoration","VideoPlaylist","autoNext","VideoWidget","videoRef","videoElement","setVideoElement","animationRef","sourceType","rtspUrl","isLocalFile","fileName","controls","video","updateCanvas","layer","videoRatio","videoProps","sWidth","sHeight","dWidth","dHeight","getDisplayText","KonvaText","ShapeWidget","renderShape","commonProps","Line","arrowWidth","arrowHeight","headWidth","shaftHeight","calculateItemWidth","label","renderHorizontalMenu","elements","currentX","index","itemWidth","isHovered","isExpanded","childIndex","childY","childWidth","renderVerticalMenu","currentY","menuWidth","childIsHovered","WIDGET_COLORS","Canvas","selectWidget","clearSelection","gridLineWidth","gridColor","addWidgetAtPosition","clearPendingWidget","stageRef","transformerRef","snapToGridValue","pos","stage","selectedNodes","handleStageClick","pointerPosition","handleWidgetClick","isMultiSelect","handleDragEnd","handleTransformEnd","nodeWidth","nodeHeight","renderGrid","lines","Stage","Layer","Transformer","oldBox","newBox","OutlinePanel","deleteWidget","getWidgetIcon","getWidgetLabel","sortedWidgets","WidgetLibrary","addWidget","widgetTypes","handleAddWidget","setPendingWidget","widgetType","Icon","ActionEditor","onUpdate","allWidgets","addAction","newAction","updateAction","newActions","removeAction","PropertiesPanel","selectedWidget","handlePropertyChange","key","handlePropertiesChange","styleName","__vitePreload","buttonStyles","s","extractTextFromFile","loadRequiredLibraries","newSources","files","currentSources","loadedCount","newItem","c","Editor","authRefresh","setAuthRefresh","restoreProject","copy","paste","cut","restored","handleUnauthorized","handleLogin","ProtectedRoute","Navigate","App","BrowserRouter","Routes","Route","root","ReactDOM"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,41,42,43,44,45,46],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.mjs","../../node_modules/lucide-react/dist/esm/createLucideIcon.mjs","../../node_modules/lucide-react/dist/esm/icons/alert-circle.mjs","../../node_modules/lucide-react/dist/esm/icons/check-circle.mjs","../../node_modules/lucide-react/dist/esm/icons/check.mjs","../../node_modules/lucide-react/dist/esm/icons/cloud.mjs","../../node_modules/lucide-react/dist/esm/icons/download.mjs","../../node_modules/lucide-react/dist/esm/icons/folder-open.mjs","../../node_modules/lucide-react/dist/esm/icons/grid.mjs","../../node_modules/lucide-react/dist/esm/icons/image.mjs","../../node_modules/lucide-react/dist/esm/icons/key.mjs","../../node_modules/lucide-react/dist/esm/icons/loader.mjs","../../node_modules/lucide-react/dist/esm/icons/lock.mjs","../../node_modules/lucide-react/dist/esm/icons/log-out.mjs","../../node_modules/lucide-react/dist/esm/icons/magnet.mjs","../../node_modules/lucide-react/dist/esm/icons/menu.mjs","../../node_modules/lucide-react/dist/esm/icons/mouse-pointer.mjs","../../node_modules/lucide-react/dist/esm/icons/package.mjs","../../node_modules/lucide-react/dist/esm/icons/play.mjs","../../node_modules/lucide-react/dist/esm/icons/plus.mjs","../../node_modules/lucide-react/dist/esm/icons/redo-2.mjs","../../node_modules/lucide-react/dist/esm/icons/save.mjs","../../node_modules/lucide-react/dist/esm/icons/search.mjs","../../node_modules/lucide-react/dist/esm/icons/square.mjs","../../node_modules/lucide-react/dist/esm/icons/trash-2.mjs","../../node_modules/lucide-react/dist/esm/icons/type.mjs","../../node_modules/lucide-react/dist/esm/icons/undo-2.mjs","../../node_modules/lucide-react/dist/esm/icons/unlock.mjs","../../node_modules/lucide-react/dist/esm/icons/user.mjs","../../node_modules/lucide-react/dist/esm/icons/video.mjs","../../node_modules/lucide-react/dist/esm/icons/x.mjs","../../node_modules/lucide-react/dist/esm/icons/zoom-in.mjs","../../node_modules/lucide-react/dist/esm/icons/zoom-out.mjs","../../src/utils/logger.ts","../../src/services/api-client.ts","../../src/pages/LoginPage.tsx","../../src/pages/PreviewPage.tsx","../../src/components/InactivityWarning.tsx","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../src/stores/editorStore.ts","../../src/components/AutoSaveIndicator.tsx","../../src/components/CreateProjectDialog.tsx","../../src/components/ProjectsDialog.tsx","../../src/components/BuildDialog.tsx","../../src/components/Toolbar.tsx","../../src/components/ClippedImage.tsx","../../src/components/ImageGallery.tsx","../../src/components/ImageWidget.tsx","../../src/components/ButtonWidget.tsx","../../src/components/TextWidget.tsx","../../src/components/VideoPlaylist.tsx","../../src/components/VideoWidget.tsx","../../src/components/ShapeWidget.tsx","../../src/components/MenuWidget.tsx","../../src/components/Canvas.tsx","../../src/components/OutlinePanel.tsx","../../src/components/WidgetLibrary.tsx","../../src/components/ActionEditor.tsx","../../src/components/PropertiesPanel.tsx","../../src/components/Editor.tsx","../../src/components/auth/ProtectedRoute.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.mjs';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\nvar createLucideIcon$1 = createLucideIcon;\n\nexport { createLucideIcon$1 as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"polyline\", { points: \"22 4 12 14.01 9 11.01\", key: \"6xbx8j\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Check = createLucideIcon(\"Check\", [\n  [\"polyline\", { points: \"20 6 9 17 4 12\", key: \"10jjfj\" }]\n]);\n\nexport { Check as default };\n//# sourceMappingURL=check.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Cloud = createLucideIcon(\"Cloud\", [\n  [\n    \"path\",\n    { d: \"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z\", key: \"p7xjir\" }\n  ]\n]);\n\nexport { Cloud as default };\n//# sourceMappingURL=cloud.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst FolderOpen = createLucideIcon(\"FolderOpen\", [\n  [\n    \"path\",\n    {\n      d: \"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2\",\n      key: \"1nmvlm\"\n    }\n  ]\n]);\n\nexport { FolderOpen as default };\n//# sourceMappingURL=folder-open.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Grid = createLucideIcon(\"Grid\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"3\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1m3agn\"\n    }\n  ],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"9\", y2: \"9\", key: \"1vqk6q\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"15\", y2: \"15\", key: \"o2sbyz\" }],\n  [\"line\", { x1: \"9\", x2: \"9\", y1: \"3\", y2: \"21\", key: \"13tij5\" }],\n  [\"line\", { x1: \"15\", x2: \"15\", y1: \"3\", y2: \"21\", key: \"1hpv9i\" }]\n]);\n\nexport { Grid as default };\n//# sourceMappingURL=grid.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Image = createLucideIcon(\"Image\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"3\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1m3agn\"\n    }\n  ],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Key = createLucideIcon(\"Key\", [\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"path\", { d: \"m15.5 7.5 3 3L22 7l-3-3\", key: \"1rn1fs\" }]\n]);\n\nexport { Key as default };\n//# sourceMappingURL=key.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\n    \"line\",\n    { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst LogOut = createLucideIcon(\"LogOut\", [\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }],\n  [\"polyline\", { points: \"16 17 21 12 16 7\", key: \"1gabdz\" }],\n  [\"line\", { x1: \"21\", x2: \"9\", y1: \"12\", y2: \"12\", key: \"1uyos4\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Magnet = createLucideIcon(\"Magnet\", [\n  [\n    \"path\",\n    {\n      d: \"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15\",\n      key: \"1i3lhw\"\n    }\n  ],\n  [\"path\", { d: \"m5 8 4 4\", key: \"j6kj7e\" }],\n  [\"path\", { d: \"m12 15 4 4\", key: \"lnac28\" }]\n]);\n\nexport { Magnet as default };\n//# sourceMappingURL=magnet.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst MousePointer = createLucideIcon(\"MousePointer\", [\n  [\"path\", { d: \"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z\", key: \"y2ucgo\" }],\n  [\"path\", { d: \"m13 13 6 6\", key: \"1nhxnf\" }]\n]);\n\nexport { MousePointer as default };\n//# sourceMappingURL=mouse-pointer.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Package = createLucideIcon(\"Package\", [\n  [\"path\", { d: \"M16.5 9.4 7.55 4.24\", key: \"10qotr\" }],\n  [\n    \"path\",\n    {\n      d: \"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\",\n      key: \"yt0hxn\"\n    }\n  ],\n  [\"polyline\", { points: \"3.29 7 12 12 20.71 7\", key: \"ousv84\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"22\", y2: \"12\", key: \"a4e8g8\" }]\n]);\n\nexport { Package as default };\n//# sourceMappingURL=package.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Redo2 = createLucideIcon(\"Redo2\", [\n  [\"path\", { d: \"m15 14 5-5-5-5\", key: \"12vg1m\" }],\n  [\n    \"path\",\n    {\n      d: \"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13\",\n      key: \"19mnr4\"\n    }\n  ]\n]);\n\nexport { Redo2 as default };\n//# sourceMappingURL=redo-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\",\n      key: \"1owoqh\"\n    }\n  ],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\n    \"rect\",\n    { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }\n  ]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Type = createLucideIcon(\"Type\", [\n  [\"polyline\", { points: \"4 7 4 4 20 4 20 7\", key: \"1nosan\" }],\n  [\"line\", { x1: \"9\", x2: \"15\", y1: \"20\", y2: \"20\", key: \"swin9y\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"4\", y2: \"20\", key: \"1tx1rr\" }]\n]);\n\nexport { Type as default };\n//# sourceMappingURL=type.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Undo2 = createLucideIcon(\"Undo2\", [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\n    \"path\",\n    {\n      d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11\",\n      key: \"llx8ln\"\n    }\n  ]\n]);\n\nexport { Undo2 as default };\n//# sourceMappingURL=undo-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Unlock = createLucideIcon(\"Unlock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { Unlock as default };\n//# sourceMappingURL=unlock.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Video = createLucideIcon(\"Video\", [\n  [\"path\", { d: \"m22 8-6 4 6 4V8Z\", key: \"50v9me\" }],\n  [\n    \"rect\",\n    {\n      width: \"14\",\n      height: \"12\",\n      x: \"2\",\n      y: \"6\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1rqjg6\"\n    }\n  ]\n]);\n\nexport { Video as default };\n//# sourceMappingURL=video.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomIn as default };\n//# sourceMappingURL=zoom-in.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ZoomOut = createLucideIcon(\"ZoomOut\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomOut as default };\n//# sourceMappingURL=zoom-out.mjs.map\n","/**\n * Logger utility     \n */\n\nexport type LogLevel = 'info' | 'warn' | 'error';\n\nexport interface LogEntry {\n  timestamp: string;\n  level: LogLevel;\n  message: string;\n  details?: any;\n}\n\nclass Logger {\n  private logs: LogEntry[] = [];\n  private readonly MAX_LOGS = 100;\n\n  /**\n   *  \n   */\n  log(level: LogLevel, message: string, details?: any): void {\n    const entry: LogEntry = {\n      timestamp: new Date().toISOString(),\n      level,\n      message,\n      details\n    };\n\n    this.logs.push(entry);\n\n    //   \n    if (this.logs.length > this.MAX_LOGS) {\n      this.logs.shift();\n    }\n\n    //   \n    const consoleMethod = level === 'error' ? console.error : level === 'warn' ? console.warn : console.log;\n    consoleMethod(`[${level.toUpperCase()}] ${message}`, details || '');\n  }\n\n  info(message: string, details?: any): void {\n    this.log('info', message, details);\n  }\n\n  warn(message: string, details?: any): void {\n    this.log('warn', message, details);\n  }\n\n  error(message: string, details?: any): void {\n    this.log('error', message, details);\n  }\n\n  /**\n   *   \n   */\n  getLogs(): LogEntry[] {\n    return [...this.logs];\n  }\n\n  /**\n   *  \n   */\n  clear(): void {\n    this.logs = [];\n  }\n\n  /**\n   *    JSON\n   */\n  export(): string {\n    return JSON.stringify(this.logs, null, 2);\n  }\n}\n\nexport const logger = new Logger();\n","/**\n * API Client - Session Management with Activity Tracking\n *    sessionStorage     \n *    30      2 \n */\n\nimport { logger } from '../utils/logger';\n\n// ==================== TYPES ====================\n\nexport interface AuthResponse {\n  success: boolean;\n  token: string;\n  expiresIn: number;\n  license: {\n    licenseKey: string;\n    organizationId: string;\n    organizationName: string;\n    plan: 'BASIC' | 'PRO' | 'MAX';\n    validFrom?: string;\n    validUntil?: string;\n    maxDevices: number;\n    features: string[];\n  };\n  user?: {\n    id: string;\n    email?: string;\n  };\n}\n\nexport interface ProjectResponse {\n  success: boolean;\n  project: Project;\n}\n\nexport interface ProjectsListResponse {\n  success: boolean;\n  projects: Project[];\n  total: number;\n  page: number;\n  limit: number;\n}\n\nexport interface Project {\n  id: string;\n  name: string;\n  description?: string;\n  projectData: any;\n  canvasWidth: number;\n  canvasHeight: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n  isPublished: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ProjectFilters {\n  search?: string;\n  tags?: string[];\n  isPublished?: boolean;\n  page?: number;\n  limit?: number;\n}\n\nexport interface CreateProjectData {\n  name: string;\n  description?: string;\n  projectData?: any;\n  canvasWidth?: number;\n  canvasHeight?: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n}\n\nexport interface UpdateProjectData {\n  name?: string;\n  description?: string;\n  projectData?: any;\n  canvasWidth?: number;\n  canvasHeight?: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n  isPublished?: boolean;\n}\n\nexport interface ProjectFile {\n  id: string;\n  fileName: string;\n  fileType: string;\n  mimeType: string;\n  fileSize: number;\n  url: string;\n  width?: number;\n  height?: number;\n  duration?: number;\n  createdAt: string;\n}\n\nexport interface StorageStats {\n  used: number;\n  limit: number;\n  remaining: number;\n  usedPercentage: number;\n  totalFiles: number;\n}\n\n// ==================== API CLIENT ====================\n\nclass ApiClient {\n  // ==================== DEBUG CONFIGURATION ====================\n  //  :   true     \n  private readonly DEBUG_MODE = false;\n  private readonly DEBUG_INACTIVITY_MINUTES = 3; //  : 3 \n  \n  // ==================== PRODUCTION CONFIGURATION ====================\n  private baseUrl: string = '';\n\n  getBaseUrl(): string {\n    return this.baseUrl;\n  }\n\n  private token: string | null = null;\n  private organizationName: string | null = null;\n  private plan: string | null = null;\n\n  private lastActivity: number = Date.now();\n  private inactivityTimer: NodeJS.Timeout | null = null;\n  private warningTimer: NodeJS.Timeout | null = null;\n  \n  private readonly INACTIVITY_TIMEOUT = this.DEBUG_MODE ? this.DEBUG_INACTIVITY_MINUTES * 60 * 1000 : 60 * 60 * 1000;\n  private readonly WARNING_TIME = this.DEBUG_MODE ? (this.DEBUG_INACTIVITY_MINUTES - 2) * 60 * 1000 : 58 * 60 * 1000;\n\n  constructor() {\n    this.loadToken();\n    this.startActivityMonitoring();\n  }\n\n  // ==================== TOKEN MANAGEMENT ====================\n\n  /**\n   *    sessionStorage\n   */\n  private loadToken(): void {\n    const stored = sessionStorage.getItem('kiosk_auth_token');\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        const lastActivity = data.lastActivityTime || Date.now();\n        const timeSinceActivity = Date.now() - lastActivity;\n\n        //     30    \n        if (timeSinceActivity < this.INACTIVITY_TIMEOUT) {\n          this.token = data.token;\n          this.organizationName = data.organizationName || null;\n          this.plan = data.plan || null;\n          this.lastActivity = Date.now(); //     \n          \n          this.updateActivityTime(); //   sessionStorage\n          \n          logger.info('Token loaded from sessionStorage', {\n            hasToken: !!this.token,\n            organization: this.organizationName,\n            plan: this.plan,\n            inactiveDuration: Math.round(timeSinceActivity / 1000) + 's'\n          });\n        } else {\n          logger.warn('Session expired due to inactivity', {\n            inactiveDuration: Math.round(timeSinceActivity / 1000 / 60) + ' minutes'\n          });\n          this.clearToken();\n        }\n      } catch (error) {\n        logger.error('Failed to parse stored token', error);\n        this.clearToken();\n      }\n    }\n  }\n\n  /**\n   *    sessionStorage\n   */\n  private saveToken(token: string, organizationName: string, plan: string): void {\n    const data = {\n      token,\n      organizationName,\n      plan,\n      lastActivityTime: Date.now(),\n      savedAt: new Date().toISOString()\n    };\n    \n    sessionStorage.setItem('kiosk_auth_token', JSON.stringify(data));\n    sessionStorage.setItem('kiosk_org_data', JSON.stringify({\n      name: organizationName,\n      plan: plan\n    }));\n    \n    this.token = token;\n    this.organizationName = organizationName;\n    this.plan = plan;\n    this.lastActivity = Date.now();\n    \n    logger.info('Token saved to sessionStorage', {\n      organization: organizationName,\n      plan: plan\n    });\n  }\n\n  /**\n   *      sessionStorage\n   */\n  private updateActivityTime(): void {\n    const stored = sessionStorage.getItem('kiosk_auth_token');\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        data.lastActivityTime = Date.now();\n        sessionStorage.setItem('kiosk_auth_token', JSON.stringify(data));\n      } catch (error) {\n        logger.error('Failed to update activity time', error);\n      }\n    }\n  }\n\n  /**\n   *  \n   */\n  private clearToken(): void {\n    sessionStorage.removeItem('kiosk_auth_token');\n    sessionStorage.removeItem('kiosk_org_data');\n    this.token = null;\n    this.organizationName = null;\n    this.plan = null;\n    \n    logger.info('Token cleared from sessionStorage');\n  }\n\n  /**\n   *  \n   */\n  public isAuthenticated(): boolean {\n    return this.token !== null;\n  }\n\n  /**\n   *   \n   */\n  public getToken(): string | null {\n    return this.token;\n  }\n\n  /**\n   *   \n   */\n  public getOrganizationData(): { name: string | null; plan: string | null } {\n    return {\n      name: this.organizationName,\n      plan: this.plan\n    };\n  }\n\n  // ==================== AUTHENTICATION ====================\n\n  /**\n   * POST /api/auth/license\n   *    \n   */\n  public async loginWithLicense(licenseKey: string): Promise<AuthResponse> {\n    logger.info('Attempting login with license key');\n    \n    try {\n      const response = await this.request<AuthResponse>('/api/auth/license', {\n        method: 'POST',\n        body: JSON.stringify({ licenseKey })\n      });\n\n      if (response.token && response.license) {\n        this.saveToken(\n          response.token,\n          response.license.organizationName,\n          response.license.plan\n        );\n        \n        logger.info('Login successful', {\n          organization: response.license.organizationName,\n          plan: response.license.plan\n        });\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('Login failed', error);\n      throw error;\n    }\n  }\n\n  /**\n   * POST /api/auth/refresh\n   *  \n   */\n  public async refreshToken(): Promise<AuthResponse> {\n    logger.info('Refreshing token');\n    \n    try {\n      const response = await this.request<AuthResponse>('/api/auth/refresh', {\n        method: 'POST',\n        authenticated: true\n      });\n\n      if (response.token && response.license) {\n        this.saveToken(\n          response.token,\n          response.license.organizationName,\n          response.license.plan\n        );\n        \n        logger.info('Token refreshed successfully');\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('Token refresh failed', error);\n      throw error;\n    }\n  }\n\n  /**\n   * GET /api/auth/verify\n   *  \n   */\n  public async verifyToken(): Promise<boolean> {\n    try {\n      await this.request('/api/auth/verify', {\n        method: 'GET',\n        authenticated: true\n      });\n      \n      logger.info('Token verified successfully');\n      return true;\n    } catch (error) {\n      logger.warn('Token verification failed', error);\n      this.clearToken();\n      return false;\n    }\n  }\n\n  /**\n   *   \n   */\n  public logout(): void {\n    logger.info('User logout');\n    this.clearToken();\n    this.stopActivityMonitoring();\n    \n    //   logout\n    window.dispatchEvent(new CustomEvent('auth:logout'));\n  }\n\n  // ==================== ACTIVITY MONITORING ====================\n\n  /**\n   *    \n   */\n  private updateActivity(): void {\n    this.lastActivity = Date.now();\n    this.updateActivityTime();\n    \n    //     \n    this.resetTimers();\n  }\n\n  /**\n   *  \n   */\n  private resetTimers(): void {\n    //   \n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n    }\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n    }\n\n    //   ( 2   )\n    this.warningTimer = setTimeout(() => {\n      logger.warn('Inactivity warning - 2 minutes until logout');\n      \n      //   \n      window.dispatchEvent(new CustomEvent('auth:inactivity-warning', {\n        detail: { timeRemaining: 2 * 60 * 1000 }\n      }));\n    }, this.WARNING_TIME);\n\n    //   ( 30 )\n    this.inactivityTimer = setTimeout(() => {\n      logger.warn('Session expired due to inactivity');\n      this.logout();\n    }, this.INACTIVITY_TIMEOUT);\n  }\n\n  /**\n   *   \n   */\n  private startActivityMonitoring(): void {\n    if (!this.isAuthenticated()) return;\n\n    const events = ['mousemove', 'keypress', 'click', 'scroll', 'touchstart'];\n    \n    events.forEach(event => {\n      window.addEventListener(event, () => this.updateActivity(), { passive: true });\n    });\n\n    //  \n    this.resetTimers();\n\n    logger.info('Activity monitoring started', {\n      timeout: this.INACTIVITY_TIMEOUT / 1000 / 60 + ' minutes',\n      warning: this.WARNING_TIME / 1000 / 60 + ' minutes'\n    });\n  }\n\n  /**\n   *   \n   */\n  private stopActivityMonitoring(): void {\n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n      this.warningTimer = null;\n    }\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n      this.inactivityTimer = null;\n    }\n    \n    logger.info('Activity monitoring stopped');\n  }\n\n  // ==================== PROJECTS ====================\n\n  public async getProjects(filters?: ProjectFilters): Promise<ProjectsListResponse> {\n    const params = new URLSearchParams();\n    \n    if (filters?.search) params.append('search', filters.search);\n    if (filters?.tags) params.append('tags', filters.tags.join(','));\n    if (filters?.isPublished !== undefined) params.append('isPublished', String(filters.isPublished));\n    if (filters?.page) params.append('page', String(filters.page));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n\n    const query = params.toString();\n    const url = `/api/projects${query ? '?' + query : ''}`;\n\n    return this.request<ProjectsListResponse>(url, {\n      method: 'GET',\n      authenticated: true\n    });\n  }\n\n  public async createProject(data: CreateProjectData): Promise<Project> {\n    const response = await this.request<ProjectResponse>('/api/projects', {\n      method: 'POST',\n      authenticated: true,\n      body: JSON.stringify(data)\n    });\n    return response.project;\n  }\n\n  public async getProject(id: string): Promise<Project> {\n    const response = await this.request<ProjectResponse>(`/api/projects/${id}`, {\n      method: 'GET',\n      authenticated: true\n    });\n    return response.project;\n  }\n\n  public async updateProject(id: string, data: UpdateProjectData): Promise<Project> {\n    const response = await this.request<ProjectResponse>(`/api/projects/${id}`, {\n      method: 'PUT',\n      authenticated: true,\n      body: JSON.stringify(data)\n    });\n    return response.project;\n  }\n\n  public async deleteProject(id: string): Promise<void> {\n    await this.request(`/api/projects/${id}`, {\n      method: 'DELETE',\n      authenticated: true\n    });\n  }\n\n  // ==================== FILES ====================\n\n  public async getProjectFiles(projectId: string): Promise<ProjectFile[]> {\n    const response = await this.request<{ files: ProjectFile[] }>(`/api/projects/${projectId}/files`, {\n      method: 'GET',\n      authenticated: true\n    });\n    return response.files;\n  }\n\n  public async uploadFile(projectId: string, file: File, onProgress?: (progress: number) => void): Promise<ProjectFile> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n\n      if (onProgress) {\n        xhr.upload.addEventListener('progress', (e) => {\n          if (e.lengthComputable) {\n            const progress = (e.loaded / e.total) * 100;\n            onProgress(progress);\n          }\n        });\n      }\n\n      xhr.addEventListener('load', () => {\n        if (xhr.status === 200 || xhr.status === 201) {\n          try {\n            const response = JSON.parse(xhr.responseText);\n            resolve(response.file || response);\n          } catch (error) {\n            reject(new Error('Failed to parse response'));\n          }\n        } else {\n          try {\n            const error = JSON.parse(xhr.responseText);\n            reject(new Error(error.message || `Upload failed: ${xhr.status}`));\n          } catch {\n            reject(new Error(`Upload failed: ${xhr.status}`));\n          }\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        reject(new Error('Network error'));\n      });\n\n      xhr.open('POST', `/api/projects/${projectId}/files`);\n      \n      if (this.token) {\n        xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n      }\n\n      xhr.send(formData);\n    });\n  }\n\n  public async downloadFile(projectId: string, fileId: string): Promise<Blob> {\n    const response = await fetch(`/api/projects/${projectId}/files/${fileId}`, {\n      method: 'GET',\n      headers: this.token ? { 'Authorization': `Bearer ${this.token}` } : {}\n    });\n\n    if (!response.ok) {\n      throw new Error(`Download failed: ${response.status}`);\n    }\n\n    return response.blob();\n  }\n\n  public async deleteFile(projectId: string, fileId: string): Promise<void> {\n    await this.request(`/api/projects/${projectId}/files/${fileId}`, {\n      method: 'DELETE',\n      authenticated: true\n    });\n  }\n\n  // ==================== STORAGE ====================\n\n  public async getStorageStats(): Promise<StorageStats> {\n    return this.request<StorageStats>('/api/storage/stats', {\n      method: 'GET',\n      authenticated: true\n    });\n  }\n\n  // ==================== PRIVATE METHODS ====================\n\n  private async request<T = any>(\n    endpoint: string,\n    options: {\n      method: string;\n      body?: string;\n      authenticated?: boolean;\n    }\n  ): Promise<T> {\n    const url = `${this.baseUrl}${endpoint}`;\n    \n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n    };\n\n    if (options.authenticated && this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const response = await fetch(url, {\n        method: options.method,\n        headers,\n        body: options.body,\n      });\n\n      //     \n      if (options.authenticated && response.ok) {\n        this.updateActivity();\n      }\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          logger.warn('Unauthorized - clearing token');\n          this.clearToken();\n          window.dispatchEvent(new CustomEvent('auth:unauthorized'));\n          throw new Error('Unauthorized');\n        }\n\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      logger.error('Request failed', {\n        endpoint,\n        method: options.method,\n        error\n      });\n      throw error;\n    }\n  }\n}\n\nexport const apiClient = new ApiClient();\n","/**\n * Login Page -  \n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Key, AlertCircle, Loader } from 'lucide-react';\nimport { apiClient } from '../services/api-client';\nimport { logger } from '../utils/logger';\nimport './LoginPage.css';\n\nexport const LoginPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [licenseKey, setLicenseKey] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    //   \n    const reason = sessionStorage.getItem('kiosk_logout_reason');\n    \n    if (reason === 'inactivity') {\n      setLogoutMessage('      - ');\n      logger.info('Logout reason: inactivity');\n    } else if (reason === 'session_expired') {\n      setLogoutMessage('  . ,  ');\n      logger.info('Logout reason: session expired');\n    }\n    \n    //    \n    sessionStorage.removeItem('kiosk_logout_reason');\n    \n    //     5 \n    if (reason) {\n      setTimeout(() => setLogoutMessage(null), 5000);\n    }\n  }, []);\n\n  const [logoutMessage, setLogoutMessage] = useState<string | null>(null);\n\n  //    (XXXX-XXXX-XXXX-XXXX)\n  const formatLicenseKey = (value: string): string => {\n    const cleaned = value.replace(/[^A-Z0-9]/gi, '').toUpperCase();\n    const groups = cleaned.match(/.{1,4}/g) || [];\n    return groups.join('-').substring(0, 19);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatLicenseKey(e.target.value);\n    setLicenseKey(formatted);\n    setError(null);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (licenseKey.length < 19) {\n      setError('    (16 )');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log('[LoginPage] Attempting login');\n      const response = await apiClient.loginWithLicense(licenseKey);\n      \n      console.log('[LoginPage] Login successful, redirecting to /editor');\n      \n      //   -   \n      navigate('/editor', { replace: true });\n      \n    } catch (err: any) {\n      console.error('[LoginPage] Login failed:', err);\n      setError(err.message || '   .   .');\n      setIsLoading(false);\n    }\n  };\n\n  const handlePaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const pasted = e.clipboardData.getData('text');\n    const formatted = formatLicenseKey(pasted);\n    setLicenseKey(formatted);\n  };\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-container\">\n        <div className=\"login-header\">\n          <Key size={48} className=\"login-icon\" />\n          <h1>Kiosk Editor</h1>\n          <p>  </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"login-form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"licenseKey\"> </label>\n            <input\n              type=\"text\"\n              id=\"licenseKey\"\n              placeholder=\"XXXX-XXXX-XXXX-XXXX\"\n              value={licenseKey}\n              onChange={handleInputChange}\n              onPaste={handlePaste}\n              disabled={isLoading}\n              autoFocus\n              maxLength={19}\n              className={error ? 'error' : ''}\n            />\n            <span className=\"input-hint\">\n              : 4   4 \n            </span>\n          </div>\n\n          {error && (\n            <div className=\"error-message\">\n              <AlertCircle size={16} />\n              <span>{error}</span>\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            className=\"login-button\"\n            disabled={isLoading || licenseKey.length < 19}\n          >\n            {isLoading ? (\n              <>\n                <Loader size={20} className=\"spinner\" />\n                <span>...</span>\n              </>\n            ) : (\n              <>\n                <Key size={20} />\n                <span></span>\n              </>\n            )}\n          </button>\n        </form>\n\n        <div className=\"test-keys\">\n          <p> :</p>\n          <ul>\n            <li>\n              <strong>BASIC:</strong> <code>EWZA-E5LJ-Z558-9LUQ</code>\n            </li>\n            <li>\n              <strong>PRO:</strong> <code>3VBN-8ZQ9-1MKO-AK0R</code>\n            </li>\n            <li>\n              <strong>MAX:</strong> <code>T8MH-FJE3-ETAC-YOZF</code>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","/**\n * PreviewPage.tsx\n *        UI\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { apiClient, Project as ServerProject } from '../services/api-client';\nimport './PreviewPage.css';\n\n// \ninterface Widget {\n  id: string;\n  type: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  rotation?: number;\n  zIndex?: number;\n  properties: Record<string, any>;\n}\n\ninterface WidgetEvent {\n  trigger: 'click' | 'hover';\n  actions: WidgetAction[];\n}\n\ninterface WidgetAction {\n  type: 'url' | 'page' | 'popup' | 'widget_show' | 'widget_hide' | 'video_play' | 'video_stop';\n  url?: string;\n  openInNewTab?: boolean;\n  pageId?: string;\n  popupTitle?: string;\n  popupContent?: string;\n  popupWidth?: number;\n  popupHeight?: number;\n  targetWidgetId?: string;\n}\n\ninterface LocalProject {\n  id?: string;\n  version: string;\n  name: string;\n  canvas: {\n    width: number;\n    height: number;\n    backgroundColor?: string;\n  };\n  widgets: Widget[];\n}\n\n// ============================================\n// CLIP-PATH  ( )\n// ============================================\n\nfunction getClipPath(shape: string, w: number, h: number, cornerRadius: number = 0, usePx: boolean = false): string | undefined {\n  const cx = w / 2;\n  const cy = h / 2;\n  const r = Math.min(w, h) / 2;\n\n  const fmt = (px: number, py: number): string => {\n    if (usePx) return `${px.toFixed(1)}px ${py.toFixed(1)}px`;\n    return `${((px / w) * 100).toFixed(1)}% ${((py / h) * 100).toFixed(1)}%`;\n  };\n\n  const polygon = (sides: number, startAngle: number = -Math.PI / 2): string => {\n    const points: string[] = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = startAngle + (2 * Math.PI * i) / sides;\n      points.push(fmt(cx + r * Math.cos(angle), cy + r * Math.sin(angle)));\n    }\n    return `polygon(${points.join(', ')})`;\n  };\n\n  switch (shape) {\n    case 'circle':\n      if (usePx) return `circle(${r.toFixed(1)}px at ${cx.toFixed(1)}px ${cy.toFixed(1)}px)`;\n      return `circle(${r}px at ${cx}px ${cy}px)`;\n    case 'ellipse':\n      if (usePx) return `ellipse(${(w/2).toFixed(1)}px ${(h/2).toFixed(1)}px at ${cx.toFixed(1)}px ${cy.toFixed(1)}px)`;\n      return `ellipse(50% 50% at 50% 50%)`;\n    case 'triangle': {\n      const angles = [-Math.PI / 2, Math.PI / 6, 5 * Math.PI / 6];\n      const pts = angles.map(a => fmt(cx + r * Math.cos(a), cy + r * Math.sin(a)));\n      return `polygon(${pts.join(', ')})`;\n    }\n    case 'diamond':\n      return `polygon(${fmt(cx, 0)}, ${fmt(w, cy)}, ${fmt(cx, h)}, ${fmt(0, cy)})`;\n    case 'pentagon':\n      return polygon(5);\n    case 'hexagon':\n      return polygon(6);\n    case 'octagon':\n      return polygon(8);\n    case 'star': {\n      const pts: string[] = [];\n      for (let i = 0; i < 10; i++) {\n        const angle = (i * Math.PI / 5) - Math.PI / 2;\n        const sr = i % 2 === 0 ? r : r * 0.5;\n        pts.push(fmt(cx + sr * Math.cos(angle), cy + sr * Math.sin(angle)));\n      }\n      return `polygon(${pts.join(', ')})`;\n    }\n    case 'rounded-rectangle':\n    case 'rectangle':\n    default:\n      return undefined;\n  }\n}\n\n// ============================================\n// MENU WIDGET \n// ============================================\n\ninterface MenuItemType {\n  id: string;\n  label: string;\n  actions?: any[];\n  children?: MenuItemType[];\n}\n\ninterface MenuWidgetProps {\n  widgetId: string;\n  commonStyle: React.CSSProperties;\n  items: MenuItemType[];\n  isHorizontal: boolean;\n  backgroundColor: string;\n  textColor: string;\n  hoverColor: string;\n  fontSize: number;\n  fontFamily: string;\n  itemPadding: number;\n  itemHeight: number;\n  submenuBackgroundColor: string;\n  submenuTextColor: string;\n  borderWidth: number;\n  borderColor: string;\n  executeActions: (actions: any[]) => void;\n}\n\nconst MenuWidget: React.FC<MenuWidgetProps> = ({\n  widgetId, commonStyle, items, isHorizontal,\n  backgroundColor, textColor, hoverColor,\n  fontSize, fontFamily, itemPadding, itemHeight,\n  submenuBackgroundColor, submenuTextColor,\n  borderWidth, borderColor, executeActions,\n}) => {\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n  const [expandedItem, setExpandedItem] = useState<string | null>(null);\n\n  const containerStyle: React.CSSProperties = {\n    ...commonStyle,\n    backgroundColor,\n    display: 'flex',\n    flexDirection: isHorizontal ? 'row' : 'column',\n    border: borderWidth > 0 ? `${borderWidth}px solid ${borderColor}` : 'none',\n    overflow: 'visible',\n    position: 'absolute',\n  };\n\n  const itemStyle = (itemId: string): React.CSSProperties => ({\n    display: 'flex',\n    alignItems: 'center',\n    padding: `0 ${itemPadding}px`,\n    height: `${itemHeight}px`,\n    minWidth: isHorizontal ? 'auto' : '100%',\n    color: hoveredItem === itemId ? submenuTextColor : textColor,\n    backgroundColor: hoveredItem === itemId ? hoverColor : 'transparent',\n    fontSize: `${fontSize}px`,\n    fontFamily,\n    cursor: 'pointer',\n    userSelect: 'none' as const,\n    whiteSpace: 'nowrap' as const,\n    transition: 'background-color 0.15s',\n    position: 'relative' as const,\n    boxSizing: 'border-box' as const,\n  });\n\n  const submenuStyle = (parentId: string): React.CSSProperties => ({\n    display: expandedItem === parentId ? 'flex' : 'none',\n    flexDirection: 'column',\n    position: 'absolute',\n    top: isHorizontal ? `${itemHeight}px` : '0',\n    left: isHorizontal ? '0' : '100%',\n    backgroundColor: submenuBackgroundColor,\n    zIndex: 9999,\n    minWidth: '150px',\n    boxShadow: '2px 4px 12px rgba(0,0,0,0.4)',\n  });\n\n  return (\n    <div data-widget-id={widgetId} style={containerStyle}>\n      {items.map((item) => {\n        const hasChildren = item.children && item.children.length > 0;\n        return (\n          <div\n            key={item.id}\n            style={{ position: 'relative' }}\n            onMouseEnter={() => {\n              setHoveredItem(item.id);\n              if (hasChildren) setExpandedItem(item.id);\n            }}\n            onMouseLeave={() => {\n              setHoveredItem(null);\n              if (hasChildren) setExpandedItem(null);\n            }}\n          >\n            <div\n              style={itemStyle(item.id)}\n              onClick={() => {\n                if (item.actions && item.actions.length > 0) {\n                  executeActions(item.actions);\n                }\n              }}\n            >\n              {item.label}\n              {hasChildren && (\n                <span style={{ marginLeft: '6px', fontSize: '10px', opacity: 0.7 }}>\n                  {isHorizontal ? '' : ''}\n                </span>\n              )}\n            </div>\n            {hasChildren && (\n              <div style={submenuStyle(item.id)}>\n                {item.children!.map((child) => (\n                  <div\n                    key={child.id}\n                    style={{\n                      padding: `0 ${itemPadding}px`,\n                      height: `${itemHeight}px`,\n                      display: 'flex',\n                      alignItems: 'center',\n                      color: hoveredItem === child.id ? textColor : submenuTextColor,\n                      backgroundColor: hoveredItem === child.id ? hoverColor : 'transparent',\n                      fontSize: `${fontSize - 2}px`,\n                      fontFamily,\n                      cursor: 'pointer',\n                      userSelect: 'none',\n                      whiteSpace: 'nowrap',\n                      transition: 'background-color 0.15s',\n                    }}\n                    onMouseEnter={() => setHoveredItem(child.id)}\n                    onMouseLeave={() => setHoveredItem(null)}\n                    onClick={() => {\n                      if (child.actions && child.actions.length > 0) {\n                        executeActions(child.actions);\n                      }\n                    }}\n                  >\n                    {child.label}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\n// ============================================\n//  \n// ============================================\n\nconst PreviewPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const projectId = searchParams.get('projectId');\n\n  const [project, setProject] = useState<LocalProject | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [popupVisible, setPopupVisible] = useState(false);\n  const [popupData, setPopupData] = useState<any>(null);\n  const [hiddenWidgets, setHiddenWidgets] = useState<Set<string>>(new Set());\n\n  //  \n  useEffect(() => {\n    if (!projectId) {\n      setError('Project ID not provided');\n      setLoading(false);\n      return;\n    }\n\n    const loadProject = async () => {\n      try {\n        const serverProject = await apiClient.getProject(projectId);\n        const localProject: LocalProject = {\n          id: serverProject.id,\n          version: '1.0',\n          name: serverProject.name,\n          canvas: {\n            width: serverProject.canvasWidth,\n            height: serverProject.canvasHeight,\n            backgroundColor: serverProject.canvasBackground,\n          },\n          widgets: serverProject.projectData?.widgets || [],\n        };\n        setProject(localProject);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load project');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProject();\n  }, [projectId]);\n\n  //   ESC\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        if (popupVisible) {\n          setPopupVisible(false);\n        } else {\n          window.close();\n        }\n      }\n    };\n    document.documentElement.requestFullscreen?.().catch(() => {});\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [popupVisible]);\n\n  //   \n  const executeActions = (actions: WidgetAction[]) => {\n    actions.forEach((action) => {\n      switch (action.type) {\n        case 'url':\n          if (action.url) {\n            if (action.openInNewTab) {\n              window.open(action.url, '_blank');\n            } else {\n              window.location.href = action.url;\n            }\n          }\n          break;\n        case 'popup':\n          setPopupData({\n            title: action.popupTitle || '',\n            content: action.popupContent || '',\n            width: action.popupWidth || 400,\n            height: action.popupHeight || 300,\n          });\n          setPopupVisible(true);\n          break;\n        case 'widget_show':\n          if (action.targetWidgetId) {\n            setHiddenWidgets((prev) => {\n              const newSet = new Set(prev);\n              newSet.delete(action.targetWidgetId!);\n              return newSet;\n            });\n          }\n          break;\n        case 'widget_hide':\n          if (action.targetWidgetId) {\n            setHiddenWidgets((prev) => new Set(prev).add(action.targetWidgetId!));\n          }\n          break;\n        case 'video_play':\n          if (action.targetWidgetId) {\n            const el = document.querySelector(`[data-widget-id=\"${action.targetWidgetId}\"] video`) as HTMLVideoElement;\n            if (el) el.play();\n          }\n          break;\n        case 'video_stop':\n          if (action.targetWidgetId) {\n            const el = document.querySelector(`[data-widget-id=\"${action.targetWidgetId}\"] video`) as HTMLVideoElement;\n            if (el) { el.pause(); el.currentTime = 0; }\n          }\n          break;\n      }\n    });\n  };\n\n  //  \n  const renderWidget = (widget: Widget) => {\n    if (hiddenWidgets.has(widget.id)) return null;\n\n    const events = (widget as any).events as WidgetEvent[] | undefined;\n    const handleClick = () => {\n      if (events) {\n        events.filter((e) => e.trigger === 'click').forEach((event) => executeActions(event.actions));\n      }\n    };\n\n    const commonStyle: React.CSSProperties = {\n      position: 'absolute',\n      left: widget.x,\n      top: widget.y,\n      width: widget.width,\n      height: widget.height,\n      transform: widget.rotation ? `rotate(${widget.rotation}deg)` : undefined,\n      transformOrigin: 'top left',\n      cursor: events && events.some((e) => e.trigger === 'click') ? 'pointer' : 'default',\n      zIndex: widget.zIndex || 0,\n    };\n\n    // Shape\n    if (widget.type === 'shape') {\n      const {\n        shapeType = 'rectangle', fillColor = '#4a90e2',\n        strokeColor = '#000000', strokeWidth = 0,\n        cornerRadius = 0, opacity = 1,\n      } = widget.properties;\n\n      const shapeClip = getClipPath(shapeType, widget.width, widget.height, cornerRadius);\n      const needsClip = shapeClip !== undefined;\n      const br = shapeType === 'circle' ? '50%' : (shapeType === 'rounded-rectangle' || shapeType === 'rectangle' ? `${cornerRadius}px` : undefined);\n\n      if (needsClip && strokeWidth > 0) {\n        const scaleX = (widget.width - strokeWidth * 4) / widget.width;\n        const scaleY = (widget.height - strokeWidth * 4) / widget.height;\n        return (\n          <div key={widget.id} data-widget-id={widget.id} style={{\n            ...commonStyle,\n            opacity,\n          }} onClick={handleClick}>\n            {/*        */}\n            <div style={{\n              position: 'absolute', top: 0, left: 0,\n              width: '100%', height: '100%',\n              backgroundColor: strokeColor,\n              clipPath: shapeClip,\n              WebkitClipPath: shapeClip,\n            } as React.CSSProperties} />\n            {/*      ,   scale */}\n            <div style={{\n              position: 'absolute', top: 0, left: 0,\n              width: '100%', height: '100%',\n              backgroundColor: fillColor,\n              clipPath: shapeClip,\n              WebkitClipPath: shapeClip,\n              transform: `scale(${scaleX}, ${scaleY})`,\n            } as React.CSSProperties} />\n          </div>\n        );\n      }\n\n      if (needsClip) {\n        return (\n          <div key={widget.id} data-widget-id={widget.id} style={{\n            ...commonStyle,\n            backgroundColor: fillColor,\n            clipPath: shapeClip,\n            WebkitClipPath: shapeClip,\n            opacity,\n          } as React.CSSProperties} onClick={handleClick} />\n        );\n      }\n\n      return (\n        <div key={widget.id} data-widget-id={widget.id} style={{\n          ...commonStyle,\n          backgroundColor: fillColor,\n          border: strokeWidth > 0 ? `${strokeWidth}px solid ${strokeColor}` : 'none',\n          borderRadius: br,\n          opacity,\n        } as React.CSSProperties} onClick={handleClick} />\n      );\n    }\n\n    // Text\n    if (widget.type === 'text') {\n      const {\n        text = 'Text', fontSize = 24, color = '#000000',\n        fontFamily = 'Arial', fontWeight = 'normal',\n        textAlign = 'left', verticalAlign = 'top',\n        backgroundColor = 'transparent',\n      } = widget.properties;\n\n      return (\n        <div key={widget.id} data-widget-id={widget.id} style={{\n          ...commonStyle,\n          fontSize: `${fontSize}px`, color, fontFamily, fontWeight,\n          backgroundColor,\n          textAlign: textAlign as any,\n          display: 'flex',\n          alignItems: verticalAlign === 'middle' ? 'center' : verticalAlign === 'bottom' ? 'flex-end' : 'flex-start',\n          whiteSpace: 'pre-wrap', wordWrap: 'break-word',\n        }} onClick={handleClick}>\n          {text}\n        </div>\n      );\n    }\n\n    // Image ( clipShape)\n    if (widget.type === 'image') {\n      const {\n        src = '', objectFit = 'contain', opacity = 1,\n        clipShape = 'rectangle', cornerRadius = 0,\n        borderEnabled = false, borderWidth = 2, borderColor = '#000000',\n      } = widget.properties;\n      if (!src) return null;\n\n      const hasClip = clipShape && clipShape !== 'rectangle';\n      const clipPath = hasClip ? getClipPath(clipShape, widget.width, widget.height, cornerRadius) : undefined;\n      const effectiveObjectFit = hasClip ? 'cover' : objectFit;\n      const br = (clipShape === 'rounded-rectangle' && cornerRadius) ? `${cornerRadius}px` : undefined;\n\n      //    clip-path ( )\n      if (hasClip && borderEnabled && borderWidth > 0) {\n        const scaleX = (widget.width - borderWidth * 4) / widget.width;\n        const scaleY = (widget.height - borderWidth * 4) / widget.height;\n        return (\n          <div key={widget.id} data-widget-id={widget.id} style={{\n            ...commonStyle,\n            opacity,\n          }} onClick={handleClick}>\n            {/*   */}\n            <div style={{\n              position: 'absolute', top: 0, left: 0,\n              width: '100%', height: '100%',\n              backgroundColor: borderColor,\n              clipPath: clipPath,\n              WebkitClipPath: clipPath,\n            } as React.CSSProperties} />\n            {/*      scale */}\n            <div style={{\n              position: 'absolute', top: 0, left: 0,\n              width: '100%', height: '100%',\n              overflow: 'hidden',\n              clipPath: clipPath,\n              WebkitClipPath: clipPath,\n              transform: `scale(${scaleX}, ${scaleY})`,\n            } as React.CSSProperties}>\n              <img src={src} alt=\"\" style={{\n                width: '100%', height: '100%',\n                objectFit: effectiveObjectFit as any,\n              }} />\n            </div>\n          </div>\n        );\n      }\n\n      //   (     )\n      return (\n        <div key={widget.id} data-widget-id={widget.id} style={{\n          ...commonStyle,\n          opacity,\n          borderRadius: br,\n          overflow: 'hidden',\n          clipPath: clipPath,\n          WebkitClipPath: clipPath,\n          border: (borderEnabled && borderWidth > 0 && !hasClip) ? `${borderWidth}px solid ${borderColor}` : undefined,\n        } as React.CSSProperties} onClick={handleClick}>\n          <img src={src} alt=\"\" style={{\n            width: '100%', height: '100%',\n            objectFit: effectiveObjectFit as any,\n          }} />\n        </div>\n      );\n    }\n\n    // Video\n    if (widget.type === 'video') {\n      const { src = '', autoplay = false, loop = false, muted = true, objectFit = 'contain' } = widget.properties;\n      if (!src) return null;\n\n      return (\n        <div key={widget.id} data-widget-id={widget.id} style={commonStyle} onClick={handleClick}>\n          <video src={src} autoPlay={autoplay} loop={loop} muted={muted} style={{\n            width: '100%', height: '100%', objectFit: objectFit as any,\n          }} />\n        </div>\n      );\n    }\n\n    // Button\n    if (widget.type === 'button') {\n      const {\n        text = 'Button', backgroundColor = '#4a90e2', textColor = '#ffffff',\n        fontSize = 16, fontFamily = 'Arial', fontWeight = 'normal',\n        textAlign = 'center', borderRadius = 4,\n        borderWidth = 0, borderColor = '#000000', borderStyle = 'solid',\n        paddingX = 16, paddingY = 8,\n        shadowEnabled = false, shadowColor = '#000000',\n        shadowBlur = 10, shadowOffsetX = 0, shadowOffsetY = 4, shadowOpacity = 0.3,\n      } = widget.properties;\n\n      return (\n        <div key={widget.id} data-widget-id={widget.id} style={{\n          ...commonStyle,\n          backgroundColor, color: textColor,\n          fontSize: `${fontSize}px`, fontFamily, fontWeight,\n          borderRadius: `${borderRadius}px`,\n          border: borderWidth > 0 ? `${borderWidth}px ${borderStyle} ${borderColor}` : 'none',\n          display: 'flex', alignItems: 'center', justifyContent: 'center',\n          cursor: 'pointer', userSelect: 'none',\n          boxShadow: shadowEnabled ? `${shadowOffsetX}px ${shadowOffsetY}px ${shadowBlur}px ${shadowColor}${Math.round(shadowOpacity * 255).toString(16).padStart(2, '0')}` : undefined,\n        }} onClick={handleClick}>\n          {text}\n        </div>\n      );\n    }\n\n    // Menu\n    if (widget.type === 'menu') {\n      const {\n        items = [], orientation = 'horizontal',\n        backgroundColor = '#2c3e50', textColor = '#ffffff',\n        hoverColor = '#34495e', fontSize = 16, fontFamily = 'Arial',\n        itemPadding = 16, itemHeight = 40,\n        submenuBackgroundColor = '#34495e', submenuTextColor = '#ffffff',\n        borderWidth = 0, borderColor = '#000000',\n      } = widget.properties;\n\n      return (\n        <MenuWidget\n          key={widget.id} widgetId={widget.id} commonStyle={commonStyle}\n          items={items} isHorizontal={orientation === 'horizontal'}\n          backgroundColor={backgroundColor} textColor={textColor}\n          hoverColor={hoverColor} fontSize={fontSize} fontFamily={fontFamily}\n          itemPadding={itemPadding} itemHeight={itemHeight}\n          submenuBackgroundColor={submenuBackgroundColor}\n          submenuTextColor={submenuTextColor}\n          borderWidth={borderWidth} borderColor={borderColor}\n          executeActions={executeActions}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  // Loading\n  if (loading) {\n    return (\n      <div className=\"preview-page preview-loading\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  // Error\n  if (error || !project) {\n    return (\n      <div className=\"preview-page preview-error\">\n        <p>{error || '  '}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"preview-page\">\n      {/* Canvas   , 1:1 */}\n      <div\n        className=\"preview-canvas\"\n        style={{\n          width: project.canvas.width,\n          height: project.canvas.height,\n          backgroundColor: project.canvas.backgroundColor || '#ffffff',\n          position: 'relative',\n        }}\n      >\n        {project.widgets\n          .slice()\n          .sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0))\n          .map((widget) => renderWidget(widget))}\n      </div>\n\n      {/* Popup */}\n      {popupVisible && popupData && (\n        <div className=\"preview-popup-overlay\" onClick={() => setPopupVisible(false)}>\n          <div\n            className=\"preview-popup\"\n            style={{ width: popupData.width, maxHeight: popupData.height }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"preview-popup-header\">\n              <h3>{popupData.title}</h3>\n              <button onClick={() => setPopupVisible(false)}></button>\n            </div>\n            <div className=\"preview-popup-content\">{popupData.content}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PreviewPage;\n","/**\n * InactivityWarning Component\n *    2     \n */\n\nimport React, { useState, useEffect } from 'react';\nimport './InactivityWarning.css';\n\nexport const InactivityWarning: React.FC = () => {\n  const [visible, setVisible] = useState(false);\n  const [countdown, setCountdown] = useState(120); // 2 \n\n  useEffect(() => {\n    const handleWarning = () => {\n      setVisible(true);\n      setCountdown(120);\n    };\n\n    const handleLogout = () => {\n      setVisible(false);\n    };\n\n    //    \n    const handleActivity = () => {\n      if (visible) {\n        setVisible(false);\n      }\n    };\n\n    window.addEventListener('auth:inactivity-warning', handleWarning);\n    window.addEventListener('auth:logout', handleLogout);\n    \n    //  \n    const events = ['mousemove', 'keypress', 'click', 'scroll', 'touchstart'];\n    events.forEach(event => {\n      window.addEventListener(event, handleActivity);\n    });\n\n    return () => {\n      window.removeEventListener('auth:inactivity-warning', handleWarning);\n      window.removeEventListener('auth:logout', handleLogout);\n      events.forEach(event => {\n        window.removeEventListener(event, handleActivity);\n      });\n    };\n  }, [visible]);\n\n  //  \n  useEffect(() => {\n    if (!visible) return;\n\n    const interval = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          setVisible(false);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [visible]);\n\n  if (!visible) return null;\n\n  const minutes = Math.floor(countdown / 60);\n  const seconds = countdown % 60;\n\n  return (\n    <div className=\"inactivity-warning-overlay\">\n      <div className=\"inactivity-warning\">\n        <div className=\"warning-icon\"></div>\n        <h3>  </h3>\n        <p>\n                {' '}\n          <strong>{minutes}:{seconds.toString().padStart(2, '0')}</strong>\n        </p>\n        <p className=\"hint\">\n               ,   \n        </p>\n        <button\n          className=\"continue-btn\"\n          onClick={() => setVisible(false)}\n        >\n           \n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default InactivityWarning;\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","/**\n * Editor Store - Zustand State Management\n *  2.0:   License Server API\n * \n * :\n * -     ( localStorage)\n * -   3  (debounced)\n * - JWT \n * -     API\n */\n\nimport { create } from 'zustand';\nimport { apiClient, Project, CreateProjectData, UpdateProjectData } from '../services/api-client';\n\n// ==================== TYPES ====================\n\ninterface Widget {\n  id: string;\n  type: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  rotation?: number;\n  locked?: boolean;\n  zIndex?: number;\n  properties: Record<string, any>;\n}\n\ninterface CanvasConfig {\n  width: number;\n  height: number;\n  backgroundColor?: string;\n}\n\ninterface LocalProject {\n  id?: string; // ID   (   )\n  version: string;\n  name: string;\n  canvas: CanvasConfig;\n  widgets: Widget[];\n  metadata?: {\n    createdAt: string;\n    updatedAt: string;\n    author?: string;\n  };\n}\ninterface EditorState {\n  // \n  project: LocalProject | null;\n  projectId: string | null; // Server project ID\n  isLoading: boolean;\n  isSaving: boolean;\n  lastSaved: Date | null;\n  saveError: string | null;\n\n  // \n  selectedWidgetIds: string[];\n  \n  //  \n  clipboard: Widget[];\n  \n  //  (Undo/Redo)\n  history: {\n    past: LocalProject[];\n    future: LocalProject[];\n  };\n  \n  //  \n  zoom: number;\n  gridEnabled: boolean;\n  snapToGrid: boolean;\n  gridSize: number;\n  gridLineWidth: number;\n  gridColor: string;\n  \n  // Pending widget ( )\n  pendingWidget: { type: string; defaultProps: any } | null;\n\n  // ========== PROJECT ACTIONS ==========\n  restoreProject: () => Promise<boolean>;\n  createProject: (name: string, canvas: CanvasConfig) => Promise<void>;\n  loadProject: (id: string) => Promise<void>;\n  saveProject: () => Promise<void>;\n  deleteProject: (id: string) => Promise<void>;\n  savePreviewSnapshot: () => Promise<string>;\n  updateProjectMetadata: (updates: Partial<LocalProject>) => void;\n\n  // ========== WIDGET ACTIONS ==========\n  addWidget: (widget: Widget) => void;\n  setPendingWidget: (type: string, defaultProps: any) => void;\n  clearPendingWidget: () => void;\n  addWidgetAtPosition: (x: number, y: number) => void;\n  updateWidget: (id: string, updates: Partial<Widget>) => void;\n  deleteWidget: (id: string) => void;\n  duplicateWidget: (id: string) => void;\n\n  // ========== SELECTION ==========\n  selectWidget: (id: string, addToSelection?: boolean) => void;\n  clearSelection: () => void;\n\n  // ========== HISTORY ==========\n  saveToHistory: () => void;\n  undo: () => void;\n  redo: () => void;\n\n  // ========== CLIPBOARD ==========\n  copy: () => void;\n  paste: () => void;\n  cut: () => void;\n\n  // ========== CANVAS SETTINGS ==========\n  setZoom: (zoom: number) => void;\n  toggleGrid: () => void;\n  toggleSnapToGrid: () => void;\n  setGridSize: (size: number) => void;\n}\n\n// ==================== AUTO-SAVE ====================\n\nlet autoSaveTimer: NodeJS.Timeout | null = null;\nlet saveQueue: (() => Promise<void>) | null = null;\n\n/**\n *   (debounced)\n */\nfunction startAutoSave(saveFunction: () => Promise<void>, interval: number = 180000) {\n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer);\n  }\n\n  autoSaveTimer = setTimeout(async () => {\n    try {\n      console.log('[Editor] Auto-saving project...');\n      await saveFunction();\n      console.log('[Editor] Auto-save completed');\n    } catch (error) {\n      console.error('[Editor] Auto-save failed:', error);\n    }\n  }, interval); // 3   \n}\n\n/**\n *  \n */\nfunction stopAutoSave() {\n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer);\n    autoSaveTimer = null;\n  }\n}\n\n// ==================== STORE ====================\n\n\n// ==================== PROJECT ID PERSISTENCE ====================\n\n/**\n *  ID    sessionStorage\n */\nfunction saveCurrentProjectId(projectId: string | null) {\n  if (projectId) {\n    sessionStorage.setItem('kiosk_current_project_id', projectId);\n    console.log('[Editor] Current project ID saved:', projectId);\n  } else {\n    sessionStorage.removeItem('kiosk_current_project_id');\n    console.log('[Editor] Current project ID cleared');\n  }\n}\n\n/**\n *  ID    sessionStorage\n */\nfunction getCurrentProjectId(): string | null {\n  const projectId = sessionStorage.getItem('kiosk_current_project_id');\n  if (projectId) {\n    console.log('[Editor] Restoring project ID:', projectId);\n  }\n  return projectId;\n}\n\nexport const useEditorStore = create<EditorState>((set, get) => ({\n  // Initial state\n  project: {\n    version: '1.0.0',\n    name: ' ',\n    canvas: {\n      width: 1920,\n      height: 1080,\n      backgroundColor: '#1a1a1a'\n    },\n    widgets: [],\n    metadata: {\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    }\n  },\n  projectId: null,\n  isLoading: false,\n  isSaving: false,\n  lastSaved: null,\n  saveError: null,\n  selectedWidgetIds: [],\n  clipboard: [],\n  history: {\n    past: [],\n    future: []\n  },\n  zoom: 1,\n  gridEnabled: true,\n  snapToGrid: true,\n  gridSize: 20,\n  gridLineWidth: 1,\n  gridColor: '#e0e0e0',\n  pendingWidget: null,\n\n  // ========== PROJECT ACTIONS ==========\n\n  /**\n   *   \n   */\n  /**\n   *    \n   */\n  restoreProject: async () => {\n    const projectId = getCurrentProjectId();\n    if (projectId) {\n      try {\n        console.log('[Editor] Restoring last opened project:', projectId);\n        await get().loadProject(projectId);\n        return true;\n      } catch (error) {\n        console.error('[Editor] Failed to restore project:', error);\n        saveCurrentProjectId(null);\n        return false;\n      }\n    }\n    return false;\n  },\n\n    createProject: async (name: string, canvas: CanvasConfig) => {\n    set({ isLoading: true, saveError: null });\n\n    try {\n      //   \n      const localProject: LocalProject = {\n        version: '1.0',\n        name,\n        canvas,\n        widgets: [],\n        metadata: {\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        }\n      };\n\n      //   \n      const serverProject = await apiClient.createProject({\n        name,\n        canvasWidth: canvas.width,\n        canvasHeight: canvas.height,\n        canvasBackground: canvas.backgroundColor || '#1a1a1a',\n        projectData: localProject\n      });\n\n      //  state\n      set({\n        project: {\n          ...localProject,\n          id: serverProject.id\n        },\n        projectId: serverProject.id,\n        isLoading: false,\n        lastSaved: new Date(),\n        history: { past: [], future: [] }\n      });\n\n      console.log('[Editor] Project created:', serverProject.id);\n      \n      //  ID  \n      saveCurrentProjectId(serverProject.id);\n\n      //  \n      startAutoSave(get().saveProject);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to create project:', error);\n      set({ \n        isLoading: false, \n        saveError: error.message || 'Failed to create project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *    \n   */\n  loadProject: async (id: string) => {\n    set({ isLoading: true, saveError: null });\n\n    try {\n      const serverProject = await apiClient.getProject(id);\n\n      const localProject: LocalProject = {\n        id: serverProject.id,\n        version: '1.0',\n        name: serverProject.name,\n        canvas: {\n          width: serverProject.canvasWidth,\n          height: serverProject.canvasHeight,\n          backgroundColor: serverProject.canvasBackground\n        },\n        widgets: serverProject.projectData?.widgets || [],\n        metadata: {\n          createdAt: serverProject.createdAt,\n          updatedAt: serverProject.updatedAt\n        }\n      };\n\n      set({\n        project: localProject,\n        projectId: serverProject.id,\n        isLoading: false,\n        lastSaved: new Date(serverProject.updatedAt),\n        history: { past: [], future: [] }\n      });\n\n      console.log('[Editor] Project loaded:', id);\n      \n      //  ID  \n      saveCurrentProjectId(id);\n\n      //  \n      startAutoSave(get().saveProject);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to load project:', error);\n      set({ \n        isLoading: false, \n        saveError: error.message || 'Failed to load project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *    \n   */\n  saveProject: async () => {\n    const { project, projectId, isSaving } = get();\n\n    if (!project || !projectId) {\n      console.warn('[Editor] No project to save');\n      return;\n    }\n\n    if (isSaving) {\n      console.warn('[Editor] Save already in progress');\n      return;\n    }\n\n    set({ isSaving: true, saveError: null });\n\n    try {\n      await apiClient.updateProject(projectId, {\n        name: project.name,\n        projectData: project,\n        canvasWidth: project.canvas.width,\n        canvasHeight: project.canvas.height,\n        canvasBackground: project.canvas.backgroundColor\n      });\n\n      set({ \n        isSaving: false, \n        lastSaved: new Date(),\n        saveError: null\n      });\n\n      console.log('[Editor] Project saved:', projectId);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to save project:', error);\n      set({ \n        isSaving: false, \n        saveError: error.message || 'Failed to save project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *  \n   */\n  deleteProject: async (id: string) => {\n    try {\n      await apiClient.deleteProject(id);\n      \n      //     -  state\n      if (get().projectId === id) {\n        set({\n          project: {\n    version: '1.0.0',\n    name: ' ',\n    canvas: {\n      width: 1920,\n      height: 1080,\n      backgroundColor: '#1a1a1a'\n    },\n    widgets: [],\n    metadata: {\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    }\n  },\n          projectId: null,\n          selectedWidgetIds: [],\n          history: { past: [], future: [] }\n        });\n        stopAutoSave();\n      }\n\n      console.log('[Editor] Project deleted:', id);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to delete project:', error);\n      throw error;\n    }\n  },\n\n  /**\n   *  snapshot   preview\n   */\n  savePreviewSnapshot: async () => {\n    const { project } = get();\n\n    if (!project) {\n      throw new Error('No project to preview');\n    }\n\n    console.log('[Editor] Creating preview snapshot...');\n\n    try {\n      const snapshotName = `_preview_${project.name}_${Date.now()}`;\n\n      const snapshotProject = await apiClient.createProject({\n        name: snapshotName,\n        canvasWidth: project.canvas.width,\n        canvasHeight: project.canvas.height,\n        canvasBackground: project.canvas.backgroundColor || '#1a1a1a',\n        projectData: project,\n      });\n\n      console.log('[Editor] Preview snapshot created:', snapshotProject.id);\n      return snapshotProject.id;\n    } catch (error: any) {\n      console.error('[Editor] Failed to create preview snapshot:', error);\n      throw error;\n    }\n  },\n\n\n  /**\n   *   \n   */\n  updateProjectMetadata: (updates) => {\n    const { project } = get();\n    if (!project) return;\n\n    set({\n      project: {\n        ...project,\n        ...updates,\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  // ========== WIDGET ACTIONS ==========\n\n  addWidget: (widget) => {\n    const { project } = get();\n    if (!project) return;\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: [...project.widgets, widget],\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  setPendingWidget: (type, defaultProps) => {\n    set({ pendingWidget: { type, defaultProps } });\n  },\n\n  clearPendingWidget: () => {\n    set({ pendingWidget: null });\n  },\n\n  addWidgetAtPosition: (x, y) => {\n    const { pendingWidget, project, snapToGrid, gridSize } = get();\n    if (!pendingWidget || !project) return;\n\n    //    \n    let finalX = x;\n    let finalY = y;\n\n    if (snapToGrid) {\n      finalX = Math.round(x / gridSize) * gridSize;\n      finalY = Math.round(y / gridSize) * gridSize;\n    }\n\n    //   \n    const defaultSizes: Record<string, { width: number; height: number }> = {\n      shape: { width: 200, height: 200 },\n      button: { width: 200, height: 60 },\n      text: { width: 300, height: 100 },\n      image: { width: 300, height: 200 },\n      video: { width: 640, height: 360 },\n      menu: { width: 600, height: 40 }\n    };\n\n    const defaultSize = defaultSizes[pendingWidget.type] || { width: 200, height: 100 };\n    const width = pendingWidget.defaultProps.width || defaultSize.width;\n    const height = pendingWidget.defaultProps.height || defaultSize.height;\n\n    finalX = finalX - width / 2;\n    finalY = finalY - height / 2;\n\n    const { width: _, height: __, ...cleanProps } = pendingWidget.defaultProps;\n\n    const widget = {\n      id: `widget-${Date.now()}-${Math.random()}`,\n      type: pendingWidget.type,\n      x: Math.max(0, finalX),\n      y: Math.max(0, finalY),\n      width,\n      height,\n      zIndex: 0,\n      properties: cleanProps\n    };\n\n    get().addWidget(widget);\n    get().clearPendingWidget();\n  },\n\n  updateWidget: (id, updates) => {\n    const { project } = get();\n    if (!project) return;\n\n    set({\n      project: {\n        ...project,\n        widgets: project.widgets.map(w =>\n          w.id === id ? { ...w, ...updates } : w\n        ),\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  deleteWidget: (id) => {\n    const { project } = get();\n    if (!project) return;\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: project.widgets.filter(w => w.id !== id),\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      },\n      selectedWidgetIds: get().selectedWidgetIds.filter(wId => wId !== id)\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  duplicateWidget: (id) => {\n    const { project } = get();\n    if (!project) return;\n\n    const widget = project.widgets.find(w => w.id === id);\n    if (!widget) return;\n\n    const newWidget = {\n      ...widget,\n      id: `widget-${Date.now()}`,\n      x: widget.x + 20,\n      y: widget.y + 20\n    };\n\n    get().addWidget(newWidget);\n  },\n\n  // ========== SELECTION ==========\n\n  selectWidget: (id, addToSelection = false) => {\n    const { selectedWidgetIds } = get();\n\n    if (addToSelection) {\n      if (selectedWidgetIds.includes(id)) {\n        set({ selectedWidgetIds: selectedWidgetIds.filter(wId => wId !== id) });\n      } else {\n        set({ selectedWidgetIds: [...selectedWidgetIds, id] });\n      }\n    } else {\n      set({ selectedWidgetIds: [id] });\n    }\n  },\n\n  clearSelection: () => {\n    set({ selectedWidgetIds: [] });\n  },\n\n  // ========== HISTORY ==========\n\n  saveToHistory: () => {\n    const { project, history } = get();\n    if (!project) return;\n\n    set({\n      history: {\n        past: [...history.past, project],\n        future: []\n      }\n    });\n  },\n\n  undo: () => {\n    const { history, project } = get();\n    if (history.past.length === 0 || !project) return;\n\n    const previous = history.past[history.past.length - 1];\n    const newPast = history.past.slice(0, -1);\n\n    set({\n      project: previous,\n      history: {\n        past: newPast,\n        future: [project, ...history.future]\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  redo: () => {\n    const { history, project } = get();\n    if (history.future.length === 0 || !project) return;\n\n    const next = history.future[0];\n    const newFuture = history.future.slice(1);\n\n    set({\n      project: next,\n      history: {\n        past: [...history.past, project],\n        future: newFuture\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  // ========== CLIPBOARD ==========\n\n  copy: () => {\n    const { project, selectedWidgetIds } = get();\n    if (!project) return;\n\n    const selectedWidgets = project.widgets.filter(w =>\n      selectedWidgetIds.includes(w.id)\n    );\n\n    set({ clipboard: selectedWidgets });\n  },\n\n  paste: () => {\n    const { clipboard, project } = get();\n    if (!project || clipboard.length === 0) return;\n\n    const newWidgets = clipboard.map(w => ({\n      ...w,\n      id: `widget-${Date.now()}-${Math.random()}`,\n      x: w.x + 20,\n      y: w.y + 20\n    }));\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: [...project.widgets, ...newWidgets]\n      },\n      selectedWidgetIds: newWidgets.map(w => w.id)\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  cut: () => {\n    const { selectedWidgetIds } = get();\n    get().copy();\n    selectedWidgetIds.forEach(id => get().deleteWidget(id));\n  },\n\n  // ========== CANVAS SETTINGS ==========\n\n  setZoom: (zoom) => {\n    set({ zoom: Math.max(0.1, Math.min(5, zoom)) });\n  },\n\n  toggleGrid: () => {\n    set((state) => ({ gridEnabled: !state.gridEnabled }));\n  },\n\n  toggleSnapToGrid: () => {\n    set((state) => ({ snapToGrid: !state.snapToGrid }));\n  },\n\n  setGridSize: (size) => {\n    set({ gridSize: Math.max(5, Math.min(100, size)) });\n  }\n}));\n\n// Cleanup on unmount\nif (typeof window !== 'undefined') {\n  window.addEventListener('beforeunload', () => {\n    stopAutoSave();\n  });\n}\n","/**\n * AutoSave Indicator Component\n *   : idle, saving, saved, error\n */\n\nimport React from 'react';\nimport { Cloud, CloudOff, Loader, Check, AlertCircle } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport './AutoSaveIndicator.css';\n\nexport const AutoSaveIndicator: React.FC = () => {\n  const { isSaving, lastSaved, saveError } = useEditorStore();\n\n  //  \n  const getStatus = () => {\n    if (saveError) return 'error';\n    if (isSaving) return 'saving';\n    if (lastSaved) return 'saved';\n    return 'idle';\n  };\n\n  const status = getStatus();\n\n  //    \n  const formatLastSaved = (date: Date): string => {\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n\n    if (seconds < 10) return ' ';\n    if (seconds < 60) return `${seconds}  `;\n    if (minutes === 1) return '1  ';\n    if (minutes < 60) return `${minutes}  `;\n    \n    return date.toLocaleTimeString('ru-RU', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const renderContent = () => {\n    switch (status) {\n      case 'saving':\n        return (\n          <>\n            <Loader size={16} className=\"spinner\" />\n            <span>...</span>\n          </>\n        );\n\n      case 'saved':\n        return (\n          <>\n            <Check size={16} />\n            <span> {lastSaved && formatLastSaved(lastSaved)}</span>\n          </>\n        );\n\n      case 'error':\n        return (\n          <>\n            <AlertCircle size={16} />\n            <span title={saveError || undefined}> </span>\n          </>\n        );\n\n      case 'idle':\n      default:\n        return (\n          <>\n            <Cloud size={16} />\n            <span> </span>\n          </>\n        );\n    }\n  };\n\n  return (\n    <div className={`autosave-indicator status-${status}`}>\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default AutoSaveIndicator;\n","/**\n * CreateProjectDialog Component\n *    \n */\n\nimport React, { useState } from 'react';\nimport { X } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport './CreateProjectDialog.css';\n\ninterface CreateProjectDialogProps {\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateProjectDialog: React.FC<CreateProjectDialogProps> = ({ onClose, onSuccess }) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [canvasWidth, setCanvasWidth] = useState(1920);\n  const [canvasHeight, setCanvasHeight] = useState(1080);\n  const [creating, setCreating] = useState(false);\n  \n  const { createProject } = useEditorStore();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!name.trim()) {\n      alert('  ');\n      return;\n    }\n\n    try {\n      setCreating(true);\n      console.log('[CreateProjectDialog] Creating project:', name);\n      \n      await createProject(name.trim(), {\n        width: canvasWidth,\n        height: canvasHeight,\n        backgroundColor: '#ffffff'\n      });\n\n      console.log('[CreateProjectDialog] Project created successfully');\n      onSuccess?.();\n      onClose();\n    } catch (error) {\n      console.error('[CreateProjectDialog] Failed to create project:', error);\n      alert('   ');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const presets = [\n    { name: 'Full HD ()', width: 1920, height: 1080 },\n    { name: 'Full HD ()', width: 1080, height: 1920 },\n    { name: '4K ()', width: 3840, height: 2160 },\n    { name: 'HD ()', width: 1280, height: 720 },\n  ];\n\n  return (\n    <div className=\"dialog-overlay\" onClick={onClose}>\n      <div className=\"dialog-content create-project-dialog\" onClick={(e) => e.stopPropagation()}>\n        {/* Header */}\n        <div className=\"dialog-header\">\n          <h2>  </h2>\n          <button className=\"btn-icon\" onClick={onClose} title=\"\">\n            <X size={24} />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit}>\n          <div className=\"dialog-body\">\n            {/* Project Name */}\n            <div className=\"form-field\">\n              <label htmlFor=\"project-name\">  *</label>\n              <input\n                id=\"project-name\"\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\" \"\n                maxLength={100}\n                autoFocus\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"form-field\">\n              <label htmlFor=\"project-description\"> ()</label>\n              <textarea\n                id=\"project-description\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"  ...\"\n                maxLength={500}\n                rows={3}\n              />\n            </div>\n\n            {/* Canvas Size */}\n            <div className=\"form-section\">\n              <h3> </h3>\n              \n              {/* Presets */}\n              <div className=\"presets-grid\">\n                {presets.map((preset, i) => (\n                  <button\n                    key={i}\n                    type=\"button\"\n                    className={`preset-btn ${\n                      canvasWidth === preset.width && canvasHeight === preset.height\n                        ? 'active'\n                        : ''\n                    }`}\n                    onClick={() => {\n                      setCanvasWidth(preset.width);\n                      setCanvasHeight(preset.height);\n                    }}\n                  >\n                    <span className=\"preset-name\">{preset.name}</span>\n                    <span className=\"preset-size\">{preset.width}{preset.height}</span>\n                  </button>\n                ))}\n              </div>\n\n              {/* Custom Size */}\n              <div className=\"form-row\">\n                <div className=\"form-field\">\n                  <label htmlFor=\"canvas-width\"> (px)</label>\n                  <input\n                    id=\"canvas-width\"\n                    type=\"number\"\n                    value={canvasWidth}\n                    onChange={(e) => setCanvasWidth(parseInt(e.target.value) || 1920)}\n                    min={320}\n                    max={7680}\n                  />\n                </div>\n                <div className=\"form-field\">\n                  <label htmlFor=\"canvas-height\"> (px)</label>\n                  <input\n                    id=\"canvas-height\"\n                    type=\"number\"\n                    value={canvasHeight}\n                    onChange={(e) => setCanvasHeight(parseInt(e.target.value) || 1080)}\n                    min={240}\n                    max={4320}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"dialog-footer\">\n            <button type=\"button\" className=\"btn-secondary\" onClick={onClose}>\n              \n            </button>\n            <button type=\"submit\" className=\"btn-primary\" disabled={creating}>\n              {creating ? '...' : ' '}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateProjectDialog;\n","/**\n * ProjectsDialog Component\n *   : , , , \n */\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Plus, FolderOpen, Trash2, Search } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { apiClient } from '../services/api-client';\nimport CreateProjectDialog from './CreateProjectDialog';\nimport './ProjectsDialog.css';\n\ninterface Project {\n  id: string;\n  name: string;\n  description?: string;\n  canvasWidth: number;\n  canvasHeight: number;\n  updatedAt: string;\n  createdAt: string;\n  tags?: string[];\n  thumbnail?: string;\n}\n\ninterface ProjectsDialogProps {\n  onClose: () => void;\n  onProjectLoaded?: () => void;\n}\n\nconst ProjectsDialog: React.FC<ProjectsDialogProps> = ({ onClose, onProjectLoaded }) => {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const { loadProject, projectId } = useEditorStore();\n\n  //   \n  useEffect(() => {\n    loadProjects();\n  }, []);\n\n  const loadProjects = async () => {\n    try {\n      setLoading(true);\n      const response = await apiClient.getProjects();\n      console.log('[ProjectsDialog] Projects loaded:', response.projects.length);\n      setProjects(response.projects);\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to load projects:', error);\n      alert('    ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOpenProject = async (id: string) => {\n    try {\n      console.log('[ProjectsDialog] Opening project:', id);\n      await loadProject(id);\n      onProjectLoaded?.();\n      onClose();\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to open project:', error);\n      alert('   ');\n    }\n  };\n\n  const handleDeleteProject = async (id: string, name: string) => {\n    if (!confirm(`      \"${name}\"?`)) {\n      return;\n    }\n\n    try {\n      console.log('[ProjectsDialog] Deleting project:', id);\n      await apiClient.deleteProject(id);\n      \n      //  \n      setProjects(projects.filter(p => p.id !== id));\n      \n      alert(' ');\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to delete project:', error);\n      alert('   ');\n    }\n  };\n\n  const handleProjectCreated = () => {\n    setShowCreateDialog(false);\n    loadProjects();\n  };\n\n  //  \n  const filteredProjects = projects.filter(p => \n    p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    p.description?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <>\n      <div className=\"dialog-overlay\" onClick={onClose}>\n        <div className=\"dialog-content projects-dialog\" onClick={(e) => e.stopPropagation()}>\n          {/* Header */}\n          <div className=\"dialog-header\">\n            <h2> </h2>\n            <button className=\"btn-icon\" onClick={onClose} title=\"\">\n              <X size={24} />\n            </button>\n          </div>\n\n          {/* Toolbar */}\n          <div className=\"projects-toolbar\">\n            <div className=\"search-box\">\n              <Search size={18} />\n              <input\n                type=\"text\"\n                placeholder=\" ...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n              />\n            </div>\n            <button \n              className=\"btn-primary\" \n              onClick={() => setShowCreateDialog(true)}\n            >\n              <Plus size={18} />\n              <span> </span>\n            </button>\n          </div>\n\n          {/* Projects List */}\n          <div className=\"projects-list\">\n            {loading ? (\n              <div className=\"loading-state\">\n                <p> ...</p>\n              </div>\n            ) : filteredProjects.length === 0 ? (\n              <div className=\"empty-state\">\n                <FolderOpen size={48} />\n                <p>{searchQuery ? '  ' : '    '}</p>\n                <button \n                  className=\"btn-primary\" \n                  onClick={() => setShowCreateDialog(true)}\n                >\n                    \n                </button>\n              </div>\n            ) : (\n              filteredProjects.map(project => (\n                <div \n                  key={project.id} \n                  className={`project-card ${project.id === projectId ? 'active' : ''}`}\n                >\n                  {/* Thumbnail */}\n                  <div className=\"project-thumbnail\">\n                    {project.thumbnail ? (\n                      <img src={project.thumbnail} alt={project.name} />\n                    ) : (\n                      <div className=\"thumbnail-placeholder\">\n                        <FolderOpen size={32} />\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Info */}\n                  <div className=\"project-info\">\n                    <h3>{project.name}</h3>\n                    {project.description && (\n                      <p className=\"project-description\">{project.description}</p>\n                    )}\n                    <div className=\"project-meta\">\n                      <span>{project.canvasWidth}{project.canvasHeight}</span>\n                      <span></span>\n                      <span>{new Date(project.updatedAt).toLocaleDateString('ru-RU')}</span>\n                    </div>\n                    {project.tags && project.tags.length > 0 && (\n                      <div className=\"project-tags\">\n                        {project.tags.map((tag, i) => (\n                          <span key={i} className=\"tag\">{tag}</span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"project-actions\">\n                    <button \n                      className=\"btn-primary\"\n                      onClick={() => handleOpenProject(project.id)}\n                      title=\" \"\n                    >\n                      <FolderOpen size={18} />\n                      <span></span>\n                    </button>\n                    <button \n                      className=\"btn-icon btn-danger\"\n                      onClick={() => handleDeleteProject(project.id, project.name)}\n                      title=\" \"\n                    >\n                      <Trash2 size={18} />\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"dialog-footer\">\n            <p className=\"projects-count\">\n               : {projects.length}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Create Project Dialog */}\n      {showCreateDialog && (\n        <CreateProjectDialog\n          onClose={() => setShowCreateDialog(false)}\n          onSuccess={handleProjectCreated}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ProjectsDialog;\n","/**\n * BuildDialog     Windows\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { apiClient } from '../services/api-client';\nimport { Package, Download, X, AlertCircle, CheckCircle, Loader } from 'lucide-react';\nimport './BuildDialog.css';\n\ninterface BuildDialogProps {\n  onClose: () => void;\n}\n\ninterface BuildStatus {\n  id: string;\n  status: string;\n  progress: number;\n  message: string;\n  download_url?: string;\n  file_name?: string;\n  file_size?: string;\n  error?: string;\n}\n\nconst BuildDialog: React.FC<BuildDialogProps> = ({ onClose }) => {\n  const { project } = useEditorStore();\n  \n  const [appName, setAppName] = useState(project?.name || 'Kiosk Player');\n  const [iconFile, setIconFile] = useState<File | null>(null);\n  const [iconPreview, setIconPreview] = useState<string | null>(null);\n  \n  const [building, setBuilding] = useState(false);\n  const [buildStatus, setBuildStatus] = useState<BuildStatus | null>(null);\n  const [pollTimer, setPollTimer] = useState<NodeJS.Timeout | null>(null);\n  \n  const iconInputRef = useRef<HTMLInputElement>(null);\n\n  //    \n  useEffect(() => {\n    return () => {\n      if (pollTimer) clearInterval(pollTimer);\n    };\n  }, [pollTimer]);\n\n  if (!project) return null;\n\n  const handleIconSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setIconFile(file);\n      const reader = new FileReader();\n      reader.onload = (ev) => setIconPreview(ev.target?.result as string);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleBuild = async () => {\n    setBuilding(true);\n    setBuildStatus(null);\n\n    try {\n      //  \n      const formData = new FormData();\n      formData.append('project', JSON.stringify(project));\n      formData.append('appName', appName);\n      formData.append('appId', 'com.kiosk.player');\n      \n      if (iconFile) {\n        formData.append('icon', iconFile);\n      }\n\n      //  \n      const API_BASE = apiClient.getBaseUrl();\n      const response = await fetch(`${API_BASE}/api/builds`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || '  ');\n      }\n\n      const buildId = result.data.build_id;\n      \n      //   \n      const timer = setInterval(async () => {\n        try {\n          const statusResp = await fetch(`${API_BASE}/api/builds/${buildId}`);\n          const statusResult = await statusResp.json();\n          \n          if (statusResult.success) {\n            setBuildStatus(statusResult.data);\n            \n            if (statusResult.data.status === 'completed' || statusResult.data.status === 'failed') {\n              clearInterval(timer);\n              setBuilding(false);\n            }\n          }\n        } catch (err) {\n          console.error('Poll error:', err);\n        }\n      }, 2000);\n\n      setPollTimer(timer);\n      \n      //   \n      setBuildStatus({\n        id: buildId,\n        status: 'queued',\n        progress: 0,\n        message: ' ...'\n      });\n\n    } catch (error: any) {\n      console.error('Build error:', error);\n      setBuildStatus({\n        id: '',\n        status: 'failed',\n        progress: 0,\n        message: error.message,\n        error: error.message\n      });\n      setBuilding(false);\n    }\n  };\n\n  const handleDownload = () => {\n    if (buildStatus?.download_url) {\n      const API_BASE = apiClient.getBaseUrl();\n      window.open(`${API_BASE}${buildStatus.download_url}`, '_blank');\n    }\n  };\n\n  const isCompleted = buildStatus?.status === 'completed';\n  const isFailed = buildStatus?.status === 'failed';\n  const isBuilding = building && !isCompleted && !isFailed;\n\n  return (\n    <div className=\"build-dialog-overlay\" onClick={!isBuilding ? onClose : undefined}>\n      <div className=\"build-dialog\" onClick={(e) => e.stopPropagation()}>\n        {/* Header */}\n        <div className=\"build-dialog-header\">\n          <h2><Package size={20} />   Windows</h2>\n          {!isBuilding && (\n            <button className=\"build-dialog-close\" onClick={onClose}></button>\n          )}\n        </div>\n\n        {/* Body */}\n        <div className=\"build-dialog-body\">\n          {/*    */}\n          <div className=\"build-project-info\">\n            <h4></h4>\n            <div className=\"build-project-info-grid\">\n              <div>: <span>{project.name}</span></div>\n              <div>: <span>{project.widgets.length}</span></div>\n              <div>: <span>{project.canvas.width}{project.canvas.height}</span></div>\n            </div>\n          </div>\n\n          {/*   ( ) */}\n          {!buildStatus && (\n            <>\n              <div className=\"build-form-group\">\n                <label> </label>\n                <input\n                  type=\"text\"\n                  value={appName}\n                  onChange={(e) => setAppName(e.target.value)}\n                  placeholder=\"Kiosk Player\"\n                />\n              </div>\n\n              <div className=\"build-form-group\">\n                <label>  (.ico)</label>\n                <div className=\"build-icon-upload\">\n                  <button \n                    className=\"build-icon-btn\"\n                    onClick={() => iconInputRef.current?.click()}\n                  >\n                    {iconFile ? '' : ' .ico '}\n                  </button>\n                  {iconPreview && (\n                    <div className=\"build-icon-preview\">\n                      <img src={iconPreview} alt=\"icon\" />\n                    </div>\n                  )}\n                  {iconFile && (\n                    <span className=\"build-icon-name\">{iconFile.name}</span>\n                  )}\n                  <input\n                    ref={iconInputRef}\n                    type=\"file\"\n                    accept=\".ico\"\n                    onChange={handleIconSelect}\n                    style={{ display: 'none' }}\n                  />\n                </div>\n              </div>\n            </>\n          )}\n\n          {/*   */}\n          {buildStatus && (\n            <div className=\"build-progress-section\">\n              {isBuilding && (\n                <>\n                  <div className=\"build-progress-percent\">{buildStatus.progress}%</div>\n                  <div className=\"build-progress-bar-bg\">\n                    <div \n                      className=\"build-progress-bar-fill\"\n                      style={{ width: `${buildStatus.progress}%` }}\n                    />\n                  </div>\n                  <div className=\"build-progress-status\">\n                    <Loader size={14} style={{ display: 'inline', marginRight: 6, animation: 'spin 1s linear infinite' }} />\n                    {buildStatus.message}\n                  </div>\n                </>\n              )}\n\n              {isCompleted && (\n                <div className=\"build-result\">\n                  <CheckCircle size={48} color=\"#48bb78\" />\n                  <div className=\"build-result-success\"> !</div>\n                  <div className=\"build-result-info\">\n                    {buildStatus.file_name}<br />\n                    : {buildStatus.file_size}\n                  </div>\n                </div>\n              )}\n\n              {isFailed && (\n                <div className=\"build-result\">\n                  <AlertCircle size={48} color=\"#f56565\" />\n                  <div className=\"build-result-error\">\n                    {buildStatus.error || buildStatus.message}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"build-dialog-footer\">\n          {!buildStatus && (\n            <>\n              <button className=\"build-btn build-btn-secondary\" onClick={onClose}>\n                \n              </button>\n              <button \n                className=\"build-btn build-btn-primary\"\n                onClick={handleBuild}\n                disabled={!appName.trim()}\n              >\n                <Package size={16} />  .exe\n              </button>\n            </>\n          )}\n\n          {isBuilding && (\n            <button className=\"build-btn build-btn-secondary\" disabled>\n              ... ~2 \n            </button>\n          )}\n\n          {isCompleted && (\n            <>\n              <button className=\"build-btn build-btn-secondary\" onClick={onClose}>\n                \n              </button>\n              <button className=\"build-btn build-btn-success\" onClick={handleDownload}>\n                <Download size={16} />  .exe\n              </button>\n            </>\n          )}\n\n          {isFailed && (\n            <>\n              <button className=\"build-btn build-btn-secondary\" onClick={onClose}>\n                \n              </button>\n              <button className=\"build-btn build-btn-primary\" onClick={() => {\n                setBuildStatus(null);\n                setBuilding(false);\n              }}>\n                 \n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BuildDialog;\n","/**\n * Toolbar Component -  3.0 + Projects Management\n *  LoginDialog,       \n * +    ProjectsDialog\n */\n\nimport React, { useState, useEffect } from 'react';\n// Router navigation removed - using window.location instead\nimport { \n  Save, \n  FolderOpen, \n  Undo2, \n  Redo2, \n  ZoomIn, \n  ZoomOut, \n  Grid, \n  Magnet,\n  Play,\n  Package,\n  User,\n  LogOut\n} from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { apiClient } from '../services/api-client';\nimport { logger } from '../utils/logger';\nimport AutoSaveIndicator from './AutoSaveIndicator';\nimport ProjectsDialog from './ProjectsDialog';\nimport BuildDialog from './BuildDialog';\nimport './Toolbar.css';\n\nexport const Toolbar: React.FC = () => {\n\n  const {\n    project,\n    history,\n    zoom,\n    gridEnabled,\n    snapToGrid,\n    undo,\n    redo,\n    setZoom,\n    toggleGrid,\n    toggleSnapToGrid,\n    saveProject\n  } = useEditorStore();\n  // Preview functionality\n  const { project: projectForPreview, savePreviewSnapshot } = useEditorStore();\n  const [previewLoading, setPreviewLoading] = React.useState(false);\n\n\n  // User info\n  const [organizationName, setOrganizationName] = useState<string | null>(null);\n  const [plan, setPlan] = useState<string | null>(null);\n  const [showProjectsDialog, setShowProjectsDialog] = useState(false);\n  const [showBuildDialog, setShowBuildDialog] = useState(false);\n\n  useEffect(() => {\n    const orgData = apiClient.getOrganizationData();\n    setOrganizationName(orgData.name);\n    setPlan(orgData.plan);\n  }, []);\n\n  const handleZoomIn = () => {\n    setZoom(Math.min(zoom + 0.1, 3));\n  };\n\n  const handleZoomOut = () => {\n    setZoom(Math.max(zoom - 0.1, 0.1));\n  };\n\n  const handleLogout = () => {\n    if (confirm('    ?')) {\n      logger.info('User initiated logout');\n      apiClient.logout();\n      window.location.href = \"/login\";\n    }\n  };\n\n  const handlePreview = async () => {\n    const proj = projectForPreview || project;\n    if (!proj) {\n      alert('    ');\n      return;\n    }\n\n    setPreviewLoading(true);\n\n    try {\n      console.log('[Toolbar] Starting preview...');\n      const snapshotId = await savePreviewSnapshot();\n      window.open(`/preview?projectId=${snapshotId}`, '_blank');\n      console.log('[Toolbar] Preview opened');\n    } catch (error: any) {\n      console.error('[Toolbar] Error:', error);\n      alert(`: ${error.message}`);\n    } finally {\n      setPreviewLoading(false);\n    }\n  };\n\n  const canUndo = history.past.length > 0;\n  const canRedo = history.future.length > 0;\n\n  return (\n    <>\n      <div className=\"toolbar\">\n        <div className=\"toolbar-section\">\n          {/* Logo */}\n          <div className=\"toolbar-logo\">\n            <span className=\"logo-text\">Kiosk Editor</span>\n          </div>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* File operations */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => saveProject()}\n            disabled={!project}\n            title=\" (Ctrl+S)\"\n          >\n            <Save size={18} />\n          </button>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => setShowProjectsDialog(true)}\n            disabled={!project}\n            title=\" \"\n          >\n            <FolderOpen size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* History */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={undo}\n            disabled={!canUndo}\n            title=\" (Ctrl+Z)\"\n          >\n            <Undo2 size={18} />\n          </button>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={redo}\n            disabled={!canRedo}\n            title=\" (Ctrl+Shift+Z)\"\n          >\n            <Redo2 size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Zoom */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={handleZoomOut}\n            disabled={zoom <= 0.1}\n            title=\" (Ctrl+-)\"\n          >\n            <ZoomOut size={18} />\n          </button>\n\n          <span className=\"toolbar-zoom\">{Math.round(zoom * 100)}%</span>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={handleZoomIn}\n            disabled={zoom >= 3}\n            title=\" (Ctrl++)\"\n          >\n            <ZoomIn size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Grid */}\n          <button \n            className={`toolbar-btn ${gridEnabled ? 'active' : ''}`}\n            onClick={toggleGrid}\n            title=\" \"\n          >\n            <Grid size={18} />\n          </button>\n\n          <button \n            className={`toolbar-btn ${snapToGrid ? 'active' : ''}`}\n            onClick={toggleSnapToGrid}\n            title=\"  \"\n          >\n            <Magnet size={18} />\n          </button>\n        </div>\n\n        {/* Right section */}\n        <div className=\"toolbar-section\">\n          {/* AutoSave Indicator */}\n          {project && <AutoSaveIndicator />}\n\n          <div className=\"toolbar-divider\" />\n\n          {/* User info */}\n          {organizationName && (\n            <div className=\"toolbar-user-info\">\n              <User size={16} />\n              <span className=\"user-org\">{organizationName}</span>\n              {plan && <span className=\"user-plan\">{plan}</span>}\n            </div>\n          )}\n\n          {/* Logout */}\n          <button \n            className=\"toolbar-btn logout-btn\"\n            onClick={handleLogout}\n            title=\"\"\n          >\n            <LogOut size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Build Player */}\n          <button \n            className=\"toolbar-btn\"\n            disabled={!project}\n            onClick={() => setShowBuildDialog(true)}\n            title=\"  Windows\"\n          >\n            <Package size={18} />\n          </button>\n\n          {/* Preview */}\n          <button \n            className=\"toolbar-btn preview-btn\" \n            disabled={!project || previewLoading}\n            onClick={handlePreview}\n            title=\"\"\n          >\n            <Play size={18} />\n            <span>{previewLoading ? '...' : ''}</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Projects Dialog */}\n      {showProjectsDialog && (\n        <ProjectsDialog\n          onClose={() => setShowProjectsDialog(false)}\n        />\n      )}\n\n      {/* Build Dialog */}\n      {showBuildDialog && (\n        <BuildDialog\n          onClose={() => setShowBuildDialog(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Toolbar;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Group, Star, RegularPolygon, Circle, Ellipse, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ClippedImageProps {\n  widget: Widget;\n  image: HTMLImageElement | null;\n}\n\nconst ClippedImage: React.FC<ClippedImageProps> = ({ widget, image }) => {\n  const imageRef = useRef<any>(null);\n  \n  const {\n    clipShape = 'rectangle',\n    cornerRadius = 0,\n    opacity = 1\n  } = widget.properties;\n\n  useEffect(() => {\n    if (!imageRef.current || !image) return;\n\n    const node = imageRef.current;\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    \n    if (!ctx) return;\n\n    canvas.width = widget.width;\n    canvas.height = widget.height;\n\n    //      \n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n\n    const centerX = widget.width / 2;\n    const centerY = widget.height / 2;\n    const radius = Math.min(widget.width, widget.height) / 2;\n\n    switch (clipShape) {\n      case 'circle':\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        ctx.closePath();\n        break;\n\n      case 'ellipse':\n        ctx.beginPath();\n        ctx.ellipse(centerX, centerY, widget.width / 2, widget.height / 2, 0, 0, Math.PI * 2);\n        ctx.closePath();\n        break;\n\n      case 'triangle':\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY - radius);\n        ctx.lineTo(centerX + radius * Math.cos(Math.PI / 6), centerY + radius * Math.sin(Math.PI / 6));\n        ctx.lineTo(centerX - radius * Math.cos(Math.PI / 6), centerY + radius * Math.sin(Math.PI / 6));\n        ctx.closePath();\n        break;\n\n      case 'diamond':\n        ctx.beginPath();\n        ctx.moveTo(centerX, 0);\n        ctx.lineTo(widget.width, centerY);\n        ctx.lineTo(centerX, widget.height);\n        ctx.lineTo(0, centerY);\n        ctx.closePath();\n        break;\n\n      case 'pentagon':\n        drawPolygon(ctx, centerX, centerY, radius, 5);\n        break;\n\n      case 'hexagon':\n        drawPolygon(ctx, centerX, centerY, radius, 6);\n        break;\n\n      case 'octagon':\n        drawPolygon(ctx, centerX, centerY, radius, 8);\n        break;\n\n      case 'star':\n        ctx.beginPath();\n        for (let i = 0; i < 10; i++) {\n          const angle = (i * Math.PI / 5) - Math.PI / 2;\n          const r = i % 2 === 0 ? radius : radius * 0.5;\n          const x = centerX + r * Math.cos(angle);\n          const y = centerY + r * Math.sin(angle);\n          if (i === 0) {\n            ctx.moveTo(x, y);\n          } else {\n            ctx.lineTo(x, y);\n          }\n        }\n        ctx.closePath();\n        break;\n\n      case 'rounded-rectangle':\n        drawRoundedRect(ctx, 0, 0, widget.width, widget.height, cornerRadius);\n        break;\n\n      default:\n        ctx.rect(0, 0, widget.width, widget.height);\n        break;\n    }\n\n    ctx.clip();\n\n    const imgRatio = image.width / image.height;\n    const widgetRatio = widget.width / widget.height;\n\n    let sx = 0, sy = 0, sw = image.width, sh = image.height;\n    let dx = 0, dy = 0, dw = widget.width, dh = widget.height;\n\n    if (imgRatio > widgetRatio) {\n      sw = image.height * widgetRatio;\n      sx = (image.width - sw) / 2;\n    } else {\n      sh = image.width / widgetRatio;\n      sy = (image.height - sh) / 2;\n    }\n\n    ctx.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh);\n    ctx.restore();\n\n    const clippedImage = new window.Image();\n    clippedImage.src = canvas.toDataURL();\n    \n    clippedImage.onload = () => {\n      if (node) {\n        node.image(clippedImage);\n        node.getLayer()?.batchDraw();\n      }\n    };\n\n  }, [image, widget.width, widget.height, clipShape, cornerRadius]);\n\n  if (!image) {\n    return null;\n  }\n\n  return (\n    <KonvaImage\n      ref={imageRef}\n      image={undefined}\n      width={widget.width}\n      height={widget.height}\n      opacity={opacity}\n      listening={false}\n    />\n  );\n};\n\nfunction drawPolygon(ctx: CanvasRenderingContext2D, x: number, y: number, radius: number, sides: number) {\n  ctx.beginPath();\n  for (let i = 0; i < sides; i++) {\n    const angle = (i * 2 * Math.PI / sides) - Math.PI / 2;\n    const px = x + radius * Math.cos(angle);\n    const py = y + radius * Math.sin(angle);\n    if (i === 0) {\n      ctx.moveTo(px, py);\n    } else {\n      ctx.lineTo(px, py);\n    }\n  }\n  ctx.closePath();\n}\n\nfunction drawRoundedRect(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n}\n\nexport default ClippedImage;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Group, Rect } from 'react-konva';\nimport { Widget } from '../types';\nimport ClippedImage from './ClippedImage';\n\ninterface ImageGalleryProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ImageGallery: React.FC<ImageGalleryProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [images, setImages] = useState<{ [key: string]: HTMLImageElement }>({});\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const timerRef = useRef<NodeJS.Timeout>();\n\n  const {\n    sources = [],\n    autoSwitch = false,\n    switchInterval = 3,\n    transition = 'fade',\n    clipShape = 'rectangle',\n    loop = true\n  } = widget.properties;\n\n  //   \n  useEffect(() => {\n    const loadedImages: { [key: string]: HTMLImageElement } = {};\n    let loadCount = 0;\n\n    sources.forEach((source: any) => {\n      const img = new window.Image();\n      img.crossOrigin = 'anonymous';\n      \n      img.onload = () => {\n        loadedImages[source.id] = img;\n        loadCount++;\n        \n        //   ,  \n        if (loadCount === sources.length) {\n          setImages({ ...loadedImages });\n        }\n      };\n      \n      img.onerror = () => {\n        console.error('Failed to load image:', source.value);\n        loadCount++;\n        if (loadCount === sources.length) {\n          setImages({ ...loadedImages });\n        }\n      };\n      \n      img.src = source.value;\n    });\n\n    return () => {\n      Object.values(loadedImages).forEach(img => {\n        img.onload = null;\n        img.onerror = null;\n      });\n    };\n  }, [sources]);\n\n  // \n  useEffect(() => {\n    if (!autoSwitch || sources.length <= 1) {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n      return;\n    }\n\n    timerRef.current = setInterval(() => {\n      setCurrentIndex(prev => {\n        const next = prev + 1;\n        if (next >= sources.length) {\n          return loop ? 0 : prev;\n        }\n        return next;\n      });\n    }, switchInterval * 1000);\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [autoSwitch, switchInterval, sources.length, loop]);\n\n  const isLocked = widget.locked || false;\n  const currentSource = sources[currentIndex];\n  const currentImage = currentSource ? images[currentSource.id] : null;\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*     */}\n      {(!currentImage || sources.length === 0) && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill=\"#9b59b6\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {currentImage && (\n        clipShape && clipShape !== 'rectangle' ? (\n          <ClippedImage widget={widget} image={currentImage} />\n        ) : (\n          <KonvaImage\n            image={currentImage}\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            listening={false}\n          />\n        )\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*     */}\n      {sources.length > 1 && (\n        <Rect\n          x={widget.width - 40}\n          y={widget.height - 20}\n          width={35}\n          height={15}\n          fill=\"rgba(0, 0, 0, 0.7)\"\n          cornerRadius={3}\n          listening={false}\n        />\n      )}\n      {sources.length > 1 && (\n        <KonvaImage\n          x={widget.width - 35}\n          y={widget.height - 18}\n          width={10}\n          height={10}\n          image={(() => {\n            //   \"gallery\"\n            const canvas = document.createElement('canvas');\n            canvas.width = 10;\n            canvas.height = 10;\n            const ctx = canvas.getContext('2d');\n            if (ctx) {\n              ctx.fillStyle = '#fff';\n              ctx.font = '10px Arial';\n              ctx.fillText('', 0, 9);\n            }\n            const img = new window.Image();\n            img.src = canvas.toDataURL();\n            return img;\n          })()}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ImageGallery;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Rect, Group, Circle, Ellipse, RegularPolygon, Star, Line } from 'react-konva';\nimport { Widget } from '../types';\nimport { useEditorStore } from '../stores/editorStore';\nimport ClippedImage from './ClippedImage';\nimport ImageGallery from './ImageGallery';\n\ninterface ImageWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ImageWidget: React.FC<ImageWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  //    -  ImageGallery\n  if (widget.properties.galleryMode) {\n    return (\n      <ImageGallery\n        widget={widget}\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDragEnd={onDragEnd}\n        onTransformEnd={onTransformEnd}\n        dragBoundFunc={dragBoundFunc}\n      />\n    );\n  }\n\n  //     \n  const [image, setImage] = useState<HTMLImageElement | null>(null);\n  const groupRef = useRef<any>(null);\n  \n  const { clipShape = 'rectangle' } = widget.properties;\n\n  useEffect(() => {\n    if (!widget.properties.src) {\n      setImage(null);\n      return;\n    }\n\n    const img = new window.Image();\n    img.crossOrigin = 'anonymous';\n    \n    img.onload = () => {\n      setImage(img);\n    };\n    \n    img.onerror = () => {\n      console.error('Failed to load image:', widget.properties.src);\n      setImage(null);\n    };\n    \n    img.src = widget.properties.src;\n\n    return () => {\n      img.onload = null;\n      img.onerror = null;\n    };\n  }, [widget.properties.src]);\n\n  //   -      \n  useEffect(() => {\n    if (!image || widget.properties.objectFit !== 'adaptive') return;\n\n    const { updateWidget } = useEditorStore.getState();\n    const imgRatio = image.width / image.height;\n    const currentRatio = widget.width / widget.height;\n\n    // ,    \n    //       \n    if (Math.abs(imgRatio - currentRatio) > 0.01) {\n      //  ,  \n      const newHeight = widget.width / imgRatio;\n      \n      updateWidget(widget.id, {\n        height: Math.round(newHeight)\n      });\n    }\n  }, [image, widget.properties.objectFit, widget.width, widget.height, widget.id]);\n\n  //       objectFit\n  const getImageProps = () => {\n    if (!image) return null;\n\n    const { width, height } = widget;\n    const { objectFit = 'contain' } = widget.properties;\n    const imgRatio = image.width / image.height;\n    const widgetRatio = width / height;\n\n    let cropX = 0;\n    let cropY = 0;\n    let cropWidth = image.width;\n    let cropHeight = image.height;\n\n    switch (objectFit) {\n      case 'cover': {\n        //   ,  \n        if (imgRatio > widgetRatio) {\n          //    -   \n          cropWidth = image.height * widgetRatio;\n          cropX = (image.width - cropWidth) / 2;\n        } else {\n          //    -  /\n          cropHeight = image.width / widgetRatio;\n          cropY = (image.height - cropHeight) / 2;\n        }\n        break;\n      }\n      case 'contain':\n        //      \n        //   canvas \n        break;\n      case 'fill':\n        //    ,  \n        break;\n      case 'scale-down': {\n        //  :  ,   \n        //    contain,      -  \n        if (image.width <= width && image.height <= height) {\n          //    -   \n          cropWidth = image.width;\n          cropHeight = image.height;\n        } else {\n          //   -    ( contain)\n          // crop  \n        }\n        break;\n      }\n      case 'adaptive':\n        //      useEffect\n        break;\n    }\n\n    return {\n      cropX,\n      cropY,\n      cropWidth,\n      cropHeight\n    };\n  };\n\n  const imageProps = getImageProps();\n  const { borderEnabled, borderStyle, borderWidth = 2, borderColor = '#000000' } = widget.properties;\n\n  //  borderStyle  strokeDash\n  const getStrokeDash = (style: string) => {\n    switch (style) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [2, 2];\n      case 'double':\n        return [];\n      default:\n        return [];\n    }\n  };\n\n  const handleTransform = (e: any) => {\n    const node = groupRef.current;\n    if (!node) return;\n\n    //   scale  -     Canvas.tsx\n    onTransformEnd(e);\n  };\n\n  const isLocked = widget.locked || false;\n  //     clipShape\n  const renderBorder = () => {\n    if (!borderEnabled) return null;\n\n    const strokeProps: any = {\n      stroke: borderColor,\n      strokeWidth: borderWidth,\n      dash: getStrokeDash(borderStyle),\n      fill: undefined,\n      listening: false,\n    };\n\n    const shape = clipShape || 'rectangle';\n    const w = widget.width;\n    const h = widget.height;\n    const r = Math.min(w, h) / 2;\n    const cx = w / 2;\n    const cy = h / 2;\n\n    switch (shape) {\n      case 'circle':\n        return <Circle x={cx} y={cy} radius={r} {...strokeProps} />;\n\n      case 'ellipse':\n        return <Ellipse x={cx} y={cy} radiusX={w / 2} radiusY={h / 2} {...strokeProps} />;\n\n      case 'triangle':\n        return <RegularPolygon x={cx} y={cy} sides={3} radius={r} {...strokeProps} />;\n\n      case 'diamond':\n        return <RegularPolygon x={cx} y={cy} sides={4} radius={r} rotation={45} {...strokeProps} />;\n\n      case 'pentagon':\n        return <RegularPolygon x={cx} y={cy} sides={5} radius={r} {...strokeProps} />;\n\n      case 'hexagon':\n        return <RegularPolygon x={cx} y={cy} sides={6} radius={r} {...strokeProps} />;\n\n      case 'octagon':\n        return <RegularPolygon x={cx} y={cy} sides={8} radius={r} {...strokeProps} />;\n\n      case 'star':\n        return <Star x={cx} y={cy} numPoints={5} innerRadius={r * 0.5} outerRadius={r} {...strokeProps} />;\n\n      case 'rounded-rectangle':\n        return <Rect width={w} height={h} cornerRadius={widget.properties.cornerRadius || 20} {...strokeProps} />;\n\n      case 'rectangle':\n      default:\n        return <Rect width={w} height={h} {...strokeProps} />;\n    }\n  };\n\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={handleTransform}\n    >\n      {/*      */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  (   ) */}\n      {!image && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill=\"#9b59b6\"\n          listening={false}\n        />\n      )}\n\n      {/*  */}\n      {image && (\n        clipShape && clipShape !== 'rectangle' ? (\n          <ClippedImage widget={widget} image={image} />\n        ) : (\n          imageProps && (\n            <KonvaImage\n              image={image}\n              x={0}\n              y={0}\n              width={widget.width}\n              height={widget.height}\n              crop={{\n                x: imageProps.cropX,\n                y: imageProps.cropY,\n                width: imageProps.cropWidth,\n                height: imageProps.cropHeight\n              }}\n              listening={false}\n            />\n          )\n        )\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   (  clipShape) */}\n      {renderBorder()}\n    </Group>\n  );\n};\n\nexport default ImageWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ButtonWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ButtonWidget: React.FC<ButtonWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const textRef = useRef<any>(null);\n\n  //  \n  const {\n    text = 'Button',\n    backgroundColor = '#2ecc71',\n    textColor = '#ffffff',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    textAlign = 'center',\n    borderRadius = 8,\n    borderWidth = 0,\n    borderColor = '#000000',\n    borderStyle = 'solid',\n    paddingX = 16,\n    paddingY = 8,\n    shadowEnabled = false,\n    shadowColor = '#000000',\n    shadowBlur = 10,\n    shadowOffsetX = 0,\n    shadowOffsetY = 4,\n    shadowOpacity = 0.3\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //  borderStyle  dash\n  const getDash = () => {\n    switch (borderStyle) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [3, 3];\n      default:\n        return [];\n    }\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*   */}\n      {shadowEnabled && (\n        <Rect\n          x={shadowOffsetX}\n          y={shadowOffsetY}\n          width={widget.width}\n          height={widget.height}\n          cornerRadius={borderRadius}\n          fill={shadowColor}\n          opacity={shadowOpacity}\n          blur={shadowBlur}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={backgroundColor}\n        cornerRadius={borderRadius}\n        stroke={borderWidth > 0 ? borderColor : undefined}\n        strokeWidth={borderWidth}\n        dash={getDash()}\n        listening={false}\n      />\n\n      {/*   */}\n      <Text\n        ref={textRef}\n        text={text}\n        x={paddingX}\n        y={0}\n        width={widget.width - paddingX * 2}\n        height={widget.height}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n        fontStyle={fontWeight === 'bold' ? 'bold' : fontStyle}\n        fill={textColor}\n        align={textAlign}\n        verticalAlign=\"middle\"\n        listening={false}\n      />\n\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          cornerRadius={borderRadius}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ButtonWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface TextWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst TextWidget: React.FC<TextWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n\n  const {\n    text = 'Text',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    textAlign = 'left',\n    verticalAlign = 'top',\n    textColor = '#000000',\n    backgroundColor = '#ffffff',\n    lineHeight = 1.2,\n    padding = 8,\n    textDecoration = 'none'\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //  textDecoration\n  const getTextDecoration = () => {\n    if (textDecoration === 'underline') return 'underline';\n    if (textDecoration === 'line-through') return 'line-through';\n    return '';\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*  */}\n      {backgroundColor !== 'transparent' && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill={backgroundColor}\n          listening={false}\n        />\n      )}\n\n      {/*  */}\n      <Text\n        text={text}\n        x={padding}\n        y={padding}\n        width={widget.width - padding * 2}\n        height={widget.height - padding * 2}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n        fontStyle={fontWeight === 'bold' ? 'bold' : fontStyle}\n        fill={textColor}\n        align={textAlign}\n        verticalAlign={verticalAlign}\n        lineHeight={lineHeight}\n        textDecoration={getTextDecoration()}\n        listening={false}\n      />\n\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default TextWidget;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface VideoPlaylistProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst VideoPlaylist: React.FC<VideoPlaylistProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const {\n    sources = [],\n    autoNext = true,\n    loop = true\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n  const currentSource = sources[currentIndex];\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"#000000\"\n        listening={false}\n      />\n\n      {/*    */}\n      <Text\n        x={widget.width / 2}\n        y={widget.height / 2 - 30}\n        text=\"\"\n        fontSize={60}\n        fill=\"#ffffff\"\n        align=\"center\"\n        width={widget.width}\n        offsetX={widget.width / 2}\n        listening={false}\n      />\n\n      {/*  \"Playlist\" */}\n      <Text\n        x={0}\n        y={widget.height / 2 + 40}\n        text=\"PLAYLIST\"\n        fontSize={16}\n        fill=\"#ffffff\"\n        align=\"center\"\n        width={widget.width}\n        listening={false}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {sources.length > 1 && (\n        <>\n          <Rect\n            x={widget.width - 50}\n            y={widget.height - 25}\n            width={45}\n            height={20}\n            fill=\"rgba(0, 0, 0, 0.8)\"\n            cornerRadius={4}\n            listening={false}\n          />\n          <Text\n            x={widget.width - 48}\n            y={widget.height - 21}\n            text={` ${sources.length}`}\n            fontSize={12}\n            fill=\"#ffffff\"\n            listening={false}\n          />\n        </>\n      )}\n    </Group>\n  );\n};\n\nexport default VideoPlaylist;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Group, Rect, Text as KonvaText, Image as KonvaImage } from 'react-konva';\nimport { Widget } from '../types';\nimport { useEditorStore } from '../stores/editorStore';\nimport VideoPlaylist from './VideoPlaylist';\n\ninterface VideoWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst VideoWidget: React.FC<VideoWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  //    -  VideoPlaylist\n  if (widget.properties.playlistMode) {\n    return (\n      <VideoPlaylist\n        widget={widget}\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDragEnd={onDragEnd}\n        onTransformEnd={onTransformEnd}\n        dragBoundFunc={dragBoundFunc}\n      />\n    );\n  }\n\n  //     \n  const groupRef = useRef<any>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(null);\n  const animationRef = useRef<number>();\n\n  const {\n    sourceType = 'url',\n    src = '',\n    rtspUrl = '',\n    isLocalFile = false,\n    fileName = '',\n    objectFit = 'contain',\n    borderEnabled = false,\n    borderStyle = 'solid',\n    borderWidth = 2,\n    borderColor = '#000000',\n    autoplay = false,\n    loop = false,\n    muted = true,\n    controls = false\n  } = widget.properties;\n\n  //    video \n  useEffect(() => {\n    const video = document.createElement('video');\n    video.crossOrigin = 'anonymous';\n    video.loop = loop;\n    video.muted = muted;\n    video.playsInline = true;\n    \n    if (sourceType === 'url' && src) {\n      video.src = src;\n      \n      video.onloadedmetadata = () => {\n        setVideoElement(video);\n        if (autoplay) {\n          video.play().catch(err => {\n            console.log('Autoplay prevented:', err);\n          });\n        }\n      };\n\n      video.onerror = () => {\n        console.error('Failed to load video:', src);\n        setVideoElement(null);\n      };\n    } else {\n      setVideoElement(null);\n    }\n\n    videoRef.current = video;\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      video.pause();\n      video.src = '';\n      video.load();\n    };\n  }, [src, sourceType, autoplay, loop, muted]);\n\n  //     \n  useEffect(() => {\n    if (!videoElement) return;\n\n    const updateCanvas = () => {\n      //   \n      const layer = groupRef.current?.getLayer();\n      if (layer) {\n        layer.batchDraw();\n      }\n      animationRef.current = requestAnimationFrame(updateCanvas);\n    };\n\n    animationRef.current = requestAnimationFrame(updateCanvas);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [videoElement]);\n\n  //  \n  useEffect(() => {\n    if (objectFit !== 'adaptive' || !videoElement) return;\n\n    const { updateWidget } = useEditorStore.getState();\n    const videoRatio = videoElement.videoWidth / videoElement.videoHeight || 16 / 9;\n    const currentRatio = widget.width / widget.height;\n\n    if (Math.abs(videoRatio - currentRatio) > 0.01) {\n      const newHeight = widget.width / videoRatio;\n      \n      updateWidget(widget.id, {\n        height: Math.round(newHeight)\n      });\n    }\n  }, [objectFit, videoElement, widget.width, widget.height, widget.id]);\n\n  //       objectFit\n  const getVideoProps = () => {\n    if (!videoElement || videoElement.videoWidth === 0) return null;\n\n    const { width, height } = widget;\n    const videoRatio = videoElement.videoWidth / videoElement.videoHeight;\n    const widgetRatio = width / height;\n\n    let sx = 0;\n    let sy = 0;\n    let sWidth = videoElement.videoWidth;\n    let sHeight = videoElement.videoHeight;\n    let dx = 0;\n    let dy = 0;\n    let dWidth = width;\n    let dHeight = height;\n\n    switch (objectFit) {\n      case 'cover': {\n        if (videoRatio > widgetRatio) {\n          //   -   \n          sWidth = videoElement.videoHeight * widgetRatio;\n          sx = (videoElement.videoWidth - sWidth) / 2;\n        } else {\n          //   -  /\n          sHeight = videoElement.videoWidth / widgetRatio;\n          sy = (videoElement.videoHeight - sHeight) / 2;\n        }\n        break;\n      }\n      case 'contain': {\n        //    \n        if (videoRatio > widgetRatio) {\n          dHeight = width / videoRatio;\n          dy = (height - dHeight) / 2;\n        } else {\n          dWidth = height * videoRatio;\n          dx = (width - dWidth) / 2;\n        }\n        break;\n      }\n      case 'scale-down': {\n        //  ,    \n        if (videoElement.videoWidth <= width && videoElement.videoHeight <= height) {\n          dWidth = videoElement.videoWidth;\n          dHeight = videoElement.videoHeight;\n          dx = (width - dWidth) / 2;\n          dy = (height - dHeight) / 2;\n        } else {\n          //   contain\n          if (videoRatio > widgetRatio) {\n            dHeight = width / videoRatio;\n            dy = (height - dHeight) / 2;\n          } else {\n            dWidth = height * videoRatio;\n            dx = (width - dWidth) / 2;\n          }\n        }\n        break;\n      }\n      case 'fill':\n      default:\n        //    \n        break;\n    }\n\n    return {\n      crop: { x: sx, y: sy, width: sWidth, height: sHeight },\n      position: { x: dx, y: dy, width: dWidth, height: dHeight }\n    };\n  };\n\n  const videoProps = getVideoProps();\n\n  //  borderStyle  strokeDash\n  const getStrokeDash = (style: string) => {\n    switch (style) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [2, 2];\n      case 'double':\n        return [];\n      default:\n        return [];\n    }\n  };\n\n  const handleTransform = (e: any) => {\n    const node = groupRef.current;\n    if (!node) return;\n\n    onTransformEnd(e);\n  };\n\n  //     \n  const handleClick = (e: any) => {\n    onSelect(e);\n    \n    //   controls,  play/pause\n    if (controls && videoElement) {\n      if (videoElement.paused) {\n        videoElement.play();\n      } else {\n        videoElement.pause();\n      }\n    }\n  };\n\n  const isLocked = widget.locked || false;\n\n  //     (   )\n  const getDisplayText = () => {\n    if (sourceType === 'rtsp' && rtspUrl) {\n      return ` RTSP\\n${rtspUrl.substring(0, 30)}...`;\n    }\n    if (sourceType === 'url' && src) {\n      if (isLocalFile && fileName) {\n        return ` ${fileName}`;\n      }\n      return ` \\n${src.substring(0, 30)}...`;\n    }\n    return ' \\n  ';\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={handleClick}\n      onTap={handleClick}\n      onDragEnd={onDragEnd}\n      onTransformEnd={handleTransform}\n    >\n      {/*      */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={sourceType === 'rtsp' ? '#2c3e50' : '#f39c12'}\n        listening={false}\n      />\n\n      {/*  ( ) */}\n      {videoElement && videoProps ? (\n        <KonvaImage\n          image={videoElement}\n          x={videoProps.position.x}\n          y={videoProps.position.y}\n          width={videoProps.position.width}\n          height={videoProps.position.height}\n          crop={videoProps.crop}\n          listening={false}\n        />\n      ) : (\n        /* - (   ) */\n        <KonvaText\n          text={getDisplayText()}\n          x={0}\n          y={0}\n          width={widget.width}\n          height={widget.height}\n          fontSize={14}\n          fontFamily=\"Arial\"\n          fill=\"#ffffff\"\n          align=\"center\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {sourceType === 'rtsp' && (\n        <Rect\n          x={10}\n          y={10}\n          width={45}\n          height={20}\n          fill=\"#ff0000\"\n          cornerRadius={4}\n          listening={false}\n        />\n      )}\n      \n      {sourceType === 'rtsp' && (\n        <KonvaText\n          text=\"LIVE\"\n          x={10}\n          y={13}\n          width={45}\n          fontSize={12}\n          fontFamily=\"Arial\"\n          fontWeight=\"bold\"\n          fill=\"#ffffff\"\n          align=\"center\"\n          listening={false}\n        />\n      )}\n\n      {videoElement && !videoElement.paused && (\n        <KonvaText\n          text=\"\"\n          x={widget.width - 30}\n          y={10}\n          fontSize={16}\n          fontFamily=\"Arial\"\n          fill=\"#00ff00\"\n          listening={false}\n        />\n      )}\n\n      {controls && videoElement && (\n        <KonvaText\n          text={videoElement.paused ? \" \" : \" \"}\n          x={10}\n          y={widget.height - 30}\n          fontSize={12}\n          fontFamily=\"Arial\"\n          fill=\"#ffffff\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {borderEnabled && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke={borderColor}\n          strokeWidth={borderWidth}\n          dash={getStrokeDash(borderStyle)}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default VideoWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Circle, RegularPolygon, Star, Ellipse, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ShapeWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ShapeWidget: React.FC<ShapeWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n\n  const {\n    shapeType = 'rectangle',\n    fillColor = '#4a90e2',\n    strokeColor = '#2c3e50',\n    strokeWidth = 0,\n    cornerRadius = 0,\n    opacity = 1\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //   \n  const renderShape = () => {\n    const commonProps = {\n      fill: fillColor,\n      stroke: strokeWidth > 0 ? strokeColor : undefined,\n      strokeWidth: strokeWidth,\n      opacity: opacity,\n      listening: false\n    };\n\n    switch (shapeType) {\n      case 'rectangle':\n        return (\n          <Rect\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            cornerRadius={cornerRadius}\n            {...commonProps}\n          />\n        );\n\n      case 'circle':\n        //  -     \n        const radius = Math.min(widget.width, widget.height) / 2;\n        return (\n          <Circle\n            x={widget.width / 2}\n            y={widget.height / 2}\n            radius={radius}\n            {...commonProps}\n          />\n        );\n\n      case 'ellipse':\n        return (\n          <Ellipse\n            x={widget.width / 2}\n            y={widget.height / 2}\n            radiusX={widget.width / 2}\n            radiusY={widget.height / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'triangle':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={3}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'pentagon':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={5}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'hexagon':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={6}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'star':\n        return (\n          <Star\n            x={widget.width / 2}\n            y={widget.height / 2}\n            numPoints={5}\n            innerRadius={Math.min(widget.width, widget.height) / 4}\n            outerRadius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'diamond':\n        //  -    45\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={4}\n            radius={Math.min(widget.width, widget.height) / 2}\n            rotation={45}\n            {...commonProps}\n          />\n        );\n\n      case 'line':\n        return (\n          <Line\n            points={[0, widget.height / 2, widget.width, widget.height / 2]}\n            stroke={strokeColor}\n            strokeWidth={Math.max(strokeWidth, 2)}\n            opacity={opacity}\n            listening={false}\n          />\n        );\n\n      case 'arrow':\n        //  \n        const arrowWidth = widget.width;\n        const arrowHeight = widget.height;\n        const headWidth = arrowHeight * 0.6;\n        const shaftHeight = arrowHeight * 0.4;\n        \n        return (\n          <Line\n            points={[\n              0, arrowHeight / 2 - shaftHeight / 2,  //   \n              arrowWidth - headWidth, arrowHeight / 2 - shaftHeight / 2,  //    \n              arrowWidth - headWidth, 0,  //  \n              arrowWidth, arrowHeight / 2,  //  \n              arrowWidth - headWidth, arrowHeight,  //  \n              arrowWidth - headWidth, arrowHeight / 2 + shaftHeight / 2,  //    \n              0, arrowHeight / 2 + shaftHeight / 2  //   \n            ]}\n            closed\n            fill={fillColor}\n            stroke={strokeWidth > 0 ? strokeColor : undefined}\n            strokeWidth={strokeWidth}\n            opacity={opacity}\n            listening={false}\n          />\n        );\n\n      default:\n        return (\n          <Rect\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            {...commonProps}\n          />\n        );\n    }\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  */}\n      {renderShape()}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ShapeWidget;\n","import React, { useRef, useState } from 'react';\nimport { Group, Rect, Text as KonvaText, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface MenuWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nexport interface MenuItem {\n  id: string;\n  label: string;\n  children?: MenuItem[];\n}\n\nconst MenuWidget: React.FC<MenuWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n  const [expandedItem, setExpandedItem] = useState<string | null>(null);\n\n  const {\n    orientation = 'horizontal',\n    items = [\n      { id: '1', label: '' },\n      { id: '2', label: ' ' },\n      { id: '3', label: '', children: [\n        { id: '3-1', label: ' 1' },\n        { id: '3-2', label: ' 2' }\n      ]},\n      { id: '4', label: '' }\n    ] as MenuItem[],\n    backgroundColor = '#2c3e50',\n    textColor = '#ffffff',\n    hoverColor = '#34495e',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    itemPadding = 16,\n    submenuBackgroundColor = '#34495e',\n    submenuTextColor = '#ffffff',\n    borderWidth = 0,\n    borderColor = '#000000',\n    itemHeight = 40\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n  const isHorizontal = orientation === 'horizontal';\n\n  //    \n  const calculateItemWidth = (label: string) => {\n    //   \n    return label.length * (fontSize * 0.6) + itemPadding * 2;\n  };\n\n  //   \n  const renderHorizontalMenu = () => {\n    const elements: JSX.Element[] = [];\n    let currentX = 0;\n\n    items.forEach((item, index) => {\n      const itemWidth = calculateItemWidth(item.label);\n      const isHovered = hoveredItem === item.id;\n      const isExpanded = expandedItem === item.id;\n      const hasChildren = item.children && item.children.length > 0;\n\n      //   \n      elements.push(\n        <Rect\n          key={`bg-${item.id}`}\n          x={currentX}\n          y={0}\n          width={itemWidth}\n          height={itemHeight}\n          fill={isHovered ? hoverColor : backgroundColor}\n          listening={true}\n          onMouseEnter={() => setHoveredItem(item.id)}\n          onMouseLeave={() => setHoveredItem(null)}\n          onClick={() => {\n            if (hasChildren) {\n              setExpandedItem(expandedItem === item.id ? null : item.id);\n            }\n          }}\n        />\n      );\n\n      //   \n      elements.push(\n        <KonvaText\n          key={`text-${item.id}`}\n          x={currentX}\n          y={0}\n          width={itemWidth}\n          height={itemHeight}\n          text={item.label}\n          fontSize={fontSize}\n          fontFamily={fontFamily}\n          fill={textColor}\n          align=\"center\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      );\n\n      //   ( )\n      if (hasChildren) {\n        elements.push(\n          <KonvaText\n            key={`arrow-${item.id}`}\n            x={currentX + itemWidth - 20}\n            y={0}\n            width={20}\n            height={itemHeight}\n            text=\"\"\n            fontSize={10}\n            fill={textColor}\n            align=\"center\"\n            verticalAlign=\"middle\"\n            listening={false}\n          />\n        );\n      }\n\n      // \n      if (index < items.length - 1) {\n        elements.push(\n          <Line\n            key={`divider-${item.id}`}\n            points={[currentX + itemWidth, 5, currentX + itemWidth, itemHeight - 5]}\n            stroke={borderColor}\n            strokeWidth={1}\n            opacity={0.3}\n            listening={false}\n          />\n        );\n      }\n\n      //  ( )\n      if (isExpanded && hasChildren) {\n        item.children!.forEach((child, childIndex) => {\n          const childY = itemHeight + childIndex * itemHeight;\n          const childWidth = Math.max(itemWidth, calculateItemWidth(child.label));\n\n          //  \n          elements.push(\n            <Rect\n              key={`submenu-bg-${child.id}`}\n              x={currentX}\n              y={childY}\n              width={childWidth}\n              height={itemHeight}\n              fill={submenuBackgroundColor}\n              listening={true}\n              onMouseEnter={() => setHoveredItem(child.id)}\n              onMouseLeave={() => setHoveredItem(null)}\n            />\n          );\n\n          //  \n          elements.push(\n            <KonvaText\n              key={`submenu-text-${child.id}`}\n              x={currentX + itemPadding / 2}\n              y={childY}\n              width={childWidth - itemPadding / 2}\n              height={itemHeight}\n              text={child.label}\n              fontSize={fontSize - 2}\n              fontFamily={fontFamily}\n              fill={submenuTextColor}\n              align=\"left\"\n              verticalAlign=\"middle\"\n              listening={false}\n            />\n          );\n        });\n      }\n\n      currentX += itemWidth;\n    });\n\n    return elements;\n  };\n\n  //   \n  const renderVerticalMenu = () => {\n    const elements: JSX.Element[] = [];\n    let currentY = 0;\n    const menuWidth = widget.width;\n\n    items.forEach((item, index) => {\n      const isHovered = hoveredItem === item.id;\n      const isExpanded = expandedItem === item.id;\n      const hasChildren = item.children && item.children.length > 0;\n\n      //   \n      elements.push(\n        <Rect\n          key={`bg-${item.id}`}\n          x={0}\n          y={currentY}\n          width={menuWidth}\n          height={itemHeight}\n          fill={isHovered ? hoverColor : backgroundColor}\n          listening={true}\n          onMouseEnter={() => setHoveredItem(item.id)}\n          onMouseLeave={() => setHoveredItem(null)}\n          onClick={() => {\n            if (hasChildren) {\n              setExpandedItem(expandedItem === item.id ? null : item.id);\n            }\n          }}\n        />\n      );\n\n      //   \n      elements.push(\n        <KonvaText\n          key={`text-${item.id}`}\n          x={itemPadding}\n          y={currentY}\n          width={menuWidth - itemPadding * 2 - (hasChildren ? 20 : 0)}\n          height={itemHeight}\n          text={item.label}\n          fontSize={fontSize}\n          fontFamily={fontFamily}\n          fill={textColor}\n          align=\"left\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      );\n\n      //   (   )\n      if (hasChildren) {\n        elements.push(\n          <KonvaText\n            key={`arrow-${item.id}`}\n            x={menuWidth - 20}\n            y={currentY}\n            width={20}\n            height={itemHeight}\n            text={isExpanded ? \"\" : \"\"}\n            fontSize={10}\n            fill={textColor}\n            align=\"center\"\n            verticalAlign=\"middle\"\n            listening={false}\n          />\n        );\n      }\n\n      currentY += itemHeight;\n\n      // \n      if (index < items.length - 1 && !isExpanded) {\n        elements.push(\n          <Line\n            key={`divider-${item.id}`}\n            points={[10, currentY, menuWidth - 10, currentY]}\n            stroke={borderColor}\n            strokeWidth={1}\n            opacity={0.3}\n            listening={false}\n          />\n        );\n      }\n\n      //  ( )\n      if (isExpanded && hasChildren) {\n        item.children!.forEach((child, childIndex) => {\n          const childIsHovered = hoveredItem === child.id;\n\n          //  \n          elements.push(\n            <Rect\n              key={`submenu-bg-${child.id}`}\n              x={0}\n              y={currentY}\n              width={menuWidth}\n              height={itemHeight}\n              fill={childIsHovered ? hoverColor : submenuBackgroundColor}\n              listening={true}\n              onMouseEnter={() => setHoveredItem(child.id)}\n              onMouseLeave={() => setHoveredItem(null)}\n            />\n          );\n\n          //   \n          elements.push(\n            <KonvaText\n              key={`submenu-text-${child.id}`}\n              x={itemPadding * 2}\n              y={currentY}\n              width={menuWidth - itemPadding * 3}\n              height={itemHeight}\n              text={child.label}\n              fontSize={fontSize - 2}\n              fontFamily={fontFamily}\n              fill={submenuTextColor}\n              align=\"left\"\n              verticalAlign=\"middle\"\n              listening={false}\n            />\n          );\n\n          currentY += itemHeight;\n        });\n\n        //   \n        if (index < items.length - 1) {\n          elements.push(\n            <Line\n              key={`divider-after-${item.id}`}\n              points={[10, currentY, menuWidth - 10, currentY]}\n              stroke={borderColor}\n              strokeWidth={1}\n              opacity={0.3}\n              listening={false}\n            />\n          );\n        }\n      }\n    });\n\n    return elements;\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={backgroundColor}\n        listening={false}\n      />\n\n      {/*  */}\n      {borderWidth > 0 && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke={borderColor}\n          strokeWidth={borderWidth}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {isHorizontal ? renderHorizontalMenu() : renderVerticalMenu()}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default MenuWidget;\n","import React, { useRef, useEffect } from 'react';\nimport { Stage, Layer, Rect, Transformer, Image as KonvaImage, Text, Group } from 'react-konva';\nimport { useEditorStore } from '../stores/editorStore';\nimport ImageWidget from './ImageWidget';\nimport ButtonWidget from './ButtonWidget';\nimport TextWidget from './TextWidget';\nimport VideoWidget from './VideoWidget';\nimport ShapeWidget from './ShapeWidget';\nimport MenuWidget from './MenuWidget';\nimport './Canvas.css';\n\n//   fallback  (    )\nconst WIDGET_COLORS: Record<string, string> = {\n  shape: '#4a90e2',\n  rectangle: '#4a90e2',  //   \n  button: '#2ecc71',\n  text: '#e74c3c',\n  image: '#9b59b6',\n  video: '#f39c12'\n};\n\nconst Canvas: React.FC = () => {\n  const { \n    project, \n    selectedWidgetIds, \n    selectWidget, \n    clearSelection,\n    updateWidget,\n    zoom,\n    gridEnabled,\n    snapToGrid,\n    gridSize,\n    gridLineWidth,\n    gridColor,\n    pendingWidget,\n    addWidgetAtPosition,\n    clearPendingWidget\n  } = useEditorStore();\n\n  const stageRef = useRef<any>(null);\n  const transformerRef = useRef<any>(null);\n\n  //    \n  const snapToGridValue = (value: number): number => {\n    if (!snapToGrid) return value;\n    return Math.round(value / gridSize) * gridSize;\n  };\n\n  //      \n  const dragBoundFunc = (pos: { x: number; y: number }) => {\n    return {\n      x: snapToGridValue(pos.x),\n      y: snapToGridValue(pos.y)\n    };\n  };\n\n  useEffect(() => {\n    if (!transformerRef.current || !project) return;\n\n    const stage = stageRef.current;\n    \n    //      \n    const selectedNodes = selectedWidgetIds\n      .map(id => {\n        const widget = project.widgets.find(w => w.id === id);\n        //   \n        if (widget?.locked) return null;\n        return stage.findOne(`#${id}`);\n      })\n      .filter(Boolean);\n\n    transformerRef.current.nodes(selectedNodes);\n    transformerRef.current.getLayer().batchDraw();\n  }, [selectedWidgetIds, project]);\n\n  if (!project) return null;\n\n  const handleStageClick = (e: any) => {\n    //     -     \n    if (pendingWidget) {\n      const stage = e.target.getStage();\n      const pointerPosition = stage.getPointerPosition();\n      \n      if (pointerPosition) {\n        addWidgetAtPosition(pointerPosition.x, pointerPosition.y);\n      }\n      return;\n    }\n\n    //    Stage     -  \n    const clickedOnEmpty = e.target === e.target.getStage() || \n                          e.target.attrs.id === 'canvas-background';\n    \n    if (clickedOnEmpty) {\n      clearSelection();\n    }\n  };\n\n  const handleWidgetClick = (id: string, e: any) => {\n    e.cancelBubble = true;\n    const isMultiSelect = e.evt.ctrlKey || e.evt.metaKey;\n    selectWidget(id, isMultiSelect);\n  };\n\n  const handleDragEnd = (id: string, e: any) => {\n    const x = snapToGridValue(e.target.x());\n    const y = snapToGridValue(e.target.y());\n\n    updateWidget(id, { x, y });\n  };\n\n  const handleTransformEnd = (id: string, e: any) => {\n    const node = e.target;\n    const scaleX = node.scaleX();\n    const scaleY = node.scaleY();\n\n    //  scale     \n    node.scaleX(1);\n    node.scaleY(1);\n\n    //  Group   width/height  attrs\n    const nodeWidth = node.width ? node.width() : node.attrs.width || 100;\n    const nodeHeight = node.height ? node.height() : node.attrs.height || 100;\n\n    let width = Math.max(10, nodeWidth * scaleX);\n    let height = Math.max(10, nodeHeight * scaleY);\n    let x = node.x();\n    let y = node.y();\n\n    //   \n    if (snapToGrid) {\n      width = snapToGridValue(width);\n      height = snapToGridValue(height);\n      x = snapToGridValue(x);\n      y = snapToGridValue(y);\n    }\n\n    updateWidget(id, {\n      x,\n      y,\n      width,\n      height,\n      rotation: node.rotation()\n    });\n  };\n\n  //  \n  const renderGrid = () => {\n    if (!gridEnabled) return null;\n\n    const lines = [];\n    const { width, height } = project.canvas;\n\n    //  \n    for (let i = 0; i <= width / gridSize; i++) {\n      lines.push(\n        <Rect\n          key={`v-${i}`}\n          x={i * gridSize}\n          y={0}\n          width={gridLineWidth}\n          height={height}\n          fill={gridColor}\n        />\n      );\n    }\n\n    //  \n    for (let i = 0; i <= height / gridSize; i++) {\n      lines.push(\n        <Rect\n          key={`h-${i}`}\n          x={0}\n          y={i * gridSize}\n          width={width}\n          height={gridLineWidth}\n          fill={gridColor}\n        />\n      );\n    }\n\n    return lines;\n  };\n\n  return (\n    <div className=\"canvas-container\">\n      <div className=\"canvas-scroll\">\n        <div \n          className=\"canvas-wrapper\"\n          style={{\n            transform: `scale(${zoom})`,\n            transformOrigin: 'top left',\n            cursor: pendingWidget ? 'crosshair' : 'default'\n          }}\n        >\n          <Stage\n            ref={stageRef}\n            width={project.canvas.width}\n            height={project.canvas.height}\n            onClick={handleStageClick}\n            onTap={handleStageClick}\n          >\n            <Layer>\n              {/*   */}\n              <Rect\n                id=\"canvas-background\"\n                x={0}\n                y={0}\n                width={project.canvas.width}\n                height={project.canvas.height}\n                fill={project.canvas.backgroundColor || '#ffffff'}\n              />\n              \n              {/*  */}\n              {renderGrid()}\n\n              {/*  */}\n              {project.widgets\n                .slice()\n                .sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0))\n                .map(widget => {\n                const isLocked = widget.locked || false;\n                \n                //    ImageWidget\n                if (widget.type === 'image') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ImageWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    ButtonWidget\n                if (widget.type === 'button') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ButtonWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    TextWidget\n                if (widget.type === 'text') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <TextWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    VideoWidget\n                if (widget.type === 'video') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <VideoWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    ShapeWidget\n                if (widget.type === 'shape' || widget.type === 'rectangle') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ShapeWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    MenuWidget\n                if (widget.type === 'menu') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <MenuWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    -  Rect (fallback)\n                return (\n                  <React.Fragment key={widget.id}>\n                    <Rect\n                      id={widget.id}\n                      x={widget.x}\n                      y={widget.y}\n                      width={widget.width}\n                      height={widget.height}\n                      rotation={widget.rotation || 0}\n                      fill={WIDGET_COLORS[widget.type] || '#4a90e2'}\n                      stroke={selectedWidgetIds.includes(widget.id) ? '#007acc' : undefined}\n                      strokeWidth={selectedWidgetIds.includes(widget.id) ? 2 : 0}\n                      opacity={isLocked ? 0.6 : 1}\n                      draggable={!isLocked}\n                      onClick={(e) => handleWidgetClick(widget.id, e)}\n                      onTap={(e) => handleWidgetClick(widget.id, e)}\n                      onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                      onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                    />\n                    {/*      */}\n                    {isLocked && (\n                      <Text\n                        x={widget.x + 5}\n                        y={widget.y + 5}\n                        text=\"\"\n                        fontSize={16}\n                        listening={false}\n                      />\n                    )}\n                  </React.Fragment>\n                );\n              })}\n\n              {/* Transformer     */}\n              <Transformer\n                ref={transformerRef}\n                boundBoxFunc={(oldBox, newBox) => {\n                  //   10x10\n                  if (newBox.width < 10 || newBox.height < 10) {\n                    return oldBox;\n                  }\n                  return newBox;\n                }}\n              />\n            </Layer>\n          </Stage>\n        </div>\n      </div>\n\n      <div className=\"canvas-info\">\n        <span>\n          {project.canvas.width}  {project.canvas.height} px\n        </span>\n        {selectedWidgetIds.length > 0 && (\n          <span>\n            : {selectedWidgetIds.length}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from 'react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { Eye, EyeOff, Lock, Unlock, Trash2 } from 'lucide-react';\nimport './OutlinePanel.css';\n\nconst OutlinePanel: React.FC = () => {\n  const { project, selectedWidgetIds, selectWidget, updateWidget, deleteWidget } = useEditorStore();\n\n  if (!project) return null;\n\n  //     \n  const getWidgetIcon = (type: string): string => {\n    const icons: Record<string, string> = {\n      shape: '',\n      rectangle: '',\n      text: '',\n      button: '',\n      image: '',\n      video: '',\n      menu: ''\n    };\n    return icons[type] || '';\n  };\n\n  //   \n  const getWidgetLabel = (widget: any): string => {\n    if (widget.properties.text) {\n      const text = widget.properties.text.substring(0, 20);\n      return text.length < widget.properties.text.length ? `${text}...` : text;\n    }\n    if (widget.properties.items) {\n      return ` (${widget.properties.items.length} )`;\n    }\n    return widget.type.charAt(0).toUpperCase() + widget.type.slice(1);\n  };\n\n  //    z-index\n  const sortedWidgets = [...project.widgets].sort((a, b) => {\n    return (b.zIndex || 0) - (a.zIndex || 0);\n  });\n\n  return (\n    <div className=\"outline-panel\">\n      <div className=\"outline-header\">\n        <h3></h3>\n        <span className=\"outline-count\">{project.widgets.length} </span>\n      </div>\n\n      <div className=\"outline-list\">\n        {sortedWidgets.length === 0 ? (\n          <div className=\"outline-empty\">\n            <p> </p>\n            <span>   </span>\n          </div>\n        ) : (\n          sortedWidgets.map((widget) => {\n            const isSelected = selectedWidgetIds.includes(widget.id);\n            const isLocked = widget.locked || false;\n\n            return (\n              <div\n                key={widget.id}\n                className={`outline-item ${isSelected ? 'selected' : ''} ${isLocked ? 'locked' : ''}`}\n                onClick={() => selectWidget(widget.id, false)}\n              >\n                <div className=\"outline-item-main\">\n                  <span className=\"outline-icon\">{getWidgetIcon(widget.type)}</span>\n                  <div className=\"outline-info\">\n                    <span className=\"outline-label\">{getWidgetLabel(widget)}</span>\n                    <span className=\"outline-meta\">\n                      {widget.width}{widget.height}  z:{widget.zIndex || 0}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"outline-actions\" onClick={(e) => e.stopPropagation()}>\n                  {/*  -    */}\n                  {/* <button\n                    className=\"outline-action-btn\"\n                    title=\"\"\n                  >\n                    <Eye size={14} />\n                  </button> */}\n\n                  {/*  */}\n                  <button\n                    className=\"outline-action-btn\"\n                    onClick={() => {\n                      updateWidget(widget.id, { locked: !isLocked });\n                    }}\n                    title={isLocked ? '' : ''}\n                  >\n                    {isLocked ? <Lock size={14} /> : <Unlock size={14} />}\n                  </button>\n\n                  {/*  */}\n                  <button\n                    className=\"outline-action-btn delete\"\n                    onClick={() => {\n                      if (window.confirm(`  \"${getWidgetLabel(widget)}\"?`)) {\n                        deleteWidget(widget.id);\n                      }\n                    }}\n                    title=\"\"\n                  >\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OutlinePanel;\n","import React from 'react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { Square, Type, Image, Video, MousePointer, Menu } from 'lucide-react';\nimport OutlinePanel from './OutlinePanel';\nimport './WidgetLibrary.css';\n\nconst WidgetLibrary: React.FC = () => {\n  const { addWidget, project } = useEditorStore();\n\n  const widgetTypes = [\n    {\n      type: 'shape',\n      name: '',\n      icon: Square,\n      defaultProps: {\n        shapeType: 'rectangle',\n        fillColor: '#4a90e2',\n        strokeColor: '#2c3e50',\n        strokeWidth: 0,\n        cornerRadius: 0,\n        opacity: 1\n      }\n    },\n    {\n      type: 'button',\n      name: '',\n      icon: MousePointer,\n      defaultProps: {\n        text: ' ',\n        backgroundColor: '#4a90e2',\n        textColor: '#ffffff'\n      }\n    },\n    {\n      type: 'text',\n      name: '',\n      icon: Type,\n      defaultProps: {\n        text: ' ',\n        fontSize: 24,\n        color: '#000000'\n      }\n    },\n    {\n      type: 'image',\n      name: '',\n      icon: Image,\n      defaultProps: {\n        src: ''\n      }\n    },\n    {\n      type: 'video',\n      name: '',\n      icon: Video,\n      defaultProps: {\n        src: '',\n        autoplay: false,\n        loop: false\n      }\n    },\n    {\n      type: 'menu',\n      name: '',\n      icon: Menu,\n      defaultProps: {\n        orientation: 'horizontal',\n        items: [\n          { id: '1', label: '' },\n          { id: '2', label: ' ' },\n          { id: '3', label: '', children: [\n            { id: '3-1', label: ' 1' },\n            { id: '3-2', label: ' 2' }\n          ]},\n          { id: '4', label: '' }\n        ],\n        backgroundColor: '#2c3e50',\n        textColor: '#ffffff',\n        hoverColor: '#34495e',\n        fontSize: 16,\n        fontFamily: 'Arial',\n        itemPadding: 16,\n        submenuBackgroundColor: '#34495e',\n        submenuTextColor: '#ffffff',\n        borderWidth: 0,\n        borderColor: '#000000',\n        itemHeight: 40\n      }\n    }\n  ];\n\n  const handleAddWidget = (type: string, defaultProps: any) => {\n    if (!project) return;\n\n    const { setPendingWidget } = useEditorStore.getState();\n    setPendingWidget(type, defaultProps);\n  };\n\n  return (\n    <div className=\"widget-library panel\">\n      <div className=\"widget-library-header\">\n        <h3></h3>\n      </div>\n      <div className=\"widget-library-content\">\n        {widgetTypes.map(widgetType => {\n          const Icon = widgetType.icon;\n          return (\n            <button\n              key={widgetType.type}\n              className=\"widget-item\"\n              onClick={() => handleAddWidget(widgetType.type, widgetType.defaultProps)}\n              title={` ${widgetType.name}`}\n            >\n              <Icon size={24} />\n              <span>{widgetType.name}</span>\n            </button>\n          );\n        })}\n      </div>\n      <div className=\"widget-library-footer\">\n        <button className=\"btn-secondary\" style={{ width: '100%', fontSize: '12px' }}>\n          +  \n        </button>\n      </div>\n\n      {/*     */}\n      <OutlinePanel />\n    </div>\n  );\n};\n\nexport default WidgetLibrary;\n","import React from 'react';\nimport { WidgetAction } from '../types';\nimport { Widget } from '../types';\nimport './ActionEditor.css';\n\ninterface ActionEditorProps {\n  widget: Widget;\n  onUpdate: (actions: WidgetAction[]) => void;\n  allWidgets: Widget[];\n}\n\nconst ActionEditor: React.FC<ActionEditorProps> = ({ widget, onUpdate, allWidgets }) => {\n  const actions = widget.properties.actions || [];\n\n  const addAction = () => {\n    const newAction: WidgetAction = {\n      type: 'url',\n      url: ''\n    };\n    onUpdate([...actions, newAction]);\n  };\n\n  const updateAction = (index: number, updates: Partial<WidgetAction>) => {\n    const newActions = [...actions];\n    newActions[index] = { ...newActions[index], ...updates };\n    onUpdate(newActions);\n  };\n\n  const removeAction = (index: number) => {\n    const newActions = actions.filter((_, i) => i !== index);\n    onUpdate(newActions);\n  };\n\n  const getActionTypeLabel = (type: string) => {\n    const labels: Record<string, string> = {\n      url: '  URL',\n      page: '   ',\n      popup: '  popup',\n      widget_show: '  ',\n      widget_hide: '  ',\n      video_play: '  ',\n      video_stop: '  '\n    };\n    return labels[type] || type;\n  };\n\n  return (\n    <div className=\"action-editor\">\n      <h4 style={{ marginBottom: '12px', fontSize: '12px', color: '#aaa' }}>\n          \n      </h4>\n\n      {actions.length === 0 && (\n        <div style={{ \n          padding: '16px', \n          background: '#252525', \n          borderRadius: '6px',\n          textAlign: 'center',\n          color: '#888',\n          fontSize: '13px',\n          marginBottom: '12px'\n        }}>\n           .   .\n        </div>\n      )}\n\n      {actions.map((action, index) => (\n        <div key={index} className=\"action-item\">\n          <div className=\"action-header\">\n            <span className=\"action-number\">#{index + 1}</span>\n            <button\n              className=\"btn-danger-small\"\n              onClick={() => removeAction(index)}\n              title=\" \"\n            >\n              \n            </button>\n          </div>\n\n          <div className=\"action-body\">\n            {/*   */}\n            <div className=\"property-field\">\n              <label> </label>\n              <select\n                value={action.type}\n                onChange={(e) => updateAction(index, { type: e.target.value as any })}\n              >\n                <option value=\"url\">  URL</option>\n                <option value=\"page\">   </option>\n                <option value=\"popup\">  popup</option>\n                <option value=\"widget_show\">  </option>\n                <option value=\"widget_hide\">  </option>\n                <option value=\"video_play\">  </option>\n                <option value=\"video_stop\">  </option>\n              </select>\n            </div>\n\n            {/*  URL */}\n            {action.type === 'url' && (\n              <>\n                <div className=\"property-field\">\n                  <label>URL </label>\n                  <input\n                    type=\"text\"\n                    value={action.url || ''}\n                    onChange={(e) => updateAction(index, { url: e.target.value })}\n                    placeholder=\"https://example.com\"\n                  />\n                </div>\n                <div className=\"property-field\">\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      checked={action.openInNewTab || false}\n                      onChange={(e) => updateAction(index, { openInNewTab: e.target.checked })}\n                    />\n                       \n                  </label>\n                </div>\n              </>\n            )}\n\n            {/*   */}\n            {action.type === 'page' && (\n              <div className=\"property-field\">\n                <label>ID </label>\n                <input\n                  type=\"text\"\n                  value={action.pageId || ''}\n                  onChange={(e) => updateAction(index, { pageId: e.target.value })}\n                  placeholder=\"page-1\"\n                />\n                <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                   ID   \n                </div>\n              </div>\n            )}\n\n            {/*  popup */}\n            {action.type === 'popup' && (\n              <>\n                <div className=\"property-field\">\n                  <label> popup</label>\n                  <input\n                    type=\"text\"\n                    value={action.popupTitle || ''}\n                    onChange={(e) => updateAction(index, { popupTitle: e.target.value })}\n                    placeholder=\"\"\n                  />\n                </div>\n                <div className=\"property-field\">\n                  <label> popup</label>\n                  <textarea\n                    value={action.popupContent || ''}\n                    onChange={(e) => updateAction(index, { popupContent: e.target.value })}\n                    rows={4}\n                    placeholder=\" ...\"\n                  />\n                </div>\n                <div style={{ display: 'flex', gap: '12px' }}>\n                  <div className=\"property-field\" style={{ flex: 1 }}>\n                    <label> (px)</label>\n                    <input\n                      type=\"number\"\n                      value={action.popupWidth || 400}\n                      onChange={(e) => updateAction(index, { popupWidth: parseInt(e.target.value) })}\n                      min={200}\n                      max={1000}\n                    />\n                  </div>\n                  <div className=\"property-field\" style={{ flex: 1 }}>\n                    <label> (px)</label>\n                    <input\n                      type=\"number\"\n                      value={action.popupHeight || 300}\n                      onChange={(e) => updateAction(index, { popupHeight: parseInt(e.target.value) })}\n                      min={150}\n                      max={800}\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n\n            {/*  /  */}\n            {(action.type === 'widget_show' || action.type === 'widget_hide') && (\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={action.targetWidgetId || ''}\n                  onChange={(e) => updateAction(index, { targetWidgetId: e.target.value })}\n                >\n                  <option value=\"\"> ...</option>\n                  {allWidgets\n                    .filter(w => w.id !== widget.id)\n                    .map(w => (\n                      <option key={w.id} value={w.id}>\n                        {w.type} - {w.id}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            )}\n\n            {/*    */}\n            {(action.type === 'video_play' || action.type === 'video_stop') && (\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={action.targetWidgetId || ''}\n                  onChange={(e) => updateAction(index, { targetWidgetId: e.target.value })}\n                >\n                  <option value=\"\"> ...</option>\n                  {allWidgets\n                    .filter(w => w.type === 'video')\n                    .map(w => (\n                      <option key={w.id} value={w.id}>\n                        Video - {w.id}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            )}\n          </div>\n        </div>\n      ))}\n\n      <button\n        className=\"btn-secondary\"\n        onClick={addAction}\n        style={{ width: '100%', marginTop: '8px' }}\n      >\n          \n      </button>\n    </div>\n  );\n};\n\nexport default ActionEditor;\n","import React from 'react';\nimport { apiClient } from '../services/api-client';\nimport { useEditorStore } from '../stores/editorStore';\nimport ActionEditor from './ActionEditor';\nimport './PropertiesPanel.css';\n\nconst PropertiesPanel: React.FC = () => {\n  const { project, selectedWidgetIds, updateWidget } = useEditorStore();\n\n  if (!project) return null;\n\n  const selectedWidget = selectedWidgetIds.length === 1 \n    ? project.widgets.find(w => w.id === selectedWidgetIds[0])\n    : null;\n\n  const handlePropertyChange = (key: string, value: any) => {\n    if (!selectedWidget) return;\n    updateWidget(selectedWidget.id, { [key]: value });\n  };\n\n  const handlePropertiesChange = (key: string, value: any) => {\n    if (!selectedWidget) return;\n    updateWidget(selectedWidget.id, {\n      properties: {\n        ...selectedWidget.properties,\n        [key]: value\n      }\n    });\n  };\n\n  if (!selectedWidget) {\n    return (\n      <div className=\"properties-panel panel\">\n        <div className=\"properties-header\">\n          <h3></h3>\n        </div>\n        <div className=\"properties-empty\">\n          <p>   </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"properties-panel panel\">\n      <div className=\"properties-header\">\n        <h3></h3>\n        <span className=\"widget-type-badge\">{selectedWidget.type}</span>\n      </div>\n\n      <div className=\"properties-content\">\n        {/*   */}\n        <div className=\"property-section\">\n          <h4>  </h4>\n          \n          <div className=\"property-row\">\n            <div className=\"property-field\">\n              <label>X</label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.x)}\n                onChange={(e) => handlePropertyChange('x', parseFloat(e.target.value))}\n              />\n            </div>\n            <div className=\"property-field\">\n              <label>Y</label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.y)}\n                onChange={(e) => handlePropertyChange('y', parseFloat(e.target.value))}\n              />\n            </div>\n          </div>\n\n          <div className=\"property-row\">\n            <div className=\"property-field\">\n              <label></label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.width)}\n                onChange={(e) => handlePropertyChange('width', parseFloat(e.target.value))}\n                min={1}\n              />\n            </div>\n            <div className=\"property-field\">\n              <label></label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.height)}\n                onChange={(e) => handlePropertyChange('height', parseFloat(e.target.value))}\n                min={1}\n              />\n            </div>\n          </div>\n\n          <div className=\"property-field\">\n            <label> ()</label>\n            <input\n              type=\"number\"\n              value={Math.round(selectedWidget.rotation || 0)}\n              onChange={(e) => handlePropertyChange('rotation', parseFloat(e.target.value))}\n            />\n          </div>\n\n          <div className=\"property-field\">\n            <label>Z-Index ()</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              value={selectedWidget.zIndex || 0}\n              onChange={(e) => handlePropertyChange('zIndex', Math.max(0, parseInt(e.target.value) || 0))}\n            />\n            <div style={{ marginTop: '8px', display: 'flex', gap: '4px' }}>\n              <button\n                className=\"btn-secondary\"\n                onClick={() => {\n                  // const { bringToFront } = useEditorStore.getState();\n// bringToFront(selectedWidget.id);\n                }}\n                style={{ flex: 1, fontSize: '11px', padding: '4px' }}\n                title=\"  \"\n              >\n                 \n              </button>\n              <button\n                className=\"btn-secondary\"\n                onClick={() => {\n                  // const { sendToBack } = useEditorStore.getState();\n// sendToBack(selectedWidget.id);\n                }}\n                style={{ flex: 1, fontSize: '11px', padding: '4px' }}\n                title=\"  \"\n              >\n                 \n              </button>\n            </div>\n          </div>\n\n          <div className=\"property-field\" style={{ marginTop: '12px' }}>\n            <button\n              className={selectedWidget.locked ? 'btn-danger' : 'btn-secondary'}\n              onClick={() => {\n                // const { toggleLockWidget } = useEditorStore.getState();\n                // toggleLockWidget(selectedWidget.id);\n              }}\n              style={{ width: '100%' }}\n            >\n              {selectedWidget.locked ? ' ' : ' '}\n            </button>\n            {selectedWidget.locked && (\n              <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                      \n              </div>\n            )}\n          </div>\n        </div>\n\n        {/*    */}\n        <div className=\"property-section\">\n          <h4> </h4>\n          \n          {selectedWidget.type === 'shape' && (\n            <>\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.shapeType || 'rectangle'}\n                  onChange={(e) => handlePropertiesChange('shapeType', e.target.value)}\n                >\n                  <option value=\"rectangle\"></option>\n                  <option value=\"circle\"></option>\n                  <option value=\"ellipse\"></option>\n                  <option value=\"triangle\"></option>\n                  <option value=\"pentagon\"></option>\n                  <option value=\"hexagon\"></option>\n                  <option value=\"star\"></option>\n                  <option value=\"diamond\"></option>\n                  <option value=\"line\"></option>\n                  <option value=\"arrow\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.fillColor || '#4a90e2'}\n                  onChange={(e) => handlePropertiesChange('fillColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <input\n                  type=\"range\"\n                  value={(selectedWidget.properties.opacity || 1) * 100}\n                  onChange={(e) => handlePropertiesChange('opacity', parseInt(e.target.value) / 100)}\n                  min={0}\n                  max={100}\n                />\n                <span style={{ fontSize: '11px', color: '#888' }}>\n                  {Math.round((selectedWidget.properties.opacity || 1) * 100)}%\n                </span>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.strokeWidth || 0}\n                  onChange={(e) => handlePropertiesChange('strokeWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={20}\n                />\n              </div>\n\n              {selectedWidget.properties.strokeWidth > 0 && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"color\"\n                    value={selectedWidget.properties.strokeColor || '#2c3e50'}\n                    onChange={(e) => handlePropertiesChange('strokeColor', e.target.value)}\n                  />\n                </div>\n              )}\n\n              {selectedWidget.properties.shapeType === 'rectangle' && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"number\"\n                    value={selectedWidget.properties.cornerRadius || 0}\n                    onChange={(e) => handlePropertiesChange('cornerRadius', parseInt(e.target.value))}\n                    min={0}\n                    max={100}\n                  />\n                </div>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'button' && (\n            <>\n              {/*   */}\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  onChange={(e) => {\n                    const styleName = e.target.value;\n                    if (styleName === 'custom') return;\n                    \n                    //  \n                    import('../utils/buttonStyles').then(({ buttonStyles }) => {\n                      const style = buttonStyles.find(s => s.name === styleName);\n                      if (style) {\n                        updateWidget(selectedWidget.id, {\n                          properties: {\n                            ...selectedWidget.properties,\n                            ...style.properties\n                          }\n                        });\n                      }\n                    });\n                  }}\n                >\n                  <option value=\"custom\"></option>\n                  <option value=\" \"> </option>\n                  <option value=\"\"> (  )</option>\n                  <option value=\"\"> ()</option>\n                  <option value=\"\"> ()</option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"text\"\n                  value={selectedWidget.properties.text || 'Button'}\n                  onChange={(e) => handlePropertiesChange('text', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={8}\n                  max={72}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Courier New\">Courier New</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontWeight || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontWeight', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"bold\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.textAlign || 'center'}\n                  onChange={(e) => handlePropertiesChange('textAlign', e.target.value)}\n                >\n                  <option value=\"left\">  </option>\n                  <option value=\"center\"> </option>\n                  <option value=\"right\">  </option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#2ecc71'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderRadius || 8}\n                  onChange={(e) => handlePropertiesChange('borderRadius', parseInt(e.target.value))}\n                  min={0}\n                  max={50}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderWidth || 0}\n                  onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={10}\n                />\n              </div>\n\n              {selectedWidget.properties.borderWidth > 0 && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                    </select>\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.shadowEnabled || false}\n                    onChange={(e) => handlePropertiesChange('shadowEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.shadowEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.shadowColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('shadowColor', e.target.value)}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label></label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.shadowBlur || 10}\n                      onChange={(e) => handlePropertiesChange('shadowBlur', parseInt(e.target.value))}\n                      min={0}\n                      max={50}\n                    />\n                  </div>\n\n                  <div className=\"property-row\">\n                    <div className=\"property-field\">\n                      <label> X</label>\n                      <input\n                        type=\"number\"\n                        value={selectedWidget.properties.shadowOffsetX || 0}\n                        onChange={(e) => handlePropertiesChange('shadowOffsetX', parseInt(e.target.value))}\n                        min={-50}\n                        max={50}\n                      />\n                    </div>\n                    <div className=\"property-field\">\n                      <label> Y</label>\n                      <input\n                        type=\"number\"\n                        value={selectedWidget.properties.shadowOffsetY || 4}\n                        onChange={(e) => handlePropertiesChange('shadowOffsetY', parseInt(e.target.value))}\n                        min={-50}\n                        max={50}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label></label>\n                    <input\n                      type=\"range\"\n                      value={(selectedWidget.properties.shadowOpacity || 0.3) * 100}\n                      onChange={(e) => handlePropertiesChange('shadowOpacity', parseInt(e.target.value) / 100)}\n                      min={0}\n                      max={100}\n                    />\n                    <span style={{ fontSize: '11px', color: '#888' }}>\n                      {Math.round((selectedWidget.properties.shadowOpacity || 0.3) * 100)}%\n                    </span>\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <ActionEditor\n                widget={selectedWidget}\n                onUpdate={(actions) => {\n                  updateWidget(selectedWidget.id, {\n                    properties: {\n                      ...selectedWidget.properties,\n                      actions\n                    }\n                  });\n                }}\n                allWidgets={project.widgets}\n              />\n            </>\n          )}\n\n          {selectedWidget.type === 'text' && (\n            <>\n              <div className=\"property-field\">\n                <label></label>\n                <textarea\n                  value={selectedWidget.properties.text || 'Text'}\n                  onChange={(e) => handlePropertiesChange('text', e.target.value)}\n                  rows={6}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"file\"\n                  accept=\".txt,.pdf,.odt,.docx\"\n                  onChange={async (e) => {\n                    const file = e.target.files?.[0];\n                    if (file) {\n                      try {\n                        //   \n                        const { extractTextFromFile, loadRequiredLibraries } = await import('../utils/fileTextExtractor');\n                        \n                        //    \n                        loadRequiredLibraries();\n                        \n                        //   \n                        handlePropertiesChange('text', ' ...');\n                        \n                        //  \n                        const text = await extractTextFromFile(file);\n                        \n                        //  \n                        updateWidget(selectedWidget.id, {\n                          properties: {\n                            ...selectedWidget.properties,\n                            text: text,\n                            sourceFile: file.name\n                          }\n                        });\n                      } catch (error) {\n                        console.error('Error loading file:', error);\n                        alert(`: ${error instanceof Error ? error.message : '   '}`);\n                        handlePropertiesChange('text', 'Text');\n                      }\n                    }\n                    e.target.value = '';\n                  }}\n                />\n                <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                  : TXT, PDF, ODT, DOCX\n                </div>\n                {selectedWidget.properties.sourceFile && (\n                  <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                     {selectedWidget.properties.sourceFile}\n                  </div>\n                )}\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={8}\n                  max={144}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Courier New\">Courier New</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                  <option value=\"Comic Sans MS\">Comic Sans MS</option>\n                  <option value=\"Impact\">Impact</option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontWeight || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontWeight', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"bold\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontStyle || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontStyle', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"italic\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.textDecoration || 'none'}\n                  onChange={(e) => handlePropertiesChange('textDecoration', e.target.value)}\n                >\n                  <option value=\"none\"></option>\n                  <option value=\"underline\"></option>\n                  <option value=\"line-through\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.textAlign || 'left'}\n                  onChange={(e) => handlePropertiesChange('textAlign', e.target.value)}\n                >\n                  <option value=\"left\">  </option>\n                  <option value=\"center\"> </option>\n                  <option value=\"right\">  </option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.verticalAlign || 'top'}\n                  onChange={(e) => handlePropertiesChange('verticalAlign', e.target.value)}\n                >\n                  <option value=\"top\"></option>\n                  <option value=\"middle\"> </option>\n                  <option value=\"bottom\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}>  </h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#000000'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n                <label style={{ marginTop: '4px', fontSize: '11px' }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.backgroundColor === 'transparent'}\n                    onChange={(e) => handlePropertiesChange('backgroundColor', e.target.checked ? 'transparent' : '#ffffff')}\n                  />\n                   \n                </label>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.lineHeight || 1.2}\n                  onChange={(e) => handlePropertiesChange('lineHeight', parseFloat(e.target.value))}\n                  min={0.5}\n                  max={3}\n                  step={0.1}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.padding || 8}\n                  onChange={(e) => handlePropertiesChange('padding', parseInt(e.target.value))}\n                  min={0}\n                  max={50}\n                />\n              </div>\n            </>\n          )}\n\n          {selectedWidget.type === 'image' && (\n            <>\n              <h4 style={{ marginTop: '0', marginBottom: '12px', fontSize: '13px', fontWeight: 'bold' }}></h4>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"imageMode\"\n                    checked={!selectedWidget.properties.galleryMode}\n                    onChange={() => handlePropertiesChange('galleryMode', false)}\n                  />\n                  {' '} \n                </label>\n              </div>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"imageMode\"\n                    checked={selectedWidget.properties.galleryMode || false}\n                    onChange={() => {\n                      handlePropertiesChange('galleryMode', true);\n                      //  sources   \n                      if (!selectedWidget.properties.sources) {\n                        handlePropertiesChange('sources', []);\n                      }\n                    }}\n                  />\n                  {' '} \n                </label>\n              </div>\n\n              {!selectedWidget.properties.galleryMode && (\n                <>\n                  <div className=\"property-field\">\n                    <label>URL </label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.src || ''}\n                      onChange={(e) => handlePropertiesChange('src', e.target.value)}\n                      placeholder=\"https://example.com/image.jpg\"\n                    />\n                  </div>\n                  \n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                          const reader = new FileReader();\n                          reader.onload = (event) => {\n                            const result = event.target?.result as string;\n                            if (result) {\n                              updateWidget(selectedWidget.id, {\n                                properties: {\n                                  ...selectedWidget.properties,\n                                  src: result,\n                                  isLocalFile: true,\n                                  fileName: file.name\n                                }\n                              });\n                            }\n                          };\n                          reader.readAsDataURL(file);\n                        }\n                        e.target.value = '';\n                      }}\n                    />\n                    {selectedWidget.properties.isLocalFile && selectedWidget.properties.fileName && (\n                      <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                         {selectedWidget.properties.fileName}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n\n              {selectedWidget.properties.galleryMode && (\n                <>\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> (. 50)</h4>\n                  \n                  <div style={{ \n                    maxHeight: '200px', \n                    overflowY: 'auto', \n                    border: '1px solid #ddd', \n                    borderRadius: '4px',\n                    padding: '8px',\n                    marginBottom: '8px',\n                    backgroundColor: '#fafafa'\n                  }}>\n                    {(selectedWidget.properties.sources || []).map((source: any, index: number) => (\n                      <div key={source.id} style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        marginBottom: '6px',\n                        padding: '6px',\n                        backgroundColor: '#fff',\n                        borderRadius: '4px',\n                        border: '1px solid #e0e0e0'\n                      }}>\n                        <span style={{ fontSize: '11px', color: '#666', minWidth: '20px' }}>\n                          {index + 1}.\n                        </span>\n                        <span style={{ fontSize: '11px', color: source.type === 'url' ? '#007acc' : '#2ecc71' }}>\n                          {source.type === 'url' ? '' : ''}\n                        </span>\n                        <span style={{ \n                          flex: 1, \n                          fontSize: '11px', \n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap'\n                        }}>\n                          {source.value.length > 40 ? source.value.substring(0, 40) + '...' : source.value}\n                        </span>\n                        <button\n                          onClick={() => {\n                            const newSources = (selectedWidget.properties.sources || []).filter((_: any, i: number) => i !== index);\n                            handlePropertiesChange('sources', newSources);\n                          }}\n                          style={{\n                            padding: '2px 6px',\n                            fontSize: '10px',\n                            border: 'none',\n                            background: '#e74c3c',\n                            color: '#fff',\n                            borderRadius: '3px',\n                            cursor: 'pointer'\n                          }}\n                        >\n                          \n                        </button>\n                      </div>\n                    ))}\n                    \n                    {(!selectedWidget.properties.sources || selectedWidget.properties.sources.length === 0) && (\n                      <div style={{ textAlign: 'center', color: '#999', fontSize: '11px', padding: '20px' }}>\n                           \n                      </div>\n                    )}\n                  </div>\n\n                  <div style={{ display: 'flex', gap: '8px', marginBottom: '8px' }}>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      multiple\n                      id={`gallery-upload-${selectedWidget.id}`}\n                      style={{ display: 'none' }}\n                      onChange={(e) => {\n                        const files = Array.from(e.target.files || []);\n                        const currentSources = selectedWidget.properties.sources || [];\n                        \n                        if (currentSources.length + files.length > 50) {\n                          alert(' 50   ');\n                          e.target.value = '';\n                          return;\n                        }\n\n                        let loadedCount = 0;\n                        const newSources: any[] = [];\n\n                        files.forEach(file => {\n                          const reader = new FileReader();\n                          reader.onload = (event) => {\n                            const result = event.target?.result as string;\n                            if (result) {\n                              newSources.push({\n                                id: `img-${Date.now()}-${Math.random()}`,\n                                type: 'local',\n                                value: result\n                              });\n                            }\n                            loadedCount++;\n                            \n                            if (loadedCount === files.length) {\n                              handlePropertiesChange('sources', [...currentSources, ...newSources]);\n                            }\n                          };\n                          reader.readAsDataURL(file);\n                        });\n\n                        e.target.value = '';\n                      }}\n                    />\n                    <button\n                      onClick={() => {\n                        document.getElementById(`gallery-upload-${selectedWidget.id}`)?.click();\n                      }}\n                      className=\"btn-secondary\"\n                      style={{ flex: 1, fontSize: '11px', padding: '6px' }}\n                    >\n                        \n                    </button>\n                    \n                    <button\n                      onClick={() => {\n                        const url = prompt(' URL :');\n                        if (url) {\n                          const currentSources = selectedWidget.properties.sources || [];\n                          if (currentSources.length >= 50) {\n                            alert(' 50   ');\n                            return;\n                          }\n                          handlePropertiesChange('sources', [\n                            ...currentSources,\n                            {\n                              id: `img-${Date.now()}-${Math.random()}`,\n                              type: 'url',\n                              value: url\n                            }\n                          ]);\n                        }\n                      }}\n                      className=\"btn-secondary\"\n                      style={{ flex: 1, fontSize: '11px', padding: '6px' }}\n                    >\n                        URL\n                    </button>\n                  </div>\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n                  \n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.autoSwitch || false}\n                        onChange={(e) => handlePropertiesChange('autoSwitch', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  {selectedWidget.properties.autoSwitch && (\n                    <>\n                      <div className=\"property-field\">\n                        <label> ()</label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"60\"\n                          value={selectedWidget.properties.switchInterval || 3}\n                          onChange={(e) => handlePropertiesChange('switchInterval', parseInt(e.target.value) || 3)}\n                        />\n                      </div>\n                    </>\n                  )}\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n                  \n                  <div className=\"property-field\">\n                    <label></label>\n                    <select\n                      value={selectedWidget.properties.transition || 'fade'}\n                      onChange={(e) => handlePropertiesChange('transition', e.target.value)}\n                    >\n                      <option value=\"none\"> ()</option>\n                      <option value=\"fade\"></option>\n                      <option value=\"slide\"></option>\n                      <option value=\"zoom\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> ()</label>\n                    <input\n                      type=\"number\"\n                      min=\"100\"\n                      max=\"2000\"\n                      step=\"100\"\n                      value={selectedWidget.properties.transitionDuration || 500}\n                      onChange={(e) => handlePropertiesChange('transitionDuration', parseInt(e.target.value) || 500)}\n                    />\n                  </div>\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n                  \n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.showControls !== false}\n                        onChange={(e) => handlePropertiesChange('showControls', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.showIndicators !== false}\n                        onChange={(e) => handlePropertiesChange('showIndicators', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.loop !== false}\n                        onChange={(e) => handlePropertiesChange('loop', e.target.checked)}\n                      />\n                      {' '}\n                    </label>\n                  </div>\n                </>\n              )}\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.objectFit || 'contain'}\n                  onChange={(e) => handlePropertiesChange('objectFit', e.target.value)}\n                >\n                  <option value=\"contain\"> ()</option>\n                  <option value=\"cover\">  </option>\n                  <option value=\"fill\"></option>\n                  <option value=\"scale-down\"> </option>\n                  <option value=\"adaptive\"> ( )</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n              \n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.clipShape || 'rectangle'}\n                  onChange={(e) => handlePropertiesChange('clipShape', e.target.value)}\n                >\n                  <option value=\"rectangle\"> </option>\n                  <option value=\"circle\"> </option>\n                  <option value=\"ellipse\"> </option>\n                  <option value=\"triangle\"> </option>\n                  <option value=\"diamond\"> </option>\n                  <option value=\"pentagon\"> </option>\n                  <option value=\"hexagon\"> </option>\n                  <option value=\"octagon\"> </option>\n                  <option value=\"rounded-rectangle\">  </option>\n                </select>\n              </div>\n\n              {selectedWidget.properties.clipShape === 'rounded-rectangle' && (\n                <div className=\"property-field\">\n                  <label>  (px)</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={selectedWidget.properties.cornerRadius || 20}\n                    onChange={(e) => handlePropertiesChange('cornerRadius', parseInt(e.target.value) || 20)}\n                  />\n                </div>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.borderEnabled || false}\n                    onChange={(e) => handlePropertiesChange('borderEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.borderEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                      <option value=\"double\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>  (px)</label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.borderWidth || 2}\n                      onChange={(e) => handlePropertiesChange('borderWidth', parseFloat(e.target.value))}\n                      min={1}\n                      max={20}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n                </>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'video' && (\n            <>\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.sourceType || 'url'}\n                  onChange={(e) => handlePropertiesChange('sourceType', e.target.value)}\n                >\n                  <option value=\"url\">URL / </option>\n                  <option value=\"rtsp\">RTSP </option>\n                </select>\n              </div>\n\n              {selectedWidget.properties.sourceType === 'rtsp' ? (\n                <>\n                  <div className=\"property-field\">\n                    <label>RTSP URL</label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.rtspUrl || ''}\n                      onChange={(e) => handlePropertiesChange('rtspUrl', e.target.value)}\n                      placeholder=\"rtsp://username:password@host:554/stream\"\n                    />\n                    <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                      : rtsp://admin:12345@192.168.1.100:554/live\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <>\n                  <div className=\"property-field\">\n                    <label>URL </label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.src || ''}\n                      onChange={(e) => handlePropertiesChange('src', e.target.value)}\n                      placeholder=\"https://example.com/video.mp4\"\n                    />\n                  </div>\n                  \n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"file\"\n                      accept=\"video/*\"\n\t\t\t\t\t  onChange={async (e) => {\n\t\t\t\t\t    const file = e.target.files?.[0];\n\t\t\t\t\t    if (file) {\n\t\t\t\t\t\t  const maxSize = 500 * 1024 * 1024; // 500 MB\n\t\t\t\t\t\t   if (file.size > maxSize) {\n\t\t\t\t\t\t     alert('   !  500 MB');\n\t\t\t\t\t\t     e.target.value = '';\n\t\t\t\t\t\t    return;\n\t\t\t\t\t\t   }\n\t\t\t\t\t\t\n\t\t\t\t\t\t   try {\n\t\t\t\t\t\t     console.log(`   (${(file.size / (1024 * 1024)).toFixed(1)} MB)...`);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     if (!project?.id) {\n\t\t\t\t\t\t\t   alert('     ');\n\t\t\t\t\t\t\t   e.target.value = '';\n\t\t\t\t\t\t\t   return;\n\t\t\t\t\t\t     }\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     const result = await apiClient.uploadFile(project.id, file);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     if (result) {\n\t\t\t\t\t\t\t    updateWidget(selectedWidget.id, {\n\t\t\t\t\t\t\t    properties: {\n\t\t\t\t\t\t\t\t   ...selectedWidget.properties,\n\t\t\t\t\t\t\t\t   src: result.url,\n\t\t\t\t\t\t\t\t   isLocalFile: false,\n\t\t\t\t\t\t\t\t   fileName: file.name\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t   });\n\t\t\t\t\t\t\t   alert('    !');\n\t\t\t\t\t\t     }\n\t\t\t\t\t\t   } catch (error: any) {\n\t\t\t\t\t\t     console.error('Upload error:', error);\n\t\t\t\t\t\t     alert('  : ' + error.message);\n\t\t\t\t\t\t   }\n\t\t\t\t\t\t\n   \t\t\t\t\t\t   e.target.value = '';\n\t\t\t\t\t    }\n\t\t\t\t\t}}\n                    />\n                    {selectedWidget.properties.isLocalFile && selectedWidget.properties.fileName && (\n                      <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                         {selectedWidget.properties.fileName}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.objectFit || 'contain'}\n                  onChange={(e) => handlePropertiesChange('objectFit', e.target.value)}\n                >\n                  <option value=\"contain\"> ()</option>\n                  <option value=\"cover\">  </option>\n                  <option value=\"fill\"></option>\n                  <option value=\"scale-down\"> </option>\n                  <option value=\"adaptive\"> ( )</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.autoplay || false}\n                    onChange={(e) => handlePropertiesChange('autoplay', e.target.checked)}\n                  />\n                  \n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.loop || false}\n                    onChange={(e) => handlePropertiesChange('loop', e.target.checked)}\n                  />\n                   (loop)\n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.muted !== false}\n                    onChange={(e) => handlePropertiesChange('muted', e.target.checked)}\n                  />\n                    (muted)\n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.controls !== false}\n                    onChange={(e) => handlePropertiesChange('controls', e.target.checked)}\n                  />\n                    \n                </label>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.borderEnabled || false}\n                    onChange={(e) => handlePropertiesChange('borderEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.borderEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                      <option value=\"double\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.borderWidth || 2}\n                      onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                      min={1}\n                      max={20}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n                </>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'menu' && (\n            <>\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.orientation || 'horizontal'}\n                  onChange={(e) => handlePropertiesChange('orientation', e.target.value)}\n                >\n                  <option value=\"horizontal\"></option>\n                  <option value=\"vertical\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#2c3e50'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.hoverColor || '#34495e'}\n                  onChange={(e) => handlePropertiesChange('hoverColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={10}\n                  max={32}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.itemHeight || 40}\n                  onChange={(e) => handlePropertiesChange('itemHeight', parseInt(e.target.value))}\n                  min={30}\n                  max={100}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.itemPadding || 16}\n                  onChange={(e) => handlePropertiesChange('itemPadding', parseInt(e.target.value))}\n                  min={8}\n                  max={40}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.submenuBackgroundColor || '#34495e'}\n                  onChange={(e) => handlePropertiesChange('submenuBackgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.submenuTextColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('submenuTextColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderWidth || 0}\n                  onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={10}\n                />\n              </div>\n\n              {selectedWidget.properties.borderWidth > 0 && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"color\"\n                    value={selectedWidget.properties.borderColor || '#000000'}\n                    onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                  />\n                </div>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n\n              <div className=\"property-field\">\n                <button\n                  className=\"btn-secondary\"\n                  onClick={() => {\n                    const items = selectedWidget.properties.items || [];\n                    const newItem = {\n                      id: `item-${Date.now()}`,\n                      label: ' '\n                    };\n                    updateWidget(selectedWidget.id, {\n                      properties: {\n                        ...selectedWidget.properties,\n                        items: [...items, newItem]\n                      }\n                    });\n                  }}\n                  style={{ width: '100%' }}\n                >\n                    \n                </button>\n              </div>\n\n              <div style={{ maxHeight: '300px', overflowY: 'auto' }}>\n                {(selectedWidget.properties.items || []).map((item: any, index: number) => (\n                  <div\n                    key={item.id}\n                    style={{\n                      background: '#252525',\n                      padding: '12px',\n                      marginBottom: '8px',\n                      borderRadius: '6px',\n                      border: '1px solid #333'\n                    }}\n                  >\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\n                      <strong style={{ fontSize: '12px', color: '#aaa' }}> {index + 1}</strong>\n                      <button\n                        className=\"btn-danger\"\n                        onClick={() => {\n                          const items = selectedWidget.properties.items || [];\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items: items.filter((i: any) => i.id !== item.id)\n                            }\n                          });\n                        }}\n                        style={{ fontSize: '11px', padding: '4px 8px' }}\n                      >\n                         \n                      </button>\n                    </div>\n\n                    <div className=\"property-field\">\n                      <label></label>\n                      <input\n                        type=\"text\"\n                        value={item.label}\n                        onChange={(e) => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          items[index] = { ...items[index], label: e.target.value };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                      />\n                    </div>\n\n                    {/*    */}\n                    <div style={{ marginTop: '12px' }}>\n                      <div style={{ fontSize: '11px', color: '#888', marginBottom: '8px' }}>\n                          \n                      </div>\n                      <ActionEditor\n                        widget={{ ...selectedWidget, id: item.id, properties: item }}\n                        onUpdate={(actions) => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          items[index] = { ...items[index], actions };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                        allWidgets={project.widgets}\n                      />\n                    </div>\n\n                    {/*  */}\n                    <div style={{ marginTop: '12px', paddingLeft: '12px', borderLeft: '2px solid #444' }}>\n                      <div style={{ fontSize: '11px', color: '#888', marginBottom: '8px' }}>\n                        \n                      </div>\n\n                      <button\n                        className=\"btn-secondary\"\n                        onClick={() => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          const children = items[index].children || [];\n                          items[index] = {\n                            ...items[index],\n                            children: [...children, {\n                              id: `subitem-${Date.now()}`,\n                              label: ''\n                            }]\n                          };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                        style={{ width: '100%', fontSize: '11px', padding: '6px', marginBottom: '8px' }}\n                      >\n                          \n                      </button>\n\n                      {(item.children || []).map((child: any, childIndex: number) => (\n                        <div\n                          key={child.id}\n                          style={{\n                            background: '#1e1e1e',\n                            padding: '8px',\n                            marginBottom: '6px',\n                            borderRadius: '4px',\n                            border: '1px solid #2a2a2a'\n                          }}\n                        >\n                          <div style={{ display: 'flex', gap: '6px', alignItems: 'center' }}>\n                            <input\n                              type=\"text\"\n                              value={child.label}\n                              onChange={(e) => {\n                                const items = [...(selectedWidget.properties.items || [])];\n                                const children = [...(items[index].children || [])];\n                                children[childIndex] = { ...children[childIndex], label: e.target.value };\n                                items[index] = { ...items[index], children };\n                                updateWidget(selectedWidget.id, {\n                                  properties: {\n                                    ...selectedWidget.properties,\n                                    items\n                                  }\n                                });\n                              }}\n                              style={{ flex: 1, fontSize: '12px', padding: '4px 8px' }}\n                            />\n                            <button\n                              className=\"btn-danger\"\n                              onClick={() => {\n                                const items = [...(selectedWidget.properties.items || [])];\n                                const children = items[index].children?.filter((c: any) => c.id !== child.id) || [];\n                                items[index] = { ...items[index], children };\n                                updateWidget(selectedWidget.id, {\n                                  properties: {\n                                    ...selectedWidget.properties,\n                                    items\n                                  }\n                                });\n                              }}\n                              style={{ fontSize: '11px', padding: '4px 8px' }}\n                            >\n                              \n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* ID  */}\n        <div className=\"property-section\">\n          <div className=\"property-field\">\n            <label>ID</label>\n            <input\n              type=\"text\"\n              value={selectedWidget.id}\n              disabled\n              style={{ opacity: 0.5, cursor: 'not-allowed' }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PropertiesPanel;\n","/**\n * Editor Component - \n *      \n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { InactivityWarning } from './InactivityWarning';\nimport { useEditorStore } from '../stores/editorStore';\nimport Toolbar from './Toolbar';\nimport Canvas from './Canvas';\nimport WidgetLibrary from './WidgetLibrary';\nimport PropertiesPanel from './PropertiesPanel';\nimport './Editor.css';\n\nconst Editor: React.FC = () => {\n  const navigate = useNavigate();\n  const [authRefresh, setAuthRefresh] = useState(0);\n  \n  const {\n    project,\n    restoreProject,\n    selectedWidgetIds,\n    copy,\n    paste,\n    cut,\n    deleteWidget,\n    undo,\n    redo\n  } = useEditorStore();\n\n  // Keyboard shortcuts\n\n  //      \n  useEffect(() => {\n    const restoreLastProject = async () => {\n      console.log('[Editor] Checking for project to restore...');\n      const restored = await restoreProject();\n      if (restored) {\n        console.log('[Editor] Project restored successfully');\n      } else {\n        console.log('[Editor] No project to restore');\n      }\n    };\n\n    restoreLastProject();\n  }, []); //    \n\n  //     \n  useEffect(() => {\n    const handleLogout = (event: Event) => {\n      const customEvent = event as CustomEvent;\n      const reason = customEvent.detail?.reason || 'unknown';\n      \n      console.log('[Editor] Logout event received, reason:', reason);\n      \n      //        \n      if (reason === 'inactivity') {\n        sessionStorage.setItem('kiosk_logout_reason', 'inactivity');\n      }\n      \n      //    \n      navigate('/login', { replace: true });\n    };\n\n    const handleUnauthorized = () => {\n      console.log('[Editor] Unauthorized event received');\n      sessionStorage.setItem('kiosk_logout_reason', 'session_expired');\n      navigate('/login', { replace: true });\n    };\n\n    window.addEventListener('auth:logout', handleLogout);\n    window.addEventListener('auth:unauthorized', handleUnauthorized);\n\n    return () => {\n      window.removeEventListener('auth:logout', handleLogout);\n      window.removeEventListener('auth:unauthorized', handleUnauthorized);\n    };\n  }, [navigate]);\n\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl/Cmd + Z - Undo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\n        e.preventDefault();\n        undo();\n      }\n      // Ctrl/Cmd + Shift + Z - Redo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && e.shiftKey) {\n        e.preventDefault();\n        redo();\n      }\n      // Ctrl/Cmd + C - Copy\n      if ((e.ctrlKey || e.metaKey) && e.key === 'c') {\n        e.preventDefault();\n        copy();\n      }\n      // Ctrl/Cmd + V - Paste\n      if ((e.ctrlKey || e.metaKey) && e.key === 'v') {\n        e.preventDefault();\n        paste();\n      }\n      // Ctrl/Cmd + X - Cut\n      if ((e.ctrlKey || e.metaKey) && e.key === 'x') {\n        e.preventDefault();\n        cut();\n      }\n      // Delete -   \n      if (e.key === 'Delete') {\n        e.preventDefault();\n        selectedWidgetIds.forEach(id => deleteWidget(id));\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  //      UI\n  useEffect(() => {\n    const handleLogin = () => {\n      setAuthRefresh(prev => prev + 1);\n    };\n    \n    window.addEventListener('auth:login', handleLogin);\n    return () => window.removeEventListener('auth:login', handleLogin);\n  }, []);\n\n  return (\n    <div className=\"editor\">\n      <InactivityWarning />\n      <Toolbar />\n      <div className=\"editor-main\">\n        <WidgetLibrary />\n        <Canvas />\n        <PropertiesPanel />\n      </div>\n    </div>\n  );\n};\n\nexport default Editor;\n","/**\n * Protected Route -  \n *      \n */\n\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { apiClient } from '../../services/api-client';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const isAuthenticated = apiClient.isAuthenticated();\n  \n  if (!isAuthenticated) {\n    console.log('[ProtectedRoute] Not authenticated, redirecting to /login');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n","/**\n * App Component -    \n */\n\nimport React from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport LoginPage from './pages/LoginPage';\nimport PreviewPage from './pages/PreviewPage';\nimport Editor from './components/Editor';\nimport ProtectedRoute from './components/auth/ProtectedRoute';\n\nconst App: React.FC = () => {\n  console.log('[App.tsx] App component rendering with Router');\n  return (\n    <BrowserRouter>\n      <Routes>\n        {/*   ->    */}\n        <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n        \n        {/*   */}\n        <Route path=\"/login\" element={<LoginPage />} />\n        \n        {/*  ( ) */}\n        <Route \n          path=\"/editor\" \n          element={\n            <ProtectedRoute>\n              <Editor />\n            </ProtectedRoute>\n          } \n        />\n        \n        {/*    ->    */}\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n        <Route path=\"/preview\" element={<PreviewPage />} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\ntry {\n  const root = document.getElementById('root');\n  \n  if (!root) {\n    throw new Error('Root element not found');\n  }\n\n  ReactDOM.createRoot(root).render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n  );\n} catch (error) {\n  console.error('Failed to mount React app:', error);\n  \n  //   \n  document.body.innerHTML = `\n    <div style=\"\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100vh;\n      background: #1e1e1e;\n      color: #ff6b6b;\n      font-family: Arial, sans-serif;\n      padding: 20px;\n    \">\n      <div style=\"text-align: center; max-width: 600px;\">\n        <h1>   </h1>\n        <p style=\"color: #cccccc;\">   (F12)  .</p>\n        <pre style=\"\n          text-align: left;\n          background: #2a2a2a;\n          padding: 15px;\n          border-radius: 5px;\n          overflow-x: auto;\n          color: #ff6b6b;\n        \">${error}</pre>\n        <button onclick=\"location.reload()\" style=\"\n          margin-top: 20px;\n          padding: 10px 20px;\n          background: #4a90e2;\n          color: white;\n          border: none;\n          border-radius: 5px;\n          cursor: pointer;\n          font-size: 14px;\n        \">\n           \n        </button>\n      </div>\n    </div>\n  `;\n}\n"],"file":"index-0F-Ru_uO.js"}