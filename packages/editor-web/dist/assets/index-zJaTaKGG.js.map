{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","children","rest","ref","createElement","tag","attrs","createLucideIcon$1","AlertCircle","Check","Cloud","FolderOpen","Grid","Image","Key","Loader","Lock","LogOut","Magnet","Menu","MousePointer","Play","Plus","Redo2","Save","Search","Square","Trash2","Type","Undo2","Unlock","User","Video","X","ZoomIn","ZoomOut","Logger","level","message","details","entry","logger","ApiClient","stored","data","lastActivity","timeSinceActivity","error","token","organizationName","plan","licenseKey","response","event","filters","params","query","url","id","projectId","file","onProgress","formData","resolve","reject","xhr","progress","fileId","endpoint","options","headers","errorData","apiClient","LoginPage","navigate","useNavigate","setLicenseKey","useState","isLoading","setIsLoading","setError","useEffect","reason","setLogoutMessage","logoutMessage","formatLicenseKey","value","handleInputChange","formatted","handleSubmit","err","handlePaste","pasted","jsxs","jsx","Fragment","InactivityWarning","visible","setVisible","countdown","setCountdown","handleWarning","handleLogout","handleActivity","events","interval","prev","minutes","seconds","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","createStore","React","is","x","y","objectIs","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","autoSaveTimer","startAutoSave","saveFunction","stopAutoSave","saveCurrentProjectId","getCurrentProjectId","useEditorStore","set","get","name","canvas","localProject","serverProject","project","isSaving","updates","widget","type","defaultProps","pendingWidget","snapToGrid","gridSize","finalX","finalY","defaultSize","width","height","_","__","cleanProps","w","wId","newWidget","addToSelection","selectedWidgetIds","history","previous","newPast","next","newFuture","selectedWidgets","clipboard","newWidgets","zoom","AutoSaveIndicator","lastSaved","saveError","status","formatLastSaved","date","diff","renderContent","CreateProjectDialog","onClose","onSuccess","setName","description","setDescription","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","creating","setCreating","createProject","presets","preset","i","ProjectsDialog","onProjectLoaded","projects","setProjects","loading","setLoading","searchQuery","setSearchQuery","showCreateDialog","setShowCreateDialog","loadProject","loadProjects","handleOpenProject","handleDeleteProject","handleProjectCreated","filteredProjects","Toolbar","gridEnabled","undo","redo","setZoom","toggleGrid","toggleSnapToGrid","saveProject","setOrganizationName","setPlan","showProjectsDialog","setShowProjectsDialog","orgData","handleZoomIn","handleZoomOut","canUndo","canRedo","ClippedImage","image","imageRef","clipShape","cornerRadius","opacity","node","ctx","centerX","centerY","radius","drawPolygon","angle","r","drawRoundedRect","imgRatio","widgetRatio","sx","sy","sw","sh","dx","dy","dw","dh","clippedImage","KonvaImage","sides","px","py","ImageGallery","isSelected","onSelect","onDragEnd","onTransformEnd","dragBoundFunc","groupRef","images","setImages","currentIndex","setCurrentIndex","isTransitioning","setIsTransitioning","timerRef","sources","autoSwitch","switchInterval","transition","loop","loadedImages","loadCount","source","img","isLocked","currentSource","currentImage","Group","Rect","ImageWidget","setImage","updateWidget","currentRatio","newHeight","imageProps","objectFit","cropX","cropY","cropWidth","cropHeight","borderEnabled","borderStyle","borderWidth","borderColor","getStrokeDash","style","handleTransform","ButtonWidget","textRef","text","backgroundColor","textColor","fontSize","fontFamily","fontWeight","fontStyle","textAlign","borderRadius","paddingX","paddingY","shadowEnabled","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","getDash","Text","TextWidget","verticalAlign","lineHeight","padding","textDecoration","getTextDecoration","VideoPlaylist","autoNext","VideoWidget","videoRef","videoElement","setVideoElement","animationRef","sourceType","src","rtspUrl","isLocalFile","fileName","autoplay","muted","controls","video","updateCanvas","layer","videoRatio","videoProps","sWidth","sHeight","dWidth","dHeight","handleClick","getDisplayText","KonvaText","ShapeWidget","shapeType","fillColor","strokeColor","renderShape","commonProps","Circle","Ellipse","RegularPolygon","Star","Line","arrowWidth","arrowHeight","headWidth","shaftHeight","MenuWidget","hoveredItem","setHoveredItem","expandedItem","setExpandedItem","orientation","items","hoverColor","itemPadding","submenuBackgroundColor","submenuTextColor","itemHeight","isHorizontal","calculateItemWidth","label","renderHorizontalMenu","elements","currentX","item","index","itemWidth","isHovered","isExpanded","hasChildren","child","childIndex","childY","childWidth","renderVerticalMenu","currentY","menuWidth","childIsHovered","WIDGET_COLORS","Canvas","selectWidget","clearSelection","gridLineWidth","gridColor","addWidgetAtPosition","clearPendingWidget","stageRef","transformerRef","snapToGridValue","pos","stage","selectedNodes","handleStageClick","pointerPosition","handleWidgetClick","isMultiSelect","handleDragEnd","handleTransformEnd","scaleX","scaleY","nodeWidth","nodeHeight","renderGrid","lines","Stage","Layer","Transformer","oldBox","newBox","OutlinePanel","deleteWidget","getWidgetIcon","getWidgetLabel","sortedWidgets","WidgetLibrary","addWidget","widgetTypes","handleAddWidget","setPendingWidget","widgetType","Icon","ActionEditor","onUpdate","allWidgets","actions","addAction","newAction","updateAction","newActions","removeAction","action","PropertiesPanel","selectedWidget","handlePropertyChange","key","handlePropertiesChange","styleName","__vitePreload","buttonStyles","s","extractTextFromFile","loadRequiredLibraries","reader","result","newSources","files","currentSources","loadedCount","newItem","Editor","authRefresh","setAuthRefresh","restoreProject","copy","paste","cut","restored","handleUnauthorized","handleKeyDown","handleLogin","ProtectedRoute","Navigate","App","BrowserRouter","Routes","Route","root","ReactDOM"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,37,38,39,40,41,42],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.mjs","../../node_modules/lucide-react/dist/esm/createLucideIcon.mjs","../../node_modules/lucide-react/dist/esm/icons/alert-circle.mjs","../../node_modules/lucide-react/dist/esm/icons/check.mjs","../../node_modules/lucide-react/dist/esm/icons/cloud.mjs","../../node_modules/lucide-react/dist/esm/icons/folder-open.mjs","../../node_modules/lucide-react/dist/esm/icons/grid.mjs","../../node_modules/lucide-react/dist/esm/icons/image.mjs","../../node_modules/lucide-react/dist/esm/icons/key.mjs","../../node_modules/lucide-react/dist/esm/icons/loader.mjs","../../node_modules/lucide-react/dist/esm/icons/lock.mjs","../../node_modules/lucide-react/dist/esm/icons/log-out.mjs","../../node_modules/lucide-react/dist/esm/icons/magnet.mjs","../../node_modules/lucide-react/dist/esm/icons/menu.mjs","../../node_modules/lucide-react/dist/esm/icons/mouse-pointer.mjs","../../node_modules/lucide-react/dist/esm/icons/play.mjs","../../node_modules/lucide-react/dist/esm/icons/plus.mjs","../../node_modules/lucide-react/dist/esm/icons/redo-2.mjs","../../node_modules/lucide-react/dist/esm/icons/save.mjs","../../node_modules/lucide-react/dist/esm/icons/search.mjs","../../node_modules/lucide-react/dist/esm/icons/square.mjs","../../node_modules/lucide-react/dist/esm/icons/trash-2.mjs","../../node_modules/lucide-react/dist/esm/icons/type.mjs","../../node_modules/lucide-react/dist/esm/icons/undo-2.mjs","../../node_modules/lucide-react/dist/esm/icons/unlock.mjs","../../node_modules/lucide-react/dist/esm/icons/user.mjs","../../node_modules/lucide-react/dist/esm/icons/video.mjs","../../node_modules/lucide-react/dist/esm/icons/x.mjs","../../node_modules/lucide-react/dist/esm/icons/zoom-in.mjs","../../node_modules/lucide-react/dist/esm/icons/zoom-out.mjs","../../src/utils/logger.ts","../../src/services/api-client.ts","../../src/pages/LoginPage.tsx","../../src/components/InactivityWarning.tsx","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../src/stores/editorStore.ts","../../src/components/AutoSaveIndicator.tsx","../../src/components/CreateProjectDialog.tsx","../../src/components/ProjectsDialog.tsx","../../src/components/Toolbar.tsx","../../src/components/ClippedImage.tsx","../../src/components/ImageGallery.tsx","../../src/components/ImageWidget.tsx","../../src/components/ButtonWidget.tsx","../../src/components/TextWidget.tsx","../../src/components/VideoPlaylist.tsx","../../src/components/VideoWidget.tsx","../../src/components/ShapeWidget.tsx","../../src/components/MenuWidget.tsx","../../src/components/Canvas.tsx","../../src/components/OutlinePanel.tsx","../../src/components/WidgetLibrary.tsx","../../src/components/ActionEditor.tsx","../../src/components/PropertiesPanel.tsx","../../src/components/Editor.tsx","../../src/components/auth/ProtectedRoute.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.mjs';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\nvar createLucideIcon$1 = createLucideIcon;\n\nexport { createLucideIcon$1 as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Check = createLucideIcon(\"Check\", [\n  [\"polyline\", { points: \"20 6 9 17 4 12\", key: \"10jjfj\" }]\n]);\n\nexport { Check as default };\n//# sourceMappingURL=check.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Cloud = createLucideIcon(\"Cloud\", [\n  [\n    \"path\",\n    { d: \"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z\", key: \"p7xjir\" }\n  ]\n]);\n\nexport { Cloud as default };\n//# sourceMappingURL=cloud.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst FolderOpen = createLucideIcon(\"FolderOpen\", [\n  [\n    \"path\",\n    {\n      d: \"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2\",\n      key: \"1nmvlm\"\n    }\n  ]\n]);\n\nexport { FolderOpen as default };\n//# sourceMappingURL=folder-open.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Grid = createLucideIcon(\"Grid\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"3\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1m3agn\"\n    }\n  ],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"9\", y2: \"9\", key: \"1vqk6q\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"15\", y2: \"15\", key: \"o2sbyz\" }],\n  [\"line\", { x1: \"9\", x2: \"9\", y1: \"3\", y2: \"21\", key: \"13tij5\" }],\n  [\"line\", { x1: \"15\", x2: \"15\", y1: \"3\", y2: \"21\", key: \"1hpv9i\" }]\n]);\n\nexport { Grid as default };\n//# sourceMappingURL=grid.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Image = createLucideIcon(\"Image\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"3\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1m3agn\"\n    }\n  ],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Key = createLucideIcon(\"Key\", [\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"path\", { d: \"m15.5 7.5 3 3L22 7l-3-3\", key: \"1rn1fs\" }]\n]);\n\nexport { Key as default };\n//# sourceMappingURL=key.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\n    \"line\",\n    { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst LogOut = createLucideIcon(\"LogOut\", [\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }],\n  [\"polyline\", { points: \"16 17 21 12 16 7\", key: \"1gabdz\" }],\n  [\"line\", { x1: \"21\", x2: \"9\", y1: \"12\", y2: \"12\", key: \"1uyos4\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Magnet = createLucideIcon(\"Magnet\", [\n  [\n    \"path\",\n    {\n      d: \"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15\",\n      key: \"1i3lhw\"\n    }\n  ],\n  [\"path\", { d: \"m5 8 4 4\", key: \"j6kj7e\" }],\n  [\"path\", { d: \"m12 15 4 4\", key: \"lnac28\" }]\n]);\n\nexport { Magnet as default };\n//# sourceMappingURL=magnet.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst MousePointer = createLucideIcon(\"MousePointer\", [\n  [\"path\", { d: \"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z\", key: \"y2ucgo\" }],\n  [\"path\", { d: \"m13 13 6 6\", key: \"1nhxnf\" }]\n]);\n\nexport { MousePointer as default };\n//# sourceMappingURL=mouse-pointer.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Redo2 = createLucideIcon(\"Redo2\", [\n  [\"path\", { d: \"m15 14 5-5-5-5\", key: \"12vg1m\" }],\n  [\n    \"path\",\n    {\n      d: \"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13\",\n      key: \"19mnr4\"\n    }\n  ]\n]);\n\nexport { Redo2 as default };\n//# sourceMappingURL=redo-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\",\n      key: \"1owoqh\"\n    }\n  ],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\n    \"rect\",\n    { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }\n  ]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Type = createLucideIcon(\"Type\", [\n  [\"polyline\", { points: \"4 7 4 4 20 4 20 7\", key: \"1nosan\" }],\n  [\"line\", { x1: \"9\", x2: \"15\", y1: \"20\", y2: \"20\", key: \"swin9y\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"4\", y2: \"20\", key: \"1tx1rr\" }]\n]);\n\nexport { Type as default };\n//# sourceMappingURL=type.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Undo2 = createLucideIcon(\"Undo2\", [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\n    \"path\",\n    {\n      d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11\",\n      key: \"llx8ln\"\n    }\n  ]\n]);\n\nexport { Undo2 as default };\n//# sourceMappingURL=undo-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Unlock = createLucideIcon(\"Unlock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { Unlock as default };\n//# sourceMappingURL=unlock.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Video = createLucideIcon(\"Video\", [\n  [\"path\", { d: \"m22 8-6 4 6 4V8Z\", key: \"50v9me\" }],\n  [\n    \"rect\",\n    {\n      width: \"14\",\n      height: \"12\",\n      x: \"2\",\n      y: \"6\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1rqjg6\"\n    }\n  ]\n]);\n\nexport { Video as default };\n//# sourceMappingURL=video.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomIn as default };\n//# sourceMappingURL=zoom-in.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ZoomOut = createLucideIcon(\"ZoomOut\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomOut as default };\n//# sourceMappingURL=zoom-out.mjs.map\n","/**\n * Logger utility     \n */\n\nexport type LogLevel = 'info' | 'warn' | 'error';\n\nexport interface LogEntry {\n  timestamp: string;\n  level: LogLevel;\n  message: string;\n  details?: any;\n}\n\nclass Logger {\n  private logs: LogEntry[] = [];\n  private readonly MAX_LOGS = 100;\n\n  /**\n   *  \n   */\n  log(level: LogLevel, message: string, details?: any): void {\n    const entry: LogEntry = {\n      timestamp: new Date().toISOString(),\n      level,\n      message,\n      details\n    };\n\n    this.logs.push(entry);\n\n    //   \n    if (this.logs.length > this.MAX_LOGS) {\n      this.logs.shift();\n    }\n\n    //   \n    const consoleMethod = level === 'error' ? console.error : level === 'warn' ? console.warn : console.log;\n    consoleMethod(`[${level.toUpperCase()}] ${message}`, details || '');\n  }\n\n  info(message: string, details?: any): void {\n    this.log('info', message, details);\n  }\n\n  warn(message: string, details?: any): void {\n    this.log('warn', message, details);\n  }\n\n  error(message: string, details?: any): void {\n    this.log('error', message, details);\n  }\n\n  /**\n   *   \n   */\n  getLogs(): LogEntry[] {\n    return [...this.logs];\n  }\n\n  /**\n   *  \n   */\n  clear(): void {\n    this.logs = [];\n  }\n\n  /**\n   *    JSON\n   */\n  export(): string {\n    return JSON.stringify(this.logs, null, 2);\n  }\n}\n\nexport const logger = new Logger();\n","/**\n * API Client - Session Management with Activity Tracking\n *    sessionStorage     \n *    30      2 \n */\n\nimport { logger } from '../utils/logger';\n\n// ==================== TYPES ====================\n\nexport interface AuthResponse {\n  success: boolean;\n  token: string;\n  expiresIn: number;\n  license: {\n    licenseKey: string;\n    organizationId: string;\n    organizationName: string;\n    plan: 'BASIC' | 'PRO' | 'MAX';\n    validFrom?: string;\n    validUntil?: string;\n    maxDevices: number;\n    features: string[];\n  };\n  user?: {\n    id: string;\n    email?: string;\n  };\n}\n\nexport interface ProjectResponse {\n  success: boolean;\n  project: Project;\n}\n\nexport interface ProjectsListResponse {\n  success: boolean;\n  projects: Project[];\n  total: number;\n  page: number;\n  limit: number;\n}\n\nexport interface Project {\n  id: string;\n  name: string;\n  description?: string;\n  projectData: any;\n  canvasWidth: number;\n  canvasHeight: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n  isPublished: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ProjectFilters {\n  search?: string;\n  tags?: string[];\n  isPublished?: boolean;\n  page?: number;\n  limit?: number;\n}\n\nexport interface CreateProjectData {\n  name: string;\n  description?: string;\n  projectData?: any;\n  canvasWidth?: number;\n  canvasHeight?: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n}\n\nexport interface UpdateProjectData {\n  name?: string;\n  description?: string;\n  projectData?: any;\n  canvasWidth?: number;\n  canvasHeight?: number;\n  canvasBackground?: string;\n  tags?: string[];\n  thumbnail?: string;\n  isPublished?: boolean;\n}\n\nexport interface ProjectFile {\n  id: string;\n  fileName: string;\n  fileType: string;\n  mimeType: string;\n  fileSize: number;\n  url: string;\n  width?: number;\n  height?: number;\n  duration?: number;\n  createdAt: string;\n}\n\nexport interface StorageStats {\n  used: number;\n  limit: number;\n  remaining: number;\n  usedPercentage: number;\n  totalFiles: number;\n}\n\n// ==================== API CLIENT ====================\n\nclass ApiClient {\n  // ==================== DEBUG CONFIGURATION ====================\n  //  :   true     \n  private readonly DEBUG_MODE = true;\n  private readonly DEBUG_INACTIVITY_MINUTES = 3; //  : 3 \n  \n  // ==================== PRODUCTION CONFIGURATION ====================\n  private baseUrl: string = '';\n  private token: string | null = null;\n  private organizationName: string | null = null;\n  private plan: string | null = null;\n\n  private lastActivity: number = Date.now();\n  private inactivityTimer: NodeJS.Timeout | null = null;\n  private warningTimer: NodeJS.Timeout | null = null;\n  \n  private readonly INACTIVITY_TIMEOUT = this.DEBUG_MODE ? this.DEBUG_INACTIVITY_MINUTES * 60 * 1000 : 30 * 60 * 1000;\n  private readonly WARNING_TIME = this.DEBUG_MODE ? (this.DEBUG_INACTIVITY_MINUTES - 2) * 60 * 1000 : 28 * 60 * 1000;\n\n  constructor() {\n    this.loadToken();\n    this.startActivityMonitoring();\n  }\n\n  // ==================== TOKEN MANAGEMENT ====================\n\n  /**\n   *    sessionStorage\n   */\n  private loadToken(): void {\n    const stored = sessionStorage.getItem('kiosk_auth_token');\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        const lastActivity = data.lastActivityTime || Date.now();\n        const timeSinceActivity = Date.now() - lastActivity;\n\n        //     30    \n        if (timeSinceActivity < this.INACTIVITY_TIMEOUT) {\n          this.token = data.token;\n          this.organizationName = data.organizationName || null;\n          this.plan = data.plan || null;\n          this.lastActivity = Date.now(); //     \n          \n          this.updateActivityTime(); //   sessionStorage\n          \n          logger.info('Token loaded from sessionStorage', {\n            hasToken: !!this.token,\n            organization: this.organizationName,\n            plan: this.plan,\n            inactiveDuration: Math.round(timeSinceActivity / 1000) + 's'\n          });\n        } else {\n          logger.warn('Session expired due to inactivity', {\n            inactiveDuration: Math.round(timeSinceActivity / 1000 / 60) + ' minutes'\n          });\n          this.clearToken();\n        }\n      } catch (error) {\n        logger.error('Failed to parse stored token', error);\n        this.clearToken();\n      }\n    }\n  }\n\n  /**\n   *    sessionStorage\n   */\n  private saveToken(token: string, organizationName: string, plan: string): void {\n    const data = {\n      token,\n      organizationName,\n      plan,\n      lastActivityTime: Date.now(),\n      savedAt: new Date().toISOString()\n    };\n    \n    sessionStorage.setItem('kiosk_auth_token', JSON.stringify(data));\n    sessionStorage.setItem('kiosk_org_data', JSON.stringify({\n      name: organizationName,\n      plan: plan\n    }));\n    \n    this.token = token;\n    this.organizationName = organizationName;\n    this.plan = plan;\n    this.lastActivity = Date.now();\n    \n    logger.info('Token saved to sessionStorage', {\n      organization: organizationName,\n      plan: plan\n    });\n  }\n\n  /**\n   *      sessionStorage\n   */\n  private updateActivityTime(): void {\n    const stored = sessionStorage.getItem('kiosk_auth_token');\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        data.lastActivityTime = Date.now();\n        sessionStorage.setItem('kiosk_auth_token', JSON.stringify(data));\n      } catch (error) {\n        logger.error('Failed to update activity time', error);\n      }\n    }\n  }\n\n  /**\n   *  \n   */\n  private clearToken(): void {\n    sessionStorage.removeItem('kiosk_auth_token');\n    sessionStorage.removeItem('kiosk_org_data');\n    this.token = null;\n    this.organizationName = null;\n    this.plan = null;\n    \n    logger.info('Token cleared from sessionStorage');\n  }\n\n  /**\n   *  \n   */\n  public isAuthenticated(): boolean {\n    return this.token !== null;\n  }\n\n  /**\n   *   \n   */\n  public getToken(): string | null {\n    return this.token;\n  }\n\n  /**\n   *   \n   */\n  public getOrganizationData(): { name: string | null; plan: string | null } {\n    return {\n      name: this.organizationName,\n      plan: this.plan\n    };\n  }\n\n  // ==================== AUTHENTICATION ====================\n\n  /**\n   * POST /api/auth/license\n   *    \n   */\n  public async loginWithLicense(licenseKey: string): Promise<AuthResponse> {\n    logger.info('Attempting login with license key');\n    \n    try {\n      const response = await this.request<AuthResponse>('/api/auth/license', {\n        method: 'POST',\n        body: JSON.stringify({ licenseKey })\n      });\n\n      if (response.token && response.license) {\n        this.saveToken(\n          response.token,\n          response.license.organizationName,\n          response.license.plan\n        );\n        \n        logger.info('Login successful', {\n          organization: response.license.organizationName,\n          plan: response.license.plan\n        });\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('Login failed', error);\n      throw error;\n    }\n  }\n\n  /**\n   * POST /api/auth/refresh\n   *  \n   */\n  public async refreshToken(): Promise<AuthResponse> {\n    logger.info('Refreshing token');\n    \n    try {\n      const response = await this.request<AuthResponse>('/api/auth/refresh', {\n        method: 'POST',\n        authenticated: true\n      });\n\n      if (response.token && response.license) {\n        this.saveToken(\n          response.token,\n          response.license.organizationName,\n          response.license.plan\n        );\n        \n        logger.info('Token refreshed successfully');\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('Token refresh failed', error);\n      throw error;\n    }\n  }\n\n  /**\n   * GET /api/auth/verify\n   *  \n   */\n  public async verifyToken(): Promise<boolean> {\n    try {\n      await this.request('/api/auth/verify', {\n        method: 'GET',\n        authenticated: true\n      });\n      \n      logger.info('Token verified successfully');\n      return true;\n    } catch (error) {\n      logger.warn('Token verification failed', error);\n      this.clearToken();\n      return false;\n    }\n  }\n\n  /**\n   *   \n   */\n  public logout(): void {\n    logger.info('User logout');\n    this.clearToken();\n    this.stopActivityMonitoring();\n    \n    //   logout\n    window.dispatchEvent(new CustomEvent('auth:logout'));\n  }\n\n  // ==================== ACTIVITY MONITORING ====================\n\n  /**\n   *    \n   */\n  private updateActivity(): void {\n    this.lastActivity = Date.now();\n    this.updateActivityTime();\n    \n    //     \n    this.resetTimers();\n  }\n\n  /**\n   *  \n   */\n  private resetTimers(): void {\n    //   \n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n    }\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n    }\n\n    //   ( 2   )\n    this.warningTimer = setTimeout(() => {\n      logger.warn('Inactivity warning - 2 minutes until logout');\n      \n      //   \n      window.dispatchEvent(new CustomEvent('auth:inactivity-warning', {\n        detail: { timeRemaining: 2 * 60 * 1000 }\n      }));\n    }, this.WARNING_TIME);\n\n    //   ( 30 )\n    this.inactivityTimer = setTimeout(() => {\n      logger.warn('Session expired due to inactivity');\n      this.logout();\n    }, this.INACTIVITY_TIMEOUT);\n  }\n\n  /**\n   *   \n   */\n  private startActivityMonitoring(): void {\n    if (!this.isAuthenticated()) return;\n\n    const events = ['mousemove', 'keypress', 'click', 'scroll', 'touchstart'];\n    \n    events.forEach(event => {\n      window.addEventListener(event, () => this.updateActivity(), { passive: true });\n    });\n\n    //  \n    this.resetTimers();\n\n    logger.info('Activity monitoring started', {\n      timeout: this.INACTIVITY_TIMEOUT / 1000 / 60 + ' minutes',\n      warning: this.WARNING_TIME / 1000 / 60 + ' minutes'\n    });\n  }\n\n  /**\n   *   \n   */\n  private stopActivityMonitoring(): void {\n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n      this.warningTimer = null;\n    }\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n      this.inactivityTimer = null;\n    }\n    \n    logger.info('Activity monitoring stopped');\n  }\n\n  // ==================== PROJECTS ====================\n\n  public async getProjects(filters?: ProjectFilters): Promise<ProjectsListResponse> {\n    const params = new URLSearchParams();\n    \n    if (filters?.search) params.append('search', filters.search);\n    if (filters?.tags) params.append('tags', filters.tags.join(','));\n    if (filters?.isPublished !== undefined) params.append('isPublished', String(filters.isPublished));\n    if (filters?.page) params.append('page', String(filters.page));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n\n    const query = params.toString();\n    const url = `/api/projects${query ? '?' + query : ''}`;\n\n    return this.request<ProjectsListResponse>(url, {\n      method: 'GET',\n      authenticated: true\n    });\n  }\n\n  public async createProject(data: CreateProjectData): Promise<Project> {\n    const response = await this.request<ProjectResponse>('/api/projects', {\n      method: 'POST',\n      authenticated: true,\n      body: JSON.stringify(data)\n    });\n    return response.project;\n  }\n\n  public async getProject(id: string): Promise<Project> {\n    const response = await this.request<ProjectResponse>(`/api/projects/${id}`, {\n      method: 'GET',\n      authenticated: true\n    });\n    return response.project;\n  }\n\n  public async updateProject(id: string, data: UpdateProjectData): Promise<Project> {\n    const response = await this.request<ProjectResponse>(`/api/projects/${id}`, {\n      method: 'PUT',\n      authenticated: true,\n      body: JSON.stringify(data)\n    });\n    return response.project;\n  }\n\n  public async deleteProject(id: string): Promise<void> {\n    await this.request(`/api/projects/${id}`, {\n      method: 'DELETE',\n      authenticated: true\n    });\n  }\n\n  // ==================== FILES ====================\n\n  public async getProjectFiles(projectId: string): Promise<ProjectFile[]> {\n    const response = await this.request<{ files: ProjectFile[] }>(`/api/projects/${projectId}/files`, {\n      method: 'GET',\n      authenticated: true\n    });\n    return response.files;\n  }\n\n  public async uploadFile(projectId: string, file: File, onProgress?: (progress: number) => void): Promise<ProjectFile> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n\n      if (onProgress) {\n        xhr.upload.addEventListener('progress', (e) => {\n          if (e.lengthComputable) {\n            const progress = (e.loaded / e.total) * 100;\n            onProgress(progress);\n          }\n        });\n      }\n\n      xhr.addEventListener('load', () => {\n        if (xhr.status === 200 || xhr.status === 201) {\n          try {\n            const response = JSON.parse(xhr.responseText);\n            resolve(response.file || response);\n          } catch (error) {\n            reject(new Error('Failed to parse response'));\n          }\n        } else {\n          try {\n            const error = JSON.parse(xhr.responseText);\n            reject(new Error(error.message || `Upload failed: ${xhr.status}`));\n          } catch {\n            reject(new Error(`Upload failed: ${xhr.status}`));\n          }\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        reject(new Error('Network error'));\n      });\n\n      xhr.open('POST', `/api/projects/${projectId}/files`);\n      \n      if (this.token) {\n        xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n      }\n\n      xhr.send(formData);\n    });\n  }\n\n  public async downloadFile(projectId: string, fileId: string): Promise<Blob> {\n    const response = await fetch(`/api/projects/${projectId}/files/${fileId}`, {\n      method: 'GET',\n      headers: this.token ? { 'Authorization': `Bearer ${this.token}` } : {}\n    });\n\n    if (!response.ok) {\n      throw new Error(`Download failed: ${response.status}`);\n    }\n\n    return response.blob();\n  }\n\n  public async deleteFile(projectId: string, fileId: string): Promise<void> {\n    await this.request(`/api/projects/${projectId}/files/${fileId}`, {\n      method: 'DELETE',\n      authenticated: true\n    });\n  }\n\n  // ==================== STORAGE ====================\n\n  public async getStorageStats(): Promise<StorageStats> {\n    return this.request<StorageStats>('/api/storage/stats', {\n      method: 'GET',\n      authenticated: true\n    });\n  }\n\n  // ==================== PRIVATE METHODS ====================\n\n  private async request<T = any>(\n    endpoint: string,\n    options: {\n      method: string;\n      body?: string;\n      authenticated?: boolean;\n    }\n  ): Promise<T> {\n    const url = `${this.baseUrl}${endpoint}`;\n    \n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n    };\n\n    if (options.authenticated && this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const response = await fetch(url, {\n        method: options.method,\n        headers,\n        body: options.body,\n      });\n\n      //     \n      if (options.authenticated && response.ok) {\n        this.updateActivity();\n      }\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          logger.warn('Unauthorized - clearing token');\n          this.clearToken();\n          window.dispatchEvent(new CustomEvent('auth:unauthorized'));\n          throw new Error('Unauthorized');\n        }\n\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      logger.error('Request failed', {\n        endpoint,\n        method: options.method,\n        error\n      });\n      throw error;\n    }\n  }\n}\n\nexport const apiClient = new ApiClient();\n","/**\n * Login Page -  \n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Key, AlertCircle, Loader } from 'lucide-react';\nimport { apiClient } from '../services/api-client';\nimport { logger } from '../utils/logger';\nimport './LoginPage.css';\n\nexport const LoginPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [licenseKey, setLicenseKey] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    //   \n    const reason = sessionStorage.getItem('kiosk_logout_reason');\n    \n    if (reason === 'inactivity') {\n      setLogoutMessage('      - ');\n      logger.info('Logout reason: inactivity');\n    } else if (reason === 'session_expired') {\n      setLogoutMessage('  . ,  ');\n      logger.info('Logout reason: session expired');\n    }\n    \n    //    \n    sessionStorage.removeItem('kiosk_logout_reason');\n    \n    //     5 \n    if (reason) {\n      setTimeout(() => setLogoutMessage(null), 5000);\n    }\n  }, []);\n\n  const [logoutMessage, setLogoutMessage] = useState<string | null>(null);\n\n  //    (XXXX-XXXX-XXXX-XXXX)\n  const formatLicenseKey = (value: string): string => {\n    const cleaned = value.replace(/[^A-Z0-9]/gi, '').toUpperCase();\n    const groups = cleaned.match(/.{1,4}/g) || [];\n    return groups.join('-').substring(0, 19);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatLicenseKey(e.target.value);\n    setLicenseKey(formatted);\n    setError(null);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (licenseKey.length < 19) {\n      setError('    (16 )');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log('[LoginPage] Attempting login');\n      const response = await apiClient.loginWithLicense(licenseKey);\n      \n      console.log('[LoginPage] Login successful, redirecting to /editor');\n      \n      //   -   \n      navigate('/editor', { replace: true });\n      \n    } catch (err: any) {\n      console.error('[LoginPage] Login failed:', err);\n      setError(err.message || '   .   .');\n      setIsLoading(false);\n    }\n  };\n\n  const handlePaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const pasted = e.clipboardData.getData('text');\n    const formatted = formatLicenseKey(pasted);\n    setLicenseKey(formatted);\n  };\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-container\">\n        <div className=\"login-header\">\n          <Key size={48} className=\"login-icon\" />\n          <h1>Kiosk Editor</h1>\n          <p>  </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"login-form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"licenseKey\"> </label>\n            <input\n              type=\"text\"\n              id=\"licenseKey\"\n              placeholder=\"XXXX-XXXX-XXXX-XXXX\"\n              value={licenseKey}\n              onChange={handleInputChange}\n              onPaste={handlePaste}\n              disabled={isLoading}\n              autoFocus\n              maxLength={19}\n              className={error ? 'error' : ''}\n            />\n            <span className=\"input-hint\">\n              : 4   4 \n            </span>\n          </div>\n\n          {error && (\n            <div className=\"error-message\">\n              <AlertCircle size={16} />\n              <span>{error}</span>\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            className=\"login-button\"\n            disabled={isLoading || licenseKey.length < 19}\n          >\n            {isLoading ? (\n              <>\n                <Loader size={20} className=\"spinner\" />\n                <span>...</span>\n              </>\n            ) : (\n              <>\n                <Key size={20} />\n                <span></span>\n              </>\n            )}\n          </button>\n        </form>\n\n        <div className=\"test-keys\">\n          <p> :</p>\n          <ul>\n            <li>\n              <strong>BASIC:</strong> <code>EWZA-E5LJ-Z558-9LUQ</code>\n            </li>\n            <li>\n              <strong>PRO:</strong> <code>3VBN-8ZQ9-1MKO-AK0R</code>\n            </li>\n            <li>\n              <strong>MAX:</strong> <code>T8MH-FJE3-ETAC-YOZF</code>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","/**\n * InactivityWarning Component\n *    2     \n */\n\nimport React, { useState, useEffect } from 'react';\nimport './InactivityWarning.css';\n\nexport const InactivityWarning: React.FC = () => {\n  const [visible, setVisible] = useState(false);\n  const [countdown, setCountdown] = useState(120); // 2 \n\n  useEffect(() => {\n    const handleWarning = () => {\n      setVisible(true);\n      setCountdown(120);\n    };\n\n    const handleLogout = () => {\n      setVisible(false);\n    };\n\n    //    \n    const handleActivity = () => {\n      if (visible) {\n        setVisible(false);\n      }\n    };\n\n    window.addEventListener('auth:inactivity-warning', handleWarning);\n    window.addEventListener('auth:logout', handleLogout);\n    \n    //  \n    const events = ['mousemove', 'keypress', 'click', 'scroll', 'touchstart'];\n    events.forEach(event => {\n      window.addEventListener(event, handleActivity);\n    });\n\n    return () => {\n      window.removeEventListener('auth:inactivity-warning', handleWarning);\n      window.removeEventListener('auth:logout', handleLogout);\n      events.forEach(event => {\n        window.removeEventListener(event, handleActivity);\n      });\n    };\n  }, [visible]);\n\n  //  \n  useEffect(() => {\n    if (!visible) return;\n\n    const interval = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          setVisible(false);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [visible]);\n\n  if (!visible) return null;\n\n  const minutes = Math.floor(countdown / 60);\n  const seconds = countdown % 60;\n\n  return (\n    <div className=\"inactivity-warning-overlay\">\n      <div className=\"inactivity-warning\">\n        <div className=\"warning-icon\"></div>\n        <h3>  </h3>\n        <p>\n                {' '}\n          <strong>{minutes}:{seconds.toString().padStart(2, '0')}</strong>\n        </p>\n        <p className=\"hint\">\n               ,   \n        </p>\n        <button\n          className=\"continue-btn\"\n          onClick={() => setVisible(false)}\n        >\n           \n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default InactivityWarning;\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","/**\n * Editor Store - Zustand State Management\n *  2.0:   License Server API\n * \n * :\n * -     ( localStorage)\n * -   3  (debounced)\n * - JWT \n * -     API\n */\n\nimport { create } from 'zustand';\nimport { apiClient, Project, CreateProjectData, UpdateProjectData } from '../services/api-client';\n\n// ==================== TYPES ====================\n\ninterface Widget {\n  id: string;\n  type: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  rotation?: number;\n  locked?: boolean;\n  zIndex?: number;\n  properties: Record<string, any>;\n}\n\ninterface CanvasConfig {\n  width: number;\n  height: number;\n  backgroundColor?: string;\n}\n\ninterface LocalProject {\n  id?: string; // ID   (   )\n  version: string;\n  name: string;\n  canvas: CanvasConfig;\n  widgets: Widget[];\n  metadata?: {\n    createdAt: string;\n    updatedAt: string;\n    author?: string;\n  };\n}\ninterface EditorState {\n  // \n  project: LocalProject | null;\n  projectId: string | null; // Server project ID\n  isLoading: boolean;\n  isSaving: boolean;\n  lastSaved: Date | null;\n  saveError: string | null;\n\n  // \n  selectedWidgetIds: string[];\n  \n  //  \n  clipboard: Widget[];\n  \n  //  (Undo/Redo)\n  history: {\n    past: LocalProject[];\n    future: LocalProject[];\n  };\n  \n  //  \n  zoom: number;\n  gridEnabled: boolean;\n  snapToGrid: boolean;\n  gridSize: number;\n  gridLineWidth: number;\n  gridColor: string;\n  \n  // Pending widget ( )\n  pendingWidget: { type: string; defaultProps: any } | null;\n\n  // ========== PROJECT ACTIONS ==========\n  restoreProject: () => Promise<boolean>;\n  createProject: (name: string, canvas: CanvasConfig) => Promise<void>;\n  loadProject: (id: string) => Promise<void>;\n  saveProject: () => Promise<void>;\n  deleteProject: (id: string) => Promise<void>;\n  updateProjectMetadata: (updates: Partial<LocalProject>) => void;\n\n  // ========== WIDGET ACTIONS ==========\n  addWidget: (widget: Widget) => void;\n  setPendingWidget: (type: string, defaultProps: any) => void;\n  clearPendingWidget: () => void;\n  addWidgetAtPosition: (x: number, y: number) => void;\n  updateWidget: (id: string, updates: Partial<Widget>) => void;\n  deleteWidget: (id: string) => void;\n  duplicateWidget: (id: string) => void;\n\n  // ========== SELECTION ==========\n  selectWidget: (id: string, addToSelection?: boolean) => void;\n  clearSelection: () => void;\n\n  // ========== HISTORY ==========\n  saveToHistory: () => void;\n  undo: () => void;\n  redo: () => void;\n\n  // ========== CLIPBOARD ==========\n  copy: () => void;\n  paste: () => void;\n  cut: () => void;\n\n  // ========== CANVAS SETTINGS ==========\n  setZoom: (zoom: number) => void;\n  toggleGrid: () => void;\n  toggleSnapToGrid: () => void;\n  setGridSize: (size: number) => void;\n}\n\n// ==================== AUTO-SAVE ====================\n\nlet autoSaveTimer: NodeJS.Timeout | null = null;\nlet saveQueue: (() => Promise<void>) | null = null;\n\n/**\n *   (debounced)\n */\nfunction startAutoSave(saveFunction: () => Promise<void>, interval: number = 180000) {\n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer);\n  }\n\n  autoSaveTimer = setTimeout(async () => {\n    try {\n      console.log('[Editor] Auto-saving project...');\n      await saveFunction();\n      console.log('[Editor] Auto-save completed');\n    } catch (error) {\n      console.error('[Editor] Auto-save failed:', error);\n    }\n  }, interval); // 3   \n}\n\n/**\n *  \n */\nfunction stopAutoSave() {\n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer);\n    autoSaveTimer = null;\n  }\n}\n\n// ==================== STORE ====================\n\n\n// ==================== PROJECT ID PERSISTENCE ====================\n\n/**\n *  ID    sessionStorage\n */\nfunction saveCurrentProjectId(projectId: string | null) {\n  if (projectId) {\n    sessionStorage.setItem('kiosk_current_project_id', projectId);\n    console.log('[Editor] Current project ID saved:', projectId);\n  } else {\n    sessionStorage.removeItem('kiosk_current_project_id');\n    console.log('[Editor] Current project ID cleared');\n  }\n}\n\n/**\n *  ID    sessionStorage\n */\nfunction getCurrentProjectId(): string | null {\n  const projectId = sessionStorage.getItem('kiosk_current_project_id');\n  if (projectId) {\n    console.log('[Editor] Restoring project ID:', projectId);\n  }\n  return projectId;\n}\n\nexport const useEditorStore = create<EditorState>((set, get) => ({\n  // Initial state\n  project: {\n    version: '1.0.0',\n    name: ' ',\n    canvas: {\n      width: 1920,\n      height: 1080,\n      backgroundColor: '#1a1a1a'\n    },\n    widgets: [],\n    metadata: {\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    }\n  },\n  projectId: null,\n  isLoading: false,\n  isSaving: false,\n  lastSaved: null,\n  saveError: null,\n  selectedWidgetIds: [],\n  clipboard: [],\n  history: {\n    past: [],\n    future: []\n  },\n  zoom: 1,\n  gridEnabled: true,\n  snapToGrid: true,\n  gridSize: 20,\n  gridLineWidth: 1,\n  gridColor: '#e0e0e0',\n  pendingWidget: null,\n\n  // ========== PROJECT ACTIONS ==========\n\n  /**\n   *   \n   */\n  /**\n   *    \n   */\n  restoreProject: async () => {\n    const projectId = getCurrentProjectId();\n    if (projectId) {\n      try {\n        console.log('[Editor] Restoring last opened project:', projectId);\n        await get().loadProject(projectId);\n        return true;\n      } catch (error) {\n        console.error('[Editor] Failed to restore project:', error);\n        saveCurrentProjectId(null);\n        return false;\n      }\n    }\n    return false;\n  },\n\n    createProject: async (name: string, canvas: CanvasConfig) => {\n    set({ isLoading: true, saveError: null });\n\n    try {\n      //   \n      const localProject: LocalProject = {\n        version: '1.0',\n        name,\n        canvas,\n        widgets: [],\n        metadata: {\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        }\n      };\n\n      //   \n      const serverProject = await apiClient.createProject({\n        name,\n        canvasWidth: canvas.width,\n        canvasHeight: canvas.height,\n        canvasBackground: canvas.backgroundColor || '#1a1a1a',\n        projectData: localProject\n      });\n\n      //  state\n      set({\n        project: {\n          ...localProject,\n          id: serverProject.id\n        },\n        projectId: serverProject.id,\n        isLoading: false,\n        lastSaved: new Date(),\n        history: { past: [], future: [] }\n      });\n\n      console.log('[Editor] Project created:', serverProject.id);\n      \n      //  ID  \n      saveCurrentProjectId(serverProject.id);\n\n      //  \n      startAutoSave(get().saveProject);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to create project:', error);\n      set({ \n        isLoading: false, \n        saveError: error.message || 'Failed to create project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *    \n   */\n  loadProject: async (id: string) => {\n    set({ isLoading: true, saveError: null });\n\n    try {\n      const serverProject = await apiClient.getProject(id);\n\n      const localProject: LocalProject = {\n        id: serverProject.id,\n        version: '1.0',\n        name: serverProject.name,\n        canvas: {\n          width: serverProject.canvasWidth,\n          height: serverProject.canvasHeight,\n          backgroundColor: serverProject.canvasBackground\n        },\n        widgets: serverProject.projectData?.widgets || [],\n        metadata: {\n          createdAt: serverProject.createdAt,\n          updatedAt: serverProject.updatedAt\n        }\n      };\n\n      set({\n        project: localProject,\n        projectId: serverProject.id,\n        isLoading: false,\n        lastSaved: new Date(serverProject.updatedAt),\n        history: { past: [], future: [] }\n      });\n\n      console.log('[Editor] Project loaded:', id);\n      \n      //  ID  \n      saveCurrentProjectId(id);\n\n      //  \n      startAutoSave(get().saveProject);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to load project:', error);\n      set({ \n        isLoading: false, \n        saveError: error.message || 'Failed to load project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *    \n   */\n  saveProject: async () => {\n    const { project, projectId, isSaving } = get();\n\n    if (!project || !projectId) {\n      console.warn('[Editor] No project to save');\n      return;\n    }\n\n    if (isSaving) {\n      console.warn('[Editor] Save already in progress');\n      return;\n    }\n\n    set({ isSaving: true, saveError: null });\n\n    try {\n      await apiClient.updateProject(projectId, {\n        name: project.name,\n        projectData: project,\n        canvasWidth: project.canvas.width,\n        canvasHeight: project.canvas.height,\n        canvasBackground: project.canvas.backgroundColor\n      });\n\n      set({ \n        isSaving: false, \n        lastSaved: new Date(),\n        saveError: null\n      });\n\n      console.log('[Editor] Project saved:', projectId);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to save project:', error);\n      set({ \n        isSaving: false, \n        saveError: error.message || 'Failed to save project' \n      });\n      throw error;\n    }\n  },\n\n  /**\n   *  \n   */\n  deleteProject: async (id: string) => {\n    try {\n      await apiClient.deleteProject(id);\n      \n      //     -  state\n      if (get().projectId === id) {\n        set({\n          project: {\n    version: '1.0.0',\n    name: ' ',\n    canvas: {\n      width: 1920,\n      height: 1080,\n      backgroundColor: '#1a1a1a'\n    },\n    widgets: [],\n    metadata: {\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    }\n  },\n          projectId: null,\n          selectedWidgetIds: [],\n          history: { past: [], future: [] }\n        });\n        stopAutoSave();\n      }\n\n      console.log('[Editor] Project deleted:', id);\n\n    } catch (error: any) {\n      console.error('[Editor] Failed to delete project:', error);\n      throw error;\n    }\n  },\n\n  /**\n   *   \n   */\n  updateProjectMetadata: (updates) => {\n    const { project } = get();\n    if (!project) return;\n\n    set({\n      project: {\n        ...project,\n        ...updates,\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  // ========== WIDGET ACTIONS ==========\n\n  addWidget: (widget) => {\n    const { project } = get();\n    if (!project) return;\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: [...project.widgets, widget],\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  setPendingWidget: (type, defaultProps) => {\n    set({ pendingWidget: { type, defaultProps } });\n  },\n\n  clearPendingWidget: () => {\n    set({ pendingWidget: null });\n  },\n\n  addWidgetAtPosition: (x, y) => {\n    const { pendingWidget, project, snapToGrid, gridSize } = get();\n    if (!pendingWidget || !project) return;\n\n    //    \n    let finalX = x;\n    let finalY = y;\n\n    if (snapToGrid) {\n      finalX = Math.round(x / gridSize) * gridSize;\n      finalY = Math.round(y / gridSize) * gridSize;\n    }\n\n    //   \n    const defaultSizes: Record<string, { width: number; height: number }> = {\n      shape: { width: 200, height: 200 },\n      button: { width: 200, height: 60 },\n      text: { width: 300, height: 100 },\n      image: { width: 300, height: 200 },\n      video: { width: 640, height: 360 },\n      menu: { width: 600, height: 40 }\n    };\n\n    const defaultSize = defaultSizes[pendingWidget.type] || { width: 200, height: 100 };\n    const width = pendingWidget.defaultProps.width || defaultSize.width;\n    const height = pendingWidget.defaultProps.height || defaultSize.height;\n\n    finalX = finalX - width / 2;\n    finalY = finalY - height / 2;\n\n    const { width: _, height: __, ...cleanProps } = pendingWidget.defaultProps;\n\n    const widget = {\n      id: `widget-${Date.now()}-${Math.random()}`,\n      type: pendingWidget.type,\n      x: Math.max(0, finalX),\n      y: Math.max(0, finalY),\n      width,\n      height,\n      zIndex: 0,\n      properties: cleanProps\n    };\n\n    get().addWidget(widget);\n    get().clearPendingWidget();\n  },\n\n  updateWidget: (id, updates) => {\n    const { project } = get();\n    if (!project) return;\n\n    set({\n      project: {\n        ...project,\n        widgets: project.widgets.map(w =>\n          w.id === id ? { ...w, ...updates } : w\n        ),\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  deleteWidget: (id) => {\n    const { project } = get();\n    if (!project) return;\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: project.widgets.filter(w => w.id !== id),\n        metadata: {\n          ...project.metadata,\n          updatedAt: new Date().toISOString()\n        }\n      },\n      selectedWidgetIds: get().selectedWidgetIds.filter(wId => wId !== id)\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  duplicateWidget: (id) => {\n    const { project } = get();\n    if (!project) return;\n\n    const widget = project.widgets.find(w => w.id === id);\n    if (!widget) return;\n\n    const newWidget = {\n      ...widget,\n      id: `widget-${Date.now()}`,\n      x: widget.x + 20,\n      y: widget.y + 20\n    };\n\n    get().addWidget(newWidget);\n  },\n\n  // ========== SELECTION ==========\n\n  selectWidget: (id, addToSelection = false) => {\n    const { selectedWidgetIds } = get();\n\n    if (addToSelection) {\n      if (selectedWidgetIds.includes(id)) {\n        set({ selectedWidgetIds: selectedWidgetIds.filter(wId => wId !== id) });\n      } else {\n        set({ selectedWidgetIds: [...selectedWidgetIds, id] });\n      }\n    } else {\n      set({ selectedWidgetIds: [id] });\n    }\n  },\n\n  clearSelection: () => {\n    set({ selectedWidgetIds: [] });\n  },\n\n  // ========== HISTORY ==========\n\n  saveToHistory: () => {\n    const { project, history } = get();\n    if (!project) return;\n\n    set({\n      history: {\n        past: [...history.past, project],\n        future: []\n      }\n    });\n  },\n\n  undo: () => {\n    const { history, project } = get();\n    if (history.past.length === 0 || !project) return;\n\n    const previous = history.past[history.past.length - 1];\n    const newPast = history.past.slice(0, -1);\n\n    set({\n      project: previous,\n      history: {\n        past: newPast,\n        future: [project, ...history.future]\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  redo: () => {\n    const { history, project } = get();\n    if (history.future.length === 0 || !project) return;\n\n    const next = history.future[0];\n    const newFuture = history.future.slice(1);\n\n    set({\n      project: next,\n      history: {\n        past: [...history.past, project],\n        future: newFuture\n      }\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  // ========== CLIPBOARD ==========\n\n  copy: () => {\n    const { project, selectedWidgetIds } = get();\n    if (!project) return;\n\n    const selectedWidgets = project.widgets.filter(w =>\n      selectedWidgetIds.includes(w.id)\n    );\n\n    set({ clipboard: selectedWidgets });\n  },\n\n  paste: () => {\n    const { clipboard, project } = get();\n    if (!project || clipboard.length === 0) return;\n\n    const newWidgets = clipboard.map(w => ({\n      ...w,\n      id: `widget-${Date.now()}-${Math.random()}`,\n      x: w.x + 20,\n      y: w.y + 20\n    }));\n\n    get().saveToHistory();\n    set({\n      project: {\n        ...project,\n        widgets: [...project.widgets, ...newWidgets]\n      },\n      selectedWidgetIds: newWidgets.map(w => w.id)\n    });\n\n    //  \n    startAutoSave(get().saveProject);\n  },\n\n  cut: () => {\n    const { selectedWidgetIds } = get();\n    get().copy();\n    selectedWidgetIds.forEach(id => get().deleteWidget(id));\n  },\n\n  // ========== CANVAS SETTINGS ==========\n\n  setZoom: (zoom) => {\n    set({ zoom: Math.max(0.1, Math.min(5, zoom)) });\n  },\n\n  toggleGrid: () => {\n    set((state) => ({ gridEnabled: !state.gridEnabled }));\n  },\n\n  toggleSnapToGrid: () => {\n    set((state) => ({ snapToGrid: !state.snapToGrid }));\n  },\n\n  setGridSize: (size) => {\n    set({ gridSize: Math.max(5, Math.min(100, size)) });\n  }\n}));\n\n// Cleanup on unmount\nif (typeof window !== 'undefined') {\n  window.addEventListener('beforeunload', () => {\n    stopAutoSave();\n  });\n}\n","/**\n * AutoSave Indicator Component\n *   : idle, saving, saved, error\n */\n\nimport React from 'react';\nimport { Cloud, CloudOff, Loader, Check, AlertCircle } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport './AutoSaveIndicator.css';\n\nexport const AutoSaveIndicator: React.FC = () => {\n  const { isSaving, lastSaved, saveError } = useEditorStore();\n\n  //  \n  const getStatus = () => {\n    if (saveError) return 'error';\n    if (isSaving) return 'saving';\n    if (lastSaved) return 'saved';\n    return 'idle';\n  };\n\n  const status = getStatus();\n\n  //    \n  const formatLastSaved = (date: Date): string => {\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n\n    if (seconds < 10) return ' ';\n    if (seconds < 60) return `${seconds}  `;\n    if (minutes === 1) return '1  ';\n    if (minutes < 60) return `${minutes}  `;\n    \n    return date.toLocaleTimeString('ru-RU', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const renderContent = () => {\n    switch (status) {\n      case 'saving':\n        return (\n          <>\n            <Loader size={16} className=\"spinner\" />\n            <span>...</span>\n          </>\n        );\n\n      case 'saved':\n        return (\n          <>\n            <Check size={16} />\n            <span> {lastSaved && formatLastSaved(lastSaved)}</span>\n          </>\n        );\n\n      case 'error':\n        return (\n          <>\n            <AlertCircle size={16} />\n            <span title={saveError || undefined}> </span>\n          </>\n        );\n\n      case 'idle':\n      default:\n        return (\n          <>\n            <Cloud size={16} />\n            <span> </span>\n          </>\n        );\n    }\n  };\n\n  return (\n    <div className={`autosave-indicator status-${status}`}>\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default AutoSaveIndicator;\n","/**\n * CreateProjectDialog Component\n *    \n */\n\nimport React, { useState } from 'react';\nimport { X } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport './CreateProjectDialog.css';\n\ninterface CreateProjectDialogProps {\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateProjectDialog: React.FC<CreateProjectDialogProps> = ({ onClose, onSuccess }) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [canvasWidth, setCanvasWidth] = useState(1920);\n  const [canvasHeight, setCanvasHeight] = useState(1080);\n  const [creating, setCreating] = useState(false);\n  \n  const { createProject } = useEditorStore();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!name.trim()) {\n      alert('  ');\n      return;\n    }\n\n    try {\n      setCreating(true);\n      console.log('[CreateProjectDialog] Creating project:', name);\n      \n      await createProject(name.trim(), {\n        width: canvasWidth,\n        height: canvasHeight,\n        backgroundColor: '#ffffff'\n      });\n\n      console.log('[CreateProjectDialog] Project created successfully');\n      onSuccess?.();\n      onClose();\n    } catch (error) {\n      console.error('[CreateProjectDialog] Failed to create project:', error);\n      alert('   ');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const presets = [\n    { name: 'Full HD ()', width: 1920, height: 1080 },\n    { name: 'Full HD ()', width: 1080, height: 1920 },\n    { name: '4K ()', width: 3840, height: 2160 },\n    { name: 'HD ()', width: 1280, height: 720 },\n  ];\n\n  return (\n    <div className=\"dialog-overlay\" onClick={onClose}>\n      <div className=\"dialog-content create-project-dialog\" onClick={(e) => e.stopPropagation()}>\n        {/* Header */}\n        <div className=\"dialog-header\">\n          <h2>  </h2>\n          <button className=\"btn-icon\" onClick={onClose} title=\"\">\n            <X size={24} />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit}>\n          <div className=\"dialog-body\">\n            {/* Project Name */}\n            <div className=\"form-field\">\n              <label htmlFor=\"project-name\">  *</label>\n              <input\n                id=\"project-name\"\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\" \"\n                maxLength={100}\n                autoFocus\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"form-field\">\n              <label htmlFor=\"project-description\"> ()</label>\n              <textarea\n                id=\"project-description\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"  ...\"\n                maxLength={500}\n                rows={3}\n              />\n            </div>\n\n            {/* Canvas Size */}\n            <div className=\"form-section\">\n              <h3> </h3>\n              \n              {/* Presets */}\n              <div className=\"presets-grid\">\n                {presets.map((preset, i) => (\n                  <button\n                    key={i}\n                    type=\"button\"\n                    className={`preset-btn ${\n                      canvasWidth === preset.width && canvasHeight === preset.height\n                        ? 'active'\n                        : ''\n                    }`}\n                    onClick={() => {\n                      setCanvasWidth(preset.width);\n                      setCanvasHeight(preset.height);\n                    }}\n                  >\n                    <span className=\"preset-name\">{preset.name}</span>\n                    <span className=\"preset-size\">{preset.width}{preset.height}</span>\n                  </button>\n                ))}\n              </div>\n\n              {/* Custom Size */}\n              <div className=\"form-row\">\n                <div className=\"form-field\">\n                  <label htmlFor=\"canvas-width\"> (px)</label>\n                  <input\n                    id=\"canvas-width\"\n                    type=\"number\"\n                    value={canvasWidth}\n                    onChange={(e) => setCanvasWidth(parseInt(e.target.value) || 1920)}\n                    min={320}\n                    max={7680}\n                  />\n                </div>\n                <div className=\"form-field\">\n                  <label htmlFor=\"canvas-height\"> (px)</label>\n                  <input\n                    id=\"canvas-height\"\n                    type=\"number\"\n                    value={canvasHeight}\n                    onChange={(e) => setCanvasHeight(parseInt(e.target.value) || 1080)}\n                    min={240}\n                    max={4320}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"dialog-footer\">\n            <button type=\"button\" className=\"btn-secondary\" onClick={onClose}>\n              \n            </button>\n            <button type=\"submit\" className=\"btn-primary\" disabled={creating}>\n              {creating ? '...' : ' '}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateProjectDialog;\n","/**\n * ProjectsDialog Component\n *   : , , , \n */\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Plus, FolderOpen, Trash2, Search } from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { apiClient } from '../services/api-client';\nimport CreateProjectDialog from './CreateProjectDialog';\nimport './ProjectsDialog.css';\n\ninterface Project {\n  id: string;\n  name: string;\n  description?: string;\n  canvasWidth: number;\n  canvasHeight: number;\n  updatedAt: string;\n  createdAt: string;\n  tags?: string[];\n  thumbnail?: string;\n}\n\ninterface ProjectsDialogProps {\n  onClose: () => void;\n  onProjectLoaded?: () => void;\n}\n\nconst ProjectsDialog: React.FC<ProjectsDialogProps> = ({ onClose, onProjectLoaded }) => {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const { loadProject, projectId } = useEditorStore();\n\n  //   \n  useEffect(() => {\n    loadProjects();\n  }, []);\n\n  const loadProjects = async () => {\n    try {\n      setLoading(true);\n      const response = await apiClient.getProjects();\n      console.log('[ProjectsDialog] Projects loaded:', response.projects.length);\n      setProjects(response.projects);\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to load projects:', error);\n      alert('    ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOpenProject = async (id: string) => {\n    try {\n      console.log('[ProjectsDialog] Opening project:', id);\n      await loadProject(id);\n      onProjectLoaded?.();\n      onClose();\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to open project:', error);\n      alert('   ');\n    }\n  };\n\n  const handleDeleteProject = async (id: string, name: string) => {\n    if (!confirm(`      \"${name}\"?`)) {\n      return;\n    }\n\n    try {\n      console.log('[ProjectsDialog] Deleting project:', id);\n      await apiClient.deleteProject(id);\n      \n      //  \n      setProjects(projects.filter(p => p.id !== id));\n      \n      alert(' ');\n    } catch (error) {\n      console.error('[ProjectsDialog] Failed to delete project:', error);\n      alert('   ');\n    }\n  };\n\n  const handleProjectCreated = () => {\n    setShowCreateDialog(false);\n    loadProjects();\n  };\n\n  //  \n  const filteredProjects = projects.filter(p => \n    p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    p.description?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <>\n      <div className=\"dialog-overlay\" onClick={onClose}>\n        <div className=\"dialog-content projects-dialog\" onClick={(e) => e.stopPropagation()}>\n          {/* Header */}\n          <div className=\"dialog-header\">\n            <h2> </h2>\n            <button className=\"btn-icon\" onClick={onClose} title=\"\">\n              <X size={24} />\n            </button>\n          </div>\n\n          {/* Toolbar */}\n          <div className=\"projects-toolbar\">\n            <div className=\"search-box\">\n              <Search size={18} />\n              <input\n                type=\"text\"\n                placeholder=\" ...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n              />\n            </div>\n            <button \n              className=\"btn-primary\" \n              onClick={() => setShowCreateDialog(true)}\n            >\n              <Plus size={18} />\n              <span> </span>\n            </button>\n          </div>\n\n          {/* Projects List */}\n          <div className=\"projects-list\">\n            {loading ? (\n              <div className=\"loading-state\">\n                <p> ...</p>\n              </div>\n            ) : filteredProjects.length === 0 ? (\n              <div className=\"empty-state\">\n                <FolderOpen size={48} />\n                <p>{searchQuery ? '  ' : '    '}</p>\n                <button \n                  className=\"btn-primary\" \n                  onClick={() => setShowCreateDialog(true)}\n                >\n                    \n                </button>\n              </div>\n            ) : (\n              filteredProjects.map(project => (\n                <div \n                  key={project.id} \n                  className={`project-card ${project.id === projectId ? 'active' : ''}`}\n                >\n                  {/* Thumbnail */}\n                  <div className=\"project-thumbnail\">\n                    {project.thumbnail ? (\n                      <img src={project.thumbnail} alt={project.name} />\n                    ) : (\n                      <div className=\"thumbnail-placeholder\">\n                        <FolderOpen size={32} />\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Info */}\n                  <div className=\"project-info\">\n                    <h3>{project.name}</h3>\n                    {project.description && (\n                      <p className=\"project-description\">{project.description}</p>\n                    )}\n                    <div className=\"project-meta\">\n                      <span>{project.canvasWidth}{project.canvasHeight}</span>\n                      <span></span>\n                      <span>{new Date(project.updatedAt).toLocaleDateString('ru-RU')}</span>\n                    </div>\n                    {project.tags && project.tags.length > 0 && (\n                      <div className=\"project-tags\">\n                        {project.tags.map((tag, i) => (\n                          <span key={i} className=\"tag\">{tag}</span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"project-actions\">\n                    <button \n                      className=\"btn-primary\"\n                      onClick={() => handleOpenProject(project.id)}\n                      title=\" \"\n                    >\n                      <FolderOpen size={18} />\n                      <span></span>\n                    </button>\n                    <button \n                      className=\"btn-icon btn-danger\"\n                      onClick={() => handleDeleteProject(project.id, project.name)}\n                      title=\" \"\n                    >\n                      <Trash2 size={18} />\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"dialog-footer\">\n            <p className=\"projects-count\">\n               : {projects.length}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Create Project Dialog */}\n      {showCreateDialog && (\n        <CreateProjectDialog\n          onClose={() => setShowCreateDialog(false)}\n          onSuccess={handleProjectCreated}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ProjectsDialog;\n","/**\n * Toolbar Component -  3.0 + Projects Management\n *  LoginDialog,       \n * +    ProjectsDialog\n */\n\nimport React, { useState, useEffect } from 'react';\n// Router navigation removed - using window.location instead\nimport { \n  Save, \n  FolderOpen, \n  Undo2, \n  Redo2, \n  ZoomIn, \n  ZoomOut, \n  Grid, \n  Magnet,\n  Play,\n  User,\n  LogOut\n} from 'lucide-react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { apiClient } from '../services/api-client';\nimport { logger } from '../utils/logger';\nimport AutoSaveIndicator from './AutoSaveIndicator';\nimport ProjectsDialog from './ProjectsDialog';\nimport './Toolbar.css';\n\nexport const Toolbar: React.FC = () => {\n\n  const {\n    project,\n    history,\n    zoom,\n    gridEnabled,\n    snapToGrid,\n    undo,\n    redo,\n    setZoom,\n    toggleGrid,\n    toggleSnapToGrid,\n    saveProject\n  } = useEditorStore();\n\n  // User info\n  const [organizationName, setOrganizationName] = useState<string | null>(null);\n  const [plan, setPlan] = useState<string | null>(null);\n  const [showProjectsDialog, setShowProjectsDialog] = useState(false);\n\n  useEffect(() => {\n    const orgData = apiClient.getOrganizationData();\n    setOrganizationName(orgData.name);\n    setPlan(orgData.plan);\n  }, []);\n\n  const handleZoomIn = () => {\n    setZoom(Math.min(zoom + 0.1, 3));\n  };\n\n  const handleZoomOut = () => {\n    setZoom(Math.max(zoom - 0.1, 0.1));\n  };\n\n  const handleLogout = () => {\n    if (confirm('    ?')) {\n      logger.info('User initiated logout');\n      apiClient.logout();\n      window.location.href = \"/login\";\n    }\n  };\n\n  const canUndo = history.past.length > 0;\n  const canRedo = history.future.length > 0;\n\n  return (\n    <>\n      <div className=\"toolbar\">\n        <div className=\"toolbar-section\">\n          {/* Logo */}\n          <div className=\"toolbar-logo\">\n            <span className=\"logo-text\">Kiosk Editor</span>\n          </div>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* File operations */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => saveProject()}\n            disabled={!project}\n            title=\" (Ctrl+S)\"\n          >\n            <Save size={18} />\n          </button>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => setShowProjectsDialog(true)}\n            disabled={!project}\n            title=\" \"\n          >\n            <FolderOpen size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* History */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={undo}\n            disabled={!canUndo}\n            title=\" (Ctrl+Z)\"\n          >\n            <Undo2 size={18} />\n          </button>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={redo}\n            disabled={!canRedo}\n            title=\" (Ctrl+Shift+Z)\"\n          >\n            <Redo2 size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Zoom */}\n          <button \n            className=\"toolbar-btn\" \n            onClick={handleZoomOut}\n            disabled={zoom <= 0.1}\n            title=\" (Ctrl+-)\"\n          >\n            <ZoomOut size={18} />\n          </button>\n\n          <span className=\"toolbar-zoom\">{Math.round(zoom * 100)}%</span>\n\n          <button \n            className=\"toolbar-btn\" \n            onClick={handleZoomIn}\n            disabled={zoom >= 3}\n            title=\" (Ctrl++)\"\n          >\n            <ZoomIn size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Grid */}\n          <button \n            className={`toolbar-btn ${gridEnabled ? 'active' : ''}`}\n            onClick={toggleGrid}\n            title=\" \"\n          >\n            <Grid size={18} />\n          </button>\n\n          <button \n            className={`toolbar-btn ${snapToGrid ? 'active' : ''}`}\n            onClick={toggleSnapToGrid}\n            title=\"  \"\n          >\n            <Magnet size={18} />\n          </button>\n        </div>\n\n        {/* Right section */}\n        <div className=\"toolbar-section\">\n          {/* AutoSave Indicator */}\n          {project && <AutoSaveIndicator />}\n\n          <div className=\"toolbar-divider\" />\n\n          {/* User info */}\n          {organizationName && (\n            <div className=\"toolbar-user-info\">\n              <User size={16} />\n              <span className=\"user-org\">{organizationName}</span>\n              {plan && <span className=\"user-plan\">{plan}</span>}\n            </div>\n          )}\n\n          {/* Logout */}\n          <button \n            className=\"toolbar-btn logout-btn\"\n            onClick={handleLogout}\n            title=\"\"\n          >\n            <LogOut size={18} />\n          </button>\n\n          <div className=\"toolbar-divider\" />\n\n          {/* Preview */}\n          <button \n            className=\"toolbar-btn preview-btn\" \n            disabled={!project}\n            title=\"\"\n          >\n            <Play size={18} />\n            <span></span>\n          </button>\n        </div>\n      </div>\n\n      {/* Projects Dialog */}\n      {showProjectsDialog && (\n        <ProjectsDialog\n          onClose={() => setShowProjectsDialog(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Toolbar;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Group, Star, RegularPolygon, Circle, Ellipse, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ClippedImageProps {\n  widget: Widget;\n  image: HTMLImageElement | null;\n}\n\nconst ClippedImage: React.FC<ClippedImageProps> = ({ widget, image }) => {\n  const imageRef = useRef<any>(null);\n  \n  const {\n    clipShape = 'rectangle',\n    cornerRadius = 0,\n    opacity = 1\n  } = widget.properties;\n\n  useEffect(() => {\n    if (!imageRef.current || !image) return;\n\n    const node = imageRef.current;\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    \n    if (!ctx) return;\n\n    canvas.width = widget.width;\n    canvas.height = widget.height;\n\n    //      \n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n\n    const centerX = widget.width / 2;\n    const centerY = widget.height / 2;\n    const radius = Math.min(widget.width, widget.height) / 2;\n\n    switch (clipShape) {\n      case 'circle':\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        ctx.closePath();\n        break;\n\n      case 'ellipse':\n        ctx.beginPath();\n        ctx.ellipse(centerX, centerY, widget.width / 2, widget.height / 2, 0, 0, Math.PI * 2);\n        ctx.closePath();\n        break;\n\n      case 'triangle':\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY - radius);\n        ctx.lineTo(centerX + radius * Math.cos(Math.PI / 6), centerY + radius * Math.sin(Math.PI / 6));\n        ctx.lineTo(centerX - radius * Math.cos(Math.PI / 6), centerY + radius * Math.sin(Math.PI / 6));\n        ctx.closePath();\n        break;\n\n      case 'diamond':\n        ctx.beginPath();\n        ctx.moveTo(centerX, 0);\n        ctx.lineTo(widget.width, centerY);\n        ctx.lineTo(centerX, widget.height);\n        ctx.lineTo(0, centerY);\n        ctx.closePath();\n        break;\n\n      case 'pentagon':\n        drawPolygon(ctx, centerX, centerY, radius, 5);\n        break;\n\n      case 'hexagon':\n        drawPolygon(ctx, centerX, centerY, radius, 6);\n        break;\n\n      case 'octagon':\n        drawPolygon(ctx, centerX, centerY, radius, 8);\n        break;\n\n      case 'star':\n        ctx.beginPath();\n        for (let i = 0; i < 10; i++) {\n          const angle = (i * Math.PI / 5) - Math.PI / 2;\n          const r = i % 2 === 0 ? radius : radius * 0.5;\n          const x = centerX + r * Math.cos(angle);\n          const y = centerY + r * Math.sin(angle);\n          if (i === 0) {\n            ctx.moveTo(x, y);\n          } else {\n            ctx.lineTo(x, y);\n          }\n        }\n        ctx.closePath();\n        break;\n\n      case 'rounded-rectangle':\n        drawRoundedRect(ctx, 0, 0, widget.width, widget.height, cornerRadius);\n        break;\n\n      default:\n        ctx.rect(0, 0, widget.width, widget.height);\n        break;\n    }\n\n    ctx.clip();\n\n    const imgRatio = image.width / image.height;\n    const widgetRatio = widget.width / widget.height;\n\n    let sx = 0, sy = 0, sw = image.width, sh = image.height;\n    let dx = 0, dy = 0, dw = widget.width, dh = widget.height;\n\n    if (imgRatio > widgetRatio) {\n      sw = image.height * widgetRatio;\n      sx = (image.width - sw) / 2;\n    } else {\n      sh = image.width / widgetRatio;\n      sy = (image.height - sh) / 2;\n    }\n\n    ctx.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh);\n    ctx.restore();\n\n    const clippedImage = new window.Image();\n    clippedImage.src = canvas.toDataURL();\n    \n    clippedImage.onload = () => {\n      if (node) {\n        node.image(clippedImage);\n        node.getLayer()?.batchDraw();\n      }\n    };\n\n  }, [image, widget.width, widget.height, clipShape, cornerRadius]);\n\n  if (!image) {\n    return null;\n  }\n\n  return (\n    <KonvaImage\n      ref={imageRef}\n      image={undefined}\n      width={widget.width}\n      height={widget.height}\n      opacity={opacity}\n      listening={false}\n    />\n  );\n};\n\nfunction drawPolygon(ctx: CanvasRenderingContext2D, x: number, y: number, radius: number, sides: number) {\n  ctx.beginPath();\n  for (let i = 0; i < sides; i++) {\n    const angle = (i * 2 * Math.PI / sides) - Math.PI / 2;\n    const px = x + radius * Math.cos(angle);\n    const py = y + radius * Math.sin(angle);\n    if (i === 0) {\n      ctx.moveTo(px, py);\n    } else {\n      ctx.lineTo(px, py);\n    }\n  }\n  ctx.closePath();\n}\n\nfunction drawRoundedRect(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n}\n\nexport default ClippedImage;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Group, Rect } from 'react-konva';\nimport { Widget } from '../types';\nimport ClippedImage from './ClippedImage';\n\ninterface ImageGalleryProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ImageGallery: React.FC<ImageGalleryProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [images, setImages] = useState<{ [key: string]: HTMLImageElement }>({});\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const timerRef = useRef<NodeJS.Timeout>();\n\n  const {\n    sources = [],\n    autoSwitch = false,\n    switchInterval = 3,\n    transition = 'fade',\n    clipShape = 'rectangle',\n    loop = true\n  } = widget.properties;\n\n  //   \n  useEffect(() => {\n    const loadedImages: { [key: string]: HTMLImageElement } = {};\n    let loadCount = 0;\n\n    sources.forEach((source: any) => {\n      const img = new window.Image();\n      img.crossOrigin = 'anonymous';\n      \n      img.onload = () => {\n        loadedImages[source.id] = img;\n        loadCount++;\n        \n        //   ,  \n        if (loadCount === sources.length) {\n          setImages({ ...loadedImages });\n        }\n      };\n      \n      img.onerror = () => {\n        console.error('Failed to load image:', source.value);\n        loadCount++;\n        if (loadCount === sources.length) {\n          setImages({ ...loadedImages });\n        }\n      };\n      \n      img.src = source.value;\n    });\n\n    return () => {\n      Object.values(loadedImages).forEach(img => {\n        img.onload = null;\n        img.onerror = null;\n      });\n    };\n  }, [sources]);\n\n  // \n  useEffect(() => {\n    if (!autoSwitch || sources.length <= 1) {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n      return;\n    }\n\n    timerRef.current = setInterval(() => {\n      setCurrentIndex(prev => {\n        const next = prev + 1;\n        if (next >= sources.length) {\n          return loop ? 0 : prev;\n        }\n        return next;\n      });\n    }, switchInterval * 1000);\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [autoSwitch, switchInterval, sources.length, loop]);\n\n  const isLocked = widget.locked || false;\n  const currentSource = sources[currentIndex];\n  const currentImage = currentSource ? images[currentSource.id] : null;\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*     */}\n      {(!currentImage || sources.length === 0) && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill=\"#9b59b6\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {currentImage && (\n        clipShape && clipShape !== 'rectangle' ? (\n          <ClippedImage widget={widget} image={currentImage} />\n        ) : (\n          <KonvaImage\n            image={currentImage}\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            listening={false}\n          />\n        )\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*     */}\n      {sources.length > 1 && (\n        <Rect\n          x={widget.width - 40}\n          y={widget.height - 20}\n          width={35}\n          height={15}\n          fill=\"rgba(0, 0, 0, 0.7)\"\n          cornerRadius={3}\n          listening={false}\n        />\n      )}\n      {sources.length > 1 && (\n        <KonvaImage\n          x={widget.width - 35}\n          y={widget.height - 18}\n          width={10}\n          height={10}\n          image={(() => {\n            //   \"gallery\"\n            const canvas = document.createElement('canvas');\n            canvas.width = 10;\n            canvas.height = 10;\n            const ctx = canvas.getContext('2d');\n            if (ctx) {\n              ctx.fillStyle = '#fff';\n              ctx.font = '10px Arial';\n              ctx.fillText('', 0, 9);\n            }\n            const img = new window.Image();\n            img.src = canvas.toDataURL();\n            return img;\n          })()}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ImageGallery;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Image as KonvaImage, Rect, Group } from 'react-konva';\nimport { Widget } from '../types';\nimport { useEditorStore } from '../stores/editorStore';\nimport ClippedImage from './ClippedImage';\nimport ImageGallery from './ImageGallery';\n\ninterface ImageWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ImageWidget: React.FC<ImageWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  //    -  ImageGallery\n  if (widget.properties.galleryMode) {\n    return (\n      <ImageGallery\n        widget={widget}\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDragEnd={onDragEnd}\n        onTransformEnd={onTransformEnd}\n        dragBoundFunc={dragBoundFunc}\n      />\n    );\n  }\n\n  //     \n  const [image, setImage] = useState<HTMLImageElement | null>(null);\n  const groupRef = useRef<any>(null);\n  \n  const { clipShape = 'rectangle' } = widget.properties;\n\n  useEffect(() => {\n    if (!widget.properties.src) {\n      setImage(null);\n      return;\n    }\n\n    const img = new window.Image();\n    img.crossOrigin = 'anonymous';\n    \n    img.onload = () => {\n      setImage(img);\n    };\n    \n    img.onerror = () => {\n      console.error('Failed to load image:', widget.properties.src);\n      setImage(null);\n    };\n    \n    img.src = widget.properties.src;\n\n    return () => {\n      img.onload = null;\n      img.onerror = null;\n    };\n  }, [widget.properties.src]);\n\n  //   -      \n  useEffect(() => {\n    if (!image || widget.properties.objectFit !== 'adaptive') return;\n\n    const { updateWidget } = useEditorStore.getState();\n    const imgRatio = image.width / image.height;\n    const currentRatio = widget.width / widget.height;\n\n    // ,    \n    //       \n    if (Math.abs(imgRatio - currentRatio) > 0.01) {\n      //  ,  \n      const newHeight = widget.width / imgRatio;\n      \n      updateWidget(widget.id, {\n        height: Math.round(newHeight)\n      });\n    }\n  }, [image, widget.properties.objectFit, widget.width, widget.height, widget.id]);\n\n  //       objectFit\n  const getImageProps = () => {\n    if (!image) return null;\n\n    const { width, height } = widget;\n    const { objectFit = 'contain' } = widget.properties;\n    const imgRatio = image.width / image.height;\n    const widgetRatio = width / height;\n\n    let cropX = 0;\n    let cropY = 0;\n    let cropWidth = image.width;\n    let cropHeight = image.height;\n\n    switch (objectFit) {\n      case 'cover': {\n        //   ,  \n        if (imgRatio > widgetRatio) {\n          //    -   \n          cropWidth = image.height * widgetRatio;\n          cropX = (image.width - cropWidth) / 2;\n        } else {\n          //    -  /\n          cropHeight = image.width / widgetRatio;\n          cropY = (image.height - cropHeight) / 2;\n        }\n        break;\n      }\n      case 'contain':\n        //      \n        //   canvas \n        break;\n      case 'fill':\n        //    ,  \n        break;\n      case 'scale-down': {\n        //  :  ,   \n        //    contain,      -  \n        if (image.width <= width && image.height <= height) {\n          //    -   \n          cropWidth = image.width;\n          cropHeight = image.height;\n        } else {\n          //   -    ( contain)\n          // crop  \n        }\n        break;\n      }\n      case 'adaptive':\n        //      useEffect\n        break;\n    }\n\n    return {\n      cropX,\n      cropY,\n      cropWidth,\n      cropHeight\n    };\n  };\n\n  const imageProps = getImageProps();\n  const { borderEnabled, borderStyle, borderWidth = 2, borderColor = '#000000' } = widget.properties;\n\n  //  borderStyle  strokeDash\n  const getStrokeDash = (style: string) => {\n    switch (style) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [2, 2];\n      case 'double':\n        return [];\n      default:\n        return [];\n    }\n  };\n\n  const handleTransform = (e: any) => {\n    const node = groupRef.current;\n    if (!node) return;\n\n    //   scale  -     Canvas.tsx\n    onTransformEnd(e);\n  };\n\n  const isLocked = widget.locked || false;\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={handleTransform}\n    >\n      {/*      */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  (   ) */}\n      {!image && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill=\"#9b59b6\"\n          listening={false}\n        />\n      )}\n\n      {/*  */}\n      {image && (\n        clipShape && clipShape !== 'rectangle' ? (\n          <ClippedImage widget={widget} image={image} />\n        ) : (\n          imageProps && (\n            <KonvaImage\n              image={image}\n              x={0}\n              y={0}\n              width={widget.width}\n              height={widget.height}\n              crop={{\n                x: imageProps.cropX,\n                y: imageProps.cropY,\n                width: imageProps.cropWidth,\n                height: imageProps.cropHeight\n              }}\n              listening={false}\n            />\n          )\n        )\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {borderEnabled && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke={borderColor}\n          strokeWidth={borderWidth}\n          dash={getStrokeDash(borderStyle)}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ImageWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ButtonWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ButtonWidget: React.FC<ButtonWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const textRef = useRef<any>(null);\n\n  //  \n  const {\n    text = 'Button',\n    backgroundColor = '#2ecc71',\n    textColor = '#ffffff',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    textAlign = 'center',\n    borderRadius = 8,\n    borderWidth = 0,\n    borderColor = '#000000',\n    borderStyle = 'solid',\n    paddingX = 16,\n    paddingY = 8,\n    shadowEnabled = false,\n    shadowColor = '#000000',\n    shadowBlur = 10,\n    shadowOffsetX = 0,\n    shadowOffsetY = 4,\n    shadowOpacity = 0.3\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //  borderStyle  dash\n  const getDash = () => {\n    switch (borderStyle) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [3, 3];\n      default:\n        return [];\n    }\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*   */}\n      {shadowEnabled && (\n        <Rect\n          x={shadowOffsetX}\n          y={shadowOffsetY}\n          width={widget.width}\n          height={widget.height}\n          cornerRadius={borderRadius}\n          fill={shadowColor}\n          opacity={shadowOpacity}\n          blur={shadowBlur}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={backgroundColor}\n        cornerRadius={borderRadius}\n        stroke={borderWidth > 0 ? borderColor : undefined}\n        strokeWidth={borderWidth}\n        dash={getDash()}\n        listening={false}\n      />\n\n      {/*   */}\n      <Text\n        ref={textRef}\n        text={text}\n        x={paddingX}\n        y={0}\n        width={widget.width - paddingX * 2}\n        height={widget.height}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n        fontStyle={fontWeight === 'bold' ? 'bold' : fontStyle}\n        fill={textColor}\n        align={textAlign}\n        verticalAlign=\"middle\"\n        listening={false}\n      />\n\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          cornerRadius={borderRadius}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ButtonWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface TextWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst TextWidget: React.FC<TextWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n\n  const {\n    text = 'Text',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    textAlign = 'left',\n    verticalAlign = 'top',\n    textColor = '#000000',\n    backgroundColor = '#ffffff',\n    lineHeight = 1.2,\n    padding = 8,\n    textDecoration = 'none'\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //  textDecoration\n  const getTextDecoration = () => {\n    if (textDecoration === 'underline') return 'underline';\n    if (textDecoration === 'line-through') return 'line-through';\n    return '';\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*  */}\n      {backgroundColor !== 'transparent' && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          fill={backgroundColor}\n          listening={false}\n        />\n      )}\n\n      {/*  */}\n      <Text\n        text={text}\n        x={padding}\n        y={padding}\n        width={widget.width - padding * 2}\n        height={widget.height - padding * 2}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n        fontStyle={fontWeight === 'bold' ? 'bold' : fontStyle}\n        fill={textColor}\n        align={textAlign}\n        verticalAlign={verticalAlign}\n        lineHeight={lineHeight}\n        textDecoration={getTextDecoration()}\n        listening={false}\n      />\n\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default TextWidget;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Group, Rect, Text } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface VideoPlaylistProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst VideoPlaylist: React.FC<VideoPlaylistProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const {\n    sources = [],\n    autoNext = true,\n    loop = true\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n  const currentSource = sources[currentIndex];\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"#000000\"\n        listening={false}\n      />\n\n      {/*    */}\n      <Text\n        x={widget.width / 2}\n        y={widget.height / 2 - 30}\n        text=\"\"\n        fontSize={60}\n        fill=\"#ffffff\"\n        align=\"center\"\n        width={widget.width}\n        offsetX={widget.width / 2}\n        listening={false}\n      />\n\n      {/*  \"Playlist\" */}\n      <Text\n        x={0}\n        y={widget.height / 2 + 40}\n        text=\"PLAYLIST\"\n        fontSize={16}\n        fill=\"#ffffff\"\n        align=\"center\"\n        width={widget.width}\n        listening={false}\n      />\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {sources.length > 1 && (\n        <>\n          <Rect\n            x={widget.width - 50}\n            y={widget.height - 25}\n            width={45}\n            height={20}\n            fill=\"rgba(0, 0, 0, 0.8)\"\n            cornerRadius={4}\n            listening={false}\n          />\n          <Text\n            x={widget.width - 48}\n            y={widget.height - 21}\n            text={` ${sources.length}`}\n            fontSize={12}\n            fill=\"#ffffff\"\n            listening={false}\n          />\n        </>\n      )}\n    </Group>\n  );\n};\n\nexport default VideoPlaylist;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Group, Rect, Text as KonvaText, Image as KonvaImage } from 'react-konva';\nimport { Widget } from '../types';\nimport { useEditorStore } from '../stores/editorStore';\nimport VideoPlaylist from './VideoPlaylist';\n\ninterface VideoWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst VideoWidget: React.FC<VideoWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  //    -  VideoPlaylist\n  if (widget.properties.playlistMode) {\n    return (\n      <VideoPlaylist\n        widget={widget}\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDragEnd={onDragEnd}\n        onTransformEnd={onTransformEnd}\n        dragBoundFunc={dragBoundFunc}\n      />\n    );\n  }\n\n  //     \n  const groupRef = useRef<any>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(null);\n  const animationRef = useRef<number>();\n\n  const {\n    sourceType = 'url',\n    src = '',\n    rtspUrl = '',\n    isLocalFile = false,\n    fileName = '',\n    objectFit = 'contain',\n    borderEnabled = false,\n    borderStyle = 'solid',\n    borderWidth = 2,\n    borderColor = '#000000',\n    autoplay = false,\n    loop = false,\n    muted = true,\n    controls = false\n  } = widget.properties;\n\n  //    video \n  useEffect(() => {\n    const video = document.createElement('video');\n    video.crossOrigin = 'anonymous';\n    video.loop = loop;\n    video.muted = muted;\n    video.playsInline = true;\n    \n    if (sourceType === 'url' && src) {\n      video.src = src;\n      \n      video.onloadedmetadata = () => {\n        setVideoElement(video);\n        if (autoplay) {\n          video.play().catch(err => {\n            console.log('Autoplay prevented:', err);\n          });\n        }\n      };\n\n      video.onerror = () => {\n        console.error('Failed to load video:', src);\n        setVideoElement(null);\n      };\n    } else {\n      setVideoElement(null);\n    }\n\n    videoRef.current = video;\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      video.pause();\n      video.src = '';\n      video.load();\n    };\n  }, [src, sourceType, autoplay, loop, muted]);\n\n  //     \n  useEffect(() => {\n    if (!videoElement) return;\n\n    const updateCanvas = () => {\n      //   \n      const layer = groupRef.current?.getLayer();\n      if (layer) {\n        layer.batchDraw();\n      }\n      animationRef.current = requestAnimationFrame(updateCanvas);\n    };\n\n    animationRef.current = requestAnimationFrame(updateCanvas);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [videoElement]);\n\n  //  \n  useEffect(() => {\n    if (objectFit !== 'adaptive' || !videoElement) return;\n\n    const { updateWidget } = useEditorStore.getState();\n    const videoRatio = videoElement.videoWidth / videoElement.videoHeight || 16 / 9;\n    const currentRatio = widget.width / widget.height;\n\n    if (Math.abs(videoRatio - currentRatio) > 0.01) {\n      const newHeight = widget.width / videoRatio;\n      \n      updateWidget(widget.id, {\n        height: Math.round(newHeight)\n      });\n    }\n  }, [objectFit, videoElement, widget.width, widget.height, widget.id]);\n\n  //       objectFit\n  const getVideoProps = () => {\n    if (!videoElement || videoElement.videoWidth === 0) return null;\n\n    const { width, height } = widget;\n    const videoRatio = videoElement.videoWidth / videoElement.videoHeight;\n    const widgetRatio = width / height;\n\n    let sx = 0;\n    let sy = 0;\n    let sWidth = videoElement.videoWidth;\n    let sHeight = videoElement.videoHeight;\n    let dx = 0;\n    let dy = 0;\n    let dWidth = width;\n    let dHeight = height;\n\n    switch (objectFit) {\n      case 'cover': {\n        if (videoRatio > widgetRatio) {\n          //   -   \n          sWidth = videoElement.videoHeight * widgetRatio;\n          sx = (videoElement.videoWidth - sWidth) / 2;\n        } else {\n          //   -  /\n          sHeight = videoElement.videoWidth / widgetRatio;\n          sy = (videoElement.videoHeight - sHeight) / 2;\n        }\n        break;\n      }\n      case 'contain': {\n        //    \n        if (videoRatio > widgetRatio) {\n          dHeight = width / videoRatio;\n          dy = (height - dHeight) / 2;\n        } else {\n          dWidth = height * videoRatio;\n          dx = (width - dWidth) / 2;\n        }\n        break;\n      }\n      case 'scale-down': {\n        //  ,    \n        if (videoElement.videoWidth <= width && videoElement.videoHeight <= height) {\n          dWidth = videoElement.videoWidth;\n          dHeight = videoElement.videoHeight;\n          dx = (width - dWidth) / 2;\n          dy = (height - dHeight) / 2;\n        } else {\n          //   contain\n          if (videoRatio > widgetRatio) {\n            dHeight = width / videoRatio;\n            dy = (height - dHeight) / 2;\n          } else {\n            dWidth = height * videoRatio;\n            dx = (width - dWidth) / 2;\n          }\n        }\n        break;\n      }\n      case 'fill':\n      default:\n        //    \n        break;\n    }\n\n    return {\n      crop: { x: sx, y: sy, width: sWidth, height: sHeight },\n      position: { x: dx, y: dy, width: dWidth, height: dHeight }\n    };\n  };\n\n  const videoProps = getVideoProps();\n\n  //  borderStyle  strokeDash\n  const getStrokeDash = (style: string) => {\n    switch (style) {\n      case 'dashed':\n        return [10, 5];\n      case 'dotted':\n        return [2, 2];\n      case 'double':\n        return [];\n      default:\n        return [];\n    }\n  };\n\n  const handleTransform = (e: any) => {\n    const node = groupRef.current;\n    if (!node) return;\n\n    onTransformEnd(e);\n  };\n\n  //     \n  const handleClick = (e: any) => {\n    onSelect(e);\n    \n    //   controls,  play/pause\n    if (controls && videoElement) {\n      if (videoElement.paused) {\n        videoElement.play();\n      } else {\n        videoElement.pause();\n      }\n    }\n  };\n\n  const isLocked = widget.locked || false;\n\n  //     (   )\n  const getDisplayText = () => {\n    if (sourceType === 'rtsp' && rtspUrl) {\n      return ` RTSP\\n${rtspUrl.substring(0, 30)}...`;\n    }\n    if (sourceType === 'url' && src) {\n      if (isLocalFile && fileName) {\n        return ` ${fileName}`;\n      }\n      return ` \\n${src.substring(0, 30)}...`;\n    }\n    return ' \\n  ';\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={handleClick}\n      onTap={handleClick}\n      onDragEnd={onDragEnd}\n      onTransformEnd={handleTransform}\n    >\n      {/*      */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={sourceType === 'rtsp' ? '#2c3e50' : '#f39c12'}\n        listening={false}\n      />\n\n      {/*  ( ) */}\n      {videoElement && videoProps ? (\n        <KonvaImage\n          image={videoElement}\n          x={videoProps.position.x}\n          y={videoProps.position.y}\n          width={videoProps.position.width}\n          height={videoProps.position.height}\n          crop={videoProps.crop}\n          listening={false}\n        />\n      ) : (\n        /* - (   ) */\n        <KonvaText\n          text={getDisplayText()}\n          x={0}\n          y={0}\n          width={widget.width}\n          height={widget.height}\n          fontSize={14}\n          fontFamily=\"Arial\"\n          fill=\"#ffffff\"\n          align=\"center\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {sourceType === 'rtsp' && (\n        <Rect\n          x={10}\n          y={10}\n          width={45}\n          height={20}\n          fill=\"#ff0000\"\n          cornerRadius={4}\n          listening={false}\n        />\n      )}\n      \n      {sourceType === 'rtsp' && (\n        <KonvaText\n          text=\"LIVE\"\n          x={10}\n          y={13}\n          width={45}\n          fontSize={12}\n          fontFamily=\"Arial\"\n          fontWeight=\"bold\"\n          fill=\"#ffffff\"\n          align=\"center\"\n          listening={false}\n        />\n      )}\n\n      {videoElement && !videoElement.paused && (\n        <KonvaText\n          text=\"\"\n          x={widget.width - 30}\n          y={10}\n          fontSize={16}\n          fontFamily=\"Arial\"\n          fill=\"#00ff00\"\n          listening={false}\n        />\n      )}\n\n      {controls && videoElement && (\n        <KonvaText\n          text={videoElement.paused ? \" \" : \" \"}\n          x={10}\n          y={widget.height - 30}\n          fontSize={12}\n          fontFamily=\"Arial\"\n          fill=\"#ffffff\"\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {borderEnabled && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke={borderColor}\n          strokeWidth={borderWidth}\n          dash={getStrokeDash(borderStyle)}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default VideoWidget;\n","import React, { useRef } from 'react';\nimport { Group, Rect, Circle, RegularPolygon, Star, Ellipse, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface ShapeWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nconst ShapeWidget: React.FC<ShapeWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n\n  const {\n    shapeType = 'rectangle',\n    fillColor = '#4a90e2',\n    strokeColor = '#2c3e50',\n    strokeWidth = 0,\n    cornerRadius = 0,\n    opacity = 1\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n\n  //   \n  const renderShape = () => {\n    const commonProps = {\n      fill: fillColor,\n      stroke: strokeWidth > 0 ? strokeColor : undefined,\n      strokeWidth: strokeWidth,\n      opacity: opacity,\n      listening: false\n    };\n\n    switch (shapeType) {\n      case 'rectangle':\n        return (\n          <Rect\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            cornerRadius={cornerRadius}\n            {...commonProps}\n          />\n        );\n\n      case 'circle':\n        //  -     \n        const radius = Math.min(widget.width, widget.height) / 2;\n        return (\n          <Circle\n            x={widget.width / 2}\n            y={widget.height / 2}\n            radius={radius}\n            {...commonProps}\n          />\n        );\n\n      case 'ellipse':\n        return (\n          <Ellipse\n            x={widget.width / 2}\n            y={widget.height / 2}\n            radiusX={widget.width / 2}\n            radiusY={widget.height / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'triangle':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={3}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'pentagon':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={5}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'hexagon':\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={6}\n            radius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'star':\n        return (\n          <Star\n            x={widget.width / 2}\n            y={widget.height / 2}\n            numPoints={5}\n            innerRadius={Math.min(widget.width, widget.height) / 4}\n            outerRadius={Math.min(widget.width, widget.height) / 2}\n            {...commonProps}\n          />\n        );\n\n      case 'diamond':\n        //  -    45\n        return (\n          <RegularPolygon\n            x={widget.width / 2}\n            y={widget.height / 2}\n            sides={4}\n            radius={Math.min(widget.width, widget.height) / 2}\n            rotation={45}\n            {...commonProps}\n          />\n        );\n\n      case 'line':\n        return (\n          <Line\n            points={[0, widget.height / 2, widget.width, widget.height / 2]}\n            stroke={strokeColor}\n            strokeWidth={Math.max(strokeWidth, 2)}\n            opacity={opacity}\n            listening={false}\n          />\n        );\n\n      case 'arrow':\n        //  \n        const arrowWidth = widget.width;\n        const arrowHeight = widget.height;\n        const headWidth = arrowHeight * 0.6;\n        const shaftHeight = arrowHeight * 0.4;\n        \n        return (\n          <Line\n            points={[\n              0, arrowHeight / 2 - shaftHeight / 2,  //   \n              arrowWidth - headWidth, arrowHeight / 2 - shaftHeight / 2,  //    \n              arrowWidth - headWidth, 0,  //  \n              arrowWidth, arrowHeight / 2,  //  \n              arrowWidth - headWidth, arrowHeight,  //  \n              arrowWidth - headWidth, arrowHeight / 2 + shaftHeight / 2,  //    \n              0, arrowHeight / 2 + shaftHeight / 2  //   \n            ]}\n            closed\n            fill={fillColor}\n            stroke={strokeWidth > 0 ? strokeColor : undefined}\n            strokeWidth={strokeWidth}\n            opacity={opacity}\n            listening={false}\n          />\n        );\n\n      default:\n        return (\n          <Rect\n            x={0}\n            y={0}\n            width={widget.width}\n            height={widget.height}\n            {...commonProps}\n          />\n        );\n    }\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*  */}\n      {renderShape()}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default ShapeWidget;\n","import React, { useRef, useState } from 'react';\nimport { Group, Rect, Text as KonvaText, Line } from 'react-konva';\nimport { Widget } from '../types';\n\ninterface MenuWidgetProps {\n  widget: Widget;\n  isSelected: boolean;\n  onSelect: (e: any) => void;\n  onDragEnd: (e: any) => void;\n  onTransformEnd: (e: any) => void;\n  dragBoundFunc?: (pos: { x: number; y: number }) => { x: number; y: number };\n}\n\nexport interface MenuItem {\n  id: string;\n  label: string;\n  children?: MenuItem[];\n}\n\nconst MenuWidget: React.FC<MenuWidgetProps> = ({\n  widget,\n  isSelected,\n  onSelect,\n  onDragEnd,\n  onTransformEnd,\n  dragBoundFunc\n}) => {\n  const groupRef = useRef<any>(null);\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n  const [expandedItem, setExpandedItem] = useState<string | null>(null);\n\n  const {\n    orientation = 'horizontal',\n    items = [\n      { id: '1', label: '' },\n      { id: '2', label: ' ' },\n      { id: '3', label: '', children: [\n        { id: '3-1', label: ' 1' },\n        { id: '3-2', label: ' 2' }\n      ]},\n      { id: '4', label: '' }\n    ] as MenuItem[],\n    backgroundColor = '#2c3e50',\n    textColor = '#ffffff',\n    hoverColor = '#34495e',\n    fontSize = 16,\n    fontFamily = 'Arial',\n    itemPadding = 16,\n    submenuBackgroundColor = '#34495e',\n    submenuTextColor = '#ffffff',\n    borderWidth = 0,\n    borderColor = '#000000',\n    itemHeight = 40\n  } = widget.properties;\n\n  const isLocked = widget.locked || false;\n  const isHorizontal = orientation === 'horizontal';\n\n  //    \n  const calculateItemWidth = (label: string) => {\n    //   \n    return label.length * (fontSize * 0.6) + itemPadding * 2;\n  };\n\n  //   \n  const renderHorizontalMenu = () => {\n    const elements: JSX.Element[] = [];\n    let currentX = 0;\n\n    items.forEach((item, index) => {\n      const itemWidth = calculateItemWidth(item.label);\n      const isHovered = hoveredItem === item.id;\n      const isExpanded = expandedItem === item.id;\n      const hasChildren = item.children && item.children.length > 0;\n\n      //   \n      elements.push(\n        <Rect\n          key={`bg-${item.id}`}\n          x={currentX}\n          y={0}\n          width={itemWidth}\n          height={itemHeight}\n          fill={isHovered ? hoverColor : backgroundColor}\n          listening={true}\n          onMouseEnter={() => setHoveredItem(item.id)}\n          onMouseLeave={() => setHoveredItem(null)}\n          onClick={() => {\n            if (hasChildren) {\n              setExpandedItem(expandedItem === item.id ? null : item.id);\n            }\n          }}\n        />\n      );\n\n      //   \n      elements.push(\n        <KonvaText\n          key={`text-${item.id}`}\n          x={currentX}\n          y={0}\n          width={itemWidth}\n          height={itemHeight}\n          text={item.label}\n          fontSize={fontSize}\n          fontFamily={fontFamily}\n          fill={textColor}\n          align=\"center\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      );\n\n      //   ( )\n      if (hasChildren) {\n        elements.push(\n          <KonvaText\n            key={`arrow-${item.id}`}\n            x={currentX + itemWidth - 20}\n            y={0}\n            width={20}\n            height={itemHeight}\n            text=\"\"\n            fontSize={10}\n            fill={textColor}\n            align=\"center\"\n            verticalAlign=\"middle\"\n            listening={false}\n          />\n        );\n      }\n\n      // \n      if (index < items.length - 1) {\n        elements.push(\n          <Line\n            key={`divider-${item.id}`}\n            points={[currentX + itemWidth, 5, currentX + itemWidth, itemHeight - 5]}\n            stroke={borderColor}\n            strokeWidth={1}\n            opacity={0.3}\n            listening={false}\n          />\n        );\n      }\n\n      //  ( )\n      if (isExpanded && hasChildren) {\n        item.children!.forEach((child, childIndex) => {\n          const childY = itemHeight + childIndex * itemHeight;\n          const childWidth = Math.max(itemWidth, calculateItemWidth(child.label));\n\n          //  \n          elements.push(\n            <Rect\n              key={`submenu-bg-${child.id}`}\n              x={currentX}\n              y={childY}\n              width={childWidth}\n              height={itemHeight}\n              fill={submenuBackgroundColor}\n              listening={true}\n              onMouseEnter={() => setHoveredItem(child.id)}\n              onMouseLeave={() => setHoveredItem(null)}\n            />\n          );\n\n          //  \n          elements.push(\n            <KonvaText\n              key={`submenu-text-${child.id}`}\n              x={currentX + itemPadding / 2}\n              y={childY}\n              width={childWidth - itemPadding / 2}\n              height={itemHeight}\n              text={child.label}\n              fontSize={fontSize - 2}\n              fontFamily={fontFamily}\n              fill={submenuTextColor}\n              align=\"left\"\n              verticalAlign=\"middle\"\n              listening={false}\n            />\n          );\n        });\n      }\n\n      currentX += itemWidth;\n    });\n\n    return elements;\n  };\n\n  //   \n  const renderVerticalMenu = () => {\n    const elements: JSX.Element[] = [];\n    let currentY = 0;\n    const menuWidth = widget.width;\n\n    items.forEach((item, index) => {\n      const isHovered = hoveredItem === item.id;\n      const isExpanded = expandedItem === item.id;\n      const hasChildren = item.children && item.children.length > 0;\n\n      //   \n      elements.push(\n        <Rect\n          key={`bg-${item.id}`}\n          x={0}\n          y={currentY}\n          width={menuWidth}\n          height={itemHeight}\n          fill={isHovered ? hoverColor : backgroundColor}\n          listening={true}\n          onMouseEnter={() => setHoveredItem(item.id)}\n          onMouseLeave={() => setHoveredItem(null)}\n          onClick={() => {\n            if (hasChildren) {\n              setExpandedItem(expandedItem === item.id ? null : item.id);\n            }\n          }}\n        />\n      );\n\n      //   \n      elements.push(\n        <KonvaText\n          key={`text-${item.id}`}\n          x={itemPadding}\n          y={currentY}\n          width={menuWidth - itemPadding * 2 - (hasChildren ? 20 : 0)}\n          height={itemHeight}\n          text={item.label}\n          fontSize={fontSize}\n          fontFamily={fontFamily}\n          fill={textColor}\n          align=\"left\"\n          verticalAlign=\"middle\"\n          listening={false}\n        />\n      );\n\n      //   (   )\n      if (hasChildren) {\n        elements.push(\n          <KonvaText\n            key={`arrow-${item.id}`}\n            x={menuWidth - 20}\n            y={currentY}\n            width={20}\n            height={itemHeight}\n            text={isExpanded ? \"\" : \"\"}\n            fontSize={10}\n            fill={textColor}\n            align=\"center\"\n            verticalAlign=\"middle\"\n            listening={false}\n          />\n        );\n      }\n\n      currentY += itemHeight;\n\n      // \n      if (index < items.length - 1 && !isExpanded) {\n        elements.push(\n          <Line\n            key={`divider-${item.id}`}\n            points={[10, currentY, menuWidth - 10, currentY]}\n            stroke={borderColor}\n            strokeWidth={1}\n            opacity={0.3}\n            listening={false}\n          />\n        );\n      }\n\n      //  ( )\n      if (isExpanded && hasChildren) {\n        item.children!.forEach((child, childIndex) => {\n          const childIsHovered = hoveredItem === child.id;\n\n          //  \n          elements.push(\n            <Rect\n              key={`submenu-bg-${child.id}`}\n              x={0}\n              y={currentY}\n              width={menuWidth}\n              height={itemHeight}\n              fill={childIsHovered ? hoverColor : submenuBackgroundColor}\n              listening={true}\n              onMouseEnter={() => setHoveredItem(child.id)}\n              onMouseLeave={() => setHoveredItem(null)}\n            />\n          );\n\n          //   \n          elements.push(\n            <KonvaText\n              key={`submenu-text-${child.id}`}\n              x={itemPadding * 2}\n              y={currentY}\n              width={menuWidth - itemPadding * 3}\n              height={itemHeight}\n              text={child.label}\n              fontSize={fontSize - 2}\n              fontFamily={fontFamily}\n              fill={submenuTextColor}\n              align=\"left\"\n              verticalAlign=\"middle\"\n              listening={false}\n            />\n          );\n\n          currentY += itemHeight;\n        });\n\n        //   \n        if (index < items.length - 1) {\n          elements.push(\n            <Line\n              key={`divider-after-${item.id}`}\n              points={[10, currentY, menuWidth - 10, currentY]}\n              stroke={borderColor}\n              strokeWidth={1}\n              opacity={0.3}\n              listening={false}\n            />\n          );\n        }\n      }\n    });\n\n    return elements;\n  };\n\n  return (\n    <Group\n      ref={groupRef}\n      id={widget.id}\n      x={widget.x}\n      y={widget.y}\n      width={widget.width}\n      height={widget.height}\n      rotation={widget.rotation || 0}\n      draggable={!isLocked}\n      dragBoundFunc={dragBoundFunc}\n      opacity={isLocked ? 0.6 : 1}\n      onClick={onSelect}\n      onTap={onSelect}\n      onDragEnd={onDragEnd}\n      onTransformEnd={onTransformEnd}\n    >\n      {/*     */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill=\"transparent\"\n        listening={true}\n      />\n\n      {/*   */}\n      <Rect\n        width={widget.width}\n        height={widget.height}\n        fill={backgroundColor}\n        listening={false}\n      />\n\n      {/*  */}\n      {borderWidth > 0 && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke={borderColor}\n          strokeWidth={borderWidth}\n          listening={false}\n        />\n      )}\n\n      {/*   */}\n      {isHorizontal ? renderHorizontalMenu() : renderVerticalMenu()}\n\n      {/*   */}\n      {isSelected && (\n        <Rect\n          width={widget.width}\n          height={widget.height}\n          stroke=\"#007acc\"\n          strokeWidth={2}\n          listening={false}\n        />\n      )}\n    </Group>\n  );\n};\n\nexport default MenuWidget;\n","import React, { useRef, useEffect } from 'react';\nimport { Stage, Layer, Rect, Transformer, Image as KonvaImage, Text, Group } from 'react-konva';\nimport { useEditorStore } from '../stores/editorStore';\nimport ImageWidget from './ImageWidget';\nimport ButtonWidget from './ButtonWidget';\nimport TextWidget from './TextWidget';\nimport VideoWidget from './VideoWidget';\nimport ShapeWidget from './ShapeWidget';\nimport MenuWidget from './MenuWidget';\nimport './Canvas.css';\n\n//   fallback  (    )\nconst WIDGET_COLORS: Record<string, string> = {\n  shape: '#4a90e2',\n  rectangle: '#4a90e2',  //   \n  button: '#2ecc71',\n  text: '#e74c3c',\n  image: '#9b59b6',\n  video: '#f39c12'\n};\n\nconst Canvas: React.FC = () => {\n  const { \n    project, \n    selectedWidgetIds, \n    selectWidget, \n    clearSelection,\n    updateWidget,\n    zoom,\n    gridEnabled,\n    snapToGrid,\n    gridSize,\n    gridLineWidth,\n    gridColor,\n    pendingWidget,\n    addWidgetAtPosition,\n    clearPendingWidget\n  } = useEditorStore();\n\n  const stageRef = useRef<any>(null);\n  const transformerRef = useRef<any>(null);\n\n  //    \n  const snapToGridValue = (value: number): number => {\n    if (!snapToGrid) return value;\n    return Math.round(value / gridSize) * gridSize;\n  };\n\n  //      \n  const dragBoundFunc = (pos: { x: number; y: number }) => {\n    return {\n      x: snapToGridValue(pos.x),\n      y: snapToGridValue(pos.y)\n    };\n  };\n\n  useEffect(() => {\n    if (!transformerRef.current || !project) return;\n\n    const stage = stageRef.current;\n    \n    //      \n    const selectedNodes = selectedWidgetIds\n      .map(id => {\n        const widget = project.widgets.find(w => w.id === id);\n        //   \n        if (widget?.locked) return null;\n        return stage.findOne(`#${id}`);\n      })\n      .filter(Boolean);\n\n    transformerRef.current.nodes(selectedNodes);\n    transformerRef.current.getLayer().batchDraw();\n  }, [selectedWidgetIds, project]);\n\n  if (!project) return null;\n\n  const handleStageClick = (e: any) => {\n    //     -     \n    if (pendingWidget) {\n      const stage = e.target.getStage();\n      const pointerPosition = stage.getPointerPosition();\n      \n      if (pointerPosition) {\n        addWidgetAtPosition(pointerPosition.x, pointerPosition.y);\n      }\n      return;\n    }\n\n    //    Stage     -  \n    const clickedOnEmpty = e.target === e.target.getStage() || \n                          e.target.attrs.id === 'canvas-background';\n    \n    if (clickedOnEmpty) {\n      clearSelection();\n    }\n  };\n\n  const handleWidgetClick = (id: string, e: any) => {\n    e.cancelBubble = true;\n    const isMultiSelect = e.evt.ctrlKey || e.evt.metaKey;\n    selectWidget(id, isMultiSelect);\n  };\n\n  const handleDragEnd = (id: string, e: any) => {\n    const x = snapToGridValue(e.target.x());\n    const y = snapToGridValue(e.target.y());\n\n    updateWidget(id, { x, y });\n  };\n\n  const handleTransformEnd = (id: string, e: any) => {\n    const node = e.target;\n    const scaleX = node.scaleX();\n    const scaleY = node.scaleY();\n\n    //  scale     \n    node.scaleX(1);\n    node.scaleY(1);\n\n    //  Group   width/height  attrs\n    const nodeWidth = node.width ? node.width() : node.attrs.width || 100;\n    const nodeHeight = node.height ? node.height() : node.attrs.height || 100;\n\n    let width = Math.max(10, nodeWidth * scaleX);\n    let height = Math.max(10, nodeHeight * scaleY);\n    let x = node.x();\n    let y = node.y();\n\n    //   \n    if (snapToGrid) {\n      width = snapToGridValue(width);\n      height = snapToGridValue(height);\n      x = snapToGridValue(x);\n      y = snapToGridValue(y);\n    }\n\n    updateWidget(id, {\n      x,\n      y,\n      width,\n      height,\n      rotation: node.rotation()\n    });\n  };\n\n  //  \n  const renderGrid = () => {\n    if (!gridEnabled) return null;\n\n    const lines = [];\n    const { width, height } = project.canvas;\n\n    //  \n    for (let i = 0; i <= width / gridSize; i++) {\n      lines.push(\n        <Rect\n          key={`v-${i}`}\n          x={i * gridSize}\n          y={0}\n          width={gridLineWidth}\n          height={height}\n          fill={gridColor}\n        />\n      );\n    }\n\n    //  \n    for (let i = 0; i <= height / gridSize; i++) {\n      lines.push(\n        <Rect\n          key={`h-${i}`}\n          x={0}\n          y={i * gridSize}\n          width={width}\n          height={gridLineWidth}\n          fill={gridColor}\n        />\n      );\n    }\n\n    return lines;\n  };\n\n  return (\n    <div className=\"canvas-container\">\n      <div className=\"canvas-scroll\">\n        <div \n          className=\"canvas-wrapper\"\n          style={{\n            transform: `scale(${zoom})`,\n            transformOrigin: 'top left',\n            cursor: pendingWidget ? 'crosshair' : 'default'\n          }}\n        >\n          <Stage\n            ref={stageRef}\n            width={project.canvas.width}\n            height={project.canvas.height}\n            onClick={handleStageClick}\n            onTap={handleStageClick}\n          >\n            <Layer>\n              {/*   */}\n              <Rect\n                id=\"canvas-background\"\n                x={0}\n                y={0}\n                width={project.canvas.width}\n                height={project.canvas.height}\n                fill={project.canvas.backgroundColor || '#ffffff'}\n              />\n              \n              {/*  */}\n              {renderGrid()}\n\n              {/*  */}\n              {project.widgets\n                .slice()\n                .sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0))\n                .map(widget => {\n                const isLocked = widget.locked || false;\n                \n                //    ImageWidget\n                if (widget.type === 'image') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ImageWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    ButtonWidget\n                if (widget.type === 'button') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ButtonWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    TextWidget\n                if (widget.type === 'text') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <TextWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    VideoWidget\n                if (widget.type === 'video') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <VideoWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    ShapeWidget\n                if (widget.type === 'shape' || widget.type === 'rectangle') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <ShapeWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    MenuWidget\n                if (widget.type === 'menu') {\n                  return (\n                    <React.Fragment key={widget.id}>\n                      <MenuWidget\n                        widget={widget}\n                        isSelected={selectedWidgetIds.includes(widget.id)}\n                        onSelect={(e) => handleWidgetClick(widget.id, e)}\n                        onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                        onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                        dragBoundFunc={snapToGrid ? dragBoundFunc : undefined}\n                      />\n                      {/*   */}\n                      {isLocked && (\n                        <Text\n                          x={widget.x + 5}\n                          y={widget.y + 5}\n                          text=\"\"\n                          fontSize={16}\n                          listening={false}\n                        />\n                      )}\n                    </React.Fragment>\n                  );\n                }\n\n                //    -  Rect (fallback)\n                return (\n                  <React.Fragment key={widget.id}>\n                    <Rect\n                      id={widget.id}\n                      x={widget.x}\n                      y={widget.y}\n                      width={widget.width}\n                      height={widget.height}\n                      rotation={widget.rotation || 0}\n                      fill={WIDGET_COLORS[widget.type] || '#4a90e2'}\n                      stroke={selectedWidgetIds.includes(widget.id) ? '#007acc' : undefined}\n                      strokeWidth={selectedWidgetIds.includes(widget.id) ? 2 : 0}\n                      opacity={isLocked ? 0.6 : 1}\n                      draggable={!isLocked}\n                      onClick={(e) => handleWidgetClick(widget.id, e)}\n                      onTap={(e) => handleWidgetClick(widget.id, e)}\n                      onDragEnd={(e) => handleDragEnd(widget.id, e)}\n                      onTransformEnd={(e) => handleTransformEnd(widget.id, e)}\n                    />\n                    {/*      */}\n                    {isLocked && (\n                      <Text\n                        x={widget.x + 5}\n                        y={widget.y + 5}\n                        text=\"\"\n                        fontSize={16}\n                        listening={false}\n                      />\n                    )}\n                  </React.Fragment>\n                );\n              })}\n\n              {/* Transformer     */}\n              <Transformer\n                ref={transformerRef}\n                boundBoxFunc={(oldBox, newBox) => {\n                  //   10x10\n                  if (newBox.width < 10 || newBox.height < 10) {\n                    return oldBox;\n                  }\n                  return newBox;\n                }}\n              />\n            </Layer>\n          </Stage>\n        </div>\n      </div>\n\n      <div className=\"canvas-info\">\n        <span>\n          {project.canvas.width}  {project.canvas.height} px\n        </span>\n        {selectedWidgetIds.length > 0 && (\n          <span>\n            : {selectedWidgetIds.length}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from 'react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { Eye, EyeOff, Lock, Unlock, Trash2 } from 'lucide-react';\nimport './OutlinePanel.css';\n\nconst OutlinePanel: React.FC = () => {\n  const { project, selectedWidgetIds, selectWidget, updateWidget, deleteWidget } = useEditorStore();\n\n  if (!project) return null;\n\n  //     \n  const getWidgetIcon = (type: string): string => {\n    const icons: Record<string, string> = {\n      shape: '',\n      rectangle: '',\n      text: '',\n      button: '',\n      image: '',\n      video: '',\n      menu: ''\n    };\n    return icons[type] || '';\n  };\n\n  //   \n  const getWidgetLabel = (widget: any): string => {\n    if (widget.properties.text) {\n      const text = widget.properties.text.substring(0, 20);\n      return text.length < widget.properties.text.length ? `${text}...` : text;\n    }\n    if (widget.properties.items) {\n      return ` (${widget.properties.items.length} )`;\n    }\n    return widget.type.charAt(0).toUpperCase() + widget.type.slice(1);\n  };\n\n  //    z-index\n  const sortedWidgets = [...project.widgets].sort((a, b) => {\n    return (b.zIndex || 0) - (a.zIndex || 0);\n  });\n\n  return (\n    <div className=\"outline-panel\">\n      <div className=\"outline-header\">\n        <h3></h3>\n        <span className=\"outline-count\">{project.widgets.length} </span>\n      </div>\n\n      <div className=\"outline-list\">\n        {sortedWidgets.length === 0 ? (\n          <div className=\"outline-empty\">\n            <p> </p>\n            <span>   </span>\n          </div>\n        ) : (\n          sortedWidgets.map((widget) => {\n            const isSelected = selectedWidgetIds.includes(widget.id);\n            const isLocked = widget.locked || false;\n\n            return (\n              <div\n                key={widget.id}\n                className={`outline-item ${isSelected ? 'selected' : ''} ${isLocked ? 'locked' : ''}`}\n                onClick={() => selectWidget(widget.id, false)}\n              >\n                <div className=\"outline-item-main\">\n                  <span className=\"outline-icon\">{getWidgetIcon(widget.type)}</span>\n                  <div className=\"outline-info\">\n                    <span className=\"outline-label\">{getWidgetLabel(widget)}</span>\n                    <span className=\"outline-meta\">\n                      {widget.width}{widget.height}  z:{widget.zIndex || 0}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"outline-actions\" onClick={(e) => e.stopPropagation()}>\n                  {/*  -    */}\n                  {/* <button\n                    className=\"outline-action-btn\"\n                    title=\"\"\n                  >\n                    <Eye size={14} />\n                  </button> */}\n\n                  {/*  */}\n                  <button\n                    className=\"outline-action-btn\"\n                    onClick={() => {\n                      updateWidget(widget.id, { locked: !isLocked });\n                    }}\n                    title={isLocked ? '' : ''}\n                  >\n                    {isLocked ? <Lock size={14} /> : <Unlock size={14} />}\n                  </button>\n\n                  {/*  */}\n                  <button\n                    className=\"outline-action-btn delete\"\n                    onClick={() => {\n                      if (window.confirm(`  \"${getWidgetLabel(widget)}\"?`)) {\n                        deleteWidget(widget.id);\n                      }\n                    }}\n                    title=\"\"\n                  >\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OutlinePanel;\n","import React from 'react';\nimport { useEditorStore } from '../stores/editorStore';\nimport { Square, Type, Image, Video, MousePointer, Menu } from 'lucide-react';\nimport OutlinePanel from './OutlinePanel';\nimport './WidgetLibrary.css';\n\nconst WidgetLibrary: React.FC = () => {\n  const { addWidget, project } = useEditorStore();\n\n  const widgetTypes = [\n    {\n      type: 'shape',\n      name: '',\n      icon: Square,\n      defaultProps: {\n        shapeType: 'rectangle',\n        fillColor: '#4a90e2',\n        strokeColor: '#2c3e50',\n        strokeWidth: 0,\n        cornerRadius: 0,\n        opacity: 1\n      }\n    },\n    {\n      type: 'button',\n      name: '',\n      icon: MousePointer,\n      defaultProps: {\n        text: ' ',\n        backgroundColor: '#4a90e2',\n        textColor: '#ffffff'\n      }\n    },\n    {\n      type: 'text',\n      name: '',\n      icon: Type,\n      defaultProps: {\n        text: ' ',\n        fontSize: 24,\n        color: '#000000'\n      }\n    },\n    {\n      type: 'image',\n      name: '',\n      icon: Image,\n      defaultProps: {\n        src: ''\n      }\n    },\n    {\n      type: 'video',\n      name: '',\n      icon: Video,\n      defaultProps: {\n        src: '',\n        autoplay: false,\n        loop: false\n      }\n    },\n    {\n      type: 'menu',\n      name: '',\n      icon: Menu,\n      defaultProps: {\n        orientation: 'horizontal',\n        items: [\n          { id: '1', label: '' },\n          { id: '2', label: ' ' },\n          { id: '3', label: '', children: [\n            { id: '3-1', label: ' 1' },\n            { id: '3-2', label: ' 2' }\n          ]},\n          { id: '4', label: '' }\n        ],\n        backgroundColor: '#2c3e50',\n        textColor: '#ffffff',\n        hoverColor: '#34495e',\n        fontSize: 16,\n        fontFamily: 'Arial',\n        itemPadding: 16,\n        submenuBackgroundColor: '#34495e',\n        submenuTextColor: '#ffffff',\n        borderWidth: 0,\n        borderColor: '#000000',\n        itemHeight: 40\n      }\n    }\n  ];\n\n  const handleAddWidget = (type: string, defaultProps: any) => {\n    if (!project) return;\n\n    const { setPendingWidget } = useEditorStore.getState();\n    setPendingWidget(type, defaultProps);\n  };\n\n  return (\n    <div className=\"widget-library panel\">\n      <div className=\"widget-library-header\">\n        <h3></h3>\n      </div>\n      <div className=\"widget-library-content\">\n        {widgetTypes.map(widgetType => {\n          const Icon = widgetType.icon;\n          return (\n            <button\n              key={widgetType.type}\n              className=\"widget-item\"\n              onClick={() => handleAddWidget(widgetType.type, widgetType.defaultProps)}\n              title={` ${widgetType.name}`}\n            >\n              <Icon size={24} />\n              <span>{widgetType.name}</span>\n            </button>\n          );\n        })}\n      </div>\n      <div className=\"widget-library-footer\">\n        <button className=\"btn-secondary\" style={{ width: '100%', fontSize: '12px' }}>\n          +  \n        </button>\n      </div>\n\n      {/*     */}\n      <OutlinePanel />\n    </div>\n  );\n};\n\nexport default WidgetLibrary;\n","import React from 'react';\nimport { WidgetAction } from '../types';\nimport { Widget } from '../types';\nimport './ActionEditor.css';\n\ninterface ActionEditorProps {\n  widget: Widget;\n  onUpdate: (actions: WidgetAction[]) => void;\n  allWidgets: Widget[];\n}\n\nconst ActionEditor: React.FC<ActionEditorProps> = ({ widget, onUpdate, allWidgets }) => {\n  const actions = widget.properties.actions || [];\n\n  const addAction = () => {\n    const newAction: WidgetAction = {\n      type: 'url',\n      url: ''\n    };\n    onUpdate([...actions, newAction]);\n  };\n\n  const updateAction = (index: number, updates: Partial<WidgetAction>) => {\n    const newActions = [...actions];\n    newActions[index] = { ...newActions[index], ...updates };\n    onUpdate(newActions);\n  };\n\n  const removeAction = (index: number) => {\n    const newActions = actions.filter((_, i) => i !== index);\n    onUpdate(newActions);\n  };\n\n  const getActionTypeLabel = (type: string) => {\n    const labels: Record<string, string> = {\n      url: '  URL',\n      page: '   ',\n      popup: '  popup',\n      widget_show: '  ',\n      widget_hide: '  ',\n      video_play: '  ',\n      video_stop: '  '\n    };\n    return labels[type] || type;\n  };\n\n  return (\n    <div className=\"action-editor\">\n      <h4 style={{ marginBottom: '12px', fontSize: '12px', color: '#aaa' }}>\n          \n      </h4>\n\n      {actions.length === 0 && (\n        <div style={{ \n          padding: '16px', \n          background: '#252525', \n          borderRadius: '6px',\n          textAlign: 'center',\n          color: '#888',\n          fontSize: '13px',\n          marginBottom: '12px'\n        }}>\n           .   .\n        </div>\n      )}\n\n      {actions.map((action, index) => (\n        <div key={index} className=\"action-item\">\n          <div className=\"action-header\">\n            <span className=\"action-number\">#{index + 1}</span>\n            <button\n              className=\"btn-danger-small\"\n              onClick={() => removeAction(index)}\n              title=\" \"\n            >\n              \n            </button>\n          </div>\n\n          <div className=\"action-body\">\n            {/*   */}\n            <div className=\"property-field\">\n              <label> </label>\n              <select\n                value={action.type}\n                onChange={(e) => updateAction(index, { type: e.target.value as any })}\n              >\n                <option value=\"url\">  URL</option>\n                <option value=\"page\">   </option>\n                <option value=\"popup\">  popup</option>\n                <option value=\"widget_show\">  </option>\n                <option value=\"widget_hide\">  </option>\n                <option value=\"video_play\">  </option>\n                <option value=\"video_stop\">  </option>\n              </select>\n            </div>\n\n            {/*  URL */}\n            {action.type === 'url' && (\n              <>\n                <div className=\"property-field\">\n                  <label>URL </label>\n                  <input\n                    type=\"text\"\n                    value={action.url || ''}\n                    onChange={(e) => updateAction(index, { url: e.target.value })}\n                    placeholder=\"https://example.com\"\n                  />\n                </div>\n                <div className=\"property-field\">\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      checked={action.openInNewTab || false}\n                      onChange={(e) => updateAction(index, { openInNewTab: e.target.checked })}\n                    />\n                       \n                  </label>\n                </div>\n              </>\n            )}\n\n            {/*   */}\n            {action.type === 'page' && (\n              <div className=\"property-field\">\n                <label>ID </label>\n                <input\n                  type=\"text\"\n                  value={action.pageId || ''}\n                  onChange={(e) => updateAction(index, { pageId: e.target.value })}\n                  placeholder=\"page-1\"\n                />\n                <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                   ID   \n                </div>\n              </div>\n            )}\n\n            {/*  popup */}\n            {action.type === 'popup' && (\n              <>\n                <div className=\"property-field\">\n                  <label> popup</label>\n                  <input\n                    type=\"text\"\n                    value={action.popupTitle || ''}\n                    onChange={(e) => updateAction(index, { popupTitle: e.target.value })}\n                    placeholder=\"\"\n                  />\n                </div>\n                <div className=\"property-field\">\n                  <label> popup</label>\n                  <textarea\n                    value={action.popupContent || ''}\n                    onChange={(e) => updateAction(index, { popupContent: e.target.value })}\n                    rows={4}\n                    placeholder=\" ...\"\n                  />\n                </div>\n                <div style={{ display: 'flex', gap: '12px' }}>\n                  <div className=\"property-field\" style={{ flex: 1 }}>\n                    <label> (px)</label>\n                    <input\n                      type=\"number\"\n                      value={action.popupWidth || 400}\n                      onChange={(e) => updateAction(index, { popupWidth: parseInt(e.target.value) })}\n                      min={200}\n                      max={1000}\n                    />\n                  </div>\n                  <div className=\"property-field\" style={{ flex: 1 }}>\n                    <label> (px)</label>\n                    <input\n                      type=\"number\"\n                      value={action.popupHeight || 300}\n                      onChange={(e) => updateAction(index, { popupHeight: parseInt(e.target.value) })}\n                      min={150}\n                      max={800}\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n\n            {/*  /  */}\n            {(action.type === 'widget_show' || action.type === 'widget_hide') && (\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={action.targetWidgetId || ''}\n                  onChange={(e) => updateAction(index, { targetWidgetId: e.target.value })}\n                >\n                  <option value=\"\"> ...</option>\n                  {allWidgets\n                    .filter(w => w.id !== widget.id)\n                    .map(w => (\n                      <option key={w.id} value={w.id}>\n                        {w.type} - {w.id}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            )}\n\n            {/*    */}\n            {(action.type === 'video_play' || action.type === 'video_stop') && (\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={action.targetWidgetId || ''}\n                  onChange={(e) => updateAction(index, { targetWidgetId: e.target.value })}\n                >\n                  <option value=\"\"> ...</option>\n                  {allWidgets\n                    .filter(w => w.type === 'video')\n                    .map(w => (\n                      <option key={w.id} value={w.id}>\n                        Video - {w.id}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            )}\n          </div>\n        </div>\n      ))}\n\n      <button\n        className=\"btn-secondary\"\n        onClick={addAction}\n        style={{ width: '100%', marginTop: '8px' }}\n      >\n          \n      </button>\n    </div>\n  );\n};\n\nexport default ActionEditor;\n","import React from 'react';\nimport { apiClient } from '../services/api-client';\nimport { useEditorStore } from '../stores/editorStore';\nimport ActionEditor from './ActionEditor';\nimport './PropertiesPanel.css';\n\nconst PropertiesPanel: React.FC = () => {\n  const { project, selectedWidgetIds, updateWidget } = useEditorStore();\n\n  if (!project) return null;\n\n  const selectedWidget = selectedWidgetIds.length === 1 \n    ? project.widgets.find(w => w.id === selectedWidgetIds[0])\n    : null;\n\n  const handlePropertyChange = (key: string, value: any) => {\n    if (!selectedWidget) return;\n    updateWidget(selectedWidget.id, { [key]: value });\n  };\n\n  const handlePropertiesChange = (key: string, value: any) => {\n    if (!selectedWidget) return;\n    updateWidget(selectedWidget.id, {\n      properties: {\n        ...selectedWidget.properties,\n        [key]: value\n      }\n    });\n  };\n\n  if (!selectedWidget) {\n    return (\n      <div className=\"properties-panel panel\">\n        <div className=\"properties-header\">\n          <h3></h3>\n        </div>\n        <div className=\"properties-empty\">\n          <p>   </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"properties-panel panel\">\n      <div className=\"properties-header\">\n        <h3></h3>\n        <span className=\"widget-type-badge\">{selectedWidget.type}</span>\n      </div>\n\n      <div className=\"properties-content\">\n        {/*   */}\n        <div className=\"property-section\">\n          <h4>  </h4>\n          \n          <div className=\"property-row\">\n            <div className=\"property-field\">\n              <label>X</label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.x)}\n                onChange={(e) => handlePropertyChange('x', parseFloat(e.target.value))}\n              />\n            </div>\n            <div className=\"property-field\">\n              <label>Y</label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.y)}\n                onChange={(e) => handlePropertyChange('y', parseFloat(e.target.value))}\n              />\n            </div>\n          </div>\n\n          <div className=\"property-row\">\n            <div className=\"property-field\">\n              <label></label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.width)}\n                onChange={(e) => handlePropertyChange('width', parseFloat(e.target.value))}\n                min={1}\n              />\n            </div>\n            <div className=\"property-field\">\n              <label></label>\n              <input\n                type=\"number\"\n                value={Math.round(selectedWidget.height)}\n                onChange={(e) => handlePropertyChange('height', parseFloat(e.target.value))}\n                min={1}\n              />\n            </div>\n          </div>\n\n          <div className=\"property-field\">\n            <label> ()</label>\n            <input\n              type=\"number\"\n              value={Math.round(selectedWidget.rotation || 0)}\n              onChange={(e) => handlePropertyChange('rotation', parseFloat(e.target.value))}\n            />\n          </div>\n\n          <div className=\"property-field\">\n            <label>Z-Index ()</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              value={selectedWidget.zIndex || 0}\n              onChange={(e) => handlePropertyChange('zIndex', Math.max(0, parseInt(e.target.value) || 0))}\n            />\n            <div style={{ marginTop: '8px', display: 'flex', gap: '4px' }}>\n              <button\n                className=\"btn-secondary\"\n                onClick={() => {\n                  // const { bringToFront } = useEditorStore.getState();\n// bringToFront(selectedWidget.id);\n                }}\n                style={{ flex: 1, fontSize: '11px', padding: '4px' }}\n                title=\"  \"\n              >\n                 \n              </button>\n              <button\n                className=\"btn-secondary\"\n                onClick={() => {\n                  // const { sendToBack } = useEditorStore.getState();\n// sendToBack(selectedWidget.id);\n                }}\n                style={{ flex: 1, fontSize: '11px', padding: '4px' }}\n                title=\"  \"\n              >\n                 \n              </button>\n            </div>\n          </div>\n\n          <div className=\"property-field\" style={{ marginTop: '12px' }}>\n            <button\n              className={selectedWidget.locked ? 'btn-danger' : 'btn-secondary'}\n              onClick={() => {\n                // const { toggleLockWidget } = useEditorStore.getState();\n                // toggleLockWidget(selectedWidget.id);\n              }}\n              style={{ width: '100%' }}\n            >\n              {selectedWidget.locked ? ' ' : ' '}\n            </button>\n            {selectedWidget.locked && (\n              <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                      \n              </div>\n            )}\n          </div>\n        </div>\n\n        {/*    */}\n        <div className=\"property-section\">\n          <h4> </h4>\n          \n          {selectedWidget.type === 'shape' && (\n            <>\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.shapeType || 'rectangle'}\n                  onChange={(e) => handlePropertiesChange('shapeType', e.target.value)}\n                >\n                  <option value=\"rectangle\"></option>\n                  <option value=\"circle\"></option>\n                  <option value=\"ellipse\"></option>\n                  <option value=\"triangle\"></option>\n                  <option value=\"pentagon\"></option>\n                  <option value=\"hexagon\"></option>\n                  <option value=\"star\"></option>\n                  <option value=\"diamond\"></option>\n                  <option value=\"line\"></option>\n                  <option value=\"arrow\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.fillColor || '#4a90e2'}\n                  onChange={(e) => handlePropertiesChange('fillColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <input\n                  type=\"range\"\n                  value={(selectedWidget.properties.opacity || 1) * 100}\n                  onChange={(e) => handlePropertiesChange('opacity', parseInt(e.target.value) / 100)}\n                  min={0}\n                  max={100}\n                />\n                <span style={{ fontSize: '11px', color: '#888' }}>\n                  {Math.round((selectedWidget.properties.opacity || 1) * 100)}%\n                </span>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.strokeWidth || 0}\n                  onChange={(e) => handlePropertiesChange('strokeWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={20}\n                />\n              </div>\n\n              {selectedWidget.properties.strokeWidth > 0 && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"color\"\n                    value={selectedWidget.properties.strokeColor || '#2c3e50'}\n                    onChange={(e) => handlePropertiesChange('strokeColor', e.target.value)}\n                  />\n                </div>\n              )}\n\n              {selectedWidget.properties.shapeType === 'rectangle' && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"number\"\n                    value={selectedWidget.properties.cornerRadius || 0}\n                    onChange={(e) => handlePropertiesChange('cornerRadius', parseInt(e.target.value))}\n                    min={0}\n                    max={100}\n                  />\n                </div>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'button' && (\n            <>\n              {/*   */}\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  onChange={(e) => {\n                    const styleName = e.target.value;\n                    if (styleName === 'custom') return;\n                    \n                    //  \n                    import('../utils/buttonStyles').then(({ buttonStyles }) => {\n                      const style = buttonStyles.find(s => s.name === styleName);\n                      if (style) {\n                        updateWidget(selectedWidget.id, {\n                          properties: {\n                            ...selectedWidget.properties,\n                            ...style.properties\n                          }\n                        });\n                      }\n                    });\n                  }}\n                >\n                  <option value=\"custom\"></option>\n                  <option value=\" \"> </option>\n                  <option value=\"\"> (  )</option>\n                  <option value=\"\"> ()</option>\n                  <option value=\"\"> ()</option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                  <option value=\"\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"text\"\n                  value={selectedWidget.properties.text || 'Button'}\n                  onChange={(e) => handlePropertiesChange('text', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={8}\n                  max={72}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Courier New\">Courier New</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontWeight || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontWeight', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"bold\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.textAlign || 'center'}\n                  onChange={(e) => handlePropertiesChange('textAlign', e.target.value)}\n                >\n                  <option value=\"left\">  </option>\n                  <option value=\"center\"> </option>\n                  <option value=\"right\">  </option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#2ecc71'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderRadius || 8}\n                  onChange={(e) => handlePropertiesChange('borderRadius', parseInt(e.target.value))}\n                  min={0}\n                  max={50}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderWidth || 0}\n                  onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={10}\n                />\n              </div>\n\n              {selectedWidget.properties.borderWidth > 0 && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                    </select>\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.shadowEnabled || false}\n                    onChange={(e) => handlePropertiesChange('shadowEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.shadowEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.shadowColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('shadowColor', e.target.value)}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label></label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.shadowBlur || 10}\n                      onChange={(e) => handlePropertiesChange('shadowBlur', parseInt(e.target.value))}\n                      min={0}\n                      max={50}\n                    />\n                  </div>\n\n                  <div className=\"property-row\">\n                    <div className=\"property-field\">\n                      <label> X</label>\n                      <input\n                        type=\"number\"\n                        value={selectedWidget.properties.shadowOffsetX || 0}\n                        onChange={(e) => handlePropertiesChange('shadowOffsetX', parseInt(e.target.value))}\n                        min={-50}\n                        max={50}\n                      />\n                    </div>\n                    <div className=\"property-field\">\n                      <label> Y</label>\n                      <input\n                        type=\"number\"\n                        value={selectedWidget.properties.shadowOffsetY || 4}\n                        onChange={(e) => handlePropertiesChange('shadowOffsetY', parseInt(e.target.value))}\n                        min={-50}\n                        max={50}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label></label>\n                    <input\n                      type=\"range\"\n                      value={(selectedWidget.properties.shadowOpacity || 0.3) * 100}\n                      onChange={(e) => handlePropertiesChange('shadowOpacity', parseInt(e.target.value) / 100)}\n                      min={0}\n                      max={100}\n                    />\n                    <span style={{ fontSize: '11px', color: '#888' }}>\n                      {Math.round((selectedWidget.properties.shadowOpacity || 0.3) * 100)}%\n                    </span>\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <ActionEditor\n                widget={selectedWidget}\n                onUpdate={(actions) => {\n                  updateWidget(selectedWidget.id, {\n                    properties: {\n                      ...selectedWidget.properties,\n                      actions\n                    }\n                  });\n                }}\n                allWidgets={project.widgets}\n              />\n            </>\n          )}\n\n          {selectedWidget.type === 'text' && (\n            <>\n              <div className=\"property-field\">\n                <label></label>\n                <textarea\n                  value={selectedWidget.properties.text || 'Text'}\n                  onChange={(e) => handlePropertiesChange('text', e.target.value)}\n                  rows={6}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"file\"\n                  accept=\".txt,.pdf,.odt,.docx\"\n                  onChange={async (e) => {\n                    const file = e.target.files?.[0];\n                    if (file) {\n                      try {\n                        //   \n                        const { extractTextFromFile, loadRequiredLibraries } = await import('../utils/fileTextExtractor');\n                        \n                        //    \n                        loadRequiredLibraries();\n                        \n                        //   \n                        handlePropertiesChange('text', ' ...');\n                        \n                        //  \n                        const text = await extractTextFromFile(file);\n                        \n                        //  \n                        updateWidget(selectedWidget.id, {\n                          properties: {\n                            ...selectedWidget.properties,\n                            text: text,\n                            sourceFile: file.name\n                          }\n                        });\n                      } catch (error) {\n                        console.error('Error loading file:', error);\n                        alert(`: ${error instanceof Error ? error.message : '   '}`);\n                        handlePropertiesChange('text', 'Text');\n                      }\n                    }\n                    e.target.value = '';\n                  }}\n                />\n                <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                  : TXT, PDF, ODT, DOCX\n                </div>\n                {selectedWidget.properties.sourceFile && (\n                  <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                     {selectedWidget.properties.sourceFile}\n                  </div>\n                )}\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={8}\n                  max={144}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Courier New\">Courier New</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                  <option value=\"Comic Sans MS\">Comic Sans MS</option>\n                  <option value=\"Impact\">Impact</option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontWeight || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontWeight', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"bold\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.fontStyle || 'normal'}\n                  onChange={(e) => handlePropertiesChange('fontStyle', e.target.value)}\n                >\n                  <option value=\"normal\"></option>\n                  <option value=\"italic\"></option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.textDecoration || 'none'}\n                  onChange={(e) => handlePropertiesChange('textDecoration', e.target.value)}\n                >\n                  <option value=\"none\"></option>\n                  <option value=\"underline\"></option>\n                  <option value=\"line-through\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.textAlign || 'left'}\n                  onChange={(e) => handlePropertiesChange('textAlign', e.target.value)}\n                >\n                  <option value=\"left\">  </option>\n                  <option value=\"center\"> </option>\n                  <option value=\"right\">  </option>\n                </select>\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.verticalAlign || 'top'}\n                  onChange={(e) => handlePropertiesChange('verticalAlign', e.target.value)}\n                >\n                  <option value=\"top\"></option>\n                  <option value=\"middle\"> </option>\n                  <option value=\"bottom\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}>  </h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#000000'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n                <label style={{ marginTop: '4px', fontSize: '11px' }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.backgroundColor === 'transparent'}\n                    onChange={(e) => handlePropertiesChange('backgroundColor', e.target.checked ? 'transparent' : '#ffffff')}\n                  />\n                   \n                </label>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.lineHeight || 1.2}\n                  onChange={(e) => handlePropertiesChange('lineHeight', parseFloat(e.target.value))}\n                  min={0.5}\n                  max={3}\n                  step={0.1}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.padding || 8}\n                  onChange={(e) => handlePropertiesChange('padding', parseInt(e.target.value))}\n                  min={0}\n                  max={50}\n                />\n              </div>\n            </>\n          )}\n\n          {selectedWidget.type === 'image' && (\n            <>\n              <h4 style={{ marginTop: '0', marginBottom: '12px', fontSize: '13px', fontWeight: 'bold' }}></h4>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"imageMode\"\n                    checked={!selectedWidget.properties.galleryMode}\n                    onChange={() => handlePropertiesChange('galleryMode', false)}\n                  />\n                  {' '} \n                </label>\n              </div>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"imageMode\"\n                    checked={selectedWidget.properties.galleryMode || false}\n                    onChange={() => {\n                      handlePropertiesChange('galleryMode', true);\n                      //  sources   \n                      if (!selectedWidget.properties.sources) {\n                        handlePropertiesChange('sources', []);\n                      }\n                    }}\n                  />\n                  {' '} \n                </label>\n              </div>\n\n              {!selectedWidget.properties.galleryMode && (\n                <>\n                  <div className=\"property-field\">\n                    <label>URL </label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.src || ''}\n                      onChange={(e) => handlePropertiesChange('src', e.target.value)}\n                      placeholder=\"https://example.com/image.jpg\"\n                    />\n                  </div>\n                  \n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                          const reader = new FileReader();\n                          reader.onload = (event) => {\n                            const result = event.target?.result as string;\n                            if (result) {\n                              updateWidget(selectedWidget.id, {\n                                properties: {\n                                  ...selectedWidget.properties,\n                                  src: result,\n                                  isLocalFile: true,\n                                  fileName: file.name\n                                }\n                              });\n                            }\n                          };\n                          reader.readAsDataURL(file);\n                        }\n                        e.target.value = '';\n                      }}\n                    />\n                    {selectedWidget.properties.isLocalFile && selectedWidget.properties.fileName && (\n                      <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                         {selectedWidget.properties.fileName}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n\n              {selectedWidget.properties.galleryMode && (\n                <>\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> (. 50)</h4>\n                  \n                  <div style={{ \n                    maxHeight: '200px', \n                    overflowY: 'auto', \n                    border: '1px solid #ddd', \n                    borderRadius: '4px',\n                    padding: '8px',\n                    marginBottom: '8px',\n                    backgroundColor: '#fafafa'\n                  }}>\n                    {(selectedWidget.properties.sources || []).map((source: any, index: number) => (\n                      <div key={source.id} style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        marginBottom: '6px',\n                        padding: '6px',\n                        backgroundColor: '#fff',\n                        borderRadius: '4px',\n                        border: '1px solid #e0e0e0'\n                      }}>\n                        <span style={{ fontSize: '11px', color: '#666', minWidth: '20px' }}>\n                          {index + 1}.\n                        </span>\n                        <span style={{ fontSize: '11px', color: source.type === 'url' ? '#007acc' : '#2ecc71' }}>\n                          {source.type === 'url' ? '' : ''}\n                        </span>\n                        <span style={{ \n                          flex: 1, \n                          fontSize: '11px', \n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap'\n                        }}>\n                          {source.value.length > 40 ? source.value.substring(0, 40) + '...' : source.value}\n                        </span>\n                        <button\n                          onClick={() => {\n                            const newSources = (selectedWidget.properties.sources || []).filter((_: any, i: number) => i !== index);\n                            handlePropertiesChange('sources', newSources);\n                          }}\n                          style={{\n                            padding: '2px 6px',\n                            fontSize: '10px',\n                            border: 'none',\n                            background: '#e74c3c',\n                            color: '#fff',\n                            borderRadius: '3px',\n                            cursor: 'pointer'\n                          }}\n                        >\n                          \n                        </button>\n                      </div>\n                    ))}\n                    \n                    {(!selectedWidget.properties.sources || selectedWidget.properties.sources.length === 0) && (\n                      <div style={{ textAlign: 'center', color: '#999', fontSize: '11px', padding: '20px' }}>\n                           \n                      </div>\n                    )}\n                  </div>\n\n                  <div style={{ display: 'flex', gap: '8px', marginBottom: '8px' }}>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      multiple\n                      id={`gallery-upload-${selectedWidget.id}`}\n                      style={{ display: 'none' }}\n                      onChange={(e) => {\n                        const files = Array.from(e.target.files || []);\n                        const currentSources = selectedWidget.properties.sources || [];\n                        \n                        if (currentSources.length + files.length > 50) {\n                          alert(' 50   ');\n                          e.target.value = '';\n                          return;\n                        }\n\n                        let loadedCount = 0;\n                        const newSources: any[] = [];\n\n                        files.forEach(file => {\n                          const reader = new FileReader();\n                          reader.onload = (event) => {\n                            const result = event.target?.result as string;\n                            if (result) {\n                              newSources.push({\n                                id: `img-${Date.now()}-${Math.random()}`,\n                                type: 'local',\n                                value: result\n                              });\n                            }\n                            loadedCount++;\n                            \n                            if (loadedCount === files.length) {\n                              handlePropertiesChange('sources', [...currentSources, ...newSources]);\n                            }\n                          };\n                          reader.readAsDataURL(file);\n                        });\n\n                        e.target.value = '';\n                      }}\n                    />\n                    <button\n                      onClick={() => {\n                        document.getElementById(`gallery-upload-${selectedWidget.id}`)?.click();\n                      }}\n                      className=\"btn-secondary\"\n                      style={{ flex: 1, fontSize: '11px', padding: '6px' }}\n                    >\n                        \n                    </button>\n                    \n                    <button\n                      onClick={() => {\n                        const url = prompt(' URL :');\n                        if (url) {\n                          const currentSources = selectedWidget.properties.sources || [];\n                          if (currentSources.length >= 50) {\n                            alert(' 50   ');\n                            return;\n                          }\n                          handlePropertiesChange('sources', [\n                            ...currentSources,\n                            {\n                              id: `img-${Date.now()}-${Math.random()}`,\n                              type: 'url',\n                              value: url\n                            }\n                          ]);\n                        }\n                      }}\n                      className=\"btn-secondary\"\n                      style={{ flex: 1, fontSize: '11px', padding: '6px' }}\n                    >\n                        URL\n                    </button>\n                  </div>\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n                  \n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.autoSwitch || false}\n                        onChange={(e) => handlePropertiesChange('autoSwitch', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  {selectedWidget.properties.autoSwitch && (\n                    <>\n                      <div className=\"property-field\">\n                        <label> ()</label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"60\"\n                          value={selectedWidget.properties.switchInterval || 3}\n                          onChange={(e) => handlePropertiesChange('switchInterval', parseInt(e.target.value) || 3)}\n                        />\n                      </div>\n                    </>\n                  )}\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n                  \n                  <div className=\"property-field\">\n                    <label></label>\n                    <select\n                      value={selectedWidget.properties.transition || 'fade'}\n                      onChange={(e) => handlePropertiesChange('transition', e.target.value)}\n                    >\n                      <option value=\"none\"> ()</option>\n                      <option value=\"fade\"></option>\n                      <option value=\"slide\"></option>\n                      <option value=\"zoom\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> ()</label>\n                    <input\n                      type=\"number\"\n                      min=\"100\"\n                      max=\"2000\"\n                      step=\"100\"\n                      value={selectedWidget.properties.transitionDuration || 500}\n                      onChange={(e) => handlePropertiesChange('transitionDuration', parseInt(e.target.value) || 500)}\n                    />\n                  </div>\n\n                  <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n                  \n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.showControls !== false}\n                        onChange={(e) => handlePropertiesChange('showControls', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.showIndicators !== false}\n                        onChange={(e) => handlePropertiesChange('showIndicators', e.target.checked)}\n                      />\n                      {' '} \n                    </label>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedWidget.properties.loop !== false}\n                        onChange={(e) => handlePropertiesChange('loop', e.target.checked)}\n                      />\n                      {' '}\n                    </label>\n                  </div>\n                </>\n              )}\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.objectFit || 'contain'}\n                  onChange={(e) => handlePropertiesChange('objectFit', e.target.value)}\n                >\n                  <option value=\"contain\"> ()</option>\n                  <option value=\"cover\">  </option>\n                  <option value=\"fill\"></option>\n                  <option value=\"scale-down\"> </option>\n                  <option value=\"adaptive\"> ( )</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n              \n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.clipShape || 'rectangle'}\n                  onChange={(e) => handlePropertiesChange('clipShape', e.target.value)}\n                >\n                  <option value=\"rectangle\"> </option>\n                  <option value=\"circle\"> </option>\n                  <option value=\"ellipse\"> </option>\n                  <option value=\"triangle\"> </option>\n                  <option value=\"diamond\"> </option>\n                  <option value=\"pentagon\"> </option>\n                  <option value=\"hexagon\"> </option>\n                  <option value=\"octagon\"> </option>\n                  <option value=\"rounded-rectangle\">  </option>\n                </select>\n              </div>\n\n              {selectedWidget.properties.clipShape === 'rounded-rectangle' && (\n                <div className=\"property-field\">\n                  <label>  (px)</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={selectedWidget.properties.cornerRadius || 20}\n                    onChange={(e) => handlePropertiesChange('cornerRadius', parseInt(e.target.value) || 20)}\n                  />\n                </div>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n              \n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.borderEnabled || false}\n                    onChange={(e) => handlePropertiesChange('borderEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.borderEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                      <option value=\"double\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label>  (px)</label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.borderWidth || 2}\n                      onChange={(e) => handlePropertiesChange('borderWidth', parseFloat(e.target.value))}\n                      min={1}\n                      max={20}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n                </>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'video' && (\n            <>\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.sourceType || 'url'}\n                  onChange={(e) => handlePropertiesChange('sourceType', e.target.value)}\n                >\n                  <option value=\"url\">URL / </option>\n                  <option value=\"rtsp\">RTSP </option>\n                </select>\n              </div>\n\n              {selectedWidget.properties.sourceType === 'rtsp' ? (\n                <>\n                  <div className=\"property-field\">\n                    <label>RTSP URL</label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.rtspUrl || ''}\n                      onChange={(e) => handlePropertiesChange('rtspUrl', e.target.value)}\n                      placeholder=\"rtsp://username:password@host:554/stream\"\n                    />\n                    <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                      : rtsp://admin:12345@192.168.1.100:554/live\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <>\n                  <div className=\"property-field\">\n                    <label>URL </label>\n                    <input\n                      type=\"text\"\n                      value={selectedWidget.properties.src || ''}\n                      onChange={(e) => handlePropertiesChange('src', e.target.value)}\n                      placeholder=\"https://example.com/video.mp4\"\n                    />\n                  </div>\n                  \n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"file\"\n                      accept=\"video/*\"\n\t\t\t\t\t  onChange={async (e) => {\n\t\t\t\t\t    const file = e.target.files?.[0];\n\t\t\t\t\t    if (file) {\n\t\t\t\t\t\t  const maxSize = 500 * 1024 * 1024; // 500 MB\n\t\t\t\t\t\t   if (file.size > maxSize) {\n\t\t\t\t\t\t     alert('   !  500 MB');\n\t\t\t\t\t\t     e.target.value = '';\n\t\t\t\t\t\t    return;\n\t\t\t\t\t\t   }\n\t\t\t\t\t\t\n\t\t\t\t\t\t   try {\n\t\t\t\t\t\t     console.log(`   (${(file.size / (1024 * 1024)).toFixed(1)} MB)...`);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     if (!project?.id) {\n\t\t\t\t\t\t\t   alert('     ');\n\t\t\t\t\t\t\t   e.target.value = '';\n\t\t\t\t\t\t\t   return;\n\t\t\t\t\t\t     }\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     const result = await apiClient.uploadFile(project.id, file);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t     if (result) {\n\t\t\t\t\t\t\t    updateWidget(selectedWidget.id, {\n\t\t\t\t\t\t\t    properties: {\n\t\t\t\t\t\t\t\t   ...selectedWidget.properties,\n\t\t\t\t\t\t\t\t   src: result.url,\n\t\t\t\t\t\t\t\t   isLocalFile: false,\n\t\t\t\t\t\t\t\t   fileName: file.name\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t   });\n\t\t\t\t\t\t\t   alert('    !');\n\t\t\t\t\t\t     }\n\t\t\t\t\t\t   } catch (error: any) {\n\t\t\t\t\t\t     console.error('Upload error:', error);\n\t\t\t\t\t\t     alert('  : ' + error.message);\n\t\t\t\t\t\t   }\n\t\t\t\t\t\t\n   \t\t\t\t\t\t   e.target.value = '';\n\t\t\t\t\t    }\n\t\t\t\t\t}}\n                    />\n                    {selectedWidget.properties.isLocalFile && selectedWidget.properties.fileName && (\n                      <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\n                         {selectedWidget.properties.fileName}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.objectFit || 'contain'}\n                  onChange={(e) => handlePropertiesChange('objectFit', e.target.value)}\n                >\n                  <option value=\"contain\"> ()</option>\n                  <option value=\"cover\">  </option>\n                  <option value=\"fill\"></option>\n                  <option value=\"scale-down\"> </option>\n                  <option value=\"adaptive\"> ( )</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.autoplay || false}\n                    onChange={(e) => handlePropertiesChange('autoplay', e.target.checked)}\n                  />\n                  \n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.loop || false}\n                    onChange={(e) => handlePropertiesChange('loop', e.target.checked)}\n                  />\n                   (loop)\n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.muted !== false}\n                    onChange={(e) => handlePropertiesChange('muted', e.target.checked)}\n                  />\n                    (muted)\n                </label>\n              </div>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.controls !== false}\n                    onChange={(e) => handlePropertiesChange('controls', e.target.checked)}\n                  />\n                    \n                </label>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedWidget.properties.borderEnabled || false}\n                    onChange={(e) => handlePropertiesChange('borderEnabled', e.target.checked)}\n                  />\n                   \n                </label>\n              </div>\n\n              {selectedWidget.properties.borderEnabled && (\n                <>\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <select\n                      value={selectedWidget.properties.borderStyle || 'solid'}\n                      onChange={(e) => handlePropertiesChange('borderStyle', e.target.value)}\n                    >\n                      <option value=\"solid\"></option>\n                      <option value=\"dashed\"></option>\n                      <option value=\"dotted\"></option>\n                      <option value=\"double\"></option>\n                    </select>\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"number\"\n                      value={selectedWidget.properties.borderWidth || 2}\n                      onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                      min={1}\n                      max={20}\n                    />\n                  </div>\n\n                  <div className=\"property-field\">\n                    <label> </label>\n                    <input\n                      type=\"color\"\n                      value={selectedWidget.properties.borderColor || '#000000'}\n                      onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                    />\n                  </div>\n                </>\n              )}\n            </>\n          )}\n\n          {selectedWidget.type === 'menu' && (\n            <>\n              <div className=\"property-field\">\n                <label></label>\n                <select\n                  value={selectedWidget.properties.orientation || 'horizontal'}\n                  onChange={(e) => handlePropertiesChange('orientation', e.target.value)}\n                >\n                  <option value=\"horizontal\"></option>\n                  <option value=\"vertical\"></option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.backgroundColor || '#2c3e50'}\n                  onChange={(e) => handlePropertiesChange('backgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.textColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('textColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.hoverColor || '#34495e'}\n                  onChange={(e) => handlePropertiesChange('hoverColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.fontSize || 16}\n                  onChange={(e) => handlePropertiesChange('fontSize', parseInt(e.target.value))}\n                  min={10}\n                  max={32}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <select\n                  value={selectedWidget.properties.fontFamily || 'Arial'}\n                  onChange={(e) => handlePropertiesChange('fontFamily', e.target.value)}\n                >\n                  <option value=\"Arial\">Arial</option>\n                  <option value=\"Helvetica\">Helvetica</option>\n                  <option value=\"Times New Roman\">Times New Roman</option>\n                  <option value=\"Verdana\">Verdana</option>\n                  <option value=\"Georgia\">Georgia</option>\n                </select>\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.itemHeight || 40}\n                  onChange={(e) => handlePropertiesChange('itemHeight', parseInt(e.target.value))}\n                  min={30}\n                  max={100}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.itemPadding || 16}\n                  onChange={(e) => handlePropertiesChange('itemPadding', parseInt(e.target.value))}\n                  min={8}\n                  max={40}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.submenuBackgroundColor || '#34495e'}\n                  onChange={(e) => handlePropertiesChange('submenuBackgroundColor', e.target.value)}\n                />\n              </div>\n\n              <div className=\"property-field\">\n                <label>  </label>\n                <input\n                  type=\"color\"\n                  value={selectedWidget.properties.submenuTextColor || '#ffffff'}\n                  onChange={(e) => handlePropertiesChange('submenuTextColor', e.target.value)}\n                />\n              </div>\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}></h4>\n\n              <div className=\"property-field\">\n                <label> </label>\n                <input\n                  type=\"number\"\n                  value={selectedWidget.properties.borderWidth || 0}\n                  onChange={(e) => handlePropertiesChange('borderWidth', parseInt(e.target.value))}\n                  min={0}\n                  max={10}\n                />\n              </div>\n\n              {selectedWidget.properties.borderWidth > 0 && (\n                <div className=\"property-field\">\n                  <label> </label>\n                  <input\n                    type=\"color\"\n                    value={selectedWidget.properties.borderColor || '#000000'}\n                    onChange={(e) => handlePropertiesChange('borderColor', e.target.value)}\n                  />\n                </div>\n              )}\n\n              <h4 style={{ marginTop: '16px', marginBottom: '8px', fontSize: '12px' }}> </h4>\n\n              <div className=\"property-field\">\n                <button\n                  className=\"btn-secondary\"\n                  onClick={() => {\n                    const items = selectedWidget.properties.items || [];\n                    const newItem = {\n                      id: `item-${Date.now()}`,\n                      label: ' '\n                    };\n                    updateWidget(selectedWidget.id, {\n                      properties: {\n                        ...selectedWidget.properties,\n                        items: [...items, newItem]\n                      }\n                    });\n                  }}\n                  style={{ width: '100%' }}\n                >\n                    \n                </button>\n              </div>\n\n              <div style={{ maxHeight: '300px', overflowY: 'auto' }}>\n                {(selectedWidget.properties.items || []).map((item: any, index: number) => (\n                  <div\n                    key={item.id}\n                    style={{\n                      background: '#252525',\n                      padding: '12px',\n                      marginBottom: '8px',\n                      borderRadius: '6px',\n                      border: '1px solid #333'\n                    }}\n                  >\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\n                      <strong style={{ fontSize: '12px', color: '#aaa' }}> {index + 1}</strong>\n                      <button\n                        className=\"btn-danger\"\n                        onClick={() => {\n                          const items = selectedWidget.properties.items || [];\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items: items.filter((i: any) => i.id !== item.id)\n                            }\n                          });\n                        }}\n                        style={{ fontSize: '11px', padding: '4px 8px' }}\n                      >\n                         \n                      </button>\n                    </div>\n\n                    <div className=\"property-field\">\n                      <label></label>\n                      <input\n                        type=\"text\"\n                        value={item.label}\n                        onChange={(e) => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          items[index] = { ...items[index], label: e.target.value };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                      />\n                    </div>\n\n                    {/*    */}\n                    <div style={{ marginTop: '12px' }}>\n                      <div style={{ fontSize: '11px', color: '#888', marginBottom: '8px' }}>\n                          \n                      </div>\n                      <ActionEditor\n                        widget={{ ...selectedWidget, id: item.id, properties: item }}\n                        onUpdate={(actions) => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          items[index] = { ...items[index], actions };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                        allWidgets={project.widgets}\n                      />\n                    </div>\n\n                    {/*  */}\n                    <div style={{ marginTop: '12px', paddingLeft: '12px', borderLeft: '2px solid #444' }}>\n                      <div style={{ fontSize: '11px', color: '#888', marginBottom: '8px' }}>\n                        \n                      </div>\n\n                      <button\n                        className=\"btn-secondary\"\n                        onClick={() => {\n                          const items = [...(selectedWidget.properties.items || [])];\n                          const children = items[index].children || [];\n                          items[index] = {\n                            ...items[index],\n                            children: [...children, {\n                              id: `subitem-${Date.now()}`,\n                              label: ''\n                            }]\n                          };\n                          updateWidget(selectedWidget.id, {\n                            properties: {\n                              ...selectedWidget.properties,\n                              items\n                            }\n                          });\n                        }}\n                        style={{ width: '100%', fontSize: '11px', padding: '6px', marginBottom: '8px' }}\n                      >\n                          \n                      </button>\n\n                      {(item.children || []).map((child: any, childIndex: number) => (\n                        <div\n                          key={child.id}\n                          style={{\n                            background: '#1e1e1e',\n                            padding: '8px',\n                            marginBottom: '6px',\n                            borderRadius: '4px',\n                            border: '1px solid #2a2a2a'\n                          }}\n                        >\n                          <div style={{ display: 'flex', gap: '6px', alignItems: 'center' }}>\n                            <input\n                              type=\"text\"\n                              value={child.label}\n                              onChange={(e) => {\n                                const items = [...(selectedWidget.properties.items || [])];\n                                const children = [...(items[index].children || [])];\n                                children[childIndex] = { ...children[childIndex], label: e.target.value };\n                                items[index] = { ...items[index], children };\n                                updateWidget(selectedWidget.id, {\n                                  properties: {\n                                    ...selectedWidget.properties,\n                                    items\n                                  }\n                                });\n                              }}\n                              style={{ flex: 1, fontSize: '12px', padding: '4px 8px' }}\n                            />\n                            <button\n                              className=\"btn-danger\"\n                              onClick={() => {\n                                const items = [...(selectedWidget.properties.items || [])];\n                                const children = items[index].children?.filter((c: any) => c.id !== child.id) || [];\n                                items[index] = { ...items[index], children };\n                                updateWidget(selectedWidget.id, {\n                                  properties: {\n                                    ...selectedWidget.properties,\n                                    items\n                                  }\n                                });\n                              }}\n                              style={{ fontSize: '11px', padding: '4px 8px' }}\n                            >\n                              \n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* ID  */}\n        <div className=\"property-section\">\n          <div className=\"property-field\">\n            <label>ID</label>\n            <input\n              type=\"text\"\n              value={selectedWidget.id}\n              disabled\n              style={{ opacity: 0.5, cursor: 'not-allowed' }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PropertiesPanel;\n","/**\n * Editor Component - \n *      \n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { InactivityWarning } from './InactivityWarning';\nimport { useEditorStore } from '../stores/editorStore';\nimport Toolbar from './Toolbar';\nimport Canvas from './Canvas';\nimport WidgetLibrary from './WidgetLibrary';\nimport PropertiesPanel from './PropertiesPanel';\nimport './Editor.css';\n\nconst Editor: React.FC = () => {\n  const navigate = useNavigate();\n  const [authRefresh, setAuthRefresh] = useState(0);\n  \n  const {\n    project,\n    restoreProject,\n    selectedWidgetIds,\n    copy,\n    paste,\n    cut,\n    deleteWidget,\n    undo,\n    redo\n  } = useEditorStore();\n\n  // Keyboard shortcuts\n\n  //      \n  useEffect(() => {\n    const restoreLastProject = async () => {\n      console.log('[Editor] Checking for project to restore...');\n      const restored = await restoreProject();\n      if (restored) {\n        console.log('[Editor] Project restored successfully');\n      } else {\n        console.log('[Editor] No project to restore');\n      }\n    };\n\n    restoreLastProject();\n  }, []); //    \n\n  //     \n  useEffect(() => {\n    const handleLogout = (event: Event) => {\n      const customEvent = event as CustomEvent;\n      const reason = customEvent.detail?.reason || 'unknown';\n      \n      console.log('[Editor] Logout event received, reason:', reason);\n      \n      //        \n      if (reason === 'inactivity') {\n        sessionStorage.setItem('kiosk_logout_reason', 'inactivity');\n      }\n      \n      //    \n      navigate('/login', { replace: true });\n    };\n\n    const handleUnauthorized = () => {\n      console.log('[Editor] Unauthorized event received');\n      sessionStorage.setItem('kiosk_logout_reason', 'session_expired');\n      navigate('/login', { replace: true });\n    };\n\n    window.addEventListener('auth:logout', handleLogout);\n    window.addEventListener('auth:unauthorized', handleUnauthorized);\n\n    return () => {\n      window.removeEventListener('auth:logout', handleLogout);\n      window.removeEventListener('auth:unauthorized', handleUnauthorized);\n    };\n  }, [navigate]);\n\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl/Cmd + Z - Undo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\n        e.preventDefault();\n        undo();\n      }\n      // Ctrl/Cmd + Shift + Z - Redo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && e.shiftKey) {\n        e.preventDefault();\n        redo();\n      }\n      // Ctrl/Cmd + C - Copy\n      if ((e.ctrlKey || e.metaKey) && e.key === 'c') {\n        e.preventDefault();\n        copy();\n      }\n      // Ctrl/Cmd + V - Paste\n      if ((e.ctrlKey || e.metaKey) && e.key === 'v') {\n        e.preventDefault();\n        paste();\n      }\n      // Ctrl/Cmd + X - Cut\n      if ((e.ctrlKey || e.metaKey) && e.key === 'x') {\n        e.preventDefault();\n        cut();\n      }\n      // Delete -   \n      if (e.key === 'Delete') {\n        e.preventDefault();\n        selectedWidgetIds.forEach(id => deleteWidget(id));\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  //      UI\n  useEffect(() => {\n    const handleLogin = () => {\n      setAuthRefresh(prev => prev + 1);\n    };\n    \n    window.addEventListener('auth:login', handleLogin);\n    return () => window.removeEventListener('auth:login', handleLogin);\n  }, []);\n\n  return (\n    <div className=\"editor\">\n      <InactivityWarning />\n      <Toolbar />\n      <div className=\"editor-main\">\n        <WidgetLibrary />\n        <Canvas />\n        <PropertiesPanel />\n      </div>\n    </div>\n  );\n};\n\nexport default Editor;\n","/**\n * Protected Route -  \n *      \n */\n\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { apiClient } from '../../services/api-client';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const isAuthenticated = apiClient.isAuthenticated();\n  \n  if (!isAuthenticated) {\n    console.log('[ProtectedRoute] Not authenticated, redirecting to /login');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n","/**\n * App Component -    \n */\n\nimport React from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport LoginPage from './pages/LoginPage';\nimport Editor from './components/Editor';\nimport ProtectedRoute from './components/auth/ProtectedRoute';\n\nconst App: React.FC = () => {\n  console.log('[App.tsx] App component rendering with Router');\n  return (\n    <BrowserRouter>\n      <Routes>\n        {/*   ->    */}\n        <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n        \n        {/*   */}\n        <Route path=\"/login\" element={<LoginPage />} />\n        \n        {/*  ( ) */}\n        <Route \n          path=\"/editor\" \n          element={\n            <ProtectedRoute>\n              <Editor />\n            </ProtectedRoute>\n          } \n        />\n        \n        {/*    ->    */}\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\ntry {\n  const root = document.getElementById('root');\n  \n  if (!root) {\n    throw new Error('Root element not found');\n  }\n\n  ReactDOM.createRoot(root).render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n  );\n} catch (error) {\n  console.error('Failed to mount React app:', error);\n  \n  //   \n  document.body.innerHTML = `\n    <div style=\"\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100vh;\n      background: #1e1e1e;\n      color: #ff6b6b;\n      font-family: Arial, sans-serif;\n      padding: 20px;\n    \">\n      <div style=\"text-align: center; max-width: 600px;\">\n        <h1>   </h1>\n        <p style=\"color: #cccccc;\">   (F12)  .</p>\n        <pre style=\"\n          text-align: left;\n          background: #2a2a2a;\n          padding: 15px;\n          border-radius: 5px;\n          overflow-x: auto;\n          color: #ff6b6b;\n        \">${error}</pre>\n        <button onclick=\"location.reload()\" style=\"\n          margin-top: 20px;\n          padding: 10px 20px;\n          background: #4a90e2;\n          color: white;\n          border: none;\n          border-radius: 5px;\n          cursor: pointer;\n          font-size: 14px;\n        \">\n           \n        </button>\n      </div>\n    </div>\n  `;\n}\n"],"file":"index-zJaTaKGG.js"}