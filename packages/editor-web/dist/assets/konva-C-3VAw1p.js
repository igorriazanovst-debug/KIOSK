import{c as Pl,g as Vu,r as Sc,a as Hu,b as ye,R as le}from"./vendor-DCQGI5pe.js";var Xi={exports:{}},dr={},pa={},ma={},El;function vt(){return El||(El=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d._registerNode=d.Konva=d.glob=void 0;const f=Math.PI/180;function L(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}d.glob=typeof Pl<"u"?Pl:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},d.Konva={_global:d.glob,version:"9.3.22",isBrowser:L(),isUnminified:/param/.test((function(k){}).toString()),dblClickWindow:400,getAngle(k){return d.Konva.angleDeg?k*f:k},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return d.Konva.DD.isDragging},isTransforming(){var k;return(k=d.Konva.Transformer)===null||k===void 0?void 0:k.isTransforming()},isDragReady(){return!!d.Konva.DD.node},releaseCanvasOnDestroy:!0,document:d.glob.document,_injectGlobal(k){d.glob.Konva=k}};const b=k=>{d.Konva[k.prototype.getClassName()]=k};d._registerNode=b,d.Konva._injectGlobal(d.Konva)})(ma)),ma}var ya={},Rl;function Dt(){return Rl||(Rl=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Util=d.Transform=void 0;const f=vt();class L{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new L(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){const w=this.m;return{x:w[0]*v.x+w[2]*v.y+w[4],y:w[1]*v.x+w[3]*v.y+w[5]}}translate(v,w){return this.m[4]+=this.m[0]*v+this.m[2]*w,this.m[5]+=this.m[1]*v+this.m[3]*w,this}scale(v,w){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=w,this.m[3]*=w,this}rotate(v){const w=Math.cos(v),M=Math.sin(v),z=this.m[0]*w+this.m[2]*M,E=this.m[1]*w+this.m[3]*M,R=this.m[0]*-M+this.m[2]*w,T=this.m[1]*-M+this.m[3]*w;return this.m[0]=z,this.m[1]=E,this.m[2]=R,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,w){const M=this.m[0]+this.m[2]*w,z=this.m[1]+this.m[3]*w,E=this.m[2]+this.m[0]*v,R=this.m[3]+this.m[1]*v;return this.m[0]=M,this.m[1]=z,this.m[2]=E,this.m[3]=R,this}multiply(v){const w=this.m[0]*v.m[0]+this.m[2]*v.m[1],M=this.m[1]*v.m[0]+this.m[3]*v.m[1],z=this.m[0]*v.m[2]+this.m[2]*v.m[3],E=this.m[1]*v.m[2]+this.m[3]*v.m[3],R=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],T=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=w,this.m[1]=M,this.m[2]=z,this.m[3]=E,this.m[4]=R,this.m[5]=T,this}invert(){const v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),w=this.m[3]*v,M=-this.m[1]*v,z=-this.m[2]*v,E=this.m[0]*v,R=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=w,this.m[1]=M,this.m[2]=z,this.m[3]=E,this.m[4]=R,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const v=this.m[0],w=this.m[1],M=this.m[2],z=this.m[3],E=this.m[4],R=this.m[5],T=v*z-w*M,I={x:E,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||w!=0){const B=Math.sqrt(v*v+w*w);I.rotation=w>0?Math.acos(v/B):-Math.acos(v/B),I.scaleX=B,I.scaleY=T/B,I.skewX=(v*M+w*z)/T,I.skewY=0}else if(M!=0||z!=0){const B=Math.sqrt(M*M+z*z);I.rotation=Math.PI/2-(z>0?Math.acos(-M/B):-Math.acos(M/B)),I.scaleX=T/B,I.scaleY=B,I.skewX=0,I.skewY=(v*M+w*z)/T}return I.rotation=d.Util._getRotation(I.rotation),I}}d.Transform=L;const b="[object Array]",k="[object Number]",_="[object String]",a="[object Boolean]",h=Math.PI/180,g=180/Math.PI,p="#",m="",x="0",y="Konva warning: ",u="Konva error: ",c="rgb(",S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let F=[];const l=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};d.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===b},_isNumber(s){return Object.prototype.toString.call(s)===k&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===_},_isBoolean(s){return Object.prototype.toString.call(s)===a},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const v=s[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){F.push(s),F.length===1&&l(function(){const v=F;F=[],v.forEach(function(w){w()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,v){const w=d.Util.createImageElement();w.onload=function(){v(w)},w.src=s},_rgbToHex(s,v,w){return((1<<24)+(s<<16)+(v<<8)+w).toString(16).slice(1)},_hexToRgb(s){s=s.replace(p,m);const v=parseInt(s,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=x+s;return p+s},getRGB(s){let v;return s in S?(v=S[s],{r:v[0],g:v[1],b:v[2]}):s[0]===p?this._hexToRgb(s.substring(1)):s.substr(0,4)===c?(v=P.exec(s.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",d.Util._namedColorToRBA(s)||d.Util._hex3ColorToRGBA(s)||d.Util._hex4ColorToRGBA(s)||d.Util._hex6ColorToRGBA(s)||d.Util._hex8ColorToRGBA(s)||d.Util._rgbColorToRGBA(s)||d.Util._rgbaColorToRGBA(s)||d.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const v=S[s.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const v=s.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const v=s.split(/ *, */).map((w,M)=>w.slice(-1)==="%"?M===3?parseInt(w)/100:parseInt(w)/100*255:Number(w));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[v,...w]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),M=Number(w[0])/360,z=Number(w[1])/100,E=Number(w[2])/100;let R,T,I;if(z===0)return I=E*255,{r:Math.round(I),g:Math.round(I),b:Math.round(I),a:1};E<.5?R=E*(1+z):R=E+z-E*z;const B=2*E-R,j=[0,0,0];for(let K=0;K<3;K++)T=M+1/3*-(K-1),T<0&&T++,T>1&&T--,6*T<1?I=B+(R-B)*6*T:2*T<1?I=R:3*T<2?I=B+(R-B)*(2/3-T)*6:I=B,j[K]=I*255;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection(s,v){return!(v.x>s.x+s.width||v.x+v.width<s.x||v.y>s.y+s.height||v.y+v.height<s.y)},cloneObject(s){const v={};for(const w in s)this._isPlainObject(s[w])?v[w]=this.cloneObject(s[w]):this._isArray(s[w])?v[w]=this.cloneArray(s[w]):v[w]=s[w];return v},cloneArray(s){return s.slice(0)},degToRad(s){return s*h},radToDeg(s){return s*g},_degToRad(s){return d.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),d.Util.degToRad(s)},_radToDeg(s){return d.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),d.Util.radToDeg(s)},_getRotation(s){return f.Konva.angleDeg?d.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(u+s)},error(s){console.error(u+s)},warn(s){f.Konva.showWarnings&&console.warn(y+s)},each(s,v){for(const w in s)v(w,s[w])},_inRange(s,v,w){return v<=s&&s<w},_getProjectionToSegment(s,v,w,M,z,E){let R,T,I;const B=(s-w)*(s-w)+(v-M)*(v-M);if(B==0)R=s,T=v,I=(z-w)*(z-w)+(E-M)*(E-M);else{const j=((z-s)*(w-s)+(E-v)*(M-v))/B;j<0?(R=s,T=v,I=(s-z)*(s-z)+(v-E)*(v-E)):j>1?(R=w,T=M,I=(w-z)*(w-z)+(M-E)*(M-E)):(R=s+j*(w-s),T=v+j*(M-v),I=(R-z)*(R-z)+(T-E)*(T-E))}return[R,T,I]},_getProjectionToLine(s,v,w){const M=d.Util.cloneObject(s);let z=Number.MAX_VALUE;return v.forEach(function(E,R){if(!w&&R===v.length-1)return;const T=v[(R+1)%v.length],I=d.Util._getProjectionToSegment(E.x,E.y,T.x,T.y,s.x,s.y),B=I[0],j=I[1],K=I[2];K<z&&(M.x=B,M.y=j,z=K)}),M},_prepareArrayForTween(s,v,w){const M=[],z=[];if(s.length>v.length){const R=v;v=s,s=R}for(let R=0;R<s.length;R+=2)M.push({x:s[R],y:s[R+1]});for(let R=0;R<v.length;R+=2)z.push({x:v[R],y:v[R+1]});const E=[];return z.forEach(function(R){const T=d.Util._getProjectionToLine(R,M,w);E.push(T.x),E.push(T.y)}),E},_prepareToStringify(s){let v;s.visitedByCircularReferenceRemoval=!0;for(const w in s)if(s.hasOwnProperty(w)&&s[w]&&typeof s[w]=="object"){if(v=Object.getOwnPropertyDescriptor(s,w),s[w].visitedByCircularReferenceRemoval||d.Util._isElement(s[w]))if(v.configurable)delete s[w];else return null;else if(d.Util._prepareToStringify(s[w])===null)if(v.configurable)delete s[w];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,v){for(const w in v)s[w]=v[w];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){f.Konva.releaseCanvasOnDestroy&&s.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(s,v,w,M){let z=0,E=0,R=0,T=0;typeof M=="number"?z=E=R=T=Math.min(M,v/2,w/2):(z=Math.min(M[0]||0,v/2,w/2),E=Math.min(M[1]||0,v/2,w/2),T=Math.min(M[2]||0,v/2,w/2),R=Math.min(M[3]||0,v/2,w/2)),s.moveTo(z,0),s.lineTo(v-E,0),s.arc(v-E,E,E,Math.PI*3/2,0,!1),s.lineTo(v,w-T),s.arc(v-T,w-T,T,0,Math.PI/2,!1),s.lineTo(R,w),s.arc(R,w-R,R,Math.PI/2,Math.PI,!1),s.lineTo(0,z),s.arc(z,z,z,Math.PI,Math.PI*3/2,!1)}}})(ya)),ya}var fr={},tn={},en={},kl;function Wu(){if(kl)return en;kl=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HitContext=en.SceneContext=en.Context=void 0;const d=Dt(),f=vt();function L(F){const l=[],s=F.length,v=d.Util;for(let w=0;w<s;w++){let M=F[w];v._isNumber(M)?M=Math.round(M*1e3)/1e3:v._isString(M)||(M=M+""),l.push(M)}return l}const b=",",k="(",_=")",a="([",h="])",g=";",p="()",m="=",x=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],y=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],u=100;let c=class{constructor(l){this.canvas=l,f.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(l){l.fillEnabled()&&this._fill(l)}_fill(l){}strokeShape(l){l.hasStroke()&&this._stroke(l)}_stroke(l){}fillStrokeShape(l){l.attrs.fillAfterStrokeEnabled?(this.strokeShape(l),this.fillShape(l)):(this.fillShape(l),this.strokeShape(l))}getTrace(l,s){let v=this.traceArr,w=v.length,M="",z,E,R,T;for(z=0;z<w;z++)E=v[z],R=E.method,R?(T=E.args,M+=R,l?M+=p:d.Util._isArray(T[0])?M+=a+T.join(b)+h:(s&&(T=T.map(I=>typeof I=="number"?Math.floor(I):I)),M+=k+T.join(b)+_)):(M+=E.property,l||(M+=m+E.val)),M+=g;return M}clearTrace(){this.traceArr=[]}_trace(l){let s=this.traceArr,v;s.push(l),v=s.length,v>=u&&s.shift()}reset(){const l=this.getCanvas().getPixelRatio();this.setTransform(1*l,0,0,1*l,0,0)}getCanvas(){return this.canvas}clear(l){const s=this.getCanvas();l?this.clearRect(l.x||0,l.y||0,l.width||0,l.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(l){const s=l.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(l){const s=l.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(l){const s=l.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(l,s){this._context[l]=s}arc(l,s,v,w,M,z){this._context.arc(l,s,v,w,M,z)}arcTo(l,s,v,w,M){this._context.arcTo(l,s,v,w,M)}beginPath(){this._context.beginPath()}bezierCurveTo(l,s,v,w,M,z){this._context.bezierCurveTo(l,s,v,w,M,z)}clearRect(l,s,v,w){this._context.clearRect(l,s,v,w)}clip(...l){this._context.clip.apply(this._context,l)}closePath(){this._context.closePath()}createImageData(l,s){const v=arguments;if(v.length===2)return this._context.createImageData(l,s);if(v.length===1)return this._context.createImageData(l)}createLinearGradient(l,s,v,w){return this._context.createLinearGradient(l,s,v,w)}createPattern(l,s){return this._context.createPattern(l,s)}createRadialGradient(l,s,v,w,M,z){return this._context.createRadialGradient(l,s,v,w,M,z)}drawImage(l,s,v,w,M,z,E,R,T){const I=arguments,B=this._context;I.length===3?B.drawImage(l,s,v):I.length===5?B.drawImage(l,s,v,w,M):I.length===9&&B.drawImage(l,s,v,w,M,z,E,R,T)}ellipse(l,s,v,w,M,z,E,R){this._context.ellipse(l,s,v,w,M,z,E,R)}isPointInPath(l,s,v,w){return v?this._context.isPointInPath(v,l,s,w):this._context.isPointInPath(l,s,w)}fill(...l){this._context.fill.apply(this._context,l)}fillRect(l,s,v,w){this._context.fillRect(l,s,v,w)}strokeRect(l,s,v,w){this._context.strokeRect(l,s,v,w)}fillText(l,s,v,w){w?this._context.fillText(l,s,v,w):this._context.fillText(l,s,v)}measureText(l){return this._context.measureText(l)}getImageData(l,s,v,w){return this._context.getImageData(l,s,v,w)}lineTo(l,s){this._context.lineTo(l,s)}moveTo(l,s){this._context.moveTo(l,s)}rect(l,s,v,w){this._context.rect(l,s,v,w)}roundRect(l,s,v,w,M){this._context.roundRect(l,s,v,w,M)}putImageData(l,s,v){this._context.putImageData(l,s,v)}quadraticCurveTo(l,s,v,w){this._context.quadraticCurveTo(l,s,v,w)}restore(){this._context.restore()}rotate(l){this._context.rotate(l)}save(){this._context.save()}scale(l,s){this._context.scale(l,s)}setLineDash(l){this._context.setLineDash?this._context.setLineDash(l):"mozDash"in this._context?this._context.mozDash=l:"webkitLineDash"in this._context&&(this._context.webkitLineDash=l)}getLineDash(){return this._context.getLineDash()}setTransform(l,s,v,w,M,z){this._context.setTransform(l,s,v,w,M,z)}stroke(l){l?this._context.stroke(l):this._context.stroke()}strokeText(l,s,v,w){this._context.strokeText(l,s,v,w)}transform(l,s,v,w,M,z){this._context.transform(l,s,v,w,M,z)}translate(l,s){this._context.translate(l,s)}_enableTrace(){let l=this,s=x.length,v=this.setAttr,w,M;const z=function(E){let R=l[E],T;l[E]=function(){return M=L(Array.prototype.slice.call(arguments,0)),T=R.apply(l,arguments),l._trace({method:E,args:M}),T}};for(w=0;w<s;w++)z(x[w]);l.setAttr=function(){v.apply(l,arguments);const E=arguments[0];let R=arguments[1];(E==="shadowOffsetX"||E==="shadowOffsetY"||E==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),l._trace({property:E,val:R})}}_applyGlobalCompositeOperation(l){const s=l.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};en.Context=c,y.forEach(function(F){Object.defineProperty(c.prototype,F,{get(){return this._context[F]},set(l){this._context[F]=l}})});class S extends c{constructor(l,{willReadFrequently:s=!1}={}){super(l),this._context=l._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(l){const s=l.fill();this.setAttr("fillStyle",s),l._fillFunc(this)}_fillPattern(l){this.setAttr("fillStyle",l._getFillPattern()),l._fillFunc(this)}_fillLinearGradient(l){const s=l._getLinearGradient();s&&(this.setAttr("fillStyle",s),l._fillFunc(this))}_fillRadialGradient(l){const s=l._getRadialGradient();s&&(this.setAttr("fillStyle",s),l._fillFunc(this))}_fill(l){const s=l.fill(),v=l.getFillPriority();if(s&&v==="color"){this._fillColor(l);return}const w=l.getFillPatternImage();if(w&&v==="pattern"){this._fillPattern(l);return}const M=l.getFillLinearGradientColorStops();if(M&&v==="linear-gradient"){this._fillLinearGradient(l);return}const z=l.getFillRadialGradientColorStops();if(z&&v==="radial-gradient"){this._fillRadialGradient(l);return}s?this._fillColor(l):w?this._fillPattern(l):M?this._fillLinearGradient(l):z&&this._fillRadialGradient(l)}_strokeLinearGradient(l){const s=l.getStrokeLinearGradientStartPoint(),v=l.getStrokeLinearGradientEndPoint(),w=l.getStrokeLinearGradientColorStops(),M=this.createLinearGradient(s.x,s.y,v.x,v.y);if(w){for(let z=0;z<w.length;z+=2)M.addColorStop(w[z],w[z+1]);this.setAttr("strokeStyle",M)}}_stroke(l){const s=l.dash(),v=l.getStrokeScaleEnabled();if(l.hasStroke()){if(!v){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(l),s&&l.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",l.dashOffset())),this.setAttr("lineWidth",l.strokeWidth()),l.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),l.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(l):this.setAttr("strokeStyle",l.stroke()),l._strokeFunc(this),v||this.restore()}}_applyShadow(l){var s,v,w;const M=(s=l.getShadowRGBA())!==null&&s!==void 0?s:"black",z=(v=l.getShadowBlur())!==null&&v!==void 0?v:5,E=(w=l.getShadowOffset())!==null&&w!==void 0?w:{x:0,y:0},R=l.getAbsoluteScale(),T=this.canvas.getPixelRatio(),I=R.x*T,B=R.y*T;this.setAttr("shadowColor",M),this.setAttr("shadowBlur",z*Math.min(Math.abs(I),Math.abs(B))),this.setAttr("shadowOffsetX",E.x*I),this.setAttr("shadowOffsetY",E.y*B)}}en.SceneContext=S;class P extends c{constructor(l){super(l),this._context=l._canvas.getContext("2d",{willReadFrequently:!0})}_fill(l){this.save(),this.setAttr("fillStyle",l.colorKey),l._fillFuncHit(this),this.restore()}strokeShape(l){l.hasHitStroke()&&this._stroke(l)}_stroke(l){if(l.hasHitStroke()){const s=l.getStrokeScaleEnabled();if(!s){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(l);const v=l.hitStrokeWidth(),w=v==="auto"?l.strokeWidth():v;this.setAttr("lineWidth",w),this.setAttr("strokeStyle",l.colorKey),l._strokeFuncHit(this),s||this.restore()}}}return en.HitContext=P,en}var Tl;function Qi(){if(Tl)return tn;Tl=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HitCanvas=tn.SceneCanvas=tn.Canvas=void 0;const d=Dt(),f=Wu(),L=vt();let b;function k(){if(b)return b;const g=d.Util.createCanvasElement(),p=g.getContext("2d");return b=(function(){const m=L.Konva._global.devicePixelRatio||1,x=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/x})(),d.Util.releaseCanvas(g),b}let _=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const x=(p||{}).pixelRatio||L.Konva.pixelRatio||k();this.pixelRatio=x,this._canvas=d.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const m=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,m){this.setWidth(p||0),this.setHeight(m||0)}toDataURL(p,m){try{return this._canvas.toDataURL(p,m)}catch{try{return this._canvas.toDataURL()}catch(y){return d.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};tn.Canvas=_;class a extends _{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new f.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}tn.SceneCanvas=a;class h extends _{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new f.HitContext(this),this.setSize(p.width,p.height)}}return tn.HitCanvas=h,tn}var va={},Nl;function Fa(){return Nl||(Nl=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.DD=void 0;const f=vt(),L=Dt();d.DD={get isDragging(){let b=!1;return d.DD._dragElements.forEach(k=>{k.dragStatus==="dragging"&&(b=!0)}),b},justDragged:!1,get node(){let b;return d.DD._dragElements.forEach(k=>{b=k.node}),b},_dragElements:new Map,_drag(b){const k=[];d.DD._dragElements.forEach((_,a)=>{const{node:h}=_,g=h.getStage();g.setPointersPositions(b),_.pointerId===void 0&&(_.pointerId=L.Util._getFirstPointerId(b));const p=g._changedPointerPositions.find(m=>m.id===_.pointerId);if(p){if(_.dragStatus!=="dragging"){const m=h.dragDistance();if(Math.max(Math.abs(p.x-_.startPointerPos.x),Math.abs(p.y-_.startPointerPos.y))<m||(h.startDrag({evt:b}),!h.isDragging()))return}h._setDragPosition(b,_),k.push(h)}}),k.forEach(_=>{_.fire("dragmove",{type:"dragmove",target:_,evt:b},!0)})},_endDragBefore(b){const k=[];d.DD._dragElements.forEach(_=>{const{node:a}=_,h=a.getStage();if(b&&h.setPointersPositions(b),!h._changedPointerPositions.find(m=>m.id===_.pointerId))return;(_.dragStatus==="dragging"||_.dragStatus==="stopped")&&(d.DD.justDragged=!0,f.Konva._mouseListenClick=!1,f.Konva._touchListenClick=!1,f.Konva._pointerListenClick=!1,_.dragStatus="stopped");const p=_.node.getLayer()||_.node instanceof f.Konva.Stage&&_.node;p&&k.indexOf(p)===-1&&k.push(p)}),k.forEach(_=>{_.draw()})},_endDragAfter(b){d.DD._dragElements.forEach((k,_)=>{k.dragStatus==="stopped"&&k.node.fire("dragend",{type:"dragend",target:k.node,evt:b},!0),k.dragStatus!=="dragging"&&d.DD._dragElements.delete(_)})}},f.Konva.isBrowser&&(window.addEventListener("mouseup",d.DD._endDragBefore,!0),window.addEventListener("touchend",d.DD._endDragBefore,!0),window.addEventListener("touchcancel",d.DD._endDragBefore,!0),window.addEventListener("mousemove",d.DD._drag),window.addEventListener("touchmove",d.DD._drag),window.addEventListener("mouseup",d.DD._endDragAfter,!1),window.addEventListener("touchend",d.DD._endDragAfter,!1),window.addEventListener("touchcancel",d.DD._endDragAfter,!1))})(va)),va}var _a={},pe={},Fl;function Ct(){if(Fl)return pe;Fl=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.RGBComponent=b,pe.alphaComponent=k,pe.getNumberValidator=_,pe.getNumberOrArrayOfNumbersValidator=a,pe.getNumberOrAutoValidator=h,pe.getStringValidator=g,pe.getStringOrGradientValidator=p,pe.getFunctionValidator=m,pe.getNumberArrayValidator=x,pe.getBooleanValidator=y,pe.getComponentValidator=u;const d=vt(),f=Dt();function L(c){return f.Util._isString(c)?'"'+c+'"':Object.prototype.toString.call(c)==="[object Number]"||f.Util._isBoolean(c)?c:Object.prototype.toString.call(c)}function b(c){return c>255?255:c<0?0:Math.round(c)}function k(c){return c>1?1:c<1e-4?1e-4:c}function _(){if(d.Konva.isUnminified)return function(c,S){return f.Util._isNumber(c)||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a number.'),c}}function a(c){if(d.Konva.isUnminified)return function(S,P){let F=f.Util._isNumber(S),l=f.Util._isArray(S)&&S.length==c;return!F&&!l&&f.Util.warn(L(S)+' is a not valid value for "'+P+'" attribute. The value should be a number or Array<number>('+c+")"),S}}function h(){if(d.Konva.isUnminified)return function(c,S){return f.Util._isNumber(c)||c==="auto"||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a number or "auto".'),c}}function g(){if(d.Konva.isUnminified)return function(c,S){return f.Util._isString(c)||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a string.'),c}}function p(){if(d.Konva.isUnminified)return function(c,S){const P=f.Util._isString(c),F=Object.prototype.toString.call(c)==="[object CanvasGradient]"||c&&c.addColorStop;return P||F||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a string or a native gradient.'),c}}function m(){if(d.Konva.isUnminified)return function(c,S){return f.Util._isFunction(c)||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a function.'),c}}function x(){if(d.Konva.isUnminified)return function(c,S){const P=Int8Array?Object.getPrototypeOf(Int8Array):null;return P&&c instanceof P||(f.Util._isArray(c)?c.forEach(function(F){f.Util._isNumber(F)||f.Util.warn('"'+S+'" attribute has non numeric element '+F+". Make sure that all elements are numbers.")}):f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a array of numbers.')),c}}function y(){if(d.Konva.isUnminified)return function(c,S){return c===!0||c===!1||f.Util.warn(L(c)+' is a not valid value for "'+S+'" attribute. The value should be a boolean.'),c}}function u(c){if(d.Konva.isUnminified)return function(S,P){return S==null||f.Util.isObject(S)||f.Util.warn(L(S)+' is a not valid value for "'+P+'" attribute. The value should be an object with properties '+c),S}}return pe}var Al;function St(){return Al||(Al=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Factory=void 0;const f=Dt(),L=Ct(),b="get",k="set";d.Factory={addGetterSetter(_,a,h,g,p){d.Factory.addGetter(_,a,h),d.Factory.addSetter(_,a,g,p),d.Factory.addOverloadedGetterSetter(_,a)},addGetter(_,a,h){const g=b+f.Util._capitalize(a);_.prototype[g]=_.prototype[g]||function(){const p=this.attrs[a];return p===void 0?h:p}},addSetter(_,a,h,g){const p=k+f.Util._capitalize(a);_.prototype[p]||d.Factory.overWriteSetter(_,a,h,g)},overWriteSetter(_,a,h,g){const p=k+f.Util._capitalize(a);_.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,a)),this._setAttr(a,m),g&&g.call(this),this}},addComponentsGetterSetter(_,a,h,g,p){const m=h.length,x=f.Util._capitalize,y=b+x(a),u=k+x(a);_.prototype[y]=function(){const S={};for(let P=0;P<m;P++){const F=h[P];S[F]=this.getAttr(a+x(F))}return S};const c=(0,L.getComponentValidator)(h);_.prototype[u]=function(S){const P=this.attrs[a];g&&(S=g.call(this,S,a)),c&&c.call(this,S,a);for(const F in S)S.hasOwnProperty(F)&&this._setAttr(a+x(F),S[F]);return S||h.forEach(F=>{this._setAttr(a+x(F),void 0)}),this._fireChangeEvent(a,P,S),p&&p.call(this),this},d.Factory.addOverloadedGetterSetter(_,a)},addOverloadedGetterSetter(_,a){const h=f.Util._capitalize(a),g=k+h,p=b+h;_.prototype[a]=function(){return arguments.length?(this[g](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(_,a,h,g){f.Util.error("Adding deprecated "+a);const p=b+f.Util._capitalize(a),m=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";_.prototype[p]=function(){f.Util.error(m);const x=this.attrs[a];return x===void 0?h:x},d.Factory.addSetter(_,a,g,function(){f.Util.error(m)}),d.Factory.addOverloadedGetterSetter(_,a)},backCompat(_,a){f.Util.each(a,function(h,g){const p=_.prototype[g],m=b+f.Util._capitalize(h),x=k+f.Util._capitalize(h);function y(){p.apply(this,arguments),f.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+g+'" instead.')}_.prototype[h]=y,_.prototype[m]=y,_.prototype[x]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(_a)),_a}var Ml;function Ut(){if(Ml)return fr;Ml=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Node=void 0;const d=Qi(),f=Fa(),L=St(),b=vt(),k=Dt(),_=Ct(),a="absoluteOpacity",h="allEventListeners",g="absoluteTransform",p="absoluteScale",m="canvas",x="Change",y="children",u="konva",c="listening",S="mouseenter",P="mouseleave",F="pointerenter",l="pointerleave",s="touchenter",v="touchleave",w="set",M="Shape",z=" ",E="stage",R="transform",T="Stage",I="visible",B=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(z);let j=1,K=class Ta{constructor(C){this._id=j++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(C),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(C){(C===R||C===g)&&this._cache.get(C)?this._cache.get(C).dirty=!0:C?this._cache.delete(C):this._cache.clear()}_getCache(C,A){let D=this._cache.get(C);return(D===void 0||(C===R||C===g)&&D.dirty===!0)&&(D=A.call(this),this._cache.set(C,D)),D}_calculate(C,A,D){if(!this._attachedDepsListeners.get(C)){const O=A.map(U=>U+"Change.konva").join(z);this.on(O,()=>{this._clearCache(C)}),this._attachedDepsListeners.set(C,!0)}return this._getCache(C,D)}_getCanvasCache(){return this._cache.get(m)}_clearSelfAndDescendantCache(C){this._clearCache(C),C===g&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(m)){const{scene:C,filter:A,hit:D,buffer:O}=this._cache.get(m);k.Util.releaseCanvas(C,A,D,O),this._cache.delete(m)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(C){const A=C||{};let D={};(A.x===void 0||A.y===void 0||A.width===void 0||A.height===void 0)&&(D=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let O=Math.ceil(A.width||D.width),U=Math.ceil(A.height||D.height),Z=A.pixelRatio,W=A.x===void 0?Math.floor(D.x):A.x,tt=A.y===void 0?Math.floor(D.y):A.y,it=A.offset||0,J=A.drawBorder||!1,G=A.hitCanvasPixelRatio||1;if(!O||!U){k.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(D.x)-W)>.5?1:0,rt=Math.abs(Math.round(D.y)-tt)>.5?1:0;O+=it*2+Y,U+=it*2+rt,W-=it,tt-=it;const st=new d.SceneCanvas({pixelRatio:Z,width:O,height:U}),at=new d.SceneCanvas({pixelRatio:Z,width:0,height:0,willReadFrequently:!0}),ft=new d.HitCanvas({pixelRatio:G,width:O,height:U}),ct=st.getContext(),Et=ft.getContext(),gt=new d.SceneCanvas({width:st.width/st.pixelRatio+Math.abs(W),height:st.height/st.pixelRatio+Math.abs(tt),pixelRatio:st.pixelRatio}),Bt=gt.getContext();return ft.isCache=!0,st.isCache=!0,this._cache.delete(m),this._filterUpToDate=!1,A.imageSmoothingEnabled===!1&&(st.getContext()._context.imageSmoothingEnabled=!1,at.getContext()._context.imageSmoothingEnabled=!1),ct.save(),Et.save(),Bt.save(),ct.translate(-W,-tt),Et.translate(-W,-tt),Bt.translate(-W,-tt),gt.x=W,gt.y=tt,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(p),this.drawScene(st,this,gt),this.drawHit(ft,this),this._isUnderCache=!1,ct.restore(),Et.restore(),J&&(ct.save(),ct.beginPath(),ct.rect(0,0,O,U),ct.closePath(),ct.setAttr("strokeStyle","red"),ct.setAttr("lineWidth",5),ct.stroke(),ct.restore()),this._cache.set(m,{scene:st,filter:at,hit:ft,buffer:gt,x:W,y:tt}),this._requestDraw(),this}isCached(){return this._cache.has(m)}getClientRect(C){throw new Error('abstract "getClientRect" method call')}_transformedRect(C,A){const D=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}];let O=1/0,U=1/0,Z=-1/0,W=-1/0;const tt=this.getAbsoluteTransform(A);return D.forEach(function(it){const J=tt.point(it);O===void 0&&(O=Z=J.x,U=W=J.y),O=Math.min(O,J.x),U=Math.min(U,J.y),Z=Math.max(Z,J.x),W=Math.max(W,J.y)}),{x:O,y:U,width:Z-O,height:W-U}}_drawCachedSceneCanvas(C){C.save(),C._applyOpacity(this),C._applyGlobalCompositeOperation(this);const A=this._getCanvasCache();C.translate(A.x,A.y);const D=this._getCachedSceneCanvas(),O=D.pixelRatio;C.drawImage(D._canvas,0,0,D.width/O,D.height/O),C.restore()}_drawCachedHitCanvas(C){const A=this._getCanvasCache(),D=A.hit;C.save(),C.translate(A.x,A.y),C.drawImage(D._canvas,0,0,D.width/D.pixelRatio,D.height/D.pixelRatio),C.restore()}_getCachedSceneCanvas(){let C=this.filters(),A=this._getCanvasCache(),D=A.scene,O=A.filter,U=O.getContext(),Z,W,tt,it;if(C){if(!this._filterUpToDate){const J=D.pixelRatio;O.setSize(D.width/D.pixelRatio,D.height/D.pixelRatio);try{for(Z=C.length,U.clear(),U.drawImage(D._canvas,0,0,D.getWidth()/J,D.getHeight()/J),W=U.getImageData(0,0,O.getWidth(),O.getHeight()),tt=0;tt<Z;tt++){if(it=C[tt],typeof it!="function"){k.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,W),U.putImageData(W,0,0)}}catch(G){k.Util.error("Unable to apply filter. "+G.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return O}return D}on(C,A){if(this._cache&&this._cache.delete(h),arguments.length===3)return this._delegate.apply(this,arguments);const D=C.split(z);for(let O=0;O<D.length;O++){const Z=D[O].split("."),W=Z[0],tt=Z[1]||"";this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:tt,handler:A})}return this}off(C,A){let D=(C||"").split(z),O=D.length,U,Z,W,tt,it,J;if(this._cache&&this._cache.delete(h),!C)for(Z in this.eventListeners)this._off(Z);for(U=0;U<O;U++)if(W=D[U],tt=W.split("."),it=tt[0],J=tt[1],it)this.eventListeners[it]&&this._off(it,J,A);else for(Z in this.eventListeners)this._off(Z,J,A);return this}dispatchEvent(C){const A={target:this,type:C.type,evt:C};return this.fire(C.type,A),this}addEventListener(C,A){return this.on(C,function(D){A.call(this,D.evt)}),this}removeEventListener(C){return this.off(C),this}_delegate(C,A,D){const O=this;this.on(C,function(U){const Z=U.target.findAncestors(A,!0,O);for(let W=0;W<Z.length;W++)U=k.Util.cloneObject(U),U.currentTarget=Z[W],D.call(Z[W],U)})}remove(){return this.isDragging()&&this.stopDrag(),f.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(E),this._clearSelfAndDescendantCache(I),this._clearSelfAndDescendantCache(c)}_remove(){this._clearCaches();const C=this.getParent();C&&C.children&&(C.children.splice(this.index,1),C._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(C){const A="get"+k.Util._capitalize(C);return k.Util._isFunction(this[A])?this[A]():this.attrs[C]}getAncestors(){let C=this.getParent(),A=[];for(;C;)A.push(C),C=C.getParent();return A}getAttrs(){return this.attrs||{}}setAttrs(C){return this._batchTransformChanges(()=>{let A,D;if(!C)return this;for(A in C)A!==y&&(D=w+k.Util._capitalize(A),k.Util._isFunction(this[D])?this[D](C[A]):this._setAttr(A,C[A]))}),this}isListening(){return this._getCache(c,this._isListening)}_isListening(C){if(!this.listening())return!1;const D=this.getParent();return D&&D!==C&&this!==C?D._isListening(C):!0}isVisible(){return this._getCache(I,this._isVisible)}_isVisible(C){if(!this.visible())return!1;const D=this.getParent();return D&&D!==C&&this!==C?D._isVisible(C):!0}shouldDrawHit(C,A=!1){if(C)return this._isVisible(C)&&this._isListening(C);const D=this.getLayer();let O=!1;f.DD._dragElements.forEach(Z=>{Z.dragStatus==="dragging"&&(Z.node.nodeType==="Stage"||Z.node.getLayer()===D)&&(O=!0)});const U=!A&&!b.Konva.hitOnDragEnabled&&(O||b.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!U}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let C=this.getDepth(),A=this,D=0,O,U,Z,W;function tt(J){for(O=[],U=J.length,Z=0;Z<U;Z++)W=J[Z],D++,W.nodeType!==M&&(O=O.concat(W.getChildren().slice())),W._id===A._id&&(Z=U);O.length>0&&O[0].getDepth()<=C&&tt(O)}const it=this.getStage();return A.nodeType!==T&&it&&tt(it.getChildren()),D}getDepth(){let C=0,A=this.parent;for(;A;)C++,A=A.parent;return C}_batchTransformChanges(C){this._batchingTransformChange=!0,C(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(R),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}setPosition(C){return this._batchTransformChanges(()=>{this.x(C.x),this.y(C.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const C=this.getStage();if(!C)return null;const A=C.getPointerPosition();if(!A)return null;const D=this.getAbsoluteTransform().copy();return D.invert(),D.point(A)}getAbsolutePosition(C){let A=!1,D=this.parent;for(;D;){if(D.isCached()){A=!0;break}D=D.parent}A&&!C&&(C=!0);const O=this.getAbsoluteTransform(C).getMatrix(),U=new k.Transform,Z=this.offset();return U.m=O.slice(),U.translate(Z.x,Z.y),U.getTranslation()}setAbsolutePosition(C){const{x:A,y:D,...O}=this._clearTransform();this.attrs.x=A,this.attrs.y=D,this._clearCache(R);const U=this._getAbsoluteTransform().copy();return U.invert(),U.translate(C.x,C.y),C={x:this.attrs.x+U.getTranslation().x,y:this.attrs.y+U.getTranslation().y},this._setTransform(O),this.setPosition({x:C.x,y:C.y}),this._clearCache(R),this._clearSelfAndDescendantCache(g),this}_setTransform(C){let A;for(A in C)this.attrs[A]=C[A]}_clearTransform(){const C={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,C}move(C){let A=C.x,D=C.y,O=this.x(),U=this.y();return A!==void 0&&(O+=A),D!==void 0&&(U+=D),this.setPosition({x:O,y:U}),this}_eachAncestorReverse(C,A){let D=[],O=this.getParent(),U,Z;if(!(A&&A._id===this._id)){for(D.unshift(this);O&&(!A||O._id!==A._id);)D.unshift(O),O=O.parent;for(U=D.length,Z=0;Z<U;Z++)C(D[Z])}}rotate(C){return this.rotation(this.rotation()+C),this}moveToTop(){if(!this.parent)return k.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const C=this.index,A=this.parent.getChildren().length;return C<A-1?(this.parent.children.splice(C,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return k.Util.warn("Node has no parent. moveUp function is ignored."),!1;const C=this.index,A=this.parent.getChildren().length;return C<A-1?(this.parent.children.splice(C,1),this.parent.children.splice(C+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return k.Util.warn("Node has no parent. moveDown function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.splice(C-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return k.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(C){if(!this.parent)return k.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(C<0||C>=this.parent.children.length)&&k.Util.warn("Unexpected value "+C+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const A=this.index;return this.parent.children.splice(A,1),this.parent.children.splice(C,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let C=this.opacity();const A=this.getParent();return A&&!A._isUnderCache&&(C*=A.getAbsoluteOpacity()),C}moveTo(C){return this.getParent()!==C&&(this._remove(),C.add(this)),this}toObject(){let C=this.getAttrs(),A,D,O,U,Z;const W={attrs:{},className:this.getClassName()};for(A in C)D=C[A],Z=k.Util.isObject(D)&&!k.Util._isPlainObject(D)&&!k.Util._isArray(D),!Z&&(O=typeof this[A]=="function"&&this[A],delete C[A],U=O?O.call(this):null,C[A]=D,U!==D&&(W.attrs[A]=D));return k.Util._prepareToStringify(W)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(C,A,D){const O=[];A&&this._isMatch(C)&&O.push(this);let U=this.parent;for(;U;){if(U===D)return O;U._isMatch(C)&&O.push(U),U=U.parent}return O}isAncestorOf(C){return!1}findAncestor(C,A,D){return this.findAncestors(C,A,D)[0]}_isMatch(C){if(!C)return!1;if(typeof C=="function")return C(this);let A=C.replace(/ /g,"").split(","),D=A.length,O,U;for(O=0;O<D;O++)if(U=A[O],k.Util.isValidSelector(U)||(k.Util.warn('Selector "'+U+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),k.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),k.Util.warn("Konva is awesome, right?")),U.charAt(0)==="#"){if(this.id()===U.slice(1))return!0}else if(U.charAt(0)==="."){if(this.hasName(U.slice(1)))return!0}else if(this.className===U||this.nodeType===U)return!0;return!1}getLayer(){const C=this.getParent();return C?C.getLayer():null}getStage(){return this._getCache(E,this._getStage)}_getStage(){const C=this.getParent();return C?C.getStage():null}fire(C,A={},D){return A.target=A.target||this,D?this._fireAndBubble(C,A):this._fire(C,A),this}getAbsoluteTransform(C){return C?this._getAbsoluteTransform(C):this._getCache(g,this._getAbsoluteTransform)}_getAbsoluteTransform(C){let A;if(C)return A=new k.Transform,this._eachAncestorReverse(function(D){const O=D.transformsEnabled();O==="all"?A.multiply(D.getTransform()):O==="position"&&A.translate(D.x()-D.offsetX(),D.y()-D.offsetY())},C),A;{A=this._cache.get(g)||new k.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(A):A.reset();const D=this.transformsEnabled();if(D==="all")A.multiply(this.getTransform());else if(D==="position"){const O=this.attrs.x||0,U=this.attrs.y||0,Z=this.attrs.offsetX||0,W=this.attrs.offsetY||0;A.translate(O-Z,U-W)}return A.dirty=!1,A}}getAbsoluteScale(C){let A=this;for(;A;)A._isUnderCache&&(C=A),A=A.getParent();const O=this.getAbsoluteTransform(C).decompose();return{x:O.scaleX,y:O.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(R,this._getTransform)}_getTransform(){var C,A;const D=this._cache.get(R)||new k.Transform;D.reset();const O=this.x(),U=this.y(),Z=b.Konva.getAngle(this.rotation()),W=(C=this.attrs.scaleX)!==null&&C!==void 0?C:1,tt=(A=this.attrs.scaleY)!==null&&A!==void 0?A:1,it=this.attrs.skewX||0,J=this.attrs.skewY||0,G=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(O!==0||U!==0)&&D.translate(O,U),Z!==0&&D.rotate(Z),(it!==0||J!==0)&&D.skew(it,J),(W!==1||tt!==1)&&D.scale(W,tt),(G!==0||Y!==0)&&D.translate(-1*G,-1*Y),D.dirty=!1,D}clone(C){let A=k.Util.cloneObject(this.attrs),D,O,U,Z,W;for(D in C)A[D]=C[D];const tt=new this.constructor(A);for(D in this.eventListeners)for(O=this.eventListeners[D],U=O.length,Z=0;Z<U;Z++)W=O[Z],W.name.indexOf(u)<0&&(tt.eventListeners[D]||(tt.eventListeners[D]=[]),tt.eventListeners[D].push(W));return tt}_toKonvaCanvas(C){C=C||{};const A=this.getClientRect(),D=this.getStage(),O=C.x!==void 0?C.x:Math.floor(A.x),U=C.y!==void 0?C.y:Math.floor(A.y),Z=C.pixelRatio||1,W=new d.SceneCanvas({width:C.width||Math.ceil(A.width)||(D?D.width():0),height:C.height||Math.ceil(A.height)||(D?D.height():0),pixelRatio:Z}),tt=W.getContext(),it=new d.SceneCanvas({width:W.width/W.pixelRatio+Math.abs(O),height:W.height/W.pixelRatio+Math.abs(U),pixelRatio:W.pixelRatio});return C.imageSmoothingEnabled===!1&&(tt._context.imageSmoothingEnabled=!1),tt.save(),(O||U)&&tt.translate(-1*O,-1*U),this.drawScene(W,void 0,it),tt.restore(),W}toCanvas(C){return this._toKonvaCanvas(C)._canvas}toDataURL(C){C=C||{};const A=C.mimeType||null,D=C.quality||null,O=this._toKonvaCanvas(C).toDataURL(A,D);return C.callback&&C.callback(O),O}toImage(C){return new Promise((A,D)=>{try{const O=C?.callback;O&&delete C.callback,k.Util._urlToImage(this.toDataURL(C),function(U){A(U),O?.(U)})}catch(O){D(O)}})}toBlob(C){return new Promise((A,D)=>{try{const O=C?.callback;O&&delete C.callback,this.toCanvas(C).toBlob(U=>{A(U),O?.(U)},C?.mimeType,C?.quality)}catch(O){D(O)}})}setSize(C){return this.width(C.width),this.height(C.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():b.Konva.dragDistance}_off(C,A,D){let O=this.eventListeners[C],U,Z,W;for(U=0;U<O.length;U++)if(Z=O[U].name,W=O[U].handler,(Z!=="konva"||A==="konva")&&(!A||Z===A)&&(!D||D===W)){if(O.splice(U,1),O.length===0){delete this.eventListeners[C];break}U--}}_fireChangeEvent(C,A,D){this._fire(C+x,{oldVal:A,newVal:D})}addName(C){if(!this.hasName(C)){const A=this.name(),D=A?A+" "+C:C;this.name(D)}return this}hasName(C){if(!C)return!1;const A=this.name();return A?(A||"").split(/\s/g).indexOf(C)!==-1:!1}removeName(C){const A=(this.name()||"").split(/\s/g),D=A.indexOf(C);return D!==-1&&(A.splice(D,1),this.name(A.join(" "))),this}setAttr(C,A){const D=this[w+k.Util._capitalize(C)];return k.Util._isFunction(D)?D.call(this,A):this._setAttr(C,A),this}_requestDraw(){if(b.Konva.autoDrawEnabled){const C=this.getLayer()||this.getStage();C?.batchDraw()}}_setAttr(C,A){const D=this.attrs[C];D===A&&!k.Util.isObject(A)||(A==null?delete this.attrs[C]:this.attrs[C]=A,this._shouldFireChangeEvents&&this._fireChangeEvent(C,D,A),this._requestDraw())}_setComponentAttr(C,A,D){let O;D!==void 0&&(O=this.attrs[C],O||(this.attrs[C]=this.getAttr(C)),this.attrs[C][A]=D,this._fireChangeEvent(C,O,D))}_fireAndBubble(C,A,D){A&&this.nodeType===M&&(A.target=this);const O=[S,P,F,l,s,v];if(!(O.indexOf(C)!==-1&&(D&&(this===D||this.isAncestorOf&&this.isAncestorOf(D))||this.nodeType==="Stage"&&!D))){this._fire(C,A);const Z=O.indexOf(C)!==-1&&D&&D.isAncestorOf&&D.isAncestorOf(this)&&!D.isAncestorOf(this.parent);(A&&!A.cancelBubble||!A)&&this.parent&&this.parent.isListening()&&!Z&&(D&&D.parent?this._fireAndBubble.call(this.parent,C,A,D):this._fireAndBubble.call(this.parent,C,A))}}_getProtoListeners(C){var A,D,O;const U=(A=this._cache.get(h))!==null&&A!==void 0?A:{};let Z=U?.[C];if(Z===void 0){Z=[];let W=Object.getPrototypeOf(this);for(;W;){const tt=(O=(D=W.eventListeners)===null||D===void 0?void 0:D[C])!==null&&O!==void 0?O:[];Z.push(...tt),W=Object.getPrototypeOf(W)}U[C]=Z,this._cache.set(h,U)}return Z}_fire(C,A){A=A||{},A.currentTarget=this,A.type=C;const D=this._getProtoListeners(C);if(D)for(let U=0;U<D.length;U++)D[U].handler.call(this,A);const O=this.eventListeners[C];if(O)for(let U=0;U<O.length;U++)O[U].handler.call(this,A)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(C){const A=C?C.pointerId:void 0,D=this.getStage(),O=this.getAbsolutePosition();if(!D)return;const U=D._getPointerById(A)||D._changedPointerPositions[0]||O;f.DD._dragElements.set(this._id,{node:this,startPointerPos:U,offset:{x:U.x-O.x,y:U.y-O.y},dragStatus:"ready",pointerId:A})}startDrag(C,A=!0){f.DD._dragElements.has(this._id)||this._createDragElement(C);const D=f.DD._dragElements.get(this._id);D.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:C&&C.evt},A)}_setDragPosition(C,A){const D=this.getStage()._getPointerById(A.pointerId);if(!D)return;let O={x:D.x-A.offset.x,y:D.y-A.offset.y};const U=this.dragBoundFunc();if(U!==void 0){const Z=U.call(this,O,C);Z?O=Z:k.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==O.x||this._lastPos.y!==O.y)&&(this.setAbsolutePosition(O),this._requestDraw()),this._lastPos=O}stopDrag(C){const A=f.DD._dragElements.get(this._id);A&&(A.dragStatus="stopped"),f.DD._endDragBefore(C),f.DD._endDragAfter(C)}setDraggable(C){this._setAttr("draggable",C),this._dragChange()}isDragging(){const C=f.DD._dragElements.get(this._id);return C?C.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(C){if(!(!(C.evt.button!==void 0)||b.Konva.dragButtons.indexOf(C.evt.button)>=0)||this.isDragging())return;let O=!1;f.DD._dragElements.forEach(U=>{this.isAncestorOf(U.node)&&(O=!0)}),O||this._createDragElement(C)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const A=f.DD._dragElements.get(this._id),D=A&&A.dragStatus==="dragging",O=A&&A.dragStatus==="ready";D?this.stopDrag():O&&f.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(C={x:0,y:0}){const A=this.getStage();if(!A)return!1;const D={x:-C.x,y:-C.y,width:A.width()+2*C.x,height:A.height()+2*C.y};return k.Util.haveIntersection(D,this.getClientRect())}static create(C,A){return k.Util._isString(C)&&(C=JSON.parse(C)),this._createNode(C,A)}static _createNode(C,A){let D=Ta.prototype.getClassName.call(C),O=C.children,U,Z,W;A&&(C.attrs.container=A),b.Konva[D]||(k.Util.warn('Can not find a node with class name "'+D+'". Fallback to "Shape".'),D="Shape");const tt=b.Konva[D];if(U=new tt(C.attrs),O)for(Z=O.length,W=0;W<Z;W++)U.add(Ta._createNode(O[W]));return U}};fr.Node=K,K.prototype.nodeType="Node",K.prototype._attrsAffectingSize=[],K.prototype.eventListeners={},K.prototype.on.call(K.prototype,B,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(R),this._clearSelfAndDescendantCache(g)}),K.prototype.on.call(K.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(I)}),K.prototype.on.call(K.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(c)}),K.prototype.on.call(K.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const V=L.Factory.addGetterSetter;return V(K,"zIndex"),V(K,"absolutePosition"),V(K,"position"),V(K,"x",0,(0,_.getNumberValidator)()),V(K,"y",0,(0,_.getNumberValidator)()),V(K,"globalCompositeOperation","source-over",(0,_.getStringValidator)()),V(K,"opacity",1,(0,_.getNumberValidator)()),V(K,"name","",(0,_.getStringValidator)()),V(K,"id","",(0,_.getStringValidator)()),V(K,"rotation",0,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(K,"scale",["x","y"]),V(K,"scaleX",1,(0,_.getNumberValidator)()),V(K,"scaleY",1,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(K,"skew",["x","y"]),V(K,"skewX",0,(0,_.getNumberValidator)()),V(K,"skewY",0,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(K,"offset",["x","y"]),V(K,"offsetX",0,(0,_.getNumberValidator)()),V(K,"offsetY",0,(0,_.getNumberValidator)()),V(K,"dragDistance",void 0,(0,_.getNumberValidator)()),V(K,"width",0,(0,_.getNumberValidator)()),V(K,"height",0,(0,_.getNumberValidator)()),V(K,"listening",!0,(0,_.getBooleanValidator)()),V(K,"preventDefault",!0,(0,_.getBooleanValidator)()),V(K,"filters",void 0,function(et){return this._filterUpToDate=!1,et}),V(K,"visible",!0,(0,_.getBooleanValidator)()),V(K,"transformsEnabled","all",(0,_.getStringValidator)()),V(K,"size"),V(K,"dragBoundFunc"),V(K,"draggable",!1,(0,_.getBooleanValidator)()),L.Factory.backCompat(K,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),fr}var gr={},Ll;function Ji(){if(Ll)return gr;Ll=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Container=void 0;const d=St(),f=Ut(),L=Ct();let b=class extends f.Node{constructor(){super(...arguments),this.children=[]}getChildren(_){const a=this.children||[];return _?a.filter(_):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.destroy()}),this.children=[],this._requestDraw(),this}add(..._){if(_.length===0)return this;if(_.length>1){for(let h=0;h<_.length;h++)this.add(_[h]);return this}const a=_[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(_){return this._generalFind(_,!1)}findOne(_){const a=this._generalFind(_,!0);return a.length>0?a[0]:void 0}_generalFind(_,a){const h=[];return this._descendants(g=>{const p=g._isMatch(_);return p&&h.push(g),!!(p&&a)}),h}_descendants(_){let a=!1;const h=this.getChildren();for(const g of h){if(a=_(g),a)return!0;if(g.hasChildren()&&(a=g._descendants(_),a))return!0}return!1}toObject(){const _=f.Node.prototype.toObject.call(this);return _.children=[],this.getChildren().forEach(a=>{_.children.push(a.toObject())}),_}isAncestorOf(_){let a=_.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(_){const a=f.Node.prototype.clone.call(this,_);return this.getChildren().forEach(function(h){a.add(h.clone())}),a}getAllIntersections(_){const a=[];return this.find("Shape").forEach(h=>{h.isVisible()&&h.intersects(_)&&a.push(h)}),a}_clearSelfAndDescendantCache(_){var a;super._clearSelfAndDescendantCache(_),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(h){h._clearSelfAndDescendantCache(_)}))}_setChildrenIndices(){var _;(_=this.children)===null||_===void 0||_.forEach(function(a,h){a.index=h}),this._requestDraw()}drawScene(_,a,h){const g=this.getLayer(),p=_||g&&g.getCanvas(),m=p&&p.getContext(),x=this._getCanvasCache(),y=x&&x.scene,u=p&&p.isCache;if(!this.isVisible()&&!u)return this;if(y){m.save();const c=this.getAbsoluteTransform(a).getMatrix();m.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(m),m.restore()}else this._drawChildren("drawScene",p,a,h);return this}drawHit(_,a){if(!this.shouldDrawHit(a))return this;const h=this.getLayer(),g=_||h&&h.hitCanvas,p=g&&g.getContext(),m=this._getCanvasCache();if(m&&m.hit){p.save();const y=this.getAbsoluteTransform(a).getMatrix();p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",g,a);return this}_drawChildren(_,a,h,g){var p;const m=a&&a.getContext(),x=this.clipWidth(),y=this.clipHeight(),u=this.clipFunc(),c=typeof x=="number"&&typeof y=="number"||u,S=h===this;if(c){m.save();const F=this.getAbsoluteTransform(h);let l=F.getMatrix();m.transform(l[0],l[1],l[2],l[3],l[4],l[5]),m.beginPath();let s;if(u)s=u.call(this,m,this);else{const v=this.clipX(),w=this.clipY();m.rect(v||0,w||0,x,y)}m.clip.apply(m,s),l=F.copy().invert().getMatrix(),m.transform(l[0],l[1],l[2],l[3],l[4],l[5])}const P=!S&&this.globalCompositeOperation()!=="source-over"&&_==="drawScene";P&&(m.save(),m._applyGlobalCompositeOperation(this)),(p=this.children)===null||p===void 0||p.forEach(function(F){F[_](a,h,g)}),P&&m.restore(),c&&m.restore()}getClientRect(_={}){var a;const h=_.skipTransform,g=_.relativeTo;let p,m,x,y,u={x:1/0,y:1/0,width:0,height:0};const c=this;(a=this.children)===null||a===void 0||a.forEach(function(F){if(!F.visible())return;const l=F.getClientRect({relativeTo:c,skipShadow:_.skipShadow,skipStroke:_.skipStroke});l.width===0&&l.height===0||(p===void 0?(p=l.x,m=l.y,x=l.x+l.width,y=l.y+l.height):(p=Math.min(p,l.x),m=Math.min(m,l.y),x=Math.max(x,l.x+l.width),y=Math.max(y,l.y+l.height)))});const S=this.find("Shape");let P=!1;for(let F=0;F<S.length;F++)if(S[F]._isVisible(this)){P=!0;break}return P&&p!==void 0?u={x:p,y:m,width:x-p,height:y-m}:u={x:0,y:0,width:0,height:0},h?u:this._transformedRect(u,g)}};return gr.Container=b,d.Factory.addComponentsGetterSetter(b,"clip",["x","y","width","height"]),d.Factory.addGetterSetter(b,"clipX",void 0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(b,"clipY",void 0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(b,"clipWidth",void 0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(b,"clipHeight",void 0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(b,"clipFunc"),gr}var Sa={},gn={},bl;function qu(){if(bl)return gn;bl=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.getCapturedShape=b,gn.createEvent=k,gn.hasPointerCapture=_,gn.setPointerCapture=a,gn.releaseCapture=h;const d=vt(),f=new Map,L=d.Konva._global.PointerEvent!==void 0;function b(g){return f.get(g)}function k(g){return{evt:g,pointerId:g.pointerId}}function _(g,p){return f.get(g)===p}function a(g,p){h(g),p.getStage()&&(f.set(g,p),L&&p._fire("gotpointercapture",k(new PointerEvent("gotpointercapture"))))}function h(g,p){const m=f.get(g);if(!m)return;const x=m.getStage();x&&x.content,f.delete(g),L&&m._fire("lostpointercapture",k(new PointerEvent("lostpointercapture")))}return gn}var Ol;function Cc(){return Ol||(Ol=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Stage=d.stages=void 0;const f=Dt(),L=St(),b=Ji(),k=vt(),_=Qi(),a=Fa(),h=vt(),g=qu(),p="Stage",m="string",x="px",y="mouseout",u="mouseleave",c="mouseover",S="mouseenter",P="mousemove",F="mousedown",l="mouseup",s="pointermove",v="pointerdown",w="pointerup",M="pointercancel",z="lostpointercapture",E="pointerout",R="pointerleave",T="pointerover",I="pointerenter",B="contextmenu",j="touchstart",K="touchend",V="touchmove",et="touchcancel",C="wheel",A=5,D=[[S,"_pointerenter"],[F,"_pointerdown"],[P,"_pointermove"],[l,"_pointerup"],[u,"_pointerleave"],[j,"_pointerdown"],[V,"_pointermove"],[K,"_pointerup"],[et,"_pointercancel"],[c,"_pointerover"],[C,"_wheel"],[B,"_contextmenu"],[v,"_pointerdown"],[s,"_pointermove"],[w,"_pointerup"],[M,"_pointercancel"],[R,"_pointerleave"],[z,"_lostpointercapture"]],O={mouse:{[E]:y,[R]:u,[T]:c,[I]:S,[s]:P,[v]:F,[w]:l,[M]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[E]:"touchout",[R]:"touchleave",[T]:"touchover",[I]:"touchenter",[s]:V,[v]:j,[w]:K,[M]:et,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[E]:E,[R]:R,[T]:T,[I]:I,[s]:s,[v]:v,[w]:w,[M]:M,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},U=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",Z=J=>{const G=U(J);if(G==="pointer")return k.Konva.pointerEventsEnabled&&O.pointer;if(G==="touch")return O.touch;if(G==="mouse")return O.mouse};function W(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&f.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const tt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";d.stages=[];class it extends b.Container{constructor(G){super(W(G)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),d.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(G){const Y=G.getType()==="Layer",rt=G.getType()==="FastLayer";Y||rt||f.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const G=this.visible()?"":"none";this.content.style.display=G}setContainer(G){if(typeof G===m){let Y;if(G.charAt(0)==="."){const rt=G.slice(1);G=document.getElementsByClassName(rt)[0]}else G.charAt(0)!=="#"?Y=G:Y=G.slice(1),G=document.getElementById(Y);if(!G)throw"Can not find container in document with id "+Y}return this._setAttr("container",G),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),G.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const G=this.children,Y=G.length;for(let rt=0;rt<Y;rt++)G[rt].clear();return this}clone(G){return G||(G={}),G.container=typeof document<"u"&&document.createElement("div"),b.Container.prototype.clone.call(this,G)}destroy(){super.destroy();const G=this.content;G&&f.Util._isInDocument(G)&&this.container().removeChild(G);const Y=d.stages.indexOf(this);return Y>-1&&d.stages.splice(Y,1),f.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const G=this._pointerPositions[0]||this._changedPointerPositions[0];return G?{x:G.x,y:G.y}:(f.Util.warn(tt),null)}_getPointerById(G){return this._pointerPositions.find(Y=>Y.id===G)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(G){G=G||{},G.x=G.x||0,G.y=G.y||0,G.width=G.width||this.width(),G.height=G.height||this.height();const Y=new _.SceneCanvas({width:G.width,height:G.height,pixelRatio:G.pixelRatio||1}),rt=Y.getContext()._context,st=this.children;return(G.x||G.y)&&rt.translate(-1*G.x,-1*G.y),st.forEach(function(at){if(!at.isVisible())return;const ft=at._toKonvaCanvas(G);rt.drawImage(ft._canvas,G.x,G.y,ft.getWidth()/ft.getPixelRatio(),ft.getHeight()/ft.getPixelRatio())}),Y}getIntersection(G){if(!G)return null;const Y=this.children,rt=Y.length,st=rt-1;for(let at=st;at>=0;at--){const ft=Y[at].getIntersection(G);if(ft)return ft}return null}_resizeDOM(){const G=this.width(),Y=this.height();this.content&&(this.content.style.width=G+x,this.content.style.height=Y+x),this.bufferCanvas.setSize(G,Y),this.bufferHitCanvas.setSize(G,Y),this.children.forEach(rt=>{rt.setSize({width:G,height:Y}),rt.draw()})}add(G,...Y){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.add(arguments[st]);return this}super.add(G);const rt=this.children.length;return rt>A&&f.Util.warn("The stage has "+rt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),G.setSize({width:this.width(),height:this.height()}),G.draw(),k.Konva.isBrowser&&this.content.appendChild(G.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(G){return g.hasPointerCapture(G,this)}setPointerCapture(G){g.setPointerCapture(G,this)}releaseCapture(G){g.releaseCapture(G,this)}getLayers(){return this.children}_bindContentEvents(){k.Konva.isBrowser&&D.forEach(([G,Y])=>{this.content.addEventListener(G,rt=>{this[Y](rt)},{passive:!1})})}_pointerenter(G){this.setPointersPositions(G);const Y=Z(G.type);Y&&this._fire(Y.pointerenter,{evt:G,target:this,currentTarget:this})}_pointerover(G){this.setPointersPositions(G);const Y=Z(G.type);Y&&this._fire(Y.pointerover,{evt:G,target:this,currentTarget:this})}_getTargetShape(G){let Y=this[G+"targetShape"];return Y&&!Y.getStage()&&(Y=null),Y}_pointerleave(G){const Y=Z(G.type),rt=U(G.type);if(!Y)return;this.setPointersPositions(G);const st=this._getTargetShape(rt),at=!(k.Konva.isDragging()||k.Konva.isTransforming())||k.Konva.hitOnDragEnabled;st&&at?(st._fireAndBubble(Y.pointerout,{evt:G}),st._fireAndBubble(Y.pointerleave,{evt:G}),this._fire(Y.pointerleave,{evt:G,target:this,currentTarget:this}),this[rt+"targetShape"]=null):at&&(this._fire(Y.pointerleave,{evt:G,target:this,currentTarget:this}),this._fire(Y.pointerout,{evt:G,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(G){const Y=Z(G.type),rt=U(G.type);if(!Y)return;this.setPointersPositions(G);let st=!1;this._changedPointerPositions.forEach(at=>{const ft=this.getIntersection(at);if(a.DD.justDragged=!1,k.Konva["_"+rt+"ListenClick"]=!0,!ft||!ft.isListening()){this[rt+"ClickStartShape"]=void 0;return}k.Konva.capturePointerEventsEnabled&&ft.setPointerCapture(at.id),this[rt+"ClickStartShape"]=ft,ft._fireAndBubble(Y.pointerdown,{evt:G,pointerId:at.id}),st=!0;const ct=G.type.indexOf("touch")>=0;ft.preventDefault()&&G.cancelable&&ct&&G.preventDefault()}),st||this._fire(Y.pointerdown,{evt:G,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(G){const Y=Z(G.type),rt=U(G.type);if(!Y||(k.Konva.isDragging()&&a.DD.node.preventDefault()&&G.cancelable&&G.preventDefault(),this.setPointersPositions(G),!(!(k.Konva.isDragging()||k.Konva.isTransforming())||k.Konva.hitOnDragEnabled)))return;const at={};let ft=!1;const ct=this._getTargetShape(rt);this._changedPointerPositions.forEach(Et=>{const gt=g.getCapturedShape(Et.id)||this.getIntersection(Et),Bt=Et.id,Rt={evt:G,pointerId:Bt},bt=ct!==gt;if(bt&&ct&&(ct._fireAndBubble(Y.pointerout,{...Rt},gt),ct._fireAndBubble(Y.pointerleave,{...Rt},gt)),gt){if(at[gt._id])return;at[gt._id]=!0}gt&&gt.isListening()?(ft=!0,bt&&(gt._fireAndBubble(Y.pointerover,{...Rt},ct),gt._fireAndBubble(Y.pointerenter,{...Rt},ct),this[rt+"targetShape"]=gt),gt._fireAndBubble(Y.pointermove,{...Rt})):ct&&(this._fire(Y.pointerover,{evt:G,target:this,currentTarget:this,pointerId:Bt}),this[rt+"targetShape"]=null)}),ft||this._fire(Y.pointermove,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(G){const Y=Z(G.type),rt=U(G.type);if(!Y)return;this.setPointersPositions(G);const st=this[rt+"ClickStartShape"],at=this[rt+"ClickEndShape"],ft={};let ct=!1;this._changedPointerPositions.forEach(Et=>{const gt=g.getCapturedShape(Et.id)||this.getIntersection(Et);if(gt){if(gt.releaseCapture(Et.id),ft[gt._id])return;ft[gt._id]=!0}const Bt=Et.id,Rt={evt:G,pointerId:Bt};let bt=!1;k.Konva["_"+rt+"InDblClickWindow"]?(bt=!0,clearTimeout(this[rt+"DblTimeout"])):a.DD.justDragged||(k.Konva["_"+rt+"InDblClickWindow"]=!0,clearTimeout(this[rt+"DblTimeout"])),this[rt+"DblTimeout"]=setTimeout(function(){k.Konva["_"+rt+"InDblClickWindow"]=!1},k.Konva.dblClickWindow),gt&&gt.isListening()?(ct=!0,this[rt+"ClickEndShape"]=gt,gt._fireAndBubble(Y.pointerup,{...Rt}),k.Konva["_"+rt+"ListenClick"]&&st&&st===gt&&(gt._fireAndBubble(Y.pointerclick,{...Rt}),bt&&at&&at===gt&&gt._fireAndBubble(Y.pointerdblclick,{...Rt}))):(this[rt+"ClickEndShape"]=null,k.Konva["_"+rt+"ListenClick"]&&this._fire(Y.pointerclick,{evt:G,target:this,currentTarget:this,pointerId:Bt}),bt&&this._fire(Y.pointerdblclick,{evt:G,target:this,currentTarget:this,pointerId:Bt}))}),ct||this._fire(Y.pointerup,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),k.Konva["_"+rt+"ListenClick"]=!1,G.cancelable&&rt!=="touch"&&rt!=="pointer"&&G.preventDefault()}_contextmenu(G){this.setPointersPositions(G);const Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(B,{evt:G}):this._fire(B,{evt:G,target:this,currentTarget:this})}_wheel(G){this.setPointersPositions(G);const Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(C,{evt:G}):this._fire(C,{evt:G,target:this,currentTarget:this})}_pointercancel(G){this.setPointersPositions(G);const Y=g.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());Y&&Y._fireAndBubble(w,g.createEvent(G)),g.releaseCapture(G.pointerId)}_lostpointercapture(G){g.releaseCapture(G.pointerId)}setPointersPositions(G){const Y=this._getContentPosition();let rt=null,st=null;G=G||window.event,G.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(G.touches,at=>{this._pointerPositions.push({id:at.identifier,x:(at.clientX-Y.left)/Y.scaleX,y:(at.clientY-Y.top)/Y.scaleY})}),Array.prototype.forEach.call(G.changedTouches||G.touches,at=>{this._changedPointerPositions.push({id:at.identifier,x:(at.clientX-Y.left)/Y.scaleX,y:(at.clientY-Y.top)/Y.scaleY})})):(rt=(G.clientX-Y.left)/Y.scaleX,st=(G.clientY-Y.top)/Y.scaleY,this.pointerPos={x:rt,y:st},this._pointerPositions=[{x:rt,y:st,id:f.Util._getFirstPointerId(G)}],this._changedPointerPositions=[{x:rt,y:st,id:f.Util._getFirstPointerId(G)}])}_setPointerPosition(G){f.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(G)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const G=this.content.getBoundingClientRect();return{top:G.top,left:G.left,scaleX:G.width/this.content.clientWidth||1,scaleY:G.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new _.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!k.Konva.isBrowser)return;const G=this.container();if(!G)throw"Stage has no container. A container is required.";G.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),G.appendChild(this.content),this._resizeDOM()}cache(){return f.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(G){G.batchDraw()}),this}}d.Stage=it,it.prototype.nodeType=p,(0,h._registerNode)(it),L.Factory.addGetterSetter(it,"container"),k.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{d.stages.forEach(J=>{J.batchDraw()})})})(Sa)),Sa}var pr={},Ca={},Gl;function Xt(){return Gl||(Gl=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Shape=d.shapes=void 0;const f=vt(),L=Dt(),b=St(),k=Ut(),_=Ct(),a=vt(),h=qu(),g="hasShadow",p="shadowRGBA",m="patternImage",x="linearGradient",y="radialGradient";let u;function c(){return u||(u=L.Util.createCanvasElement().getContext("2d"),u)}d.shapes={};function S(R){const T=this.attrs.fillRule;T?R.fill(T):R.fill()}function P(R){R.stroke()}function F(R){const T=this.attrs.fillRule;T?R.fill(T):R.fill()}function l(R){R.stroke()}function s(){this._clearCache(g)}function v(){this._clearCache(p)}function w(){this._clearCache(m)}function M(){this._clearCache(x)}function z(){this._clearCache(y)}class E extends k.Node{constructor(T){super(T);let I;for(;I=L.Util.getRandomColor(),!(I&&!(I in d.shapes)););this.colorKey=I,d.shapes[I]=this}getContext(){return L.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return L.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(g,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const I=c().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(I&&I.setTransform){const B=new L.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(f.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const j=B.getMatrix(),K=typeof DOMMatrix>"u"?{a:j[0],b:j[1],c:j[2],d:j[3],e:j[4],f:j[5]}:new DOMMatrix(j);I.setTransform(K)}return I}}_getLinearGradient(){return this._getCache(x,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const I=c(),B=this.fillLinearGradientStartPoint(),j=this.fillLinearGradientEndPoint(),K=I.createLinearGradient(B.x,B.y,j.x,j.y);for(let V=0;V<T.length;V+=2)K.addColorStop(T[V],T[V+1]);return K}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const I=c(),B=this.fillRadialGradientStartPoint(),j=this.fillRadialGradientEndPoint(),K=I.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),j.x,j.y,this.fillRadialGradientEndRadius());for(let V=0;V<T.length;V+=2)K.addColorStop(T[V],T[V+1]);return K}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=L.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const I=this.getStage();if(!I)return!1;const B=I.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return k.Node.prototype.destroy.call(this),delete d.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var I;if(!((I=this.attrs.perfectDrawEnabled)!==null&&I!==void 0?I:!0))return!1;const j=T||this.hasFill(),K=this.hasStroke(),V=this.getAbsoluteOpacity()!==1;if(j&&K&&V)return!0;const et=this.hasShadow(),C=this.shadowForStrokeEnabled();return!!(j&&K&&et&&C)}setStrokeHitEnabled(T){L.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let I=!1,B=this.getParent();for(;B;){if(B.isCached()){I=!0;break}B=B.getParent()}const j=T.skipTransform,K=T.relativeTo||I&&this.getStage()||void 0,V=this.getSelfRect(),C=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,A=V.width+C,D=V.height+C,O=!T.skipShadow&&this.hasShadow(),U=O?this.shadowOffsetX():0,Z=O?this.shadowOffsetY():0,W=A+Math.abs(U),tt=D+Math.abs(Z),it=O&&this.shadowBlur()||0,J=W+it*2,G=tt+it*2,Y={width:J,height:G,x:-(C/2+it)+Math.min(U,0)+V.x,y:-(C/2+it)+Math.min(Z,0)+V.y};return j?Y:this._transformedRect(Y,K)}drawScene(T,I,B){const j=this.getLayer(),K=T||j.getCanvas(),V=K.getContext(),et=this._getCanvasCache(),C=this.getSceneFunc(),A=this.hasShadow();let D;const O=I===this;if(!this.isVisible()&&!O)return this;if(et){V.save();const U=this.getAbsoluteTransform(I).getMatrix();return V.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(V),V.restore(),this}if(!C)return this;if(V.save(),this._useBufferCanvas()){D=this.getStage();const U=B||D.bufferCanvas,Z=U.getContext();Z.clear(),Z.save(),Z._applyLineJoin(this);const W=this.getAbsoluteTransform(I).getMatrix();Z.transform(W[0],W[1],W[2],W[3],W[4],W[5]),C.call(this,Z,this),Z.restore();const tt=U.pixelRatio;A&&V._applyShadow(this),V._applyOpacity(this),V._applyGlobalCompositeOperation(this),V.drawImage(U._canvas,U.x||0,U.y||0,U.width/tt,U.height/tt)}else{if(V._applyLineJoin(this),!O){const U=this.getAbsoluteTransform(I).getMatrix();V.transform(U[0],U[1],U[2],U[3],U[4],U[5]),V._applyOpacity(this),V._applyGlobalCompositeOperation(this)}A&&V._applyShadow(this),C.call(this,V,this)}return V.restore(),this}drawHit(T,I,B=!1){if(!this.shouldDrawHit(I,B))return this;const j=this.getLayer(),K=T||j.hitCanvas,V=K&&K.getContext(),et=this.hitFunc()||this.sceneFunc(),C=this._getCanvasCache(),A=C&&C.hit;if(this.colorKey||L.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),A){V.save();const O=this.getAbsoluteTransform(I).getMatrix();return V.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedHitCanvas(V),V.restore(),this}if(!et)return this;if(V.save(),V._applyLineJoin(this),!(this===I)){const O=this.getAbsoluteTransform(I).getMatrix();V.transform(O[0],O[1],O[2],O[3],O[4],O[5])}return et.call(this,V,this),V.restore(),this}drawHitFromCache(T=0){const I=this._getCanvasCache(),B=this._getCachedSceneCanvas(),j=I.hit,K=j.getContext(),V=j.getWidth(),et=j.getHeight();K.clear(),K.drawImage(B._canvas,0,0,V,et);try{const C=K.getImageData(0,0,V,et),A=C.data,D=A.length,O=L.Util._hexToRgb(this.colorKey);for(let U=0;U<D;U+=4)A[U+3]>T?(A[U]=O.r,A[U+1]=O.g,A[U+2]=O.b,A[U+3]=255):A[U+3]=0;K.putImageData(C,0,0)}catch(C){L.Util.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(T){return h.hasPointerCapture(T,this)}setPointerCapture(T){h.setPointerCapture(T,this)}releaseCapture(T){h.releaseCapture(T,this)}}d.Shape=E,E.prototype._fillFunc=S,E.prototype._strokeFunc=P,E.prototype._fillFuncHit=F,E.prototype._strokeFuncHit=l,E.prototype._centroid=!1,E.prototype.nodeType="Shape",(0,a._registerNode)(E),E.prototype.eventListeners={},E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",w),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",z),b.Factory.addGetterSetter(E,"stroke",void 0,(0,_.getStringOrGradientValidator)()),b.Factory.addGetterSetter(E,"strokeWidth",2,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillAfterStrokeEnabled",!1),b.Factory.addGetterSetter(E,"hitStrokeWidth","auto",(0,_.getNumberOrAutoValidator)()),b.Factory.addGetterSetter(E,"strokeHitEnabled",!0,(0,_.getBooleanValidator)()),b.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,(0,_.getBooleanValidator)()),b.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,(0,_.getBooleanValidator)()),b.Factory.addGetterSetter(E,"lineJoin"),b.Factory.addGetterSetter(E,"lineCap"),b.Factory.addGetterSetter(E,"sceneFunc"),b.Factory.addGetterSetter(E,"hitFunc"),b.Factory.addGetterSetter(E,"dash"),b.Factory.addGetterSetter(E,"dashOffset",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"shadowColor",void 0,(0,_.getStringValidator)()),b.Factory.addGetterSetter(E,"shadowBlur",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"shadowOpacity",1,(0,_.getNumberValidator)()),b.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),b.Factory.addGetterSetter(E,"shadowOffsetX",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"shadowOffsetY",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillPatternImage"),b.Factory.addGetterSetter(E,"fill",void 0,(0,_.getStringOrGradientValidator)()),b.Factory.addGetterSetter(E,"fillPatternX",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillPatternY",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),b.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),b.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),b.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),b.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),b.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),b.Factory.addGetterSetter(E,"fillEnabled",!0),b.Factory.addGetterSetter(E,"strokeEnabled",!0),b.Factory.addGetterSetter(E,"shadowEnabled",!0),b.Factory.addGetterSetter(E,"dashEnabled",!0),b.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),b.Factory.addGetterSetter(E,"fillPriority","color"),b.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),b.Factory.addGetterSetter(E,"fillPatternOffsetX",0,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillPatternOffsetY",0,(0,_.getNumberValidator)()),b.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),b.Factory.addGetterSetter(E,"fillPatternScaleX",1,(0,_.getNumberValidator)()),b.Factory.addGetterSetter(E,"fillPatternScaleY",1,(0,_.getNumberValidator)()),b.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),b.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),b.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),b.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),b.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),b.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),b.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),b.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),b.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),b.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),b.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),b.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),b.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),b.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),b.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),b.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),b.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),b.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),b.Factory.addGetterSetter(E,"fillPatternRotation",0),b.Factory.addGetterSetter(E,"fillRule",void 0,(0,_.getStringValidator)()),b.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Ca)),Ca}var Dl;function ju(){if(Dl)return pr;Dl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Layer=void 0;const d=Dt(),f=Ji(),L=Ut(),b=St(),k=Qi(),_=Ct(),a=Xt(),h=vt(),g="#",p="beforeDraw",m="draw",x=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],y=x.length;class u extends f.Container{constructor(S){super(S),this.canvas=new k.SceneCanvas,this.hitCanvas=new k.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(S){return this.getContext().clear(S),this.getHitCanvas().getContext().clear(S),this}setZIndex(S){super.setZIndex(S);const P=this.getStage();return P&&P.content&&(P.content.removeChild(this.getNativeCanvasElement()),S<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[S+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){L.Node.prototype.moveToTop.call(this);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!L.Node.prototype.moveUp.call(this))return!1;const P=this.getStage();return!P||!P.content?!1:(P.content.removeChild(this.getNativeCanvasElement()),this.index<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[this.index+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(L.Node.prototype.moveDown.call(this)){const S=this.getStage();if(S){const P=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),P[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(L.Node.prototype.moveToBottom.call(this)){const S=this.getStage();if(S){const P=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),P[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const S=this.getNativeCanvasElement();return L.Node.prototype.remove.call(this),S&&S.parentNode&&d.Util._isInDocument(S)&&S.parentNode.removeChild(S),this}getStage(){return this.parent}setSize({width:S,height:P}){return this.canvas.setSize(S,P),this.hitCanvas.setSize(S,P),this._setSmoothEnabled(),this}_validateAdd(S){const P=S.getType();P!=="Group"&&P!=="Shape"&&d.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(S){return S=S||{},S.width=S.width||this.getWidth(),S.height=S.height||this.getHeight(),S.x=S.x!==void 0?S.x:this.x(),S.y=S.y!==void 0?S.y:this.y(),L.Node.prototype._toKonvaCanvas.call(this,S)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){d.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){d.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,d.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(S){if(!this.isListening()||!this.isVisible())return null;let P=1,F=!1;for(;;){for(let l=0;l<y;l++){const s=x[l],v=this._getIntersection({x:S.x+s.x*P,y:S.y+s.y*P}),w=v.shape;if(w)return w;if(F=!!v.antialiased,!v.antialiased)break}if(F)P+=1;else return null}}_getIntersection(S){const P=this.hitCanvas.pixelRatio,F=this.hitCanvas.context.getImageData(Math.round(S.x*P),Math.round(S.y*P),1,1).data,l=F[3];if(l===255){const s=d.Util._rgbToHex(F[0],F[1],F[2]),v=a.shapes[g+s];return v?{shape:v}:{antialiased:!0}}else if(l>0)return{antialiased:!0};return{}}drawScene(S,P,F){const l=this.getLayer(),s=S||l&&l.getCanvas();return this._fire(p,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),f.Container.prototype.drawScene.call(this,s,P,F),this._fire(m,{node:this}),this}drawHit(S,P){const F=this.getLayer(),l=S||F&&F.hitCanvas;return F&&F.clearBeforeDraw()&&F.getHitCanvas().getContext().clear(),f.Container.prototype.drawHit.call(this,l,P),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(S){d.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(S)}getHitGraphEnabled(S){return d.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const S=this.parent;!!this.hitCanvas._canvas.parentNode?S.content.removeChild(this.hitCanvas._canvas):S.content.appendChild(this.hitCanvas._canvas)}destroy(){return d.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return pr.Layer=u,u.prototype.nodeType="Layer",(0,h._registerNode)(u),b.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),b.Factory.addGetterSetter(u,"clearBeforeDraw",!0),b.Factory.addGetterSetter(u,"hitGraphEnabled",!0,(0,_.getBooleanValidator)()),pr}var mr={},Il;function wc(){if(Il)return mr;Il=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.FastLayer=void 0;const d=Dt(),f=ju(),L=vt();let b=class extends f.Layer{constructor(_){super(_),this.listening(!1),d.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return mr.FastLayer=b,b.prototype.nodeType="FastLayer",(0,L._registerNode)(b),mr}var yr={},Ul;function Aa(){if(Ul)return yr;Ul=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.Group=void 0;const d=Dt(),f=Ji(),L=vt();class b extends f.Container{_validateAdd(_){const a=_.getType();a!=="Group"&&a!=="Shape"&&d.Util.throw("You may only add groups and shapes to groups.")}}return yr.Group=b,b.prototype.nodeType="Group",(0,L._registerNode)(b),yr}var vr={},zl;function Ma(){if(zl)return vr;zl=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.Animation=void 0;const d=vt(),f=Dt(),L=(function(){return d.glob.performance&&d.glob.performance.now?function(){return d.glob.performance.now()}:function(){return new Date().getTime()}})();let b=class jn{constructor(_,a){this.id=jn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:L(),frameRate:0},this.func=_,this.setLayers(a)}setLayers(_){let a=[];return _&&(a=Array.isArray(_)?_:[_]),this.layers=a,this}getLayers(){return this.layers}addLayer(_){const a=this.layers,h=a.length;for(let g=0;g<h;g++)if(a[g]._id===_._id)return!1;return this.layers.push(_),!0}isRunning(){const a=jn.animations,h=a.length;for(let g=0;g<h;g++)if(a[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=L(),jn._addAnimation(this),this}stop(){return jn._removeAnimation(this),this}_updateFrameObject(_){this.frame.timeDiff=_-this.frame.lastTime,this.frame.lastTime=_,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(_){this.animations.push(_),this._handleAnimation()}static _removeAnimation(_){const a=_.id,h=this.animations,g=h.length;for(let p=0;p<g;p++)if(h[p].id===a){this.animations.splice(p,1);break}}static _runFrames(){const _={},a=this.animations;for(let h=0;h<a.length;h++){const g=a[h],p=g.layers,m=g.func;g._updateFrameObject(L());const x=p.length;let y;if(m?y=m.call(g,g.frame)!==!1:y=!0,!!y)for(let u=0;u<x;u++){const c=p[u];c._id!==void 0&&(_[c._id]=c)}}for(const h in _)_.hasOwnProperty(h)&&_[h].batchDraw()}static _animationLoop(){const _=jn;_.animations.length?(_._runFrames(),f.Util.requestAnimFrame(_._animationLoop)):_.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,f.Util.requestAnimFrame(this._animationLoop))}};return vr.Animation=b,b.animations=[],b.animIdCounter=0,b.animRunning=!1,vr}var wa={},Bl;function xc(){return Bl||(Bl=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Easings=d.Tween=void 0;const f=Dt(),L=Ma(),b=Ut(),k=vt(),_={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,h=2,g=3,p=["fill","stroke","shadowColor"];let m=0;class x{constructor(c,S,P,F,l,s,v){this.prop=c,this.propFunc=S,this.begin=F,this._pos=F,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=l-this.begin,this.pause()}fire(c){const S=this[c];S&&S()}setTime(c){c>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():c<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=c,this.update())}getTime(){return this._time}setPosition(c){this.prevPos=this._pos,this.propFunc(c),this._pos=c}getPosition(c){return c===void 0&&(c=this._time),this.func(c,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=g,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(c){this.pause(),this._time=c,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const c=this.getTimer()-this._startTime;this.state===h?this.setTime(c):this.state===g&&this.setTime(this.duration-c)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(c){const S=this,P=c.node,F=P._id,l=c.easing||d.Easings.Linear,s=!!c.yoyo;let v,w;typeof c.duration>"u"?v=.3:c.duration===0?v=.001:v=c.duration,this.node=P,this._id=m++;const M=P.getLayer()||(P instanceof k.Konva.Stage?P.getLayers():null);M||f.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new L.Animation(function(){S.tween.onEnterFrame()},M),this.tween=new x(w,function(z){S._tweenFunc(z)},l,0,1,v*1e3,s),this._addListeners(),y.attrs[F]||(y.attrs[F]={}),y.attrs[F][this._id]||(y.attrs[F][this._id]={}),y.tweens[F]||(y.tweens[F]={});for(w in c)_[w]===void 0&&this._addAttr(w,c[w]);this.reset(),this.onFinish=c.onFinish,this.onReset=c.onReset,this.onUpdate=c.onUpdate}_addAttr(c,S){const P=this.node,F=P._id;let l,s,v,w,M;const z=y.tweens[F][c];z&&delete y.attrs[F][z][c];let E=P.getAttr(c);if(f.Util._isArray(S))if(l=[],s=Math.max(S.length,E.length),c==="points"&&S.length!==E.length&&(S.length>E.length?(w=E,E=f.Util._prepareArrayForTween(E,S,P.closed())):(v=S,S=f.Util._prepareArrayForTween(S,E,P.closed()))),c.indexOf("fill")===0)for(let R=0;R<s;R++)if(R%2===0)l.push(S[R]-E[R]);else{const T=f.Util.colorToRGBA(E[R]);M=f.Util.colorToRGBA(S[R]),E[R]=T,l.push({r:M.r-T.r,g:M.g-T.g,b:M.b-T.b,a:M.a-T.a})}else for(let R=0;R<s;R++)l.push(S[R]-E[R]);else p.indexOf(c)!==-1?(E=f.Util.colorToRGBA(E),M=f.Util.colorToRGBA(S),l={r:M.r-E.r,g:M.g-E.g,b:M.b-E.b,a:M.a-E.a}):l=S-E;y.attrs[F][this._id][c]={start:E,diff:l,end:S,trueEnd:v,trueStart:w},y.tweens[F][c]=this._id}_tweenFunc(c){const S=this.node,P=y.attrs[S._id][this._id];let F,l,s,v,w,M,z,E;for(F in P){if(l=P[F],s=l.start,v=l.diff,E=l.end,f.Util._isArray(s))if(w=[],z=Math.max(s.length,E.length),F.indexOf("fill")===0)for(M=0;M<z;M++)M%2===0?w.push((s[M]||0)+v[M]*c):w.push("rgba("+Math.round(s[M].r+v[M].r*c)+","+Math.round(s[M].g+v[M].g*c)+","+Math.round(s[M].b+v[M].b*c)+","+(s[M].a+v[M].a*c)+")");else for(M=0;M<z;M++)w.push((s[M]||0)+v[M]*c);else p.indexOf(F)!==-1?w="rgba("+Math.round(s.r+v.r*c)+","+Math.round(s.g+v.g*c)+","+Math.round(s.b+v.b*c)+","+(s.a+v.a*c)+")":w=s+v*c;S.setAttr(F,w)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const c=this.node,S=y.attrs[c._id][this._id];S.points&&S.points.trueEnd&&c.setAttr("points",S.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const c=this.node,S=y.attrs[c._id][this._id];S.points&&S.points.trueStart&&c.points(S.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(c){return this.tween.seek(c*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const c=this.node._id,S=this._id,P=y.tweens[c];this.pause(),this.anim&&this.anim.stop();for(const F in P)delete y.tweens[c][F];delete y.attrs[c][S],y.tweens[c]&&(Object.keys(y.tweens[c]).length===0&&delete y.tweens[c],Object.keys(y.attrs[c]).length===0&&delete y.attrs[c])}}d.Tween=y,y.attrs={},y.tweens={},b.Node.prototype.to=function(u){const c=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),c&&c()},new y(u).play()},d.Easings={BackEaseIn(u,c,S,P){return S*(u/=P)*u*((1.70158+1)*u-1.70158)+c},BackEaseOut(u,c,S,P){return S*((u=u/P-1)*u*((1.70158+1)*u+1.70158)+1)+c},BackEaseInOut(u,c,S,P){let F=1.70158;return(u/=P/2)<1?S/2*(u*u*(((F*=1.525)+1)*u-F))+c:S/2*((u-=2)*u*(((F*=1.525)+1)*u+F)+2)+c},ElasticEaseIn(u,c,S,P,F,l){let s=0;return u===0?c:(u/=P)===1?c+S:(l||(l=P*.3),!F||F<Math.abs(S)?(F=S,s=l/4):s=l/(2*Math.PI)*Math.asin(S/F),-(F*Math.pow(2,10*(u-=1))*Math.sin((u*P-s)*(2*Math.PI)/l))+c)},ElasticEaseOut(u,c,S,P,F,l){let s=0;return u===0?c:(u/=P)===1?c+S:(l||(l=P*.3),!F||F<Math.abs(S)?(F=S,s=l/4):s=l/(2*Math.PI)*Math.asin(S/F),F*Math.pow(2,-10*u)*Math.sin((u*P-s)*(2*Math.PI)/l)+S+c)},ElasticEaseInOut(u,c,S,P,F,l){let s=0;return u===0?c:(u/=P/2)===2?c+S:(l||(l=P*(.3*1.5)),!F||F<Math.abs(S)?(F=S,s=l/4):s=l/(2*Math.PI)*Math.asin(S/F),u<1?-.5*(F*Math.pow(2,10*(u-=1))*Math.sin((u*P-s)*(2*Math.PI)/l))+c:F*Math.pow(2,-10*(u-=1))*Math.sin((u*P-s)*(2*Math.PI)/l)*.5+S+c)},BounceEaseOut(u,c,S,P){return(u/=P)<1/2.75?S*(7.5625*u*u)+c:u<2/2.75?S*(7.5625*(u-=1.5/2.75)*u+.75)+c:u<2.5/2.75?S*(7.5625*(u-=2.25/2.75)*u+.9375)+c:S*(7.5625*(u-=2.625/2.75)*u+.984375)+c},BounceEaseIn(u,c,S,P){return S-d.Easings.BounceEaseOut(P-u,0,S,P)+c},BounceEaseInOut(u,c,S,P){return u<P/2?d.Easings.BounceEaseIn(u*2,0,S,P)*.5+c:d.Easings.BounceEaseOut(u*2-P,0,S,P)*.5+S*.5+c},EaseIn(u,c,S,P){return S*(u/=P)*u+c},EaseOut(u,c,S,P){return-S*(u/=P)*(u-2)+c},EaseInOut(u,c,S,P){return(u/=P/2)<1?S/2*u*u+c:-S/2*(--u*(u-2)-1)+c},StrongEaseIn(u,c,S,P){return S*(u/=P)*u*u*u*u+c},StrongEaseOut(u,c,S,P){return S*((u=u/P-1)*u*u*u*u+1)+c},StrongEaseInOut(u,c,S,P){return(u/=P/2)<1?S/2*u*u*u*u*u+c:S/2*((u-=2)*u*u*u*u+2)+c},Linear(u,c,S,P){return S*u/P+c}}})(wa)),wa}var Vl;function Na(){return Vl||(Vl=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.Konva=void 0;const f=vt(),L=Dt(),b=Ut(),k=Ji(),_=Cc(),a=ju(),h=wc(),g=Aa(),p=Fa(),m=Xt(),x=Ma(),y=xc(),u=Wu(),c=Qi();d.Konva=L.Util._assign(f.Konva,{Util:L.Util,Transform:L.Transform,Node:b.Node,Container:k.Container,Stage:_.Stage,stages:_.stages,Layer:a.Layer,FastLayer:h.FastLayer,Group:g.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:x.Animation,Tween:y.Tween,Easings:y.Easings,Context:u.Context,Canvas:c.Canvas}),d.default=d.Konva})(pa)),pa}var _r={},Hl;function Pc(){if(Hl)return _r;Hl=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Arc=void 0;const d=St(),f=Xt(),L=vt(),b=Ct(),k=vt();let _=class extends f.Shape{_sceneFunc(h){const g=L.Konva.getAngle(this.angle()),p=this.clockwise();h.beginPath(),h.arc(0,0,this.outerRadius(),0,g,p),h.arc(0,0,this.innerRadius(),g,0,!p),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(h){this.outerRadius(h/2)}setHeight(h){this.outerRadius(h/2)}getSelfRect(){const h=this.innerRadius(),g=this.outerRadius(),p=this.clockwise(),m=L.Konva.getAngle(p?360-this.angle():this.angle()),x=Math.cos(Math.min(m,Math.PI)),y=1,u=Math.sin(Math.min(Math.max(Math.PI,m),3*Math.PI/2)),c=Math.sin(Math.min(m,Math.PI/2)),S=x*(x>0?h:g),P=y*g,F=u*(u>0?h:g),l=c*(c>0?g:h);return{x:S,y:p?-1*l:F,width:P-S,height:l-F}}};return _r.Arc=_,_.prototype._centroid=!0,_.prototype.className="Arc",_.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,k._registerNode)(_),d.Factory.addGetterSetter(_,"innerRadius",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"outerRadius",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"angle",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"clockwise",!1,(0,b.getBooleanValidator)()),_r}var Sr={},Cr={},Wl;function Ku(){if(Wl)return Cr;Wl=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Line=void 0;const d=St(),f=vt(),L=Xt(),b=Ct();function k(h,g,p,m,x,y,u){const c=Math.sqrt(Math.pow(p-h,2)+Math.pow(m-g,2)),S=Math.sqrt(Math.pow(x-p,2)+Math.pow(y-m,2)),P=u*c/(c+S),F=u*S/(c+S),l=p-P*(x-h),s=m-P*(y-g),v=p+F*(x-h),w=m+F*(y-g);return[l,s,v,w]}function _(h,g){const p=h.length,m=[];for(let x=2;x<p-2;x+=2){const y=k(h[x-2],h[x-1],h[x],h[x+1],h[x+2],h[x+3],g);isNaN(y[0])||(m.push(y[0]),m.push(y[1]),m.push(h[x]),m.push(h[x+1]),m.push(y[2]),m.push(y[3]))}return m}class a extends L.Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const p=this.points(),m=p.length,x=this.tension(),y=this.closed(),u=this.bezier();if(!m)return;let c=0;if(g.beginPath(),g.moveTo(p[0],p[1]),x!==0&&m>4){const S=this.getTensionPoints(),P=S.length;for(c=y?0:4,y||g.quadraticCurveTo(S[0],S[1],S[2],S[3]);c<P-2;)g.bezierCurveTo(S[c++],S[c++],S[c++],S[c++],S[c++],S[c++]);y||g.quadraticCurveTo(S[P-2],S[P-1],p[m-2],p[m-1])}else if(u)for(c=2;c<m;)g.bezierCurveTo(p[c++],p[c++],p[c++],p[c++],p[c++],p[c++]);else for(c=2;c<m;c+=2)g.lineTo(p[c],p[c+1]);y?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),p=g.length,m=this.tension(),x=k(g[p-2],g[p-1],g[0],g[1],g[2],g[3],m),y=k(g[p-4],g[p-3],g[p-2],g[p-1],g[0],g[1],m),u=_(g,m);return[x[2],x[3]].concat(u).concat([y[0],y[1],g[p-2],g[p-1],y[2],y[3],x[0],x[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let p=g[0],m=g[0],x=g[1],y=g[1],u,c;for(let S=0;S<g.length/2;S++)u=g[S*2],c=g[S*2+1],p=Math.min(p,u),m=Math.max(m,u),x=Math.min(x,c),y=Math.max(y,c);return{x:p,y:x,width:m-p,height:y-x}}}return Cr.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,f._registerNode)(a),d.Factory.addGetterSetter(a,"closed",!1),d.Factory.addGetterSetter(a,"bezier",!1),d.Factory.addGetterSetter(a,"tension",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(a,"points",[],(0,b.getNumberArrayValidator)()),Cr}var wr={},xa={},ql;function Ec(){return ql||(ql=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.t2length=d.getQuadraticArcLength=d.getCubicArcLength=d.binomialCoefficients=d.cValues=d.tValues=void 0,d.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],d.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],d.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const f=(a,h,g)=>{let p,m;const y=g/2;p=0;for(let u=0;u<20;u++)m=y*d.tValues[20][u]+y,p+=d.cValues[20][u]*b(a,h,m);return y*p};d.getCubicArcLength=f;const L=(a,h,g)=>{g===void 0&&(g=1);const p=a[0]-2*a[1]+a[2],m=h[0]-2*h[1]+h[2],x=2*a[1]-2*a[0],y=2*h[1]-2*h[0],u=4*(p*p+m*m),c=4*(p*x+m*y),S=x*x+y*y;if(u===0)return g*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(h[2]-h[0],2));const P=c/(2*u),F=S/u,l=g+P,s=F-P*P,v=l*l+s>0?Math.sqrt(l*l+s):0,w=P*P+s>0?Math.sqrt(P*P+s):0,M=P+Math.sqrt(P*P+s)!==0?s*Math.log(Math.abs((l+v)/(P+w))):0;return Math.sqrt(u)/2*(l*v-P*w+M)};d.getQuadraticArcLength=L;function b(a,h,g){const p=k(1,g,a),m=k(1,g,h),x=p*p+m*m;return Math.sqrt(x)}const k=(a,h,g)=>{const p=g.length-1;let m,x;if(p===0)return 0;if(a===0){x=0;for(let y=0;y<=p;y++)x+=d.binomialCoefficients[p][y]*Math.pow(1-h,p-y)*Math.pow(h,y)*g[y];return x}else{m=new Array(p);for(let y=0;y<p;y++)m[y]=p*(g[y+1]-g[y]);return k(a-1,h,m)}},_=(a,h,g)=>{let p=1,m=a/h,x=(a-g(m))/h,y=0;for(;p>.001;){const u=g(m+x),c=Math.abs(a-u)/h;if(c<p)p=c,m+=x;else{const S=g(m-x),P=Math.abs(a-S)/h;P<p?(p=P,m-=x):x/=2}if(y++,y>500)break}return m};d.t2length=_})(xa)),xa}var jl;function La(){if(jl)return wr;jl=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Path=void 0;const d=St(),f=vt(),L=Xt(),b=Ec();let k=class me extends L.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=me.parsePathData(this.data()),this.pathLength=me.getPathLength(this.dataArray)}_sceneFunc(a){const h=this.dataArray;a.beginPath();let g=!1;for(let p=0;p<h.length;p++){const m=h[p].command,x=h[p].points;switch(m){case"L":a.lineTo(x[0],x[1]);break;case"M":a.moveTo(x[0],x[1]);break;case"C":a.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);break;case"Q":a.quadraticCurveTo(x[0],x[1],x[2],x[3]);break;case"A":const y=x[0],u=x[1],c=x[2],S=x[3],P=x[4],F=x[5],l=x[6],s=x[7],v=c>S?c:S,w=c>S?1:c/S,M=c>S?S/c:1;a.translate(y,u),a.rotate(l),a.scale(w,M),a.arc(0,0,v,P,P+F,1-s),a.scale(1/w,1/M),a.rotate(-l),a.translate(-y,-u);break;case"z":g=!0,a.closePath();break}}!g&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(u){if(u.command==="A"){const c=u.points[4],S=u.points[5],P=u.points[4]+S;let F=Math.PI/180;if(Math.abs(c-P)<F&&(F=Math.abs(c-P)),S<0)for(let l=c-F;l>P;l-=F){const s=me.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],l,0);a.push(s.x,s.y)}else for(let l=c+F;l<P;l+=F){const s=me.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],l,0);a.push(s.x,s.y)}}else if(u.command==="C")for(let c=0;c<=1;c+=.01){const S=me.getPointOnCubicBezier(c,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);a.push(S.x,S.y)}else a=a.concat(u.points)});let h=a[0],g=a[0],p=a[1],m=a[1],x,y;for(let u=0;u<a.length/2;u++)x=a[u*2],y=a[u*2+1],isNaN(x)||(h=Math.min(h,x),g=Math.max(g,x)),isNaN(y)||(p=Math.min(p,y),m=Math.max(m,y));return{x:h,y:p,width:g-h,height:m-p}}getLength(){return this.pathLength}getPointAtLength(a){return me.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,h,g,p){return Math.sqrt((g-a)*(g-a)+(p-h)*(p-h))}static getPathLength(a){let h=0;for(let g=0;g<a.length;++g)h+=a[g].pathLength;return h}static getPointAtLengthOfDataArray(a,h){let g,p=0,m=h.length;if(!m)return null;for(;p<m&&a>h[p].pathLength;)a-=h[p].pathLength,++p;if(p===m)return g=h[p-1].points.slice(-2),{x:g[0],y:g[1]};if(a<.01)return h[p].command==="M"?(g=h[p].points.slice(0,2),{x:g[0],y:g[1]}):{x:h[p].start.x,y:h[p].start.y};const x=h[p],y=x.points;switch(x.command){case"L":return me.getPointOnLine(a,x.start.x,x.start.y,y[0],y[1]);case"C":return me.getPointOnCubicBezier((0,b.t2length)(a,me.getPathLength(h),v=>(0,b.getCubicArcLength)([x.start.x,y[0],y[2],y[4]],[x.start.y,y[1],y[3],y[5]],v)),x.start.x,x.start.y,y[0],y[1],y[2],y[3],y[4],y[5]);case"Q":return me.getPointOnQuadraticBezier((0,b.t2length)(a,me.getPathLength(h),v=>(0,b.getQuadraticArcLength)([x.start.x,y[0],y[2]],[x.start.y,y[1],y[3]],v)),x.start.x,x.start.y,y[0],y[1],y[2],y[3]);case"A":const u=y[0],c=y[1],S=y[2],P=y[3],F=y[5],l=y[6];let s=y[4];return s+=F*a/x.pathLength,me.getPointOnEllipticalArc(u,c,S,P,s,l)}return null}static getPointOnLine(a,h,g,p,m,x,y){x=x??h,y=y??g;const u=this.getLineLength(h,g,p,m);if(u<1e-10)return{x:h,y:g};if(p===h)return{x,y:y+(m>g?a:-a)};const c=(m-g)/(p-h),S=Math.sqrt(a*a/(1+c*c))*(p<h?-1:1),P=c*S;if(Math.abs(y-g-c*(x-h))<1e-10)return{x:x+S,y:y+P};const F=((x-h)*(p-h)+(y-g)*(m-g))/(u*u),l=h+F*(p-h),s=g+F*(m-g),v=this.getLineLength(x,y,l,s),w=Math.sqrt(a*a-v*v),M=Math.sqrt(w*w/(1+c*c))*(p<h?-1:1),z=c*M;return{x:l+M,y:s+z}}static getPointOnCubicBezier(a,h,g,p,m,x,y,u,c){function S(w){return w*w*w}function P(w){return 3*w*w*(1-w)}function F(w){return 3*w*(1-w)*(1-w)}function l(w){return(1-w)*(1-w)*(1-w)}const s=u*S(a)+x*P(a)+p*F(a)+h*l(a),v=c*S(a)+y*P(a)+m*F(a)+g*l(a);return{x:s,y:v}}static getPointOnQuadraticBezier(a,h,g,p,m,x,y){function u(l){return l*l}function c(l){return 2*l*(1-l)}function S(l){return(1-l)*(1-l)}const P=x*u(a)+p*c(a)+h*S(a),F=y*u(a)+m*c(a)+g*S(a);return{x:P,y:F}}static getPointOnEllipticalArc(a,h,g,p,m,x){const y=Math.cos(x),u=Math.sin(x),c={x:g*Math.cos(m),y:p*Math.sin(m)};return{x:a+(c.x*y-c.y*u),y:h+(c.x*u+c.y*y)}}static parsePathData(a){if(!a)return[];let h=a;const g=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];h=h.replace(new RegExp(" ","g"),",");for(let P=0;P<g.length;P++)h=h.replace(new RegExp(g[P],"g"),"|"+g[P]);const p=h.split("|"),m=[],x=[];let y=0,u=0;const c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let S;for(let P=1;P<p.length;P++){let F=p[P],l=F.charAt(0);for(F=F.slice(1),x.length=0;S=c.exec(F);)x.push(S[0]);const s=[];for(let v=0,w=x.length;v<w;v++){if(x[v]==="00"){s.push(0,0);continue}const M=parseFloat(x[v]);isNaN(M)?s.push(0):s.push(M)}for(;s.length>0&&!isNaN(s[0]);){let v="",w=[];const M=y,z=u;let E,R,T,I,B,j,K,V,et,C;switch(l){case"l":y+=s.shift(),u+=s.shift(),v="L",w.push(y,u);break;case"L":y=s.shift(),u=s.shift(),w.push(y,u);break;case"m":const A=s.shift(),D=s.shift();if(y+=A,u+=D,v="M",m.length>2&&m[m.length-1].command==="z"){for(let O=m.length-2;O>=0;O--)if(m[O].command==="M"){y=m[O].points[0]+A,u=m[O].points[1]+D;break}}w.push(y,u),l="l";break;case"M":y=s.shift(),u=s.shift(),v="M",w.push(y,u),l="L";break;case"h":y+=s.shift(),v="L",w.push(y,u);break;case"H":y=s.shift(),v="L",w.push(y,u);break;case"v":u+=s.shift(),v="L",w.push(y,u);break;case"V":u=s.shift(),v="L",w.push(y,u);break;case"C":w.push(s.shift(),s.shift(),s.shift(),s.shift()),y=s.shift(),u=s.shift(),w.push(y,u);break;case"c":w.push(y+s.shift(),u+s.shift(),y+s.shift(),u+s.shift()),y+=s.shift(),u+=s.shift(),v="C",w.push(y,u);break;case"S":R=y,T=u,E=m[m.length-1],E.command==="C"&&(R=y+(y-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,s.shift(),s.shift()),y=s.shift(),u=s.shift(),v="C",w.push(y,u);break;case"s":R=y,T=u,E=m[m.length-1],E.command==="C"&&(R=y+(y-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,y+s.shift(),u+s.shift()),y+=s.shift(),u+=s.shift(),v="C",w.push(y,u);break;case"Q":w.push(s.shift(),s.shift()),y=s.shift(),u=s.shift(),w.push(y,u);break;case"q":w.push(y+s.shift(),u+s.shift()),y+=s.shift(),u+=s.shift(),v="Q",w.push(y,u);break;case"T":R=y,T=u,E=m[m.length-1],E.command==="Q"&&(R=y+(y-E.points[0]),T=u+(u-E.points[1])),y=s.shift(),u=s.shift(),v="Q",w.push(R,T,y,u);break;case"t":R=y,T=u,E=m[m.length-1],E.command==="Q"&&(R=y+(y-E.points[0]),T=u+(u-E.points[1])),y+=s.shift(),u+=s.shift(),v="Q",w.push(R,T,y,u);break;case"A":I=s.shift(),B=s.shift(),j=s.shift(),K=s.shift(),V=s.shift(),et=y,C=u,y=s.shift(),u=s.shift(),v="A",w=this.convertEndpointToCenterParameterization(et,C,y,u,K,V,I,B,j);break;case"a":I=s.shift(),B=s.shift(),j=s.shift(),K=s.shift(),V=s.shift(),et=y,C=u,y+=s.shift(),u+=s.shift(),v="A",w=this.convertEndpointToCenterParameterization(et,C,y,u,K,V,I,B,j);break}m.push({command:v||l,points:w,start:{x:M,y:z},pathLength:this.calcLength(M,z,v||l,w)})}(l==="z"||l==="Z")&&m.push({command:"z",points:[],start:void 0,pathLength:0})}return m}static calcLength(a,h,g,p){let m,x,y,u;const c=me;switch(g){case"L":return c.getLineLength(a,h,p[0],p[1]);case"C":return(0,b.getCubicArcLength)([a,p[0],p[2],p[4]],[h,p[1],p[3],p[5]],1);case"Q":return(0,b.getQuadraticArcLength)([a,p[0],p[2]],[h,p[1],p[3]],1);case"A":m=0;const S=p[4],P=p[5],F=p[4]+P;let l=Math.PI/180;if(Math.abs(S-F)<l&&(l=Math.abs(S-F)),x=c.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],S,0),P<0)for(u=S-l;u>F;u-=l)y=c.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],u,0),m+=c.getLineLength(x.x,x.y,y.x,y.y),x=y;else for(u=S+l;u<F;u+=l)y=c.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],u,0),m+=c.getLineLength(x.x,x.y,y.x,y.y),x=y;return y=c.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],F,0),m+=c.getLineLength(x.x,x.y,y.x,y.y),m}return 0}static convertEndpointToCenterParameterization(a,h,g,p,m,x,y,u,c){const S=c*(Math.PI/180),P=Math.cos(S)*(a-g)/2+Math.sin(S)*(h-p)/2,F=-1*Math.sin(S)*(a-g)/2+Math.cos(S)*(h-p)/2,l=P*P/(y*y)+F*F/(u*u);l>1&&(y*=Math.sqrt(l),u*=Math.sqrt(l));let s=Math.sqrt((y*y*(u*u)-y*y*(F*F)-u*u*(P*P))/(y*y*(F*F)+u*u*(P*P)));m===x&&(s*=-1),isNaN(s)&&(s=0);const v=s*y*F/u,w=s*-u*P/y,M=(a+g)/2+Math.cos(S)*v-Math.sin(S)*w,z=(h+p)/2+Math.sin(S)*v+Math.cos(S)*w,E=function(V){return Math.sqrt(V[0]*V[0]+V[1]*V[1])},R=function(V,et){return(V[0]*et[0]+V[1]*et[1])/(E(V)*E(et))},T=function(V,et){return(V[0]*et[1]<V[1]*et[0]?-1:1)*Math.acos(R(V,et))},I=T([1,0],[(P-v)/y,(F-w)/u]),B=[(P-v)/y,(F-w)/u],j=[(-1*P-v)/y,(-1*F-w)/u];let K=T(B,j);return R(B,j)<=-1&&(K=Math.PI),R(B,j)>=1&&(K=0),x===0&&K>0&&(K=K-2*Math.PI),x===1&&K<0&&(K=K+2*Math.PI),[M,z,y,u,I,K,S,x]}};return wr.Path=k,k.prototype.className="Path",k.prototype._attrsAffectingSize=["data"],(0,f._registerNode)(k),d.Factory.addGetterSetter(k,"data"),wr}var Kl;function Rc(){if(Kl)return Sr;Kl=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Arrow=void 0;const d=St(),f=Ku(),L=Ct(),b=vt(),k=La();let _=class extends f.Line{_sceneFunc(h){super._sceneFunc(h);const g=Math.PI*2,p=this.points();let m=p;const x=this.tension()!==0&&p.length>4;x&&(m=this.getTensionPoints());const y=this.pointerLength(),u=p.length;let c,S;if(x){const l=[m[m.length-4],m[m.length-3],m[m.length-2],m[m.length-1],p[u-2],p[u-1]],s=k.Path.calcLength(m[m.length-4],m[m.length-3],"C",l),v=k.Path.getPointOnQuadraticBezier(Math.min(1,1-y/s),l[0],l[1],l[2],l[3],l[4],l[5]);c=p[u-2]-v.x,S=p[u-1]-v.y}else c=p[u-2]-p[u-4],S=p[u-1]-p[u-3];const P=(Math.atan2(S,c)+g)%g,F=this.pointerWidth();this.pointerAtEnding()&&(h.save(),h.beginPath(),h.translate(p[u-2],p[u-1]),h.rotate(P),h.moveTo(0,0),h.lineTo(-y,F/2),h.lineTo(-y,-F/2),h.closePath(),h.restore(),this.__fillStroke(h)),this.pointerAtBeginning()&&(h.save(),h.beginPath(),h.translate(p[0],p[1]),x?(c=(m[0]+m[2])/2-p[0],S=(m[1]+m[3])/2-p[1]):(c=p[2]-p[0],S=p[3]-p[1]),h.rotate((Math.atan2(-S,-c)+g)%g),h.moveTo(0,0),h.lineTo(-y,F/2),h.lineTo(-y,-F/2),h.closePath(),h.restore(),this.__fillStroke(h))}__fillStroke(h){const g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,h.setLineDash([])),h.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)}getSelfRect(){const h=super.getSelfRect(),g=this.pointerWidth()/2;return{x:h.x,y:h.y-g,width:h.width,height:h.height+g*2}}};return Sr.Arrow=_,_.prototype.className="Arrow",(0,b._registerNode)(_),d.Factory.addGetterSetter(_,"pointerLength",10,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(_,"pointerWidth",10,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(_,"pointerAtBeginning",!1),d.Factory.addGetterSetter(_,"pointerAtEnding",!0),Sr}var xr={},Yl;function kc(){if(Yl)return xr;Yl=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Circle=void 0;const d=St(),f=Xt(),L=Ct(),b=vt();class k extends f.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}}return xr.Circle=k,k.prototype._centroid=!0,k.prototype.className="Circle",k.prototype._attrsAffectingSize=["radius"],(0,b._registerNode)(k),d.Factory.addGetterSetter(k,"radius",0,(0,L.getNumberValidator)()),xr}var Pr={},Xl;function Tc(){if(Xl)return Pr;Xl=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.Ellipse=void 0;const d=St(),f=Xt(),L=Ct(),b=vt();class k extends f.Shape{_sceneFunc(a){const h=this.radiusX(),g=this.radiusY();a.beginPath(),a.save(),h!==g&&a.scale(1,g/h),a.arc(0,0,h,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}}return Pr.Ellipse=k,k.prototype.className="Ellipse",k.prototype._centroid=!0,k.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,b._registerNode)(k),d.Factory.addComponentsGetterSetter(k,"radius",["x","y"]),d.Factory.addGetterSetter(k,"radiusX",0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(k,"radiusY",0,(0,L.getNumberValidator)()),Pr}var Er={},Ql;function Nc(){if(Ql)return Er;Ql=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Image=void 0;const d=Dt(),f=St(),L=Xt(),b=vt(),k=Ct();class _ extends L.Shape{constructor(h){super(h),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",g=>{this._removeImageLoad(g.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const h=this.image();h&&h.complete||h&&h.readyState===4||h&&h.addEventListener&&h.addEventListener("load",this._loadListener)}_removeImageLoad(h){h&&h.removeEventListener&&h.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const h=!!this.cornerRadius(),g=this.hasShadow();return h&&g?!0:super._useBufferCanvas(!0)}_sceneFunc(h){const g=this.getWidth(),p=this.getHeight(),m=this.cornerRadius(),x=this.attrs.image;let y;if(x){const u=this.attrs.cropWidth,c=this.attrs.cropHeight;u&&c?y=[x,this.cropX(),this.cropY(),u,c,0,0,g,p]:y=[x,0,0,g,p]}(this.hasFill()||this.hasStroke()||m)&&(h.beginPath(),m?d.Util.drawRoundedRectPath(h,g,p,m):h.rect(0,0,g,p),h.closePath(),h.fillStrokeShape(this)),x&&(m&&h.clip(),h.drawImage.apply(h,y))}_hitFunc(h){const g=this.width(),p=this.height(),m=this.cornerRadius();h.beginPath(),m?d.Util.drawRoundedRectPath(h,g,p,m):h.rect(0,0,g,p),h.closePath(),h.fillStrokeShape(this)}getWidth(){var h,g;return(h=this.attrs.width)!==null&&h!==void 0?h:(g=this.image())===null||g===void 0?void 0:g.width}getHeight(){var h,g;return(h=this.attrs.height)!==null&&h!==void 0?h:(g=this.image())===null||g===void 0?void 0:g.height}static fromURL(h,g,p=null){const m=d.Util.createImageElement();m.onload=function(){const x=new _({image:m});g(x)},m.onerror=p,m.crossOrigin="Anonymous",m.src=h}}return Er.Image=_,_.prototype.className="Image",(0,b._registerNode)(_),f.Factory.addGetterSetter(_,"cornerRadius",0,(0,k.getNumberOrArrayOfNumbersValidator)(4)),f.Factory.addGetterSetter(_,"image"),f.Factory.addComponentsGetterSetter(_,"crop",["x","y","width","height"]),f.Factory.addGetterSetter(_,"cropX",0,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropY",0,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropWidth",0,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropHeight",0,(0,k.getNumberValidator)()),Er}var Nn={},Jl;function Fc(){if(Jl)return Nn;Jl=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Tag=Nn.Label=void 0;const d=St(),f=Xt(),L=Aa(),b=Ct(),k=vt(),_=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",h="none",g="up",p="right",m="down",x="left",y=_.length;let u=class extends L.Group{constructor(P){super(P),this.on("add.konva",function(F){this._addListeners(F.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(P){let F=this,l;const s=function(){F._sync()};for(l=0;l<y;l++)P.on(_[l]+a,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let P=this.getText(),F=this.getTag(),l,s,v,w,M,z,E;if(P&&F){switch(l=P.width(),s=P.height(),v=F.pointerDirection(),w=F.pointerWidth(),E=F.pointerHeight(),M=0,z=0,v){case g:M=l/2,z=-1*E;break;case p:M=l+w,z=s/2;break;case m:M=l/2,z=s+E;break;case x:M=-1*w,z=s/2;break}F.setAttrs({x:-1*M,y:-1*z,width:l,height:s}),P.setAttrs({x:-1*M,y:-1*z})}}};Nn.Label=u,u.prototype.className="Label",(0,k._registerNode)(u);class c extends f.Shape{_sceneFunc(P){const F=this.width(),l=this.height(),s=this.pointerDirection(),v=this.pointerWidth(),w=this.pointerHeight(),M=this.cornerRadius();let z=0,E=0,R=0,T=0;typeof M=="number"?z=E=R=T=Math.min(M,F/2,l/2):(z=Math.min(M[0]||0,F/2,l/2),E=Math.min(M[1]||0,F/2,l/2),T=Math.min(M[2]||0,F/2,l/2),R=Math.min(M[3]||0,F/2,l/2)),P.beginPath(),P.moveTo(z,0),s===g&&(P.lineTo((F-v)/2,0),P.lineTo(F/2,-1*w),P.lineTo((F+v)/2,0)),P.lineTo(F-E,0),P.arc(F-E,E,E,Math.PI*3/2,0,!1),s===p&&(P.lineTo(F,(l-w)/2),P.lineTo(F+v,l/2),P.lineTo(F,(l+w)/2)),P.lineTo(F,l-T),P.arc(F-T,l-T,T,0,Math.PI/2,!1),s===m&&(P.lineTo((F+v)/2,l),P.lineTo(F/2,l+w),P.lineTo((F-v)/2,l)),P.lineTo(R,l),P.arc(R,l-R,R,Math.PI/2,Math.PI,!1),s===x&&(P.lineTo(0,(l+w)/2),P.lineTo(-1*v,l/2),P.lineTo(0,(l-w)/2)),P.lineTo(0,z),P.arc(z,z,z,Math.PI,Math.PI*3/2,!1),P.closePath(),P.fillStrokeShape(this)}getSelfRect(){let P=0,F=0,l=this.pointerWidth(),s=this.pointerHeight(),v=this.pointerDirection(),w=this.width(),M=this.height();return v===g?(F-=s,M+=s):v===m?M+=s:v===x?(P-=l*1.5,w+=l):v===p&&(w+=l*1.5),{x:P,y:F,width:w,height:M}}}return Nn.Tag=c,c.prototype.className="Tag",(0,k._registerNode)(c),d.Factory.addGetterSetter(c,"pointerDirection",h),d.Factory.addGetterSetter(c,"pointerWidth",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(c,"pointerHeight",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(c,"cornerRadius",0,(0,b.getNumberOrArrayOfNumbersValidator)(4)),Nn}var Rr={},Zl;function Yu(){if(Zl)return Rr;Zl=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Rect=void 0;const d=St(),f=Xt(),L=vt(),b=Dt(),k=Ct();class _ extends f.Shape{_sceneFunc(h){const g=this.cornerRadius(),p=this.width(),m=this.height();h.beginPath(),g?b.Util.drawRoundedRectPath(h,p,m,g):h.rect(0,0,p,m),h.closePath(),h.fillStrokeShape(this)}}return Rr.Rect=_,_.prototype.className="Rect",(0,L._registerNode)(_),d.Factory.addGetterSetter(_,"cornerRadius",0,(0,k.getNumberOrArrayOfNumbersValidator)(4)),Rr}var kr={},$l;function Ac(){if($l)return kr;$l=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.RegularPolygon=void 0;const d=St(),f=Xt(),L=Ct(),b=vt();class k extends f.Shape{_sceneFunc(a){const h=this._getPoints();a.beginPath(),a.moveTo(h[0].x,h[0].y);for(let g=1;g<h.length;g++)a.lineTo(h[g].x,h[g].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,h=this.attrs.radius||0,g=[];for(let p=0;p<a;p++)g.push({x:h*Math.sin(p*2*Math.PI/a),y:-1*h*Math.cos(p*2*Math.PI/a)});return g}getSelfRect(){const a=this._getPoints();let h=a[0].x,g=a[0].y,p=a[0].x,m=a[0].y;return a.forEach(x=>{h=Math.min(h,x.x),g=Math.max(g,x.x),p=Math.min(p,x.y),m=Math.max(m,x.y)}),{x:h,y:p,width:g-h,height:m-p}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}}return kr.RegularPolygon=k,k.prototype.className="RegularPolygon",k.prototype._centroid=!0,k.prototype._attrsAffectingSize=["radius"],(0,b._registerNode)(k),d.Factory.addGetterSetter(k,"radius",0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(k,"sides",0,(0,L.getNumberValidator)()),kr}var Tr={},tu;function Mc(){if(tu)return Tr;tu=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Ring=void 0;const d=St(),f=Xt(),L=Ct(),b=vt(),k=Math.PI*2;let _=class extends f.Shape{_sceneFunc(h){h.beginPath(),h.arc(0,0,this.innerRadius(),0,k,!1),h.moveTo(this.outerRadius(),0),h.arc(0,0,this.outerRadius(),k,0,!0),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(h){this.outerRadius(h/2)}setHeight(h){this.outerRadius(h/2)}};return Tr.Ring=_,_.prototype.className="Ring",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,b._registerNode)(_),d.Factory.addGetterSetter(_,"innerRadius",0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(_,"outerRadius",0,(0,L.getNumberValidator)()),Tr}var Nr={},eu;function Lc(){if(eu)return Nr;eu=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Sprite=void 0;const d=St(),f=Xt(),L=Ma(),b=Ct(),k=vt();let _=class extends f.Shape{constructor(h){super(h),this._updated=!0,this.anim=new L.Animation(()=>{const g=this._updated;return this._updated=!1,g}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(h){const g=this.animation(),p=this.frameIndex(),m=p*4,x=this.animations()[g],y=this.frameOffsets(),u=x[m+0],c=x[m+1],S=x[m+2],P=x[m+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(h.beginPath(),h.rect(0,0,S,P),h.closePath(),h.fillStrokeShape(this)),F)if(y){const l=y[g],s=p*2;h.drawImage(F,u,c,S,P,l[s+0],l[s+1],S,P)}else h.drawImage(F,u,c,S,P,0,0,S,P)}_hitFunc(h){const g=this.animation(),p=this.frameIndex(),m=p*4,x=this.animations()[g],y=this.frameOffsets(),u=x[m+2],c=x[m+3];if(h.beginPath(),y){const S=y[g],P=p*2;h.rect(S[P+0],S[P+1],u,c)}else h.rect(0,0,u,c);h.closePath(),h.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const h=this;this.interval=setInterval(function(){h._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const h=this.getLayer();this.anim.setLayers(h),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const h=this.frameIndex(),g=this.animation(),p=this.animations(),m=p[g],x=m.length/4;h<x-1?this.frameIndex(h+1):this.frameIndex(0)}};return Nr.Sprite=_,_.prototype.className="Sprite",(0,k._registerNode)(_),d.Factory.addGetterSetter(_,"animation"),d.Factory.addGetterSetter(_,"animations"),d.Factory.addGetterSetter(_,"frameOffsets"),d.Factory.addGetterSetter(_,"image"),d.Factory.addGetterSetter(_,"frameIndex",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"frameRate",17,(0,b.getNumberValidator)()),d.Factory.backCompat(_,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Nr}var Fr={},nu;function bc(){if(nu)return Fr;nu=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Star=void 0;const d=St(),f=Xt(),L=Ct(),b=vt();class k extends f.Shape{_sceneFunc(a){const h=this.innerRadius(),g=this.outerRadius(),p=this.numPoints();a.beginPath(),a.moveTo(0,0-g);for(let m=1;m<p*2;m++){const x=m%2===0?g:h,y=x*Math.sin(m*Math.PI/p),u=-1*x*Math.cos(m*Math.PI/p);a.lineTo(y,u)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}}return Fr.Star=k,k.prototype.className="Star",k.prototype._centroid=!0,k.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,b._registerNode)(k),d.Factory.addGetterSetter(k,"numPoints",5,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(k,"innerRadius",0,(0,L.getNumberValidator)()),d.Factory.addGetterSetter(k,"outerRadius",0,(0,L.getNumberValidator)()),Fr}var qn={},ru;function Xu(){if(ru)return qn;ru=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.Text=void 0,qn.stringToArray=a;const d=Dt(),f=St(),L=Xt(),b=vt(),k=Ct(),_=vt();function a(Z){return[...Z].reduce((W,tt,it,J)=>{if(new RegExp("\\p{Emoji}","u").test(tt)){const G=J[it+1];G&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(G)?(W.push(tt+G),J[it+1]=""):W.push(tt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(tt+(J[it+1]||""))?W.push(tt+J[it+1]):it>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(tt)?W[W.length-1]+=tt:tt&&W.push(tt);return W},[])}const h="auto",g="center",p="inherit",m="justify",x="Change.konva",y="2d",u="-",c="left",S="text",P="Text",F="top",l="bottom",s="middle",v="normal",w="px ",M=" ",z="right",E="rtl",R="word",T="char",I="none",B="",j=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],K=j.length;function V(Z){return Z.split(",").map(W=>{W=W.trim();const tt=W.indexOf(" ")>=0,it=W.indexOf('"')>=0||W.indexOf("'")>=0;return tt&&!it&&(W=`"${W}"`),W}).join(", ")}let et;function C(){return et||(et=d.Util.createCanvasElement().getContext(y),et)}function A(Z){Z.fillText(this._partialText,this._partialTextX,this._partialTextY)}function D(Z){Z.setAttr("miterLimit",2),Z.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function O(Z){return Z=Z||{},!Z.fillLinearGradientColorStops&&!Z.fillRadialGradientColorStops&&!Z.fillPatternImage&&(Z.fill=Z.fill||"black"),Z}class U extends L.Shape{constructor(W){super(O(W)),this._partialTextX=0,this._partialTextY=0;for(let tt=0;tt<K;tt++)this.on(j[tt]+x,this._setTextData);this._setTextData()}_sceneFunc(W){const tt=this.textArr,it=tt.length;if(!this.text())return;let J=this.padding(),G=this.fontSize(),Y=this.lineHeight()*G,rt=this.verticalAlign(),st=this.direction(),at=0,ft=this.align(),ct=this.getWidth(),Et=this.letterSpacing(),gt=this.fill(),Bt=this.textDecoration(),Rt=Bt.indexOf("underline")!==-1,bt=Bt.indexOf("line-through")!==-1,nn;st=st===p?W.direction:st;let Wt=Y/2,yn=s;if(b.Konva._fixTextRendering){const Tt=this.measureSize("M");yn="alphabetic",Wt=(Tt.fontBoundingBoxAscent-Tt.fontBoundingBoxDescent)/2+Y/2}for(st===E&&W.setAttr("direction",st),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",yn),W.setAttr("textAlign",c),rt===s?at=(this.getHeight()-it*Y-J*2)/2:rt===l&&(at=this.getHeight()-it*Y-J*2),W.translate(J,at+J),nn=0;nn<it;nn++){let Tt=0,ve=0;const Zt=tt[nn],je=Zt.text,$t=Zt.width,De=Zt.lastInParagraph;if(W.save(),ft===z?Tt+=ct-$t-J*2:ft===g&&(Tt+=(ct-$t-J*2)/2),Rt){W.save(),W.beginPath();const _e=b.Konva._fixTextRendering?Math.round(G/4):Math.round(G/2),we=Tt,te=Wt+ve+_e;W.moveTo(we,te);const ee=ft===m&&!De?ct-J*2:$t;W.lineTo(we+Math.round(ee),te),W.lineWidth=G/15;const vn=this._getLinearGradient();W.strokeStyle=vn||gt,W.stroke(),W.restore()}if(bt){W.save(),W.beginPath();const _e=b.Konva._fixTextRendering?-Math.round(G/4):0;W.moveTo(Tt,Wt+ve+_e);const we=ft===m&&!De?ct-J*2:$t;W.lineTo(Tt+Math.round(we),Wt+ve+_e),W.lineWidth=G/15;const te=this._getLinearGradient();W.strokeStyle=te||gt,W.stroke(),W.restore()}if(st!==E&&(Et!==0||ft===m)){const _e=je.split(" ").length-1,we=a(je);for(let te=0;te<we.length;te++){const ee=we[te];ee===" "&&!De&&ft===m&&(Tt+=(ct-J*2-$t)/_e),this._partialTextX=Tt,this._partialTextY=Wt+ve,this._partialText=ee,W.fillStrokeShape(this),Tt+=this.measureSize(ee).width+Et}}else Et!==0&&W.setAttr("letterSpacing",`${Et}px`),this._partialTextX=Tt,this._partialTextY=Wt+ve,this._partialText=je,W.fillStrokeShape(this);W.restore(),it>1&&(Wt+=Y)}}_hitFunc(W){const tt=this.getWidth(),it=this.getHeight();W.beginPath(),W.rect(0,0,tt,it),W.closePath(),W.fillStrokeShape(this)}setText(W){const tt=d.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(S,tt),this}getWidth(){return this.attrs.width===h||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===h||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return d.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var tt,it,J,G,Y,rt,st,at,ft,ct,Et;let gt=C(),Bt=this.fontSize(),Rt;gt.save(),gt.font=this._getContextFont(),Rt=gt.measureText(W),gt.restore();const bt=Bt/100;return{actualBoundingBoxAscent:(tt=Rt.actualBoundingBoxAscent)!==null&&tt!==void 0?tt:71.58203125*bt,actualBoundingBoxDescent:(it=Rt.actualBoundingBoxDescent)!==null&&it!==void 0?it:0,actualBoundingBoxLeft:(J=Rt.actualBoundingBoxLeft)!==null&&J!==void 0?J:-7.421875*bt,actualBoundingBoxRight:(G=Rt.actualBoundingBoxRight)!==null&&G!==void 0?G:75.732421875*bt,alphabeticBaseline:(Y=Rt.alphabeticBaseline)!==null&&Y!==void 0?Y:0,emHeightAscent:(rt=Rt.emHeightAscent)!==null&&rt!==void 0?rt:100*bt,emHeightDescent:(st=Rt.emHeightDescent)!==null&&st!==void 0?st:-20*bt,fontBoundingBoxAscent:(at=Rt.fontBoundingBoxAscent)!==null&&at!==void 0?at:91*bt,fontBoundingBoxDescent:(ft=Rt.fontBoundingBoxDescent)!==null&&ft!==void 0?ft:21*bt,hangingBaseline:(ct=Rt.hangingBaseline)!==null&&ct!==void 0?ct:72.80000305175781*bt,ideographicBaseline:(Et=Rt.ideographicBaseline)!==null&&Et!==void 0?Et:-21*bt,width:Rt.width,height:Bt}}_getContextFont(){return this.fontStyle()+M+this.fontVariant()+M+(this.fontSize()+w)+V(this.fontFamily())}_addTextLine(W){this.align()===m&&(W=W.trim());const it=this._getTextWidth(W);return this.textArr.push({text:W,width:it,lastInParagraph:!1})}_getTextWidth(W){const tt=this.letterSpacing(),it=W.length;return C().measureText(W).width+tt*it}_setTextData(){let W=this.text().split(`
`),tt=+this.fontSize(),it=0,J=this.lineHeight()*tt,G=this.attrs.width,Y=this.attrs.height,rt=G!==h&&G!==void 0,st=Y!==h&&Y!==void 0,at=this.padding(),ft=G-at*2,ct=Y-at*2,Et=0,gt=this.wrap(),Bt=gt!==I,Rt=gt!==T&&Bt,bt=this.ellipsis();this.textArr=[],C().font=this._getContextFont();const nn=bt?this._getTextWidth(B):0;for(let Wt=0,yn=W.length;Wt<yn;++Wt){let Tt=W[Wt],ve=this._getTextWidth(Tt);if(rt&&ve>ft)for(;Tt.length>0;){let Zt=0,je=a(Tt).length,$t="",De=0;for(;Zt<je;){const _e=Zt+je>>>1,we=a(Tt),te=we.slice(0,_e+1).join(""),ee=this._getTextWidth(te);(bt&&st&&Et+J>ct?ee+nn:ee)<=ft?(Zt=_e+1,$t=te,De=ee):je=_e}if($t){if(Rt){const te=a(Tt),ee=a($t),vn=te[ee.length],ei=vn===M||vn===u;let Fn;if(ei&&De<=ft)Fn=ee.length;else{const $i=ee.lastIndexOf(M),ts=ee.lastIndexOf(u);Fn=Math.max($i,ts)+1}Fn>0&&(Zt=Fn,$t=te.slice(0,Zt).join(""),De=this._getTextWidth($t))}if($t=$t.trimRight(),this._addTextLine($t),it=Math.max(it,De),Et+=J,this._shouldHandleEllipsis(Et)){this._tryToAddEllipsisToLastLine();break}if(Tt=a(Tt).slice(Zt).join("").trimLeft(),Tt.length>0&&(ve=this._getTextWidth(Tt),ve<=ft)){this._addTextLine(Tt),Et+=J,it=Math.max(it,ve);break}}else break}else this._addTextLine(Tt),Et+=J,it=Math.max(it,ve),this._shouldHandleEllipsis(Et)&&Wt<yn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),st&&Et+J>ct)break}this.textHeight=tt,this.textWidth=it}_shouldHandleEllipsis(W){const tt=+this.fontSize(),it=this.lineHeight()*tt,J=this.attrs.height,G=J!==h&&J!==void 0,Y=this.padding(),rt=J-Y*2;return!(this.wrap()!==I)||G&&W+it>rt}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,tt=W!==h&&W!==void 0,it=this.padding(),J=W-it*2,G=this.ellipsis(),Y=this.textArr[this.textArr.length-1];!Y||!G||(tt&&(this._getTextWidth(Y.text+B)<J||(Y.text=Y.text.slice(0,Y.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Y.text+B))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,tt=this.hasShadow();return W&&tt?!0:super._useBufferCanvas()}}return qn.Text=U,U.prototype._fillFunc=A,U.prototype._strokeFunc=D,U.prototype.className=P,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,_._registerNode)(U),f.Factory.overWriteSetter(U,"width",(0,k.getNumberOrAutoValidator)()),f.Factory.overWriteSetter(U,"height",(0,k.getNumberOrAutoValidator)()),f.Factory.addGetterSetter(U,"direction",p),f.Factory.addGetterSetter(U,"fontFamily","Arial"),f.Factory.addGetterSetter(U,"fontSize",12,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(U,"fontStyle",v),f.Factory.addGetterSetter(U,"fontVariant",v),f.Factory.addGetterSetter(U,"padding",0,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(U,"align",c),f.Factory.addGetterSetter(U,"verticalAlign",F),f.Factory.addGetterSetter(U,"lineHeight",1,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(U,"wrap",R),f.Factory.addGetterSetter(U,"ellipsis",!1,(0,k.getBooleanValidator)()),f.Factory.addGetterSetter(U,"letterSpacing",0,(0,k.getNumberValidator)()),f.Factory.addGetterSetter(U,"text","",(0,k.getStringValidator)()),f.Factory.addGetterSetter(U,"textDecoration",""),qn}var Ar={},iu;function Oc(){if(iu)return Ar;iu=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.TextPath=void 0;const d=Dt(),f=St(),L=Xt(),b=La(),k=Xu(),_=Ct(),a=vt(),h="",g="normal";function p(y){y.fillText(this.partialText,0,0)}function m(y){y.strokeText(this.partialText,0,0)}let x=class extends L.Shape{constructor(u){super(u),this.dummyCanvas=d.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return b.Path.getPathLength(this.dataArray)}_getPointAtLength(u){if(!this.attrs.data)return null;const c=this.pathLength;return u-1>c?null:b.Path.getPointAtLengthOfDataArray(u,this.dataArray)}_readDataAttribute(){this.dataArray=b.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(u){u.setAttr("font",this._getContextFont()),u.setAttr("textBaseline",this.textBaseline()),u.setAttr("textAlign","left"),u.save();const c=this.textDecoration(),S=this.fill(),P=this.fontSize(),F=this.glyphInfo;c==="underline"&&u.beginPath();for(let l=0;l<F.length;l++){u.save();const s=F[l].p0;u.translate(s.x,s.y),u.rotate(F[l].rotation),this.partialText=F[l].text,u.fillStrokeShape(this),c==="underline"&&(l===0&&u.moveTo(0,P/2+1),u.lineTo(P,P/2+1)),u.restore()}c==="underline"&&(u.strokeStyle=S,u.lineWidth=P/20,u.stroke()),u.restore()}_hitFunc(u){u.beginPath();const c=this.glyphInfo;if(c.length>=1){const S=c[0].p0;u.moveTo(S.x,S.y)}for(let S=0;S<c.length;S++){const P=c[S].p1;u.lineTo(P.x,P.y)}u.setAttr("lineWidth",this.fontSize()),u.setAttr("strokeStyle",this.colorKey),u.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return d.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(u){return k.Text.prototype.setText.call(this,u)}_getContextFont(){return k.Text.prototype._getContextFont.call(this)}_getTextSize(u){const S=this.dummyCanvas.getContext("2d");S.save(),S.font=this._getContextFont();const P=S.measureText(u);return S.restore(),{width:P.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:u,height:c}=this._getTextSize(this.attrs.text);if(this.textWidth=u,this.textHeight=c,this.glyphInfo=[],!this.attrs.data)return null;const S=this.letterSpacing(),P=this.align(),F=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*S,0);let s=0;P==="center"&&(s=Math.max(0,this.pathLength/2-l/2)),P==="right"&&(s=Math.max(0,this.pathLength-l));const v=(0,k.stringToArray)(this.text());let w=s;for(let M=0;M<v.length;M++){const z=this._getPointAtLength(w);if(!z)return;let E=this._getTextSize(v[M]).width+S;if(v[M]===" "&&P==="justify"){const K=this.text().split(" ").length-1;E+=(this.pathLength-l)/K}const R=this._getPointAtLength(w+E);if(!R)return;const T=b.Path.getLineLength(z.x,z.y,R.x,R.y);let I=0;if(F)try{I=F(v[M-1],v[M])*this.fontSize()}catch{I=0}z.x+=I,R.x+=I,this.textWidth+=I;const B=b.Path.getPointOnLine(I+T/2,z.x,z.y,R.x,R.y),j=Math.atan2(R.y-z.y,R.x-z.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:v[M],rotation:j,p0:z,p1:R}),w+=E}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const u=[];this.glyphInfo.forEach(function(w){u.push(w.p0.x),u.push(w.p0.y),u.push(w.p1.x),u.push(w.p1.y)});let c=u[0]||0,S=u[0]||0,P=u[1]||0,F=u[1]||0,l,s;for(let w=0;w<u.length/2;w++)l=u[w*2],s=u[w*2+1],c=Math.min(c,l),S=Math.max(S,l),P=Math.min(P,s),F=Math.max(F,s);const v=this.fontSize();return{x:c-v/2,y:P-v/2,width:S-c+v,height:F-P+v}}destroy(){return d.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ar.TextPath=x,x.prototype._fillFunc=p,x.prototype._strokeFunc=m,x.prototype._fillFuncHit=p,x.prototype._strokeFuncHit=m,x.prototype.className="TextPath",x.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(x),f.Factory.addGetterSetter(x,"data"),f.Factory.addGetterSetter(x,"fontFamily","Arial"),f.Factory.addGetterSetter(x,"fontSize",12,(0,_.getNumberValidator)()),f.Factory.addGetterSetter(x,"fontStyle",g),f.Factory.addGetterSetter(x,"align","left"),f.Factory.addGetterSetter(x,"letterSpacing",0,(0,_.getNumberValidator)()),f.Factory.addGetterSetter(x,"textBaseline","middle"),f.Factory.addGetterSetter(x,"fontVariant",g),f.Factory.addGetterSetter(x,"text",h),f.Factory.addGetterSetter(x,"textDecoration",""),f.Factory.addGetterSetter(x,"kerningFunc",void 0),Ar}var Mr={},su;function Gc(){if(su)return Mr;su=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Transformer=void 0;const d=Dt(),f=St(),L=Ut(),b=Xt(),k=Yu(),_=Aa(),a=vt(),h=Ct(),g=vt(),p="tr-konva",m=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(E=>E+`.${p}`).join(" "),x="nodesRect",y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],u={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},c="ontouchstart"in a.Konva._global;function S(E,R,T){if(E==="rotater")return T;R+=d.Util.degToRad(u[E]||0);const I=(d.Util.radToDeg(R)%360+360)%360;return d.Util._inRange(I,315+22.5,360)||d.Util._inRange(I,0,22.5)?"ns-resize":d.Util._inRange(I,45-22.5,45+22.5)?"nesw-resize":d.Util._inRange(I,90-22.5,90+22.5)?"ew-resize":d.Util._inRange(I,135-22.5,135+22.5)?"nwse-resize":d.Util._inRange(I,180-22.5,180+22.5)?"ns-resize":d.Util._inRange(I,225-22.5,225+22.5)?"nesw-resize":d.Util._inRange(I,270-22.5,270+22.5)?"ew-resize":d.Util._inRange(I,315-22.5,315+22.5)?"nwse-resize":(d.Util.error("Transformer has unknown angle for cursor detection: "+I),"pointer")}const P=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function F(E){return{x:E.x+E.width/2*Math.cos(E.rotation)+E.height/2*Math.sin(-E.rotation),y:E.y+E.height/2*Math.cos(E.rotation)+E.width/2*Math.sin(E.rotation)}}function l(E,R,T){const I=T.x+(E.x-T.x)*Math.cos(R)-(E.y-T.y)*Math.sin(R),B=T.y+(E.x-T.x)*Math.sin(R)+(E.y-T.y)*Math.cos(R);return{...E,rotation:E.rotation+R,x:I,y:B}}function s(E,R){const T=F(E);return l(E,R,T)}function v(E,R,T){let I=R;for(let B=0;B<E.length;B++){const j=a.Konva.getAngle(E[B]),K=Math.abs(j-R)%(Math.PI*2);Math.min(K,Math.PI*2-K)<T&&(I=j)}return I}let w=0;class M extends _.Group{constructor(R){super(R),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(m,this.update),this.getNode()&&this.update()}attachTo(R){return this.setNode(R),this}setNode(R){return d.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([R])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return p+this._id}setNodes(R=[]){this._nodes&&this._nodes.length&&this.detach();const T=R.filter(B=>B.isAncestorOf(this)?(d.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=R=T,R.length===1&&this.useSingleNodeRotation()?this.rotation(R[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(B=>{const j=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(B._attrsAffectingSize.length){const K=B._attrsAffectingSize.map(V=>V+"Change."+this._getEventNamespace()).join(" ");B.on(K,j)}B.on(y.map(K=>K+`.${this._getEventNamespace()}`).join(" "),j),B.on(`absoluteTransformChange.${this._getEventNamespace()}`,j),this._proxyDrag(B)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(R){let T;R.on(`dragstart.${this._getEventNamespace()}`,I=>{T=R.getAbsolutePosition(),!this.isDragging()&&R!==this.findOne(".back")&&this.startDrag(I,!1)}),R.on(`dragmove.${this._getEventNamespace()}`,I=>{if(!T)return;const B=R.getAbsolutePosition(),j=B.x-T.x,K=B.y-T.y;this.nodes().forEach(V=>{if(V===R||V.isDragging())return;const et=V.getAbsolutePosition();V.setAbsolutePosition({x:et.x+j,y:et.y+K}),V.startDrag(I)}),T=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(R=>{R.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(x),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(x,this.__getNodeRect)}__getNodeShape(R,T=this.rotation(),I){const B=R.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),j=R.getAbsoluteScale(I),K=R.getAbsolutePosition(I),V=B.x*j.x-R.offsetX()*j.x,et=B.y*j.y-R.offsetY()*j.y,C=(a.Konva.getAngle(R.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:K.x+V*Math.cos(C)+et*Math.sin(-C),y:K.y+et*Math.cos(C)+V*Math.sin(C),width:B.width*j.x,height:B.height*j.y,rotation:C};return l(A,-a.Konva.getAngle(T),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const T=[];this.nodes().map(C=>{const A=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),D=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],O=C.getAbsoluteTransform();D.forEach(function(U){const Z=O.point(U);T.push(Z)})});const I=new d.Transform;I.rotate(-a.Konva.getAngle(this.rotation()));let B=1/0,j=1/0,K=-1/0,V=-1/0;T.forEach(function(C){const A=I.point(C);B===void 0&&(B=K=A.x,j=V=A.y),B=Math.min(B,A.x),j=Math.min(j,A.y),K=Math.max(K,A.x),V=Math.max(V,A.y)}),I.invert();const et=I.point({x:B,y:j});return{x:et.x,y:et.y,width:K-B,height:V-j,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),P.forEach(R=>{this._createAnchor(R)}),this._createAnchor("rotater")}_createAnchor(R){const T=new k.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:R+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:c?10:"auto"}),I=this;T.on("mousedown touchstart",function(B){I._handleMouseDown(B)}),T.on("dragstart",B=>{T.stopDrag(),B.cancelBubble=!0}),T.on("dragend",B=>{B.cancelBubble=!0}),T.on("mouseenter",()=>{const B=a.Konva.getAngle(this.rotation()),j=this.rotateAnchorCursor(),K=S(R,B,j);T.getStage().content&&(T.getStage().content.style.cursor=K),this._cursorChange=!0}),T.on("mouseout",()=>{T.getStage().content&&(T.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(T)}_createBack(){const R=new b.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(T,I){const B=I.getParent(),j=B.padding();T.beginPath(),T.rect(-j,-j,I.width()+j*2,I.height()+j*2),T.moveTo(I.width()/2,-j),B.rotateEnabled()&&B.rotateLineVisible()&&T.lineTo(I.width()/2,-B.rotateAnchorOffset()*d.Util._sign(I.height())-j),T.fillStrokeShape(I)},hitFunc:(T,I)=>{if(!this.shouldOverdrawWholeArea())return;const B=this.padding();T.beginPath(),T.rect(-B,-B,I.width()+B*2,I.height()+B*2),T.fillStrokeShape(I)}});this.add(R),this._proxyDrag(R),R.on("dragstart",T=>{T.cancelBubble=!0}),R.on("dragmove",T=>{T.cancelBubble=!0}),R.on("dragend",T=>{T.cancelBubble=!0}),this.on("dragmove",T=>{this.update()})}_handleMouseDown(R){if(this._transforming)return;this._movingAnchorName=R.target.name().split(" ")[0];const T=this._getNodeRect(),I=T.width,B=T.height,j=Math.sqrt(Math.pow(I,2)+Math.pow(B,2));this.sin=Math.abs(B/j),this.cos=Math.abs(I/j),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const K=R.target.getAbsolutePosition(),V=R.target.getStage().getPointerPosition();this._anchorDragOffset={x:V.x-K.x,y:V.y-K.y},w++,this._fire("transformstart",{evt:R.evt,target:this.getNode()}),this._nodes.forEach(et=>{et._fire("transformstart",{evt:R.evt,target:et})})}_handleMouseMove(R){let T,I,B;const j=this.findOne("."+this._movingAnchorName),K=j.getStage();K.setPointersPositions(R);const V=K.getPointerPosition();let et={x:V.x-this._anchorDragOffset.x,y:V.y-this._anchorDragOffset.y};const C=j.getAbsolutePosition();this.anchorDragBoundFunc()&&(et=this.anchorDragBoundFunc()(C,et,R)),j.setAbsolutePosition(et);const A=j.getAbsolutePosition();if(C.x===A.x&&C.y===A.y)return;if(this._movingAnchorName==="rotater"){const J=this._getNodeRect();T=j.x()-J.width/2,I=-j.y()+J.height/2;let G=Math.atan2(-I,T)+Math.PI/2;J.height<0&&(G-=Math.PI);const rt=a.Konva.getAngle(this.rotation())+G,st=a.Konva.getAngle(this.rotationSnapTolerance()),ft=v(this.rotationSnaps(),rt,st)-J.rotation,ct=s(J,ft);this._fitNodesInto(ct,R);return}const D=this.shiftBehavior();let O;D==="inverted"?O=this.keepRatio()&&!R.shiftKey:D==="none"?O=this.keepRatio():O=this.keepRatio()||R.shiftKey;let U=this.centeredScaling()||R.altKey;if(this._movingAnchorName==="top-left"){if(O){const J=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};B=Math.sqrt(Math.pow(J.x-j.x(),2)+Math.pow(J.y-j.y(),2));const G=this.findOne(".top-left").x()>J.x?-1:1,Y=this.findOne(".top-left").y()>J.y?-1:1;T=B*this.cos*G,I=B*this.sin*Y,this.findOne(".top-left").x(J.x-T),this.findOne(".top-left").y(J.y-I)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(j.y());else if(this._movingAnchorName==="top-right"){if(O){const J=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};B=Math.sqrt(Math.pow(j.x()-J.x,2)+Math.pow(J.y-j.y(),2));const G=this.findOne(".top-right").x()<J.x?-1:1,Y=this.findOne(".top-right").y()>J.y?-1:1;T=B*this.cos*G,I=B*this.sin*Y,this.findOne(".top-right").x(J.x+T),this.findOne(".top-right").y(J.y-I)}var Z=j.position();this.findOne(".top-left").y(Z.y),this.findOne(".bottom-right").x(Z.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(j.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(j.x());else if(this._movingAnchorName==="bottom-left"){if(O){const J=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};B=Math.sqrt(Math.pow(J.x-j.x(),2)+Math.pow(j.y()-J.y,2));const G=J.x<j.x()?-1:1,Y=j.y()<J.y?-1:1;T=B*this.cos*G,I=B*this.sin*Y,j.x(J.x-T),j.y(J.y+I)}Z=j.position(),this.findOne(".top-left").x(Z.x),this.findOne(".bottom-right").y(Z.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(j.y());else if(this._movingAnchorName==="bottom-right"){if(O){const J=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};B=Math.sqrt(Math.pow(j.x()-J.x,2)+Math.pow(j.y()-J.y,2));const G=this.findOne(".bottom-right").x()<J.x?-1:1,Y=this.findOne(".bottom-right").y()<J.y?-1:1;T=B*this.cos*G,I=B*this.sin*Y,this.findOne(".bottom-right").x(J.x+T),this.findOne(".bottom-right").y(J.y+I)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(U=this.centeredScaling()||R.altKey,U){const J=this.findOne(".top-left"),G=this.findOne(".bottom-right"),Y=J.x(),rt=J.y(),st=this.getWidth()-G.x(),at=this.getHeight()-G.y();G.move({x:-Y,y:-rt}),J.move({x:st,y:at})}const W=this.findOne(".top-left").getAbsolutePosition();T=W.x,I=W.y;const tt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),it=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:T,y:I,width:tt,height:it,rotation:a.Konva.getAngle(this.rotation())},R)}_handleMouseUp(R){this._removeEvents(R)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(R){var T;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const I=this.getNode();w--,this._fire("transformend",{evt:R,target:I}),(T=this.getLayer())===null||T===void 0||T.batchDraw(),I&&this._nodes.forEach(B=>{var j;B._fire("transformend",{evt:R,target:B}),(j=B.getLayer())===null||j===void 0||j.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(R,T){const I=this._getNodeRect(),B=1;if(d.Util._inRange(R.width,-this.padding()*2-B,B)){this.update();return}if(d.Util._inRange(R.height,-this.padding()*2-B,B)){this.update();return}const j=new d.Transform;if(j.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("left")>=0){const O=j.point({x:-this.padding()*2,y:0});R.x+=O.x,R.y+=O.y,R.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y}else if(this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("right")>=0){const O=j.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,R.width+=this.padding()*2}if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("top")>=0){const O=j.point({x:0,y:-this.padding()*2});R.x+=O.x,R.y+=O.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,R.height+=this.padding()*2}else if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const O=j.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,R.height+=this.padding()*2}if(this.boundBoxFunc()){const O=this.boundBoxFunc()(I,R);O?R=O:d.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const K=1e7,V=new d.Transform;V.translate(I.x,I.y),V.rotate(I.rotation),V.scale(I.width/K,I.height/K);const et=new d.Transform,C=R.width/K,A=R.height/K;this.flipEnabled()===!1?(et.translate(R.x,R.y),et.rotate(R.rotation),et.translate(R.width<0?R.width:0,R.height<0?R.height:0),et.scale(Math.abs(C),Math.abs(A))):(et.translate(R.x,R.y),et.rotate(R.rotation),et.scale(C,A));const D=et.multiply(V.invert());this._nodes.forEach(O=>{var U;const Z=O.getParent().getAbsoluteTransform(),W=O.getTransform().copy();W.translate(O.offsetX(),O.offsetY());const tt=new d.Transform;tt.multiply(Z.copy().invert()).multiply(D).multiply(Z).multiply(W);const it=tt.decompose();O.setAttrs(it),(U=O.getLayer())===null||U===void 0||U.batchDraw()}),this.rotation(d.Util._getRotation(R.rotation)),this._nodes.forEach(O=>{this._fire("transform",{evt:T,target:O}),O._fire("transform",{evt:T,target:O})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(R,T){this.findOne(R).setAttrs(T)}update(){var R;const T=this._getNodeRect();this.rotation(d.Util._getRotation(T.rotation));const I=T.width,B=T.height,j=this.enabledAnchors(),K=this.resizeEnabled(),V=this.padding(),et=this.anchorSize(),C=this.find("._anchor");C.forEach(D=>{D.setAttrs({width:et,height:et,offsetX:et/2,offsetY:et/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:et/2+V,offsetY:et/2+V,visible:K&&j.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:I/2,y:0,offsetY:et/2+V,visible:K&&j.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:I,y:0,offsetX:et/2-V,offsetY:et/2+V,visible:K&&j.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:B/2,offsetX:et/2+V,visible:K&&j.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:I,y:B/2,offsetX:et/2-V,visible:K&&j.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:B,offsetX:et/2+V,offsetY:et/2-V,visible:K&&j.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:I/2,y:B,offsetY:et/2-V,visible:K&&j.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:I,y:B,offsetX:et/2-V,offsetY:et/2-V,visible:K&&j.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:I/2,y:-this.rotateAnchorOffset()*d.Util._sign(B)-V,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:I,height:B,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const A=this.anchorStyleFunc();A&&C.forEach(D=>{A(D)}),(R=this.getLayer())===null||R===void 0||R.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const R=this.findOne("."+this._movingAnchorName);R&&R.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),_.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return L.Node.prototype.toObject.call(this)}clone(R){return L.Node.prototype.clone.call(this,R)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Mr.Transformer=M,M.isTransforming=()=>w>0;function z(E){return E instanceof Array||d.Util.warn("enabledAnchors value should be an array"),E instanceof Array&&E.forEach(function(R){P.indexOf(R)===-1&&d.Util.warn("Unknown anchor name: "+R+". Available names are: "+P.join(", "))}),E||[]}return M.prototype.className="Transformer",(0,g._registerNode)(M),f.Factory.addGetterSetter(M,"enabledAnchors",P,z),f.Factory.addGetterSetter(M,"flipEnabled",!0,(0,h.getBooleanValidator)()),f.Factory.addGetterSetter(M,"resizeEnabled",!0),f.Factory.addGetterSetter(M,"anchorSize",10,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"rotateEnabled",!0),f.Factory.addGetterSetter(M,"rotateLineVisible",!0),f.Factory.addGetterSetter(M,"rotationSnaps",[]),f.Factory.addGetterSetter(M,"rotateAnchorOffset",50,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"rotateAnchorCursor","crosshair"),f.Factory.addGetterSetter(M,"rotationSnapTolerance",5,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"borderEnabled",!0),f.Factory.addGetterSetter(M,"anchorStroke","rgb(0, 161, 255)"),f.Factory.addGetterSetter(M,"anchorStrokeWidth",1,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"anchorFill","white"),f.Factory.addGetterSetter(M,"anchorCornerRadius",0,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"borderStroke","rgb(0, 161, 255)"),f.Factory.addGetterSetter(M,"borderStrokeWidth",1,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"borderDash"),f.Factory.addGetterSetter(M,"keepRatio",!0),f.Factory.addGetterSetter(M,"shiftBehavior","default"),f.Factory.addGetterSetter(M,"centeredScaling",!1),f.Factory.addGetterSetter(M,"ignoreStroke",!1),f.Factory.addGetterSetter(M,"padding",0,(0,h.getNumberValidator)()),f.Factory.addGetterSetter(M,"nodes"),f.Factory.addGetterSetter(M,"node"),f.Factory.addGetterSetter(M,"boundBoxFunc"),f.Factory.addGetterSetter(M,"anchorDragBoundFunc"),f.Factory.addGetterSetter(M,"anchorStyleFunc"),f.Factory.addGetterSetter(M,"shouldOverdrawWholeArea",!1),f.Factory.addGetterSetter(M,"useSingleNodeRotation",!0),f.Factory.backCompat(M,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Mr}var Lr={},au;function Dc(){if(au)return Lr;au=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Wedge=void 0;const d=St(),f=Xt(),L=vt(),b=Ct(),k=vt();let _=class extends f.Shape{_sceneFunc(h){h.beginPath(),h.arc(0,0,this.radius(),0,L.Konva.getAngle(this.angle()),this.clockwise()),h.lineTo(0,0),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius(h/2)}setHeight(h){this.radius(h/2)}};return Lr.Wedge=_,_.prototype.className="Wedge",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["radius"],(0,k._registerNode)(_),d.Factory.addGetterSetter(_,"radius",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"angle",0,(0,b.getNumberValidator)()),d.Factory.addGetterSetter(_,"clockwise",!1),d.Factory.backCompat(_,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Lr}var br={},ou;function Ic(){if(ou)return br;ou=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Blur=void 0;const d=St(),f=Ut(),L=Ct();function b(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const k=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(g,p){const m=g.data,x=g.width,y=g.height;let u,c,S,P,F,l,s,v,w,M,z,E,R,T,I,B,j,K,V,et;const C=p+p+1,A=x-1,D=y-1,O=p+1,U=O*(O+1)/2,Z=new b,W=k[p],tt=_[p];let it=null,J=Z,G=null,Y=null;for(let rt=1;rt<C;rt++)J=J.next=new b,rt===O&&(it=J);J.next=Z,S=c=0;for(let rt=0;rt<y;rt++){E=R=T=I=P=F=l=s=0,v=O*(B=m[c]),w=O*(j=m[c+1]),M=O*(K=m[c+2]),z=O*(V=m[c+3]),P+=U*B,F+=U*j,l+=U*K,s+=U*V,J=Z;for(let st=0;st<O;st++)J.r=B,J.g=j,J.b=K,J.a=V,J=J.next;for(let st=1;st<O;st++)u=c+((A<st?A:st)<<2),P+=(J.r=B=m[u])*(et=O-st),F+=(J.g=j=m[u+1])*et,l+=(J.b=K=m[u+2])*et,s+=(J.a=V=m[u+3])*et,E+=B,R+=j,T+=K,I+=V,J=J.next;G=Z,Y=it;for(let st=0;st<x;st++)m[c+3]=V=s*W>>tt,V!==0?(V=255/V,m[c]=(P*W>>tt)*V,m[c+1]=(F*W>>tt)*V,m[c+2]=(l*W>>tt)*V):m[c]=m[c+1]=m[c+2]=0,P-=v,F-=w,l-=M,s-=z,v-=G.r,w-=G.g,M-=G.b,z-=G.a,u=S+((u=st+p+1)<A?u:A)<<2,E+=G.r=m[u],R+=G.g=m[u+1],T+=G.b=m[u+2],I+=G.a=m[u+3],P+=E,F+=R,l+=T,s+=I,G=G.next,v+=B=Y.r,w+=j=Y.g,M+=K=Y.b,z+=V=Y.a,E-=B,R-=j,T-=K,I-=V,Y=Y.next,c+=4;S+=x}for(let rt=0;rt<x;rt++){R=T=I=E=F=l=s=P=0,c=rt<<2,v=O*(B=m[c]),w=O*(j=m[c+1]),M=O*(K=m[c+2]),z=O*(V=m[c+3]),P+=U*B,F+=U*j,l+=U*K,s+=U*V,J=Z;for(let at=0;at<O;at++)J.r=B,J.g=j,J.b=K,J.a=V,J=J.next;let st=x;for(let at=1;at<=p;at++)c=st+rt<<2,P+=(J.r=B=m[c])*(et=O-at),F+=(J.g=j=m[c+1])*et,l+=(J.b=K=m[c+2])*et,s+=(J.a=V=m[c+3])*et,E+=B,R+=j,T+=K,I+=V,J=J.next,at<D&&(st+=x);c=rt,G=Z,Y=it;for(let at=0;at<y;at++)u=c<<2,m[u+3]=V=s*W>>tt,V>0?(V=255/V,m[u]=(P*W>>tt)*V,m[u+1]=(F*W>>tt)*V,m[u+2]=(l*W>>tt)*V):m[u]=m[u+1]=m[u+2]=0,P-=v,F-=w,l-=M,s-=z,v-=G.r,w-=G.g,M-=G.b,z-=G.a,u=rt+((u=at+O)<D?u:D)*x<<2,P+=E+=G.r=m[u],F+=R+=G.g=m[u+1],l+=T+=G.b=m[u+2],s+=I+=G.a=m[u+3],G=G.next,v+=B=Y.r,w+=j=Y.g,M+=K=Y.b,z+=V=Y.a,E-=B,R-=j,T-=K,I-=V,Y=Y.next,c+=x}}const h=function(p){const m=Math.round(this.blurRadius());m>0&&a(p,m)};return br.Blur=h,d.Factory.addGetterSetter(f.Node,"blurRadius",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),br}var Or={},lu;function Uc(){if(lu)return Or;lu=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Brighten=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=this.brightness()*255,a=k.data,h=a.length;for(let g=0;g<h;g+=4)a[g]+=_,a[g+1]+=_,a[g+2]+=_};return Or.Brighten=b,d.Factory.addGetterSetter(f.Node,"brightness",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Or}var Gr={},uu;function zc(){if(uu)return Gr;uu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Contrast=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=Math.pow((this.contrast()+100)/100,2),a=k.data,h=a.length;let g=150,p=150,m=150;for(let x=0;x<h;x+=4)g=a[x],p=a[x+1],m=a[x+2],g/=255,g-=.5,g*=_,g+=.5,g*=255,p/=255,p-=.5,p*=_,p+=.5,p*=255,m/=255,m-=.5,m*=_,m+=.5,m*=255,g=g<0?0:g>255?255:g,p=p<0?0:p>255?255:p,m=m<0?0:m>255?255:m,a[x]=g,a[x+1]=p,a[x+2]=m};return Gr.Contrast=b,d.Factory.addGetterSetter(f.Node,"contrast",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Gr}var Dr={},hu;function Bc(){if(hu)return Dr;hu=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Emboss=void 0;const d=St(),f=Ut(),L=Dt(),b=Ct(),k=function(_){const a=this.embossStrength()*10,h=this.embossWhiteLevel()*255,g=this.embossDirection(),p=this.embossBlend(),m=_.data,x=_.width,y=_.height,u=x*4;let c=0,S=0,P=y;switch(g){case"top-left":c=-1,S=-1;break;case"top":c=-1,S=0;break;case"top-right":c=-1,S=1;break;case"right":c=0,S=1;break;case"bottom-right":c=1,S=1;break;case"bottom":c=1,S=0;break;case"bottom-left":c=1,S=-1;break;case"left":c=0,S=-1;break;default:L.Util.error("Unknown emboss direction: "+g)}do{const F=(P-1)*u;let l=c;P+l<1&&(l=0),P+l>y&&(l=0);const s=(P-1+l)*x*4;let v=x;do{const w=F+(v-1)*4;let M=S;v+M<1&&(M=0),v+M>x&&(M=0);const z=s+(v-1+M)*4,E=m[w]-m[z],R=m[w+1]-m[z+1],T=m[w+2]-m[z+2];let I=E;const B=I>0?I:-I,j=R>0?R:-R,K=T>0?T:-T;if(j>B&&(I=R),K>B&&(I=T),I*=a,p){const V=m[w]+I,et=m[w+1]+I,C=m[w+2]+I;m[w]=V>255?255:V<0?0:V,m[w+1]=et>255?255:et<0?0:et,m[w+2]=C>255?255:C<0?0:C}else{let V=h-I;V<0?V=0:V>255&&(V=255),m[w]=m[w+1]=m[w+2]=V}}while(--v)}while(--P)};return Dr.Emboss=k,d.Factory.addGetterSetter(f.Node,"embossStrength",.5,(0,b.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"embossWhiteLevel",.5,(0,b.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"embossDirection","top-left",void 0,d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"embossBlend",!1,void 0,d.Factory.afterSetFilter),Dr}var Ir={},cu;function Vc(){if(cu)return Ir;cu=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Enhance=void 0;const d=St(),f=Ut(),L=Ct();function b(_,a,h,g,p){const m=h-a,x=p-g;if(m===0)return g+x/2;if(x===0)return g;let y=(_-a)/m;return y=x*y+g,y}const k=function(_){const a=_.data,h=a.length;let g=a[0],p=g,m,x=a[1],y=x,u,c=a[2],S=c,P;const F=this.enhance();if(F===0)return;for(let E=0;E<h;E+=4)m=a[E+0],m<g?g=m:m>p&&(p=m),u=a[E+1],u<x?x=u:u>y&&(y=u),P=a[E+2],P<c?c=P:P>S&&(S=P);p===g&&(p=255,g=0),y===x&&(y=255,x=0),S===c&&(S=255,c=0);let l,s,v,w,M,z;if(F>0)l=p+F*(255-p),s=g-F*(g-0),v=y+F*(255-y),w=x-F*(x-0),M=S+F*(255-S),z=c-F*(c-0);else{const E=(p+g)*.5;l=p+F*(p-E),s=g+F*(g-E);const R=(y+x)*.5;v=y+F*(y-R),w=x+F*(x-R);const T=(S+c)*.5;M=S+F*(S-T),z=c+F*(c-T)}for(let E=0;E<h;E+=4)a[E+0]=b(a[E+0],g,p,s,l),a[E+1]=b(a[E+1],x,y,w,v),a[E+2]=b(a[E+2],c,S,z,M)};return Ir.Enhance=k,d.Factory.addGetterSetter(f.Node,"enhance",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Ir}var Ur={},du;function Hc(){if(du)return Ur;du=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Grayscale=void 0;const d=function(f){const L=f.data,b=L.length;for(let k=0;k<b;k+=4){const _=.34*L[k]+.5*L[k+1]+.16*L[k+2];L[k]=_,L[k+1]=_,L[k+2]=_}};return Ur.Grayscale=d,Ur}var zr={},fu;function Wc(){if(fu)return zr;fu=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.HSL=void 0;const d=St(),f=Ut(),L=Ct();d.Factory.addGetterSetter(f.Node,"hue",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"saturation",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"luminance",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter);const b=function(k){const _=k.data,a=_.length,h=1,g=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,m=this.luminance()*127,x=h*g*Math.cos(p*Math.PI/180),y=h*g*Math.sin(p*Math.PI/180),u=.299*h+.701*x+.167*y,c=.587*h-.587*x+.33*y,S=.114*h-.114*x-.497*y,P=.299*h-.299*x-.328*y,F=.587*h+.413*x+.035*y,l=.114*h-.114*x+.293*y,s=.299*h-.3*x+1.25*y,v=.587*h-.586*x-1.05*y,w=.114*h+.886*x-.2*y;let M,z,E,R;for(let T=0;T<a;T+=4)M=_[T+0],z=_[T+1],E=_[T+2],R=_[T+3],_[T+0]=u*M+c*z+S*E+m,_[T+1]=P*M+F*z+l*E+m,_[T+2]=s*M+v*z+w*E+m,_[T+3]=R};return zr.HSL=b,zr}var Br={},gu;function qc(){if(gu)return Br;gu=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HSV=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=k.data,a=_.length,h=Math.pow(2,this.value()),g=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,m=h*g*Math.cos(p*Math.PI/180),x=h*g*Math.sin(p*Math.PI/180),y=.299*h+.701*m+.167*x,u=.587*h-.587*m+.33*x,c=.114*h-.114*m-.497*x,S=.299*h-.299*m-.328*x,P=.587*h+.413*m+.035*x,F=.114*h-.114*m+.293*x,l=.299*h-.3*m+1.25*x,s=.587*h-.586*m-1.05*x,v=.114*h+.886*m-.2*x;for(let w=0;w<a;w+=4){const M=_[w+0],z=_[w+1],E=_[w+2],R=_[w+3];_[w+0]=y*M+u*z+c*E,_[w+1]=S*M+P*z+F*E,_[w+2]=l*M+s*z+v*E,_[w+3]=R}};return Br.HSV=b,d.Factory.addGetterSetter(f.Node,"hue",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"saturation",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"value",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Br}var Vr={},pu;function jc(){if(pu)return Vr;pu=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Invert=void 0;const d=function(f){const L=f.data,b=L.length;for(let k=0;k<b;k+=4)L[k]=255-L[k],L[k+1]=255-L[k+1],L[k+2]=255-L[k+2]};return Vr.Invert=d,Vr}var Hr={},mu;function Kc(){if(mu)return Hr;mu=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Kaleidoscope=void 0;const d=St(),f=Ut(),L=Dt(),b=Ct(),k=function(h,g,p){const m=h.data,x=g.data,y=h.width,u=h.height,c=p.polarCenterX||y/2,S=p.polarCenterY||u/2;let P=Math.sqrt(c*c+S*S),F=y-c,l=u-S;const s=Math.sqrt(F*F+l*l);P=s>P?s:P;const v=u,w=y,M=360/w*Math.PI/180;for(let z=0;z<w;z+=1){const E=Math.sin(z*M),R=Math.cos(z*M);for(let T=0;T<v;T+=1){F=Math.floor(c+P*T/v*R),l=Math.floor(S+P*T/v*E);let I=(l*y+F)*4;const B=m[I+0],j=m[I+1],K=m[I+2],V=m[I+3];I=(z+T*y)*4,x[I+0]=B,x[I+1]=j,x[I+2]=K,x[I+3]=V}}},_=function(h,g,p){const m=h.data,x=g.data,y=h.width,u=h.height,c=p.polarCenterX||y/2,S=p.polarCenterY||u/2;let P=Math.sqrt(c*c+S*S),F=y-c,l=u-S;const s=Math.sqrt(F*F+l*l);P=s>P?s:P;const v=u,w=y,M=0;let z,E;for(F=0;F<y;F+=1)for(l=0;l<u;l+=1){const R=F-c,T=l-S,I=Math.sqrt(R*R+T*T)*v/P;let B=(Math.atan2(T,R)*180/Math.PI+360+M)%360;B=B*w/360,z=Math.floor(B),E=Math.floor(I);let j=(E*y+z)*4;const K=m[j+0],V=m[j+1],et=m[j+2],C=m[j+3];j=(l*y+F)*4,x[j+0]=K,x[j+1]=V,x[j+2]=et,x[j+3]=C}},a=function(h){const g=h.width,p=h.height;let m,x,y,u,c,S,P,F,l,s,v=Math.round(this.kaleidoscopePower());const w=Math.round(this.kaleidoscopeAngle()),M=Math.floor(g*(w%360)/360);if(v<1)return;const z=L.Util.createCanvasElement();z.width=g,z.height=p;const E=z.getContext("2d").getImageData(0,0,g,p);L.Util.releaseCanvas(z),k(h,E,{polarCenterX:g/2,polarCenterY:p/2});let R=g/Math.pow(2,v);for(;R<=8;)R=R*2,v-=1;R=Math.ceil(R);let T=R,I=0,B=T,j=1;for(M+R>g&&(I=T,B=0,j=-1),x=0;x<p;x+=1)for(m=I;m!==B;m+=j)y=Math.round(m+M)%g,l=(g*x+y)*4,c=E.data[l+0],S=E.data[l+1],P=E.data[l+2],F=E.data[l+3],s=(g*x+m)*4,E.data[s+0]=c,E.data[s+1]=S,E.data[s+2]=P,E.data[s+3]=F;for(x=0;x<p;x+=1)for(T=Math.floor(R),u=0;u<v;u+=1){for(m=0;m<T+1;m+=1)l=(g*x+m)*4,c=E.data[l+0],S=E.data[l+1],P=E.data[l+2],F=E.data[l+3],s=(g*x+T*2-m-1)*4,E.data[s+0]=c,E.data[s+1]=S,E.data[s+2]=P,E.data[s+3]=F;T*=2}_(E,h,{})};return Hr.Kaleidoscope=a,d.Factory.addGetterSetter(f.Node,"kaleidoscopePower",2,(0,b.getNumberValidator)(),d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"kaleidoscopeAngle",0,(0,b.getNumberValidator)(),d.Factory.afterSetFilter),Hr}var Wr={},yu;function Yc(){if(yu)return Wr;yu=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Mask=void 0;const d=St(),f=Ut(),L=Ct();function b(y,u,c){let S=(c*y.width+u)*4;const P=[];return P.push(y.data[S++],y.data[S++],y.data[S++],y.data[S++]),P}function k(y,u){return Math.sqrt(Math.pow(y[0]-u[0],2)+Math.pow(y[1]-u[1],2)+Math.pow(y[2]-u[2],2))}function _(y){const u=[0,0,0];for(let c=0;c<y.length;c++)u[0]+=y[c][0],u[1]+=y[c][1],u[2]+=y[c][2];return u[0]/=y.length,u[1]/=y.length,u[2]/=y.length,u}function a(y,u){const c=b(y,0,0),S=b(y,y.width-1,0),P=b(y,0,y.height-1),F=b(y,y.width-1,y.height-1),l=u||10;if(k(c,S)<l&&k(S,F)<l&&k(F,P)<l&&k(P,c)<l){const s=_([S,c,F,P]),v=[];for(let w=0;w<y.width*y.height;w++){const M=k(s,[y.data[w*4],y.data[w*4+1],y.data[w*4+2]]);v[w]=M<l?0:255}return v}}function h(y,u){for(let c=0;c<y.width*y.height;c++)y.data[4*c+3]=u[c]}function g(y,u,c){const S=[1,1,1,1,0,1,1,1,1],P=Math.round(Math.sqrt(S.length)),F=Math.floor(P/2),l=[];for(let s=0;s<c;s++)for(let v=0;v<u;v++){const w=s*u+v;let M=0;for(let z=0;z<P;z++)for(let E=0;E<P;E++){const R=s+z-F,T=v+E-F;if(R>=0&&R<c&&T>=0&&T<u){const I=R*u+T,B=S[z*P+E];M+=y[I]*B}}l[w]=M===2040?255:0}return l}function p(y,u,c){const S=[1,1,1,1,1,1,1,1,1],P=Math.round(Math.sqrt(S.length)),F=Math.floor(P/2),l=[];for(let s=0;s<c;s++)for(let v=0;v<u;v++){const w=s*u+v;let M=0;for(let z=0;z<P;z++)for(let E=0;E<P;E++){const R=s+z-F,T=v+E-F;if(R>=0&&R<c&&T>=0&&T<u){const I=R*u+T,B=S[z*P+E];M+=y[I]*B}}l[w]=M>=1020?255:0}return l}function m(y,u,c){const S=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],P=Math.round(Math.sqrt(S.length)),F=Math.floor(P/2),l=[];for(let s=0;s<c;s++)for(let v=0;v<u;v++){const w=s*u+v;let M=0;for(let z=0;z<P;z++)for(let E=0;E<P;E++){const R=s+z-F,T=v+E-F;if(R>=0&&R<c&&T>=0&&T<u){const I=R*u+T,B=S[z*P+E];M+=y[I]*B}}l[w]=M}return l}const x=function(y){const u=this.threshold();let c=a(y,u);return c&&(c=g(c,y.width,y.height),c=p(c,y.width,y.height),c=m(c,y.width,y.height),h(y,c)),y};return Wr.Mask=x,d.Factory.addGetterSetter(f.Node,"threshold",0,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Wr}var qr={},vu;function Xc(){if(vu)return qr;vu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Noise=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=this.noise()*255,a=k.data,h=a.length,g=_/2;for(let p=0;p<h;p+=4)a[p+0]+=g-2*g*Math.random(),a[p+1]+=g-2*g*Math.random(),a[p+2]+=g-2*g*Math.random()};return qr.Noise=b,d.Factory.addGetterSetter(f.Node,"noise",.2,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),qr}var jr={},_u;function Qc(){if(_u)return jr;_u=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Pixelate=void 0;const d=St(),f=Dt(),L=Ut(),b=Ct(),k=function(_){let a=Math.ceil(this.pixelSize()),h=_.width,g=_.height,p=Math.ceil(h/a),m=Math.ceil(g/a),x=_.data;if(a<=0){f.Util.error("pixelSize value can not be <= 0");return}for(let y=0;y<p;y+=1)for(let u=0;u<m;u+=1){let c=0,S=0,P=0,F=0;const l=y*a,s=l+a,v=u*a,w=v+a;let M=0;for(let z=l;z<s;z+=1)if(!(z>=h))for(let E=v;E<w;E+=1){if(E>=g)continue;const R=(h*E+z)*4;c+=x[R+0],S+=x[R+1],P+=x[R+2],F+=x[R+3],M+=1}c=c/M,S=S/M,P=P/M,F=F/M;for(let z=l;z<s;z+=1)if(!(z>=h))for(let E=v;E<w;E+=1){if(E>=g)continue;const R=(h*E+z)*4;x[R+0]=c,x[R+1]=S,x[R+2]=P,x[R+3]=F}}};return jr.Pixelate=k,d.Factory.addGetterSetter(L.Node,"pixelSize",8,(0,b.getNumberValidator)(),d.Factory.afterSetFilter),jr}var Kr={},Su;function Jc(){if(Su)return Kr;Su=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Posterize=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=Math.round(this.levels()*254)+1,a=k.data,h=a.length,g=255/_;for(let p=0;p<h;p+=1)a[p]=Math.floor(a[p]/g)*g};return Kr.Posterize=b,d.Factory.addGetterSetter(f.Node,"levels",.5,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Kr}var Yr={},Cu;function Zc(){if(Cu)return Yr;Cu=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.RGB=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=k.data,a=_.length,h=this.red(),g=this.green(),p=this.blue();for(let m=0;m<a;m+=4){const x=(.34*_[m]+.5*_[m+1]+.16*_[m+2])/255;_[m]=x*h,_[m+1]=x*g,_[m+2]=x*p,_[m+3]=_[m+3]}};return Yr.RGB=b,d.Factory.addGetterSetter(f.Node,"red",0,function(k){return this._filterUpToDate=!1,k>255?255:k<0?0:Math.round(k)}),d.Factory.addGetterSetter(f.Node,"green",0,function(k){return this._filterUpToDate=!1,k>255?255:k<0?0:Math.round(k)}),d.Factory.addGetterSetter(f.Node,"blue",0,L.RGBComponent,d.Factory.afterSetFilter),Yr}var Xr={},wu;function $c(){if(wu)return Xr;wu=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.RGBA=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=k.data,a=_.length,h=this.red(),g=this.green(),p=this.blue(),m=this.alpha();for(let x=0;x<a;x+=4){const y=1-m;_[x]=h*m+_[x]*y,_[x+1]=g*m+_[x+1]*y,_[x+2]=p*m+_[x+2]*y}};return Xr.RGBA=b,d.Factory.addGetterSetter(f.Node,"red",0,function(k){return this._filterUpToDate=!1,k>255?255:k<0?0:Math.round(k)}),d.Factory.addGetterSetter(f.Node,"green",0,function(k){return this._filterUpToDate=!1,k>255?255:k<0?0:Math.round(k)}),d.Factory.addGetterSetter(f.Node,"blue",0,L.RGBComponent,d.Factory.afterSetFilter),d.Factory.addGetterSetter(f.Node,"alpha",1,function(k){return this._filterUpToDate=!1,k>1?1:k<0?0:k}),Xr}var Qr={},xu;function td(){if(xu)return Qr;xu=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.Sepia=void 0;const d=function(f){const L=f.data,b=L.length;for(let k=0;k<b;k+=4){const _=L[k+0],a=L[k+1],h=L[k+2];L[k+0]=Math.min(255,_*.393+a*.769+h*.189),L[k+1]=Math.min(255,_*.349+a*.686+h*.168),L[k+2]=Math.min(255,_*.272+a*.534+h*.131)}};return Qr.Sepia=d,Qr}var Jr={},Pu;function ed(){if(Pu)return Jr;Pu=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Solarize=void 0;const d=function(f){const L=f.data,b=f.width,k=f.height,_=b*4;let a=k;do{const h=(a-1)*_;let g=b;do{const p=h+(g-1)*4;let m=L[p],x=L[p+1],y=L[p+2];m>127&&(m=255-m),x>127&&(x=255-x),y>127&&(y=255-y),L[p]=m,L[p+1]=x,L[p+2]=y}while(--g)}while(--a)};return Jr.Solarize=d,Jr}var Zr={},Eu;function nd(){if(Eu)return Zr;Eu=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Threshold=void 0;const d=St(),f=Ut(),L=Ct(),b=function(k){const _=this.threshold()*255,a=k.data,h=a.length;for(let g=0;g<h;g+=1)a[g]=a[g]<_?0:255};return Zr.Threshold=b,d.Factory.addGetterSetter(f.Node,"threshold",.5,(0,L.getNumberValidator)(),d.Factory.afterSetFilter),Zr}var Ru;function rd(){if(Ru)return dr;Ru=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.Konva=void 0;const d=Na(),f=Pc(),L=Rc(),b=kc(),k=Tc(),_=Nc(),a=Fc(),h=Ku(),g=La(),p=Yu(),m=Ac(),x=Mc(),y=Lc(),u=bc(),c=Xu(),S=Oc(),P=Gc(),F=Dc(),l=Ic(),s=Uc(),v=zc(),w=Bc(),M=Vc(),z=Hc(),E=Wc(),R=qc(),T=jc(),I=Kc(),B=Yc(),j=Xc(),K=Qc(),V=Jc(),et=Zc(),C=$c(),A=td(),D=ed(),O=nd();return dr.Konva=d.Konva.Util._assign(d.Konva,{Arc:f.Arc,Arrow:L.Arrow,Circle:b.Circle,Ellipse:k.Ellipse,Image:_.Image,Label:a.Label,Tag:a.Tag,Line:h.Line,Path:g.Path,Rect:p.Rect,RegularPolygon:m.RegularPolygon,Ring:x.Ring,Sprite:y.Sprite,Star:u.Star,Text:c.Text,TextPath:S.TextPath,Transformer:P.Transformer,Wedge:F.Wedge,Filters:{Blur:l.Blur,Brighten:s.Brighten,Contrast:v.Contrast,Emboss:w.Emboss,Enhance:M.Enhance,Grayscale:z.Grayscale,HSL:E.HSL,HSV:R.HSV,Invert:T.Invert,Kaleidoscope:I.Kaleidoscope,Mask:B.Mask,Noise:j.Noise,Pixelate:K.Pixelate,Posterize:V.Posterize,RGB:et.RGB,RGBA:C.RGBA,Sepia:A.Sepia,Solarize:D.Solarize,Threshold:O.Threshold}}),dr}var id=Xi.exports,ku;function sd(){if(ku)return Xi.exports;ku=1,Object.defineProperty(id,"__esModule",{value:!0});const d=rd();return Xi.exports=d.Konva,Xi.exports}sd();var Yi={exports:{}},Tu;function ad(){return Tu||(Tu=1,(function(d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Konva=void 0;var L=Na();Object.defineProperty(f,"Konva",{enumerable:!0,get:function(){return L.Konva}});const b=Na();d.exports=b.Konva})(Yi,Yi.exports)),Yi.exports}var od=ad();const ti=Vu(od);var Pa={exports:{}};var Ea,Nu;function ld(){return Nu||(Nu=1,Ea=function(f){var L={},b=Sc(),k=Hu(),_=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),l=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),w=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=w&&t[w]||t["@@iterator"],typeof t=="function"?t:null)}function z(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case y:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case F:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c:return(t.displayName||"Context")+".Consumer";case u:return(t._context.displayName||"Context")+".Provider";case S:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case l:return e=t.displayName||null,e!==null?e:z(t.type)||"Memo";case s:e=t._payload,t=t._init;try{return z(t(e))}catch{}}return null}function E(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function R(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T(t){if(R(t)!==t)throw Error(a(188))}function I(t){var e=t.alternate;if(!e){if(e=R(t),e===null)throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return T(i),t;if(o===r)return T(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var N=!1,H=i.child;H;){if(H===n){N=!0,n=i,r=o;break}if(H===r){N=!0,r=i,n=o;break}H=H.sibling}if(!N){for(H=o.child;H;){if(H===n){N=!0,n=o,r=i;break}if(H===r){N=!0,r=o,n=i;break}H=H.sibling}if(!N)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?t:e}function B(t){return t=I(t),t!==null?j(t):null}function j(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j(t);if(e!==null)return e;t=t.sibling}return null}function K(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var e=K(t);if(e!==null)return e}t=t.sibling}return null}var V=Array.isArray,et=f.getPublicInstance,C=f.getRootHostContext,A=f.getChildHostContext,D=f.prepareForCommit,O=f.resetAfterCommit,U=f.createInstance,Z=f.appendInitialChild,W=f.finalizeInitialChildren,tt=f.prepareUpdate,it=f.shouldSetTextContent,J=f.createTextInstance,G=f.scheduleTimeout,Y=f.cancelTimeout,rt=f.noTimeout,st=f.isPrimaryRenderer,at=f.supportsMutation,ft=f.supportsPersistence,ct=f.supportsHydration,Et=f.getInstanceFromNode,gt=f.preparePortalMount,Bt=f.getCurrentEventPriority,Rt=f.detachDeletedInstance,bt=f.supportsMicrotasks,nn=f.scheduleMicrotask,Wt=f.supportsTestSelectors,yn=f.findFiberRoot,Tt=f.getBoundingRect,ve=f.getTextContent,Zt=f.isHiddenSubtree,je=f.matchAccessibilityRole,$t=f.setFocusIfFocusable,De=f.setupIntersectionObserver,_e=f.appendChild,we=f.appendChildToContainer,te=f.commitTextUpdate,ee=f.commitMount,vn=f.commitUpdate,ei=f.insertBefore,Fn=f.insertInContainerBefore,$i=f.removeChild,ts=f.removeChildFromContainer,Ga=f.resetTextContent,nh=f.hideInstance,rh=f.hideTextInstance,ih=f.unhideInstance,sh=f.unhideTextInstance,ah=f.clearContainer,oh=f.cloneInstance,Da=f.createContainerChildSet,Ia=f.appendChildToContainerChildSet,lh=f.finalizeContainerChildren,es=f.replaceContainerChildren,Ua=f.cloneHiddenInstance,za=f.cloneHiddenTextInstance,uh=f.canHydrateInstance,hh=f.canHydrateTextInstance,ch=f.canHydrateSuspenseInstance,Ba=f.isSuspenseInstancePending,ns=f.isSuspenseInstanceFallback,dh=f.getSuspenseInstanceFallbackErrorDetails,fh=f.registerSuspenseInstanceRetry,ni=f.getNextHydratableSibling,gh=f.getFirstHydratableChild,ph=f.getFirstHydratableChildWithinContainer,mh=f.getFirstHydratableChildWithinSuspenseInstance,yh=f.hydrateInstance,vh=f.hydrateTextInstance,_h=f.hydrateSuspenseInstance,Sh=f.getNextHydratableInstanceAfterSuspenseInstance,Ch=f.commitHydratedContainer,wh=f.commitHydratedSuspenseInstance,xh=f.clearSuspenseBoundary,Ph=f.clearSuspenseBoundaryFromContainer,Eh=f.shouldDeleteUnhydratedTailInstances,Rh=f.didNotMatchHydratedContainerTextInstance,kh=f.didNotMatchHydratedTextInstance,rs;function Kn(t){if(rs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rs=e&&e[1]||""}return`
`+rs+t}var is=!1;function ss(t,e){if(!t||is)return"";is=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(nt){var r=nt}Reflect.construct(t,[],e)}else{try{e.call()}catch(nt){r=nt}t.call(e.prototype)}else{try{throw Error()}catch(nt){r=nt}t()}}catch(nt){if(nt&&r&&typeof nt.stack=="string"){for(var i=nt.stack.split(`
`),o=r.stack.split(`
`),N=i.length-1,H=o.length-1;1<=N&&0<=H&&i[N]!==o[H];)H--;for(;1<=N&&0<=H;N--,H--)if(i[N]!==o[H]){if(N!==1||H!==1)do if(N--,H--,0>H||i[N]!==o[H]){var Q=`
`+i[N].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=N&&0<=H);break}}}finally{is=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kn(t):""}var Th=Object.prototype.hasOwnProperty,as=[],An=-1;function rn(t){return{current:t}}function Ft(t){0>An||(t.current=as[An],as[An]=null,An--)}function Nt(t,e){An++,as[An]=t.current,t.current=e}var sn={},ne=rn(sn),ue=rn(!1),_n=sn;function Mn(t,e){var n=t.type.contextTypes;if(!n)return sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function he(t){return t=t.childContextTypes,t!=null}function ri(){Ft(ue),Ft(ne)}function Va(t,e,n){if(ne.current!==sn)throw Error(a(168));Nt(ne,e),Nt(ue,n)}function Ha(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(a(108,E(t)||"Unknown",i));return _({},n,r)}function ii(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sn,_n=ne.current,Nt(ne,t),Nt(ue,ue.current),!0}function Wa(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ha(t,e,_n),r.__reactInternalMemoizedMergedChildContext=t,Ft(ue),Ft(ne),Nt(ne,t)):Ft(ue),Nt(ue,n)}var Ae=Math.clz32?Math.clz32:Ah,Nh=Math.log,Fh=Math.LN2;function Ah(t){return t>>>=0,t===0?32:31-(Nh(t)/Fh|0)|0}var si=64,ai=4194304;function Yn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,N=n&268435455;if(N!==0){var H=N&~i;H!==0?r=Yn(H):(o&=N,o!==0&&(r=Yn(o)))}else N=n&~i,N!==0?r=Yn(N):o!==0&&(r=Yn(o));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ae(e),i=1<<n,r|=t[n],e&=~i;return r}function Mh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lh(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var N=31-Ae(o),H=1<<N,Q=i[N];Q===-1?((H&n)===0||(H&r)!==0)&&(i[N]=Mh(H,e)):Q<=e&&(t.expiredLanes|=H),o&=~H}}function os(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qa(){var t=si;return si<<=1,(si&4194240)===0&&(si=64),t}function ls(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xn(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ae(e),t[e]=n}function bh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function us(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wt=0;function ja(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hs=k.unstable_scheduleCallback,Ka=k.unstable_cancelCallback,Oh=k.unstable_shouldYield,Gh=k.unstable_requestPaint,qt=k.unstable_now,cs=k.unstable_ImmediatePriority,Dh=k.unstable_UserBlockingPriority,ds=k.unstable_NormalPriority,Ih=k.unstable_IdlePriority,li=null,Ie=null;function Uh(t){if(Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(li,t,void 0,(t.current.flags&128)===128)}catch{}}function zh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Me=typeof Object.is=="function"?Object.is:zh,Ke=null,ui=!1,fs=!1;function Ya(t){Ke===null?Ke=[t]:Ke.push(t)}function Bh(t){ui=!0,Ya(t)}function Ue(){if(!fs&&Ke!==null){fs=!0;var t=0,e=wt;try{var n=Ke;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ke=null,ui=!1}catch(i){throw Ke!==null&&(Ke=Ke.slice(t+1)),hs(cs,Ue),i}finally{wt=e,fs=!1}}return null}var Ln=[],bn=0,hi=null,ci=0,xe=[],Pe=0,Sn=null,Ye=1,Xe="";function Cn(t,e){Ln[bn++]=ci,Ln[bn++]=hi,hi=t,ci=e}function Xa(t,e,n){xe[Pe++]=Ye,xe[Pe++]=Xe,xe[Pe++]=Sn,Sn=t;var r=Ye;t=Xe;var i=32-Ae(r)-1;r&=~(1<<i),n+=1;var o=32-Ae(e)+i;if(30<o){var N=i-i%5;o=(r&(1<<N)-1).toString(32),r>>=N,i-=N,Ye=1<<32-Ae(e)+i|n<<i|r,Xe=o+t}else Ye=1<<o|n<<i|r,Xe=t}function gs(t){t.return!==null&&(Cn(t,1),Xa(t,1,0))}function ps(t){for(;t===hi;)hi=Ln[--bn],Ln[bn]=null,ci=Ln[--bn],Ln[bn]=null;for(;t===Sn;)Sn=xe[--Pe],xe[Pe]=null,Xe=xe[--Pe],xe[Pe]=null,Ye=xe[--Pe],xe[Pe]=null}var Se=null,Ee=null,Mt=!1,Qn=!1,Le=null;function Qa(t,e){var n=Fe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ja(t,e){switch(t.tag){case 5:return e=uh(e,t.type,t.pendingProps),e!==null?(t.stateNode=e,Se=t,Ee=gh(e),!0):!1;case 6:return e=hh(e,t.pendingProps),e!==null?(t.stateNode=e,Se=t,Ee=null,!0):!1;case 13:if(e=ch(e),e!==null){var n=Sn!==null?{id:Ye,overflow:Xe}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Se=t,Ee=null,!0}return!1;default:return!1}}function ms(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ys(t){if(Mt){var e=Ee;if(e){var n=e;if(!Ja(t,e)){if(ms(t))throw Error(a(418));e=ni(n);var r=Se;e&&Ja(t,e)?Qa(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Se=t)}}else{if(ms(t))throw Error(a(418));t.flags=t.flags&-4097|2,Mt=!1,Se=t}}}function Za(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Se=t}function di(t){if(!ct||t!==Se)return!1;if(!Mt)return Za(t),Mt=!0,!1;if(t.tag!==3&&(t.tag!==5||Eh(t.type)&&!it(t.type,t.memoizedProps))){var e=Ee;if(e){if(ms(t))throw $a(),Error(a(418));for(;e;)Qa(t,e),e=ni(e)}}if(Za(t),t.tag===13){if(!ct)throw Error(a(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ee=Sh(t)}else Ee=Se?ni(t.stateNode):null;return!0}function $a(){for(var t=Ee;t;)t=ni(t)}function On(){ct&&(Ee=Se=null,Qn=Mt=!1)}function vs(t){Le===null?Le=[t]:Le.push(t)}var Vh=h.ReactCurrentBatchConfig;function fi(t,e){if(Me(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Th.call(e,i)||!Me(t[i],e[i]))return!1}return!0}function Hh(t){switch(t.tag){case 5:return Kn(t.type);case 16:return Kn("Lazy");case 13:return Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 2:case 15:return t=ss(t.type,!1),t;case 11:return t=ss(t.type.render,!1),t;case 1:return t=ss(t.type,!0),t;default:return""}}function Jn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(N){var H=i.refs;N===null?delete H[o]:H[o]=N},e._stringRef=o,e)}if(typeof t!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function gi(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function to(t){var e=t._init;return e(t._payload)}function eo(t){function e(X,q){if(t){var $=X.deletions;$===null?(X.deletions=[q],X.flags|=16):$.push(q)}}function n(X,q){if(!t)return null;for(;q!==null;)e(X,q),q=q.sibling;return null}function r(X,q){for(X=new Map;q!==null;)q.key!==null?X.set(q.key,q):X.set(q.index,q),q=q.sibling;return X}function i(X,q){return X=dn(X,q),X.index=0,X.sibling=null,X}function o(X,q,$){return X.index=$,t?($=X.alternate,$!==null?($=$.index,$<q?(X.flags|=2,q):$):(X.flags|=2,q)):(X.flags|=1048576,q)}function N(X){return t&&X.alternate===null&&(X.flags|=2),X}function H(X,q,$,lt){return q===null||q.tag!==6?(q=fa($,X.mode,lt),q.return=X,q):(q=i(q,$),q.return=X,q)}function Q(X,q,$,lt){var dt=$.type;return dt===m?ht(X,q,$.props.children,lt,$.key):q!==null&&(q.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&to(dt)===q.type)?(lt=i(q,$.props),lt.ref=Jn(X,q,$),lt.return=X,lt):(lt=qi($.type,$.key,$.props,null,X.mode,lt),lt.ref=Jn(X,q,$),lt.return=X,lt)}function nt(X,q,$,lt){return q===null||q.tag!==4||q.stateNode.containerInfo!==$.containerInfo||q.stateNode.implementation!==$.implementation?(q=ga($,X.mode,lt),q.return=X,q):(q=i(q,$.children||[]),q.return=X,q)}function ht(X,q,$,lt,dt){return q===null||q.tag!==7?(q=Tn($,X.mode,lt,dt),q.return=X,q):(q=i(q,$),q.return=X,q)}function pt(X,q,$){if(typeof q=="string"&&q!==""||typeof q=="number")return q=fa(""+q,X.mode,$),q.return=X,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case g:return $=qi(q.type,q.key,q.props,null,X.mode,$),$.ref=Jn(X,null,q),$.return=X,$;case p:return q=ga(q,X.mode,$),q.return=X,q;case s:var lt=q._init;return pt(X,lt(q._payload),$)}if(V(q)||M(q))return q=Tn(q,X.mode,$,null),q.return=X,q;gi(X,q)}return null}function ot(X,q,$,lt){var dt=q!==null?q.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return dt!==null?null:H(X,q,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return $.key===dt?Q(X,q,$,lt):null;case p:return $.key===dt?nt(X,q,$,lt):null;case s:return dt=$._init,ot(X,q,dt($._payload),lt)}if(V($)||M($))return dt!==null?null:ht(X,q,$,lt,null);gi(X,$)}return null}function At(X,q,$,lt,dt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return X=X.get($)||null,H(q,X,""+lt,dt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case g:return X=X.get(lt.key===null?$:lt.key)||null,Q(q,X,lt,dt);case p:return X=X.get(lt.key===null?$:lt.key)||null,nt(q,X,lt,dt);case s:var yt=lt._init;return At(X,q,$,yt(lt._payload),dt)}if(V(lt)||M(lt))return X=X.get($)||null,ht(q,X,lt,dt,null);gi(q,lt)}return null}function kt(X,q,$,lt){for(var dt=null,yt=null,mt=q,xt=q=0,Yt=null;mt!==null&&xt<$.length;xt++){mt.index>xt?(Yt=mt,mt=null):Yt=mt.sibling;var Pt=ot(X,mt,$[xt],lt);if(Pt===null){mt===null&&(mt=Yt);break}t&&mt&&Pt.alternate===null&&e(X,mt),q=o(Pt,q,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt,mt=Yt}if(xt===$.length)return n(X,mt),Mt&&Cn(X,xt),dt;if(mt===null){for(;xt<$.length;xt++)mt=pt(X,$[xt],lt),mt!==null&&(q=o(mt,q,xt),yt===null?dt=mt:yt.sibling=mt,yt=mt);return Mt&&Cn(X,xt),dt}for(mt=r(X,mt);xt<$.length;xt++)Yt=At(mt,X,xt,$[xt],lt),Yt!==null&&(t&&Yt.alternate!==null&&mt.delete(Yt.key===null?xt:Yt.key),q=o(Yt,q,xt),yt===null?dt=Yt:yt.sibling=Yt,yt=Yt);return t&&mt.forEach(function(fn){return e(X,fn)}),Mt&&Cn(X,xt),dt}function ge(X,q,$,lt){var dt=M($);if(typeof dt!="function")throw Error(a(150));if($=dt.call($),$==null)throw Error(a(151));for(var yt=dt=null,mt=q,xt=q=0,Yt=null,Pt=$.next();mt!==null&&!Pt.done;xt++,Pt=$.next()){mt.index>xt?(Yt=mt,mt=null):Yt=mt.sibling;var fn=ot(X,mt,Pt.value,lt);if(fn===null){mt===null&&(mt=Yt);break}t&&mt&&fn.alternate===null&&e(X,mt),q=o(fn,q,xt),yt===null?dt=fn:yt.sibling=fn,yt=fn,mt=Yt}if(Pt.done)return n(X,mt),Mt&&Cn(X,xt),dt;if(mt===null){for(;!Pt.done;xt++,Pt=$.next())Pt=pt(X,Pt.value,lt),Pt!==null&&(q=o(Pt,q,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return Mt&&Cn(X,xt),dt}for(mt=r(X,mt);!Pt.done;xt++,Pt=$.next())Pt=At(mt,X,xt,Pt.value,lt),Pt!==null&&(t&&Pt.alternate!==null&&mt.delete(Pt.key===null?xt:Pt.key),q=o(Pt,q,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return t&&mt.forEach(function(_c){return e(X,_c)}),Mt&&Cn(X,xt),dt}function $e(X,q,$,lt){if(typeof $=="object"&&$!==null&&$.type===m&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case g:t:{for(var dt=$.key,yt=q;yt!==null;){if(yt.key===dt){if(dt=$.type,dt===m){if(yt.tag===7){n(X,yt.sibling),q=i(yt,$.props.children),q.return=X,X=q;break t}}else if(yt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&to(dt)===yt.type){n(X,yt.sibling),q=i(yt,$.props),q.ref=Jn(X,yt,$),q.return=X,X=q;break t}n(X,yt);break}else e(X,yt);yt=yt.sibling}$.type===m?(q=Tn($.props.children,X.mode,lt,$.key),q.return=X,X=q):(lt=qi($.type,$.key,$.props,null,X.mode,lt),lt.ref=Jn(X,q,$),lt.return=X,X=lt)}return N(X);case p:t:{for(yt=$.key;q!==null;){if(q.key===yt)if(q.tag===4&&q.stateNode.containerInfo===$.containerInfo&&q.stateNode.implementation===$.implementation){n(X,q.sibling),q=i(q,$.children||[]),q.return=X,X=q;break t}else{n(X,q);break}else e(X,q);q=q.sibling}q=ga($,X.mode,lt),q.return=X,X=q}return N(X);case s:return yt=$._init,$e(X,q,yt($._payload),lt)}if(V($))return kt(X,q,$,lt);if(M($))return ge(X,q,$,lt);gi(X,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,q!==null&&q.tag===6?(n(X,q.sibling),q=i(q,$),q.return=X,X=q):(n(X,q),q=fa($,X.mode,lt),q.return=X,X=q),N(X)):n(X,q)}return $e}var Gn=eo(!0),no=eo(!1),pi=rn(null),mi=null,Dn=null,_s=null;function Ss(){_s=Dn=mi=null}function ro(t,e,n){st?(Nt(pi,e._currentValue),e._currentValue=n):(Nt(pi,e._currentValue2),e._currentValue2=n)}function Cs(t){var e=pi.current;Ft(pi),st?t._currentValue=e:t._currentValue2=e}function ws(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function In(t,e){mi=t,_s=Dn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(ce=!0),t.firstContext=null)}function Re(t){var e=st?t._currentValue:t._currentValue2;if(_s!==t)if(t={context:t,memoizedValue:e,next:null},Dn===null){if(mi===null)throw Error(a(308));Dn=t,mi.dependencies={lanes:0,firstContext:t}}else Dn=Dn.next=t;return e}var wn=null;function xs(t){wn===null?wn=[t]:wn.push(t)}function io(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xs(e)):(n.next=i.next,i.next=n),e.interleaved=n,ze(t,r)}function ze(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var an=!1;function Ps(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qe(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function on(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(_t&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ze(t,n)}return i=r.interleaved,i===null?(e.next=e,xs(r)):(e.next=i.next,i.next=e),r.interleaved=e,ze(t,n)}function yi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,us(t,n)}}function ao(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var N={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=N:o=o.next=N,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vi(t,e,n,r){var i=t.updateQueue;an=!1;var o=i.firstBaseUpdate,N=i.lastBaseUpdate,H=i.shared.pending;if(H!==null){i.shared.pending=null;var Q=H,nt=Q.next;Q.next=null,N===null?o=nt:N.next=nt,N=Q;var ht=t.alternate;ht!==null&&(ht=ht.updateQueue,H=ht.lastBaseUpdate,H!==N&&(H===null?ht.firstBaseUpdate=nt:H.next=nt,ht.lastBaseUpdate=Q))}if(o!==null){var pt=i.baseState;N=0,ht=nt=Q=null,H=o;do{var ot=H.lane,At=H.eventTime;if((r&ot)===ot){ht!==null&&(ht=ht.next={eventTime:At,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});t:{var kt=t,ge=H;switch(ot=e,At=n,ge.tag){case 1:if(kt=ge.payload,typeof kt=="function"){pt=kt.call(At,pt,ot);break t}pt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=ge.payload,ot=typeof kt=="function"?kt.call(At,pt,ot):kt,ot==null)break t;pt=_({},pt,ot);break t;case 2:an=!0}}H.callback!==null&&H.lane!==0&&(t.flags|=64,ot=i.effects,ot===null?i.effects=[H]:ot.push(H))}else At={eventTime:At,lane:ot,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ht===null?(nt=ht=At,Q=pt):ht=ht.next=At,N|=ot;if(H=H.next,H===null){if(H=i.shared.pending,H===null)break;ot=H,H=ot.next,ot.next=null,i.lastBaseUpdate=ot,i.shared.pending=null}}while(!0);if(ht===null&&(Q=pt),i.baseState=Q,i.firstBaseUpdate=nt,i.lastBaseUpdate=ht,e=i.shared.interleaved,e!==null){i=e;do N|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Pn|=N,t.lanes=N,t.memoizedState=pt}}function oo(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(a(191,i));i.call(r)}}}var Zn={},ke=rn(Zn),$n=rn(Zn),Un=rn(Zn);function Be(t){if(t===Zn)throw Error(a(174));return t}function Es(t,e){Nt(Un,e),Nt($n,t),Nt(ke,Zn),t=C(e),Ft(ke),Nt(ke,t)}function zn(){Ft(ke),Ft($n),Ft(Un)}function lo(t){var e=Be(Un.current),n=Be(ke.current);e=A(n,t.type,e),n!==e&&(Nt($n,t),Nt(ke,e))}function Rs(t){$n.current===t&&(Ft(ke),Ft($n))}var Ot=rn(0);function _i(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ba(n)||ns(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ks=[];function Ts(){for(var t=0;t<ks.length;t++){var e=ks[t];st?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}ks.length=0}var Si=h.ReactCurrentDispatcher,Ns=h.ReactCurrentBatchConfig,xn=0,Gt=null,Vt=null,jt=null,Ci=!1,tr=!1,er=0,Wh=0;function re(){throw Error(a(321))}function Fs(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Me(t[n],e[n]))return!1;return!0}function As(t,e,n,r,i,o){if(xn=o,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Si.current=t===null||t.memoizedState===null?Yh:Xh,t=n(r,i),tr){o=0;do{if(tr=!1,er=0,25<=o)throw Error(a(301));o+=1,jt=Vt=null,e.updateQueue=null,Si.current=Qh,t=n(r,i)}while(tr)}if(Si.current=Pi,e=Vt!==null&&Vt.next!==null,xn=0,jt=Vt=Gt=null,Ci=!1,e)throw Error(a(300));return t}function Ms(){var t=er!==0;return er=0,t}function Ve(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Gt.memoizedState=jt=t:jt=jt.next=t,jt}function Te(){if(Vt===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var e=jt===null?Gt.memoizedState:jt.next;if(e!==null)jt=e,Vt=t;else{if(t===null)throw Error(a(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},jt===null?Gt.memoizedState=jt=t:jt=jt.next=t}return jt}function nr(t,e){return typeof e=="function"?e(t):e}function Ls(t){var e=Te(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=Vt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var N=i.next;i.next=o.next,o.next=N}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var H=N=null,Q=null,nt=o;do{var ht=nt.lane;if((xn&ht)===ht)Q!==null&&(Q=Q.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),r=nt.hasEagerState?nt.eagerState:t(r,nt.action);else{var pt={lane:ht,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Q===null?(H=Q=pt,N=r):Q=Q.next=pt,Gt.lanes|=ht,Pn|=ht}nt=nt.next}while(nt!==null&&nt!==o);Q===null?N=r:Q.next=H,Me(r,e.memoizedState)||(ce=!0),e.memoizedState=r,e.baseState=N,e.baseQueue=Q,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Gt.lanes|=o,Pn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bs(t){var e=Te(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var N=i=i.next;do o=t(o,N.action),N=N.next;while(N!==i);Me(o,e.memoizedState)||(ce=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function uo(){}function ho(t,e){var n=Gt,r=Te(),i=e(),o=!Me(r.memoizedState,i);if(o&&(r.memoizedState=i,ce=!0),r=r.queue,Os(go.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,rr(9,fo.bind(null,n,r,i,e),void 0,null),Kt===null)throw Error(a(349));(xn&30)!==0||co(n,e,i)}return i}function co(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fo(t,e,n,r){e.value=n,e.getSnapshot=r,po(e)&&mo(t)}function go(t,e,n){return n(function(){po(e)&&mo(t)})}function po(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Me(t,n)}catch{return!0}}function mo(t){var e=ze(t,1);e!==null&&Ne(e,t,1,-1)}function yo(t){var e=Ve();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:t},e.queue=t,t=t.dispatch=Kh.bind(null,Gt,t),[e.memoizedState,t]}function rr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vo(){return Te().memoizedState}function wi(t,e,n,r){var i=Ve();Gt.flags|=t,i.memoizedState=rr(1|e,n,void 0,r===void 0?null:r)}function xi(t,e,n,r){var i=Te();r=r===void 0?null:r;var o=void 0;if(Vt!==null){var N=Vt.memoizedState;if(o=N.destroy,r!==null&&Fs(r,N.deps)){i.memoizedState=rr(e,n,o,r);return}}Gt.flags|=t,i.memoizedState=rr(1|e,n,o,r)}function _o(t,e){return wi(8390656,8,t,e)}function Os(t,e){return xi(2048,8,t,e)}function So(t,e){return xi(4,2,t,e)}function Co(t,e){return xi(4,4,t,e)}function wo(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xo(t,e,n){return n=n!=null?n.concat([t]):null,xi(4,4,wo.bind(null,e,t),n)}function Gs(){}function Po(t,e){var n=Te();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fs(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Eo(t,e){var n=Te();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fs(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ro(t,e,n){return(xn&21)===0?(t.baseState&&(t.baseState=!1,ce=!0),t.memoizedState=n):(Me(n,e)||(n=qa(),Gt.lanes|=n,Pn|=n,t.baseState=!0),e)}function qh(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=Ns.transition;Ns.transition={};try{t(!1),e()}finally{wt=n,Ns.transition=r}}function ko(){return Te().memoizedState}function jh(t,e,n){var r=hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},To(t))No(e,n);else if(n=io(t,e,n,r),n!==null){var i=ae();Ne(n,t,r,i),Fo(n,e,r)}}function Kh(t,e,n){var r=hn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(To(t))No(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var N=e.lastRenderedState,H=o(N,n);if(i.hasEagerState=!0,i.eagerState=H,Me(H,N)){var Q=e.interleaved;Q===null?(i.next=i,xs(e)):(i.next=Q.next,Q.next=i),e.interleaved=i;return}}catch{}n=io(t,e,i,r),n!==null&&(i=ae(),Ne(n,t,r,i),Fo(n,e,r))}}function To(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function No(t,e){tr=Ci=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fo(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,us(t,n)}}var Pi={readContext:Re,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useInsertionEffect:re,useLayoutEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useMutableSource:re,useSyncExternalStore:re,useId:re,unstable_isNewReconciler:!1},Yh={readContext:Re,useCallback:function(t,e){return Ve().memoizedState=[t,e===void 0?null:e],t},useContext:Re,useEffect:_o,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wi(4194308,4,wo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wi(4194308,4,t,e)},useInsertionEffect:function(t,e){return wi(4,2,t,e)},useMemo:function(t,e){var n=Ve();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ve();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jh.bind(null,Gt,t),[r.memoizedState,t]},useRef:function(t){var e=Ve();return t={current:t},e.memoizedState=t},useState:yo,useDebugValue:Gs,useDeferredValue:function(t){return Ve().memoizedState=t},useTransition:function(){var t=yo(!1),e=t[0];return t=qh.bind(null,t[1]),Ve().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Gt,i=Ve();if(Mt){if(n===void 0)throw Error(a(407));n=n()}else{if(n=e(),Kt===null)throw Error(a(349));(xn&30)!==0||co(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,_o(go.bind(null,r,o,t),[t]),r.flags|=2048,rr(9,fo.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Ve(),e=Kt.identifierPrefix;if(Mt){var n=Xe,r=Ye;n=(r&~(1<<32-Ae(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=er++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wh++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xh={readContext:Re,useCallback:Po,useContext:Re,useEffect:Os,useImperativeHandle:xo,useInsertionEffect:So,useLayoutEffect:Co,useMemo:Eo,useReducer:Ls,useRef:vo,useState:function(){return Ls(nr)},useDebugValue:Gs,useDeferredValue:function(t){var e=Te();return Ro(e,Vt.memoizedState,t)},useTransition:function(){var t=Ls(nr)[0],e=Te().memoizedState;return[t,e]},useMutableSource:uo,useSyncExternalStore:ho,useId:ko,unstable_isNewReconciler:!1},Qh={readContext:Re,useCallback:Po,useContext:Re,useEffect:Os,useImperativeHandle:xo,useInsertionEffect:So,useLayoutEffect:Co,useMemo:Eo,useReducer:bs,useRef:vo,useState:function(){return bs(nr)},useDebugValue:Gs,useDeferredValue:function(t){var e=Te();return Vt===null?e.memoizedState=t:Ro(e,Vt.memoizedState,t)},useTransition:function(){var t=bs(nr)[0],e=Te().memoizedState;return[t,e]},useMutableSource:uo,useSyncExternalStore:ho,useId:ko,unstable_isNewReconciler:!1};function be(t,e){if(t&&t.defaultProps){e=_({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ds(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ei={isMounted:function(t){return(t=t._reactInternals)?R(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ae(),i=hn(t),o=Qe(r,i);o.payload=e,n!=null&&(o.callback=n),e=on(t,o,i),e!==null&&(Ne(e,t,i,r),yi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ae(),i=hn(t),o=Qe(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=on(t,o,i),e!==null&&(Ne(e,t,i,r),yi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ae(),r=hn(t),i=Qe(n,r);i.tag=2,e!=null&&(i.callback=e),e=on(t,i,r),e!==null&&(Ne(e,t,r,n),yi(e,t,r))}};function Ao(t,e,n,r,i,o,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,N):e.prototype&&e.prototype.isPureReactComponent?!fi(n,r)||!fi(i,o):!0}function Mo(t,e,n){var r=!1,i=sn,o=e.contextType;return typeof o=="object"&&o!==null?o=Re(o):(i=he(e)?_n:ne.current,r=e.contextTypes,o=(r=r!=null)?Mn(t,i):sn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Lo(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ei.enqueueReplaceState(e,e.state,null)}function Is(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ps(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Re(o):(o=he(e)?_n:ne.current,i.context=Mn(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ds(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ei.enqueueReplaceState(i,i.state,null),vi(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bn(t,e){try{var n="",r=e;do n+=Hh(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Us(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zs(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jh=typeof WeakMap=="function"?WeakMap:Map;function bo(t,e,n){n=Qe(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ui||(Ui=!0,aa=r),zs(t,e)},n}function Oo(t,e,n){n=Qe(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zs(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){zs(t,e),typeof r!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var N=e.stack;this.componentDidCatch(e.value,{componentStack:N!==null?N:""})}),n}function Go(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jh;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cc.bind(null,t,e,n),e.then(t,t))}function Do(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Io(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qe(-1,1),e.tag=2,on(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var Zh=h.ReactCurrentOwner,ce=!1;function oe(t,e,n,r){e.child=t===null?no(e,null,n,r):Gn(e,t.child,n,r)}function Uo(t,e,n,r,i){n=n.render;var o=e.ref;return In(e,i),r=As(t,e,n,r,o,i),n=Ms(),t!==null&&!ce?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Je(t,e,i)):(Mt&&n&&gs(e),e.flags|=1,oe(t,e,r,i),e.child)}function zo(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!da(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Bo(t,e,o,r,i)):(t=qi(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,(t.lanes&i)===0){var N=o.memoizedProps;if(n=n.compare,n=n!==null?n:fi,n(N,r)&&t.ref===e.ref)return Je(t,e,i)}return e.flags|=1,t=dn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Bo(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(fi(o,r)&&t.ref===e.ref)if(ce=!1,e.pendingProps=r=o,(t.lanes&i)!==0)(t.flags&131072)!==0&&(ce=!0);else return e.lanes=t.lanes,Je(t,e,i)}return Bs(t,e,n,r,i)}function Vo(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Hn,Ce),Ce|=n;else{if((n&1073741824)===0)return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(Hn,Ce),Ce|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Nt(Hn,Ce),Ce|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Nt(Hn,Ce),Ce|=r;return oe(t,e,i,n),e.child}function Ho(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bs(t,e,n,r,i){var o=he(n)?_n:ne.current;return o=Mn(e,o),In(e,i),n=As(t,e,n,r,o,i),r=Ms(),t!==null&&!ce?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Je(t,e,i)):(Mt&&r&&gs(e),e.flags|=1,oe(t,e,n,i),e.child)}function Wo(t,e,n,r,i){if(he(n)){var o=!0;ii(e)}else o=!1;if(In(e,i),e.stateNode===null)ki(t,e),Mo(e,n,r),Is(e,n,r,i),r=!0;else if(t===null){var N=e.stateNode,H=e.memoizedProps;N.props=H;var Q=N.context,nt=n.contextType;typeof nt=="object"&&nt!==null?nt=Re(nt):(nt=he(n)?_n:ne.current,nt=Mn(e,nt));var ht=n.getDerivedStateFromProps,pt=typeof ht=="function"||typeof N.getSnapshotBeforeUpdate=="function";pt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(H!==r||Q!==nt)&&Lo(e,N,r,nt),an=!1;var ot=e.memoizedState;N.state=ot,vi(e,r,N,i),Q=e.memoizedState,H!==r||ot!==Q||ue.current||an?(typeof ht=="function"&&(Ds(e,n,ht,r),Q=e.memoizedState),(H=an||Ao(e,n,H,r,ot,Q,nt))?(pt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(e.flags|=4194308)):(typeof N.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=Q),N.props=r,N.state=Q,N.context=nt,r=H):(typeof N.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{N=e.stateNode,so(t,e),H=e.memoizedProps,nt=e.type===e.elementType?H:be(e.type,H),N.props=nt,pt=e.pendingProps,ot=N.context,Q=n.contextType,typeof Q=="object"&&Q!==null?Q=Re(Q):(Q=he(n)?_n:ne.current,Q=Mn(e,Q));var At=n.getDerivedStateFromProps;(ht=typeof At=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(H!==pt||ot!==Q)&&Lo(e,N,r,Q),an=!1,ot=e.memoizedState,N.state=ot,vi(e,r,N,i);var kt=e.memoizedState;H!==pt||ot!==kt||ue.current||an?(typeof At=="function"&&(Ds(e,n,At,r),kt=e.memoizedState),(nt=an||Ao(e,n,nt,r,ot,kt,Q)||!1)?(ht||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(r,kt,Q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(r,kt,Q)),typeof N.componentDidUpdate=="function"&&(e.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof N.componentDidUpdate!="function"||H===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=kt),N.props=r,N.state=kt,N.context=Q,r=nt):(typeof N.componentDidUpdate!="function"||H===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),r=!1)}return Vs(t,e,n,r,o,i)}function Vs(t,e,n,r,i,o){Ho(t,e);var N=(e.flags&128)!==0;if(!r&&!N)return i&&Wa(e,n,!1),Je(t,e,o);r=e.stateNode,Zh.current=e;var H=N&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&N?(e.child=Gn(e,t.child,null,o),e.child=Gn(e,null,H,o)):oe(t,e,H,o),e.memoizedState=r.state,i&&Wa(e,n,!0),e.child}function qo(t){var e=t.stateNode;e.pendingContext?Va(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Va(t,e.context,!1),Es(t,e.containerInfo)}function jo(t,e,n,r,i){return On(),vs(i),e.flags|=256,oe(t,e,n,r),e.child}var Hs={dehydrated:null,treeContext:null,retryLane:0};function Ws(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ko(t,e,n){var r=e.pendingProps,i=Ot.current,o=!1,N=(e.flags&128)!==0,H;if((H=N)||(H=t!==null&&t.memoizedState===null?!1:(i&2)!==0),H?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Nt(Ot,i&1),t===null)return ys(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:ns(t)?e.lanes=8:e.lanes=1073741824,null):(N=r.children,t=r.fallback,o?(r=e.mode,o=e.child,N={mode:"hidden",children:N},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=N):o=ji(N,r,0,null),t=Tn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ws(n),e.memoizedState=Hs,t):qs(e,N));if(i=t.memoizedState,i!==null&&(H=i.dehydrated,H!==null))return $h(t,e,N,r,H,i,n);if(o){o=r.fallback,N=e.mode,i=t.child,H=i.sibling;var Q={mode:"hidden",children:r.children};return(N&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=Q,e.deletions=null):(r=dn(i,Q),r.subtreeFlags=i.subtreeFlags&14680064),H!==null?o=dn(H,o):(o=Tn(o,N,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,N=t.child.memoizedState,N=N===null?Ws(n):{baseLanes:N.baseLanes|n,cachePool:null,transitions:N.transitions},o.memoizedState=N,o.childLanes=t.childLanes&~n,e.memoizedState=Hs,r}return o=t.child,t=o.sibling,r=dn(o,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qs(t,e){return e=ji({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ri(t,e,n,r){return r!==null&&vs(r),Gn(e,t.child,null,n),t=qs(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $h(t,e,n,r,i,o,N){if(n)return e.flags&256?(e.flags&=-257,r=Us(Error(a(422))),Ri(t,e,N,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ji({mode:"visible",children:r.children},i,0,null),o=Tn(o,i,N,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,(e.mode&1)!==0&&Gn(e,t.child,null,N),e.child.memoizedState=Ws(N),e.memoizedState=Hs,o);if((e.mode&1)===0)return Ri(t,e,N,null);if(ns(i))return r=dh(i).digest,o=Error(a(419)),r=Us(o,r,void 0),Ri(t,e,N,r);if(n=(N&t.childLanes)!==0,ce||n){if(r=Kt,r!==null){switch(N&-N){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|N))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ze(t,i),Ne(r,t,i,-1))}return ca(),r=Us(Error(a(421))),Ri(t,e,N,r)}return Ba(i)?(e.flags|=128,e.child=t.child,e=dc.bind(null,t),fh(i,e),null):(t=o.treeContext,ct&&(Ee=mh(i),Se=e,Mt=!0,Le=null,Qn=!1,t!==null&&(xe[Pe++]=Ye,xe[Pe++]=Xe,xe[Pe++]=Sn,Ye=t.id,Xe=t.overflow,Sn=e)),e=qs(e,r.children),e.flags|=4096,e)}function Yo(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ws(t.return,e,n)}function js(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Xo(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(oe(t,e,r.children,n),r=Ot.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yo(t,n,e);else if(t.tag===19)Yo(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Nt(Ot,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_i(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),js(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_i(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}js(e,!0,n,null,o);break;case"together":js(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ki(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Je(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pn|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(a(153));if(e.child!==null){for(t=e.child,n=dn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tc(t,e,n){switch(e.tag){case 3:qo(e),On();break;case 5:lo(e);break;case 1:he(e.type)&&ii(e);break;case 4:Es(e,e.stateNode.containerInfo);break;case 10:ro(e,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Nt(Ot,Ot.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Ko(t,e,n):(Nt(Ot,Ot.current&1),t=Je(t,e,n),t!==null?t.sibling:null);Nt(Ot,Ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return Xo(t,e,n);e.flags|=128}var i=e.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nt(Ot,Ot.current),r)break;return null;case 22:case 23:return e.lanes=0,Vo(t,e,n)}return Je(t,e,n)}function He(t){t.flags|=4}function Qo(t,e){if(t!==null&&t.child===e.child)return!0;if((e.flags&16)!==0)return!1;for(t=e.child;t!==null;){if((t.flags&12854)!==0||(t.subtreeFlags&12854)!==0)return!1;t=t.sibling}return!0}var ir,sr,Ti,Ni;if(at)ir=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)Z(t,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sr=function(){},Ti=function(t,e,n,r,i){if(t=t.memoizedProps,t!==r){var o=e.stateNode,N=Be(ke.current);n=tt(o,n,t,r,i,N),(e.updateQueue=n)&&He(e)}},Ni=function(t,e,n,r){n!==r&&He(e)};else if(ft){ir=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var o=i.stateNode;n&&r&&(o=Ua(o,i.type,i.memoizedProps,i)),Z(t,o)}else if(i.tag===6)o=i.stateNode,n&&r&&(o=za(o,i.memoizedProps,i)),Z(t,o);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)o=i.child,o!==null&&(o.return=i),ir(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Jo=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var o=i.stateNode;n&&r&&(o=Ua(o,i.type,i.memoizedProps,i)),Ia(t,o)}else if(i.tag===6)o=i.stateNode,n&&r&&(o=za(o,i.memoizedProps,i)),Ia(t,o);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)o=i.child,o!==null&&(o.return=i),Jo(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};sr=function(t,e){var n=e.stateNode;if(!Qo(t,e)){t=n.containerInfo;var r=Da(t);Jo(r,e,!1,!1),n.pendingChildren=r,He(e),lh(t,r)}},Ti=function(t,e,n,r,i){var o=t.stateNode,N=t.memoizedProps;if((t=Qo(t,e))&&N===r)e.stateNode=o;else{var H=e.stateNode,Q=Be(ke.current),nt=null;N!==r&&(nt=tt(H,n,N,r,i,Q)),t&&nt===null?e.stateNode=o:(o=oh(o,nt,n,N,r,e,t,H),W(o,n,r,i,Q)&&He(e),e.stateNode=o,t?He(e):ir(o,e,!1,!1))}},Ni=function(t,e,n,r){n!==r?(t=Be(Un.current),n=Be(ke.current),e.stateNode=J(r,t,n,e),He(e)):e.stateNode=t.stateNode}}else sr=function(){},Ti=function(){},Ni=function(){};function ar(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ec(t,e,n){var r=e.pendingProps;switch(ps(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(e),null;case 1:return he(e.type)&&ri(),ie(e),null;case 3:return n=e.stateNode,zn(),Ft(ue),Ft(ne),Ts(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(di(e)?He(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Le!==null&&(ua(Le),Le=null))),sr(t,e),ie(e),null;case 5:Rs(e),n=Be(Un.current);var i=e.type;if(t!==null&&e.stateNode!=null)Ti(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(a(166));return ie(e),null}if(t=Be(ke.current),di(e)){if(!ct)throw Error(a(175));t=yh(e.stateNode,e.type,e.memoizedProps,n,t,e,!Qn),e.updateQueue=t,t!==null&&He(e)}else{var o=U(i,r,n,t,e);ir(o,e,!1,!1),e.stateNode=o,W(o,i,r,n,t)&&He(e)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ie(e),null;case 6:if(t&&e.stateNode!=null)Ni(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(a(166));if(t=Be(Un.current),n=Be(ke.current),di(e)){if(!ct)throw Error(a(176));if(t=e.stateNode,n=e.memoizedProps,(r=vh(t,n,e,!Qn))&&(i=Se,i!==null))switch(i.tag){case 3:Rh(i.stateNode.containerInfo,t,n,(i.mode&1)!==0);break;case 5:kh(i.type,i.memoizedProps,i.stateNode,t,n,(i.mode&1)!==0)}r&&He(e)}else e.stateNode=J(r,t,n,e)}return ie(e),null;case 13:if(Ft(Ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&Ee!==null&&(e.mode&1)!==0&&(e.flags&128)===0)$a(),On(),e.flags|=98560,i=!1;else if(i=di(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(a(318));if(!ct)throw Error(a(344));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));_h(i,e)}else On(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ie(e),i=!1}else Le!==null&&(ua(Le),Le=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(n=r!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ot.current&1)!==0?Ht===0&&(Ht=3):ca())),e.updateQueue!==null&&(e.flags|=4),ie(e),null);case 4:return zn(),sr(t,e),t===null&&gt(e.stateNode.containerInfo),ie(e),null;case 10:return Cs(e.type._context),ie(e),null;case 17:return he(e.type)&&ri(),ie(e),null;case 19:if(Ft(Ot),i=e.memoizedState,i===null)return ie(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ar(i,!1);else{if(Ht!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=_i(t),o!==null){for(e.flags|=128,ar(i,!1),t=o.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,n=e.child;n!==null;)r=n,i=t,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Nt(Ot,Ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&qt()>sa&&(e.flags|=128,r=!0,ar(i,!1),e.lanes=4194304)}else{if(!r)if(t=_i(o),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ar(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Mt)return ie(e),null}else 2*qt()-i.renderingStartTime>sa&&n!==1073741824&&(e.flags|=128,r=!0,ar(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qt(),e.sibling=null,t=Ot.current,Nt(Ot,r?t&1|2:t&1),e):(ie(e),null);case 22:case 23:return ha(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(Ce&1073741824)!==0&&(ie(e),at&&e.subtreeFlags&6&&(e.flags|=8192)):ie(e),null;case 24:return null;case 25:return null}throw Error(a(156,e.tag))}function nc(t,e){switch(ps(e),e.tag){case 1:return he(e.type)&&ri(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zn(),Ft(ue),Ft(ne),Ts(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Rs(e),null;case 13:if(Ft(Ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(a(340));On()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Ot),null;case 4:return zn(),null;case 10:return Cs(e.type._context),null;case 22:case 23:return ha(),null;case 24:return null;default:return null}}var Fi=!1,se=!1,rc=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Vn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Lt(t,e,r)}else n.current=null}function Ks(t,e,n){try{n()}catch(r){Lt(t,e,r)}}var Zo=!1;function ic(t,e){for(D(t.containerInfo),ut=e;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){t=ut;try{var n=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,o=t.stateNode,N=o.getSnapshotBeforeUpdate(t.elementType===t.type?r:be(t.type,r),i);o.__reactInternalSnapshotBeforeUpdate=N}break;case 3:at&&ah(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(H){Lt(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}return n=Zo,Zo=!1,n}function or(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ks(e,n,o)}i=i.next}while(i!==r)}}function Ai(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ys(t){var e=t.ref;if(e!==null){var n=t.stateNode;t.tag===5?t=et(n):t=n,typeof e=="function"?e(t):e.current=t}}function $o(t){var e=t.alternate;e!==null&&(t.alternate=null,$o(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Rt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tl(t){return t.tag===5||t.tag===3||t.tag===4}function el(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||tl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?Fn(n,t,e):we(n,t);else if(r!==4&&(t=t.child,t!==null))for(Xs(t,e,n),t=t.sibling;t!==null;)Xs(t,e,n),t=t.sibling}function Qs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?ei(n,t,e):_e(n,t);else if(r!==4&&(t=t.child,t!==null))for(Qs(t,e,n),t=t.sibling;t!==null;)Qs(t,e,n),t=t.sibling}var Qt=null,Oe=!1;function We(t,e,n){for(n=n.child;n!==null;)Js(t,e,n),n=n.sibling}function Js(t,e,n){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(li,n)}catch{}switch(n.tag){case 5:se||Vn(n,e);case 6:if(at){var r=Qt,i=Oe;Qt=null,We(t,e,n),Qt=r,Oe=i,Qt!==null&&(Oe?ts(Qt,n.stateNode):$i(Qt,n.stateNode))}else We(t,e,n);break;case 18:at&&Qt!==null&&(Oe?Ph(Qt,n.stateNode):xh(Qt,n.stateNode));break;case 4:at?(r=Qt,i=Oe,Qt=n.stateNode.containerInfo,Oe=!0,We(t,e,n),Qt=r,Oe=i):(ft&&(r=n.stateNode.containerInfo,i=Da(r),es(r,i)),We(t,e,n));break;case 0:case 11:case 14:case 15:if(!se&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,N=o.destroy;o=o.tag,N!==void 0&&((o&2)!==0||(o&4)!==0)&&Ks(n,e,N),i=i.next}while(i!==r)}We(t,e,n);break;case 1:if(!se&&(Vn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(H){Lt(n,e,H)}We(t,e,n);break;case 21:We(t,e,n);break;case 22:n.mode&1?(se=(r=se)||n.memoizedState!==null,We(t,e,n),se=r):We(t,e,n);break;default:We(t,e,n)}}function nl(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rc),e.forEach(function(r){var i=fc.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ge(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,N=e;if(at){var H=N;t:for(;H!==null;){switch(H.tag){case 5:Qt=H.stateNode,Oe=!1;break t;case 3:Qt=H.stateNode.containerInfo,Oe=!0;break t;case 4:Qt=H.stateNode.containerInfo,Oe=!0;break t}H=H.return}if(Qt===null)throw Error(a(160));Js(o,N,i),Qt=null,Oe=!1}else Js(o,N,i);var Q=i.alternate;Q!==null&&(Q.return=null),i.return=null}catch(nt){Lt(i,e,nt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rl(e,t),e=e.sibling}function rl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),qe(t),r&4){try{or(3,t,t.return),Ai(3,t)}catch(ot){Lt(t,t.return,ot)}try{or(5,t,t.return)}catch(ot){Lt(t,t.return,ot)}}break;case 1:Ge(e,t),qe(t),r&512&&n!==null&&Vn(n,n.return);break;case 5:if(Ge(e,t),qe(t),r&512&&n!==null&&Vn(n,n.return),at){if(t.flags&32){var i=t.stateNode;try{Ga(i)}catch(ot){Lt(t,t.return,ot)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps;if(n=n!==null?n.memoizedProps:o,r=t.type,e=t.updateQueue,t.updateQueue=null,e!==null)try{vn(i,e,r,n,o,t)}catch(ot){Lt(t,t.return,ot)}}}break;case 6:if(Ge(e,t),qe(t),r&4&&at){if(t.stateNode===null)throw Error(a(162));i=t.stateNode,o=t.memoizedProps,n=n!==null?n.memoizedProps:o;try{te(i,n,o)}catch(ot){Lt(t,t.return,ot)}}break;case 3:if(Ge(e,t),qe(t),r&4){if(at&&ct&&n!==null&&n.memoizedState.isDehydrated)try{Ch(e.containerInfo)}catch(ot){Lt(t,t.return,ot)}if(ft){i=e.containerInfo,o=e.pendingChildren;try{es(i,o)}catch(ot){Lt(t,t.return,ot)}}}break;case 4:if(Ge(e,t),qe(t),r&4&&ft){o=t.stateNode,i=o.containerInfo,o=o.pendingChildren;try{es(i,o)}catch(ot){Lt(t,t.return,ot)}}break;case 13:Ge(e,t),qe(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ia=qt())),r&4&&nl(t);break;case 22:var N=n!==null&&n.memoizedState!==null;if(t.mode&1?(se=(n=se)||N,Ge(e,t),se=n):Ge(e,t),qe(t),r&8192){if(n=t.memoizedState!==null,(t.stateNode.isHidden=n)&&!N&&(t.mode&1)!==0)for(ut=t,r=t.child;r!==null;){for(e=ut=r;ut!==null;){N=ut;var H=N.child;switch(N.tag){case 0:case 11:case 14:case 15:or(4,N,N.return);break;case 1:Vn(N,N.return);var Q=N.stateNode;if(typeof Q.componentWillUnmount=="function"){var nt=N,ht=N.return;try{var pt=nt;Q.props=pt.memoizedProps,Q.state=pt.memoizedState,Q.componentWillUnmount()}catch(ot){Lt(nt,ht,ot)}}break;case 5:Vn(N,N.return);break;case 22:if(N.memoizedState!==null){al(e);continue}}H!==null?(H.return=N,ut=H):al(e)}r=r.sibling}if(at){t:if(r=null,at)for(e=t;;){if(e.tag===5){if(r===null){r=e;try{i=e.stateNode,n?nh(i):ih(e.stateNode,e.memoizedProps)}catch(ot){Lt(t,t.return,ot)}}}else if(e.tag===6){if(r===null)try{o=e.stateNode,n?rh(o):sh(o,e.memoizedProps)}catch(ot){Lt(t,t.return,ot)}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}}}break;case 19:Ge(e,t),qe(t),r&4&&nl(t);break;case 21:break;default:Ge(e,t),qe(t)}}function qe(t){var e=t.flags;if(e&2){try{if(at){t:{for(var n=t.return;n!==null;){if(tl(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ga(i),r.flags&=-33);var o=el(t);Qs(t,o,i);break;case 3:case 4:var N=r.stateNode.containerInfo,H=el(t);Xs(t,H,N);break;default:throw Error(a(161))}}}catch(Q){Lt(t,t.return,Q)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sc(t,e,n){ut=t,il(t)}function il(t,e,n){for(var r=(t.mode&1)!==0;ut!==null;){var i=ut,o=i.child;if(i.tag===22&&r){var N=i.memoizedState!==null||Fi;if(!N){var H=i.alternate,Q=H!==null&&H.memoizedState!==null||se;H=Fi;var nt=se;if(Fi=N,(se=Q)&&!nt)for(ut=i;ut!==null;)N=ut,Q=N.child,N.tag===22&&N.memoizedState!==null?ol(i):Q!==null?(Q.return=N,ut=Q):ol(i);for(;o!==null;)ut=o,il(o),o=o.sibling;ut=i,Fi=H,se=nt}sl(t)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,ut=o):sl(t)}}function sl(t){for(;ut!==null;){var e=ut;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:se||Ai(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!se)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:be(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&oo(e,o,r);break;case 3:var N=e.updateQueue;if(N!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=et(e.child.stateNode);break;case 1:n=e.child.stateNode}oo(e,N,n)}break;case 5:var H=e.stateNode;n===null&&e.flags&4&&ee(H,e.type,e.memoizedProps,e);break;case 6:break;case 4:break;case 12:break;case 13:if(ct&&e.memoizedState===null){var Q=e.alternate;if(Q!==null){var nt=Q.memoizedState;if(nt!==null){var ht=nt.dehydrated;ht!==null&&wh(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}se||e.flags&512&&Ys(e)}catch(pt){Lt(e,e.return,pt)}}if(e===t){ut=null;break}if(n=e.sibling,n!==null){n.return=e.return,ut=n;break}ut=e.return}}function al(t){for(;ut!==null;){var e=ut;if(e===t){ut=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ut=n;break}ut=e.return}}function ol(t){for(;ut!==null;){var e=ut;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ai(4,e)}catch(Q){Lt(e,n,Q)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(Q){Lt(e,i,Q)}}var o=e.return;try{Ys(e)}catch(Q){Lt(e,o,Q)}break;case 5:var N=e.return;try{Ys(e)}catch(Q){Lt(e,N,Q)}}}catch(Q){Lt(e,e.return,Q)}if(e===t){ut=null;break}var H=e.sibling;if(H!==null){H.return=e.return,ut=H;break}ut=e.return}}var Mi=0,Li=1,bi=2,Oi=3,Gi=4;if(typeof Symbol=="function"&&Symbol.for){var lr=Symbol.for;Mi=lr("selector.component"),Li=lr("selector.has_pseudo_class"),bi=lr("selector.role"),Oi=lr("selector.test_id"),Gi=lr("selector.text")}function Zs(t){var e=Et(t);if(e!=null){if(typeof e.memoizedProps["data-testname"]!="string")throw Error(a(364));return e}if(t=yn(t),t===null)throw Error(a(362));return t.stateNode.current}function $s(t,e){switch(e.$$typeof){case Mi:if(t.type===e.value)return!0;break;case Li:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],o=e[i];if(r.tag!==5||!Zt(r)){for(;o!=null&&$s(r,o);)i++,o=e[i];if(i===e.length){e=!0;break t}else for(r=r.child;r!==null;)t.push(r,i),r=r.sibling}}e=!1}return e;case bi:if(t.tag===5&&je(t.stateNode,e.value))return!0;break;case Gi:if((t.tag===5||t.tag===6)&&(t=ve(t),t!==null&&0<=t.indexOf(e.value)))return!0;break;case Oi:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ta(t){switch(t.$$typeof){case Mi:return"<"+(z(t.value)||"Unknown")+">";case Li:return":has("+(ta(t)||"")+")";case bi:return'[role="'+t.value+'"]';case Gi:return'"'+t.value+'"';case Oi:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function ll(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],o=t[r++],N=e[o];if(i.tag!==5||!Zt(i)){for(;N!=null&&$s(i,N);)o++,N=e[o];if(o===e.length)n.push(i);else for(i=i.child;i!==null;)t.push(i,o),i=i.sibling}}return n}function ea(t,e){if(!Wt)throw Error(a(363));t=Zs(t),t=ll(t,e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(r.tag===5)Zt(r)||e.push(r.stateNode);else for(r=r.child;r!==null;)t.push(r),r=r.sibling}return e}var ac=Math.ceil,Di=h.ReactCurrentDispatcher,na=h.ReactCurrentOwner,It=h.ReactCurrentBatchConfig,_t=0,Kt=null,zt=null,Jt=0,Ce=0,Hn=rn(0),Ht=0,ur=null,Pn=0,Ii=0,ra=0,hr=null,de=null,ia=0,sa=1/0,Ze=null;function Wn(){sa=qt()+500}var Ui=!1,aa=null,ln=null,zi=!1,un=null,Bi=0,cr=0,oa=null,Vi=-1,Hi=0;function ae(){return(_t&6)!==0?qt():Vi!==-1?Vi:Vi=qt()}function hn(t){return(t.mode&1)===0?1:(_t&2)!==0&&Jt!==0?Jt&-Jt:Vh.transition!==null?(Hi===0&&(Hi=qa()),Hi):(t=wt,t!==0?t:Bt())}function Ne(t,e,n,r){if(50<cr)throw cr=0,oa=null,Error(a(185));Xn(t,n,r),((_t&2)===0||t!==Kt)&&(t===Kt&&((_t&2)===0&&(Ii|=n),Ht===4&&cn(t,Jt)),fe(t,r),n===1&&_t===0&&(e.mode&1)===0&&(Wn(),ui&&Ue()))}function fe(t,e){var n=t.callbackNode;Lh(t,e);var r=oi(t,t===Kt?Jt:0);if(r===0)n!==null&&Ka(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ka(n),e===1)t.tag===0?Bh(hl.bind(null,t)):Ya(hl.bind(null,t)),bt?nn(function(){(_t&6)===0&&Ue()}):hs(cs,Ue),n=null;else{switch(ja(r)){case 1:n=cs;break;case 4:n=Dh;break;case 16:n=ds;break;case 536870912:n=Ih;break;default:n=ds}n=_l(n,ul.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ul(t,e){if(Vi=-1,Hi=0,(_t&6)!==0)throw Error(a(327));var n=t.callbackNode;if(kn()&&t.callbackNode!==n)return null;var r=oi(t,t===Kt?Jt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Wi(t,r);else{e=r;var i=_t;_t|=2;var o=fl();(Kt!==t||Jt!==e)&&(Ze=null,Wn(),En(t,e));do try{uc();break}catch(H){dl(t,H)}while(!0);Ss(),Di.current=o,_t=i,zt!==null?e=0:(Kt=null,Jt=0,e=Ht)}if(e!==0){if(e===2&&(i=os(t),i!==0&&(r=i,e=la(t,i))),e===1)throw n=ur,En(t,0),cn(t,r),fe(t,qt()),n;if(e===6)cn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!oc(i)&&(e=Wi(t,r),e===2&&(o=os(t),o!==0&&(r=o,e=la(t,o))),e===1))throw n=ur,En(t,0),cn(t,r),fe(t,qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:Rn(t,de,Ze);break;case 3:if(cn(t,r),(r&130023424)===r&&(e=ia+500-qt(),10<e)){if(oi(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ae(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=G(Rn.bind(null,t,de,Ze),e);break}Rn(t,de,Ze);break;case 4:if(cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var N=31-Ae(r);o=1<<N,N=e[N],N>i&&(i=N),r&=~o}if(r=i,r=qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ac(r/1960))-r,10<r){t.timeoutHandle=G(Rn.bind(null,t,de,Ze),r);break}Rn(t,de,Ze);break;case 5:Rn(t,de,Ze);break;default:throw Error(a(329))}}}return fe(t,qt()),t.callbackNode===n?ul.bind(null,t):null}function la(t,e){var n=hr;return t.current.memoizedState.isDehydrated&&(En(t,e).flags|=256),t=Wi(t,e),t!==2&&(e=de,de=n,e!==null&&ua(e)),t}function ua(t){de===null?de=t:de.push.apply(de,t)}function oc(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Me(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cn(t,e){for(e&=~ra,e&=~Ii,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ae(e),r=1<<n;t[n]=-1,e&=~r}}function hl(t){if((_t&6)!==0)throw Error(a(327));kn();var e=oi(t,0);if((e&1)===0)return fe(t,qt()),null;var n=Wi(t,e);if(t.tag!==0&&n===2){var r=os(t);r!==0&&(e=r,n=la(t,r))}if(n===1)throw n=ur,En(t,0),cn(t,e),fe(t,qt()),n;if(n===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,de,Ze),fe(t,qt()),null}function cl(t){un!==null&&un.tag===0&&(_t&6)===0&&kn();var e=_t;_t|=1;var n=It.transition,r=wt;try{if(It.transition=null,wt=1,t)return t()}finally{wt=r,It.transition=n,_t=e,(_t&6)===0&&Ue()}}function ha(){Ce=Hn.current,Ft(Hn)}function En(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==rt&&(t.timeoutHandle=rt,Y(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(ps(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ri();break;case 3:zn(),Ft(ue),Ft(ne),Ts();break;case 5:Rs(r);break;case 4:zn();break;case 13:Ft(Ot);break;case 19:Ft(Ot);break;case 10:Cs(r.type._context);break;case 22:case 23:ha()}n=n.return}if(Kt=t,zt=t=dn(t.current,null),Jt=Ce=e,Ht=0,ur=null,ra=Ii=Pn=0,de=hr=null,wn!==null){for(e=0;e<wn.length;e++)if(n=wn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var N=o.next;o.next=i,r.next=N}n.pending=r}wn=null}return t}function dl(t,e){do{var n=zt;try{if(Ss(),Si.current=Pi,Ci){for(var r=Gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ci=!1}if(xn=0,jt=Vt=Gt=null,tr=!1,er=0,na.current=null,n===null||n.return===null){Ht=1,ur=e,zt=null;break}t:{var o=t,N=n.return,H=n,Q=e;if(e=Jt,H.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var nt=Q,ht=H,pt=ht.tag;if((ht.mode&1)===0&&(pt===0||pt===11||pt===15)){var ot=ht.alternate;ot?(ht.updateQueue=ot.updateQueue,ht.memoizedState=ot.memoizedState,ht.lanes=ot.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var At=Do(N);if(At!==null){At.flags&=-257,Io(At,N,H,o,e),At.mode&1&&Go(o,nt,e),e=At,Q=nt;var kt=e.updateQueue;if(kt===null){var ge=new Set;ge.add(Q),e.updateQueue=ge}else kt.add(Q);break t}else{if((e&1)===0){Go(o,nt,e),ca();break t}Q=Error(a(426))}}else if(Mt&&H.mode&1){var $e=Do(N);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),Io($e,N,H,o,e),vs(Bn(Q,H));break t}}o=Q=Bn(Q,H),Ht!==4&&(Ht=2),hr===null?hr=[o]:hr.push(o),o=N;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var X=bo(o,Q,e);ao(o,X);break t;case 1:H=Q;var q=o.type,$=o.stateNode;if((o.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(ln===null||!ln.has($)))){o.flags|=65536,e&=-e,o.lanes|=e;var lt=Oo(o,H,e);ao(o,lt);break t}}o=o.return}while(o!==null)}pl(n)}catch(dt){e=dt,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function fl(){var t=Di.current;return Di.current=Pi,t===null?Pi:t}function ca(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Kt===null||(Pn&268435455)===0&&(Ii&268435455)===0||cn(Kt,Jt)}function Wi(t,e){var n=_t;_t|=2;var r=fl();(Kt!==t||Jt!==e)&&(Ze=null,En(t,e));do try{lc();break}catch(i){dl(t,i)}while(!0);if(Ss(),_t=n,Di.current=r,zt!==null)throw Error(a(261));return Kt=null,Jt=0,Ht}function lc(){for(;zt!==null;)gl(zt)}function uc(){for(;zt!==null&&!Oh();)gl(zt)}function gl(t){var e=vl(t.alternate,t,Ce);t.memoizedProps=t.pendingProps,e===null?pl(t):zt=e,na.current=null}function pl(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=ec(n,e,Ce),n!==null){zt=n;return}}else{if(n=nc(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,zt=null;return}}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Ht===0&&(Ht=5)}function Rn(t,e,n){var r=wt,i=It.transition;try{It.transition=null,wt=1,hc(t,e,n,r)}finally{It.transition=i,wt=r}return null}function hc(t,e,n,r){do kn();while(un!==null);if((_t&6)!==0)throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bh(t,o),t===Kt&&(zt=Kt=null,Jt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||zi||(zi=!0,_l(ds,function(){return kn(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=It.transition,It.transition=null;var N=wt;wt=1;var H=_t;_t|=4,na.current=null,ic(t,n),rl(n,t),O(t.containerInfo),t.current=n,sc(n),Gh(),_t=H,wt=N,It.transition=o}else t.current=n;if(zi&&(zi=!1,un=t,Bi=i),o=t.pendingLanes,o===0&&(ln=null),Uh(n.stateNode),fe(t,qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ui)throw Ui=!1,t=aa,aa=null,t;return(Bi&1)!==0&&t.tag!==0&&kn(),o=t.pendingLanes,(o&1)!==0?t===oa?cr++:(cr=0,oa=t):cr=0,Ue(),null}function kn(){if(un!==null){var t=ja(Bi),e=It.transition,n=wt;try{if(It.transition=null,wt=16>t?16:t,un===null)var r=!1;else{if(t=un,un=null,Bi=0,(_t&6)!==0)throw Error(a(331));var i=_t;for(_t|=4,ut=t.current;ut!==null;){var o=ut,N=o.child;if((ut.flags&16)!==0){var H=o.deletions;if(H!==null){for(var Q=0;Q<H.length;Q++){var nt=H[Q];for(ut=nt;ut!==null;){var ht=ut;switch(ht.tag){case 0:case 11:case 15:or(8,ht,o)}var pt=ht.child;if(pt!==null)pt.return=ht,ut=pt;else for(;ut!==null;){ht=ut;var ot=ht.sibling,At=ht.return;if($o(ht),ht===nt){ut=null;break}if(ot!==null){ot.return=At,ut=ot;break}ut=At}}}var kt=o.alternate;if(kt!==null){var ge=kt.child;if(ge!==null){kt.child=null;do{var $e=ge.sibling;ge.sibling=null,ge=$e}while(ge!==null)}}ut=o}}if((o.subtreeFlags&2064)!==0&&N!==null)N.return=o,ut=N;else t:for(;ut!==null;){if(o=ut,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:or(9,o,o.return)}var X=o.sibling;if(X!==null){X.return=o.return,ut=X;break t}ut=o.return}}var q=t.current;for(ut=q;ut!==null;){N=ut;var $=N.child;if((N.subtreeFlags&2064)!==0&&$!==null)$.return=N,ut=$;else t:for(N=q;ut!==null;){if(H=ut,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Ai(9,H)}}catch(dt){Lt(H,H.return,dt)}if(H===N){ut=null;break t}var lt=H.sibling;if(lt!==null){lt.return=H.return,ut=lt;break t}ut=H.return}}if(_t=i,Ue(),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(li,t)}catch{}r=!0}return r}finally{wt=n,It.transition=e}}return!1}function ml(t,e,n){e=Bn(n,e),e=bo(t,e,1),t=on(t,e,1),e=ae(),t!==null&&(Xn(t,1,e),fe(t,e))}function Lt(t,e,n){if(t.tag===3)ml(t,t,n);else for(;e!==null;){if(e.tag===3){ml(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ln===null||!ln.has(r))){t=Bn(n,t),t=Oo(e,t,1),e=on(e,t,1),t=ae(),e!==null&&(Xn(e,1,t),fe(e,t));break}}e=e.return}}function cc(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ae(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(Jt&n)===n&&(Ht===4||Ht===3&&(Jt&130023424)===Jt&&500>qt()-ia?En(t,0):ra|=n),fe(t,e)}function yl(t,e){e===0&&((t.mode&1)===0?e=1:(e=ai,ai<<=1,(ai&130023424)===0&&(ai=4194304)));var n=ae();t=ze(t,e),t!==null&&(Xn(t,e,n),fe(t,n))}function dc(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yl(t,n)}function fc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(e),yl(t,n)}var vl;vl=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ue.current)ce=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return ce=!1,tc(t,e,n);ce=(t.flags&131072)!==0}else ce=!1,Mt&&(e.flags&1048576)!==0&&Xa(e,ci,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ki(t,e),t=e.pendingProps;var i=Mn(e,ne.current);In(e,n),i=As(null,e,r,t,i,n);var o=Ms();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,he(r)?(o=!0,ii(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ps(e),i.updater=Ei,e.stateNode=i,i._reactInternals=e,Is(e,r,t,n),e=Vs(null,e,r,!0,o,n)):(e.tag=0,Mt&&o&&gs(e),oe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(ki(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pc(r),t=be(r,t),i){case 0:e=Bs(null,e,r,t,n);break t;case 1:e=Wo(null,e,r,t,n);break t;case 11:e=Uo(null,e,r,t,n);break t;case 14:e=zo(null,e,r,be(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:be(r,i),Bs(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:be(r,i),Wo(t,e,r,i,n);case 3:t:{if(qo(e),t===null)throw Error(a(387));r=e.pendingProps,o=e.memoizedState,i=o.element,so(t,e),vi(e,r,null,n);var N=e.memoizedState;if(r=N.element,ct&&o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Bn(Error(a(423)),e),e=jo(t,e,r,n,i);break t}else if(r!==i){i=Bn(Error(a(424)),e),e=jo(t,e,r,n,i);break t}else for(ct&&(Ee=ph(e.stateNode.containerInfo),Se=e,Mt=!0,Le=null,Qn=!1),n=no(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(On(),r===i){e=Je(t,e,n);break t}oe(t,e,r,n)}e=e.child}return e;case 5:return lo(e),t===null&&ys(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,N=i.children,it(r,i)?N=null:o!==null&&it(r,o)&&(e.flags|=32),Ho(t,e),oe(t,e,N,n),e.child;case 6:return t===null&&ys(e),null;case 13:return Ko(t,e,n);case 4:return Es(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gn(e,null,r,n):oe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:be(r,i),Uo(t,e,r,i,n);case 7:return oe(t,e,e.pendingProps,n),e.child;case 8:return oe(t,e,e.pendingProps.children,n),e.child;case 12:return oe(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,N=i.value,ro(e,r,N),o!==null)if(Me(o.value,N)){if(o.children===i.children&&!ue.current){e=Je(t,e,n);break t}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var H=o.dependencies;if(H!==null){N=o.child;for(var Q=H.firstContext;Q!==null;){if(Q.context===r){if(o.tag===1){Q=Qe(-1,n&-n),Q.tag=2;var nt=o.updateQueue;if(nt!==null){nt=nt.shared;var ht=nt.pending;ht===null?Q.next=Q:(Q.next=ht.next,ht.next=Q),nt.pending=Q}}o.lanes|=n,Q=o.alternate,Q!==null&&(Q.lanes|=n),ws(o.return,n,e),H.lanes|=n;break}Q=Q.next}}else if(o.tag===10)N=o.type===e.type?null:o.child;else if(o.tag===18){if(N=o.return,N===null)throw Error(a(341));N.lanes|=n,H=N.alternate,H!==null&&(H.lanes|=n),ws(N,n,e),N=o.sibling}else N=o.child;if(N!==null)N.return=o;else for(N=o;N!==null;){if(N===e){N=null;break}if(o=N.sibling,o!==null){o.return=N.return,N=o;break}N=N.return}o=N}oe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,In(e,n),i=Re(i),r=r(i),e.flags|=1,oe(t,e,r,n),e.child;case 14:return r=e.type,i=be(r,e.pendingProps),i=be(r.type,i),zo(t,e,r,i,n);case 15:return Bo(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:be(r,i),ki(t,e),e.tag=1,he(r)?(t=!0,ii(e)):t=!1,In(e,n),Mo(e,r,i),Is(e,r,i,n),Vs(null,e,r,!0,t,n);case 19:return Xo(t,e,n);case 22:return Vo(t,e,n)}throw Error(a(156,e.tag))};function _l(t,e){return hs(t,e)}function gc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(t,e,n,r){return new gc(t,e,n,r)}function da(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pc(t){if(typeof t=="function")return da(t)?1:0;if(t!=null){if(t=t.$$typeof,t===S)return 11;if(t===l)return 14}return 2}function dn(t,e){var n=t.alternate;return n===null?(n=Fe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qi(t,e,n,r,i,o){var N=2;if(r=t,typeof t=="function")da(t)&&(N=1);else if(typeof t=="string")N=5;else t:switch(t){case m:return Tn(n.children,i,o,e);case x:N=8,i|=8;break;case y:return t=Fe(12,n,e,i|2),t.elementType=y,t.lanes=o,t;case P:return t=Fe(13,n,e,i),t.elementType=P,t.lanes=o,t;case F:return t=Fe(19,n,e,i),t.elementType=F,t.lanes=o,t;case v:return ji(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u:N=10;break t;case c:N=9;break t;case S:N=11;break t;case l:N=14;break t;case s:N=16,r=null;break t}throw Error(a(130,t==null?t:typeof t,""))}return e=Fe(N,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Tn(t,e,n,r){return t=Fe(7,t,r,e),t.lanes=n,t}function ji(t,e,n,r){return t=Fe(22,t,r,e),t.elementType=v,t.lanes=n,t.stateNode={isHidden:!1},t}function fa(t,e,n){return t=Fe(6,t,null,e),t.lanes=n,t}function ga(t,e,n){return e=Fe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ls(0),this.expirationTimes=ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.identifierPrefix=r,this.onRecoverableError=i,ct&&(this.mutableSourceEagerHydrationData=null)}function Sl(t,e,n,r,i,o,N,H,Q){return t=new mc(t,e,n,H,Q),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(o),t}function Cl(t){if(!t)return sn;t=t._reactInternals;t:{if(R(t)!==t||t.tag!==1)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(he(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(a(171))}if(t.tag===1){var n=t.type;if(he(n))return Ha(t,n,e)}return e}function wl(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=B(e),t===null?null:t.stateNode}function xl(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ki(t,e){xl(t,e),(t=t.alternate)&&xl(t,e)}function yc(t){return t=B(t),t===null?null:t.stateNode}function vc(){return null}return L.attemptContinuousHydration=function(t){if(t.tag===13){var e=ze(t,134217728);if(e!==null){var n=ae();Ne(e,t,134217728,n)}Ki(t,134217728)}},L.attemptDiscreteHydration=function(t){if(t.tag===13){var e=ze(t,1);if(e!==null){var n=ae();Ne(e,t,1,n)}Ki(t,1)}},L.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var e=hn(t),n=ze(t,e);if(n!==null){var r=ae();Ne(n,t,e,r)}Ki(t,e)}},L.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yn(e.pendingLanes);n!==0&&(us(e,n|1),fe(e,qt()),(_t&6)===0&&(Wn(),Ue()))}break;case 13:cl(function(){var r=ze(t,1);if(r!==null){var i=ae();Ne(r,t,1,i)}}),Ki(t,1)}},L.batchedUpdates=function(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(Wn(),ui&&Ue())}},L.createComponentSelector=function(t){return{$$typeof:Mi,value:t}},L.createContainer=function(t,e,n,r,i,o,N){return Sl(t,e,!1,null,n,r,i,o,N)},L.createHasPseudoClassSelector=function(t){return{$$typeof:Li,value:t}},L.createHydrationContainer=function(t,e,n,r,i,o,N,H,Q){return t=Sl(n,r,!0,t,i,o,N,H,Q),t.context=Cl(null),n=t.current,r=ae(),i=hn(n),o=Qe(r,i),o.callback=e??null,on(n,o,i),t.current.lanes=i,Xn(t,i,r),fe(t,r),t},L.createPortal=function(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}},L.createRoleSelector=function(t){return{$$typeof:bi,value:t}},L.createTestNameSelector=function(t){return{$$typeof:Oi,value:t}},L.createTextSelector=function(t){return{$$typeof:Gi,value:t}},L.deferredUpdates=function(t){var e=wt,n=It.transition;try{return It.transition=null,wt=16,t()}finally{wt=e,It.transition=n}},L.discreteUpdates=function(t,e,n,r,i){var o=wt,N=It.transition;try{return It.transition=null,wt=1,t(e,n,r,i)}finally{wt=o,It.transition=N,_t===0&&Wn()}},L.findAllNodes=ea,L.findBoundingRects=function(t,e){if(!Wt)throw Error(a(363));e=ea(t,e),t=[];for(var n=0;n<e.length;n++)t.push(Tt(e[n]));for(e=t.length-1;0<e;e--){n=t[e];for(var r=n.x,i=r+n.width,o=n.y,N=o+n.height,H=e-1;0<=H;H--)if(e!==H){var Q=t[H],nt=Q.x,ht=nt+Q.width,pt=Q.y,ot=pt+Q.height;if(r>=nt&&o>=pt&&i<=ht&&N<=ot){t.splice(e,1);break}else if(r!==nt||n.width!==Q.width||ot<o||pt>N){if(!(o!==pt||n.height!==Q.height||ht<r||nt>i)){nt>r&&(Q.width+=nt-r,Q.x=r),ht<i&&(Q.width=i-nt),t.splice(e,1);break}}else{pt>o&&(Q.height+=pt-o,Q.y=o),ot<N&&(Q.height=N-pt),t.splice(e,1);break}}}return t},L.findHostInstance=wl,L.findHostInstanceWithNoPortals=function(t){return t=I(t),t=t!==null?K(t):null,t===null?null:t.stateNode},L.findHostInstanceWithWarning=function(t){return wl(t)},L.flushControlled=function(t){var e=_t;_t|=1;var n=It.transition,r=wt;try{It.transition=null,wt=1,t()}finally{wt=r,It.transition=n,_t=e,_t===0&&(Wn(),Ue())}},L.flushPassiveEffects=kn,L.flushSync=cl,L.focusWithin=function(t,e){if(!Wt)throw Error(a(363));for(t=Zs(t),e=ll(t,e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!Zt(n)){if(n.tag===5&&$t(n.stateNode))return!0;for(n=n.child;n!==null;)e.push(n),n=n.sibling}}return!1},L.getCurrentUpdatePriority=function(){return wt},L.getFindAllNodesFailureDescription=function(t,e){if(!Wt)throw Error(a(363));var n=0,r=[];t=[Zs(t),0];for(var i=0;i<t.length;){var o=t[i++],N=t[i++],H=e[N];if((o.tag!==5||!Zt(o))&&($s(o,H)&&(r.push(ta(H)),N++,N>n&&(n=N)),N<e.length))for(o=o.child;o!==null;)t.push(o,N),o=o.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(ta(e[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},L.getPublicRootInstance=function(t){return t=t.current,t.child?t.child.tag===5?et(t.child.stateNode):t.child.stateNode:null},L.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:yc,findFiberByHostInstance:t.findFiberByHostInstance||vc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{li=e.inject(t),Ie=e}catch{}t=!!e.checkDCE}}return t},L.isAlreadyRendering=function(){return!1},L.observeVisibleRects=function(t,e,n,r){if(!Wt)throw Error(a(363));t=ea(t,e);var i=De(t,n,r).disconnect;return{disconnect:function(){i()}}},L.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},L.runWithPriority=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}},L.shouldError=function(){return null},L.shouldSuspend=function(){return!1},L.updateContainer=function(t,e,n,r){var i=e.current,o=ae(),N=hn(i);return n=Cl(n),e.context===null?e.context=n:e.pendingContext=n,e=Qe(o,N),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=on(i,e,N),t!==null&&(Ne(t,i,N,o),yi(t,i,N)),N},L}),Ea}var Fu;function ud(){return Fu||(Fu=1,Pa.exports=ld()),Pa.exports}var hd=ud();const cd=Vu(hd);var Ra={exports:{}},pn={};var Au;function dd(){return Au||(Au=1,pn.ConcurrentRoot=1,pn.ContinuousEventPriority=4,pn.DefaultEventPriority=16,pn.DiscreteEventPriority=1,pn.IdleEventPriority=536870912,pn.LegacyRoot=0),pn}var Mu;function fd(){return Mu||(Mu=1,Ra.exports=dd()),Ra.exports}var Qu=fd(),gd=vt();const Lu={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let bu=!1,Ou=!1;const ba=".react-konva-event",pd=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,md=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,yd={};function Zi(d,f,L=yd){if(!bu&&"zIndex"in f&&(console.warn(md),bu=!0),!Ou&&f.draggable){var b=f.x!==void 0||f.y!==void 0,k=f.onDragEnd||f.onDragMove;b&&!k&&(console.warn(pd),Ou=!0)}for(var _ in L)if(!Lu[_]){var a=_.slice(0,2)==="on",h=L[_]!==f[_];if(a&&h){var g=_.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),d.off(g,L[_])}var p=!f.hasOwnProperty(_);p&&d.setAttr(_,void 0)}var m=f._useStrictMode,x={},y=!1;const u={};for(var _ in f)if(!Lu[_]){var a=_.slice(0,2)==="on",c=L[_]!==f[_];if(a&&c){var g=_.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),f[_]&&(u[g]=f[_])}!a&&(f[_]!==L[_]||m&&f[_]!==d.getAttr(_))&&(y=!0,x[_]=f[_])}y&&(d.setAttrs(x),mn(d));for(var g in u)d.on(g+ba,u[g])}function mn(d){if(!gd.Konva.autoDrawEnabled){var f=d.getLayer()||d.getStage();f&&f.batchDraw()}}var ka=Hu();const Ju={},vd={};ti.Node.prototype._applyProps=Zi;function _d(d,f){if(typeof f=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${f}`);return}d.add(f),mn(d)}function Sd(d,f,L){let b=ti[d];b||(console.error(`Konva has no node with the type ${d}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${d}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),b=ti.Group);const k={},_={};for(var a in f){var h=a.slice(0,2)==="on";h?_[a]=f[a]:k[a]=f[a]}const g=new b(k);return Zi(g,_),g}function Cd(d,f,L){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${d}"`)}function wd(d,f,L){return!1}function xd(d){return d}function Pd(){return null}function Ed(){return null}function Rd(d,f,L,b){return vd}function kd(){}function Td(d){}function Nd(d,f){return!1}function Fd(){return Ju}function Ad(){return Ju}const Md=setTimeout,Ld=clearTimeout,bd=-1;function Od(d,f){return!1}const Gd=!1,Dd=!0,Id=!0;function Ud(d,f){f.parent===d?f.moveToTop():d.add(f),mn(d)}function zd(d,f){f.parent===d?f.moveToTop():d.add(f),mn(d)}function Zu(d,f,L){f._remove(),d.add(f),f.setZIndex(L.getZIndex()),mn(d)}function Bd(d,f,L){Zu(d,f,L)}function Vd(d,f){f.destroy(),f.off(ba),mn(d)}function Hd(d,f){f.destroy(),f.off(ba),mn(d)}function Wd(d,f,L){console.error(`Text components are not yet supported in ReactKonva. You text is: "${L}"`)}function qd(d,f,L){}function jd(d,f,L,b,k){Zi(d,k,b)}function Kd(d){d.hide(),mn(d)}function Yd(d){}function Xd(d,f){(f.visible==null||f.visible)&&d.show()}function Qd(d,f){}function Jd(d){}function Zd(){}const $d=()=>Qu.DefaultEventPriority,t0=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Ud,appendChildToContainer:zd,appendInitialChild:_d,cancelTimeout:Ld,clearContainer:Jd,commitMount:qd,commitTextUpdate:Wd,commitUpdate:jd,createInstance:Sd,createTextInstance:Cd,detachDeletedInstance:Zd,finalizeInitialChildren:wd,getChildHostContext:Ad,getCurrentEventPriority:$d,getPublicInstance:xd,getRootHostContext:Fd,hideInstance:Kd,hideTextInstance:Yd,idlePriority:ka.unstable_IdlePriority,insertBefore:Zu,insertInContainerBefore:Bd,isPrimaryRenderer:Gd,noTimeout:bd,now:ka.unstable_now,prepareForCommit:Pd,preparePortalMount:Ed,prepareUpdate:Rd,removeChild:Vd,removeChildFromContainer:Hd,resetAfterCommit:kd,resetTextContent:Td,run:ka.unstable_runWithPriority,scheduleTimeout:Md,shouldDeprioritizeSubtree:Nd,shouldSetTextContent:Od,supportsMutation:Id,unhideInstance:Xd,unhideTextInstance:Qd,warnsIfNotActing:Dd},Symbol.toStringTag,{value:"Module"}));var e0=Object.defineProperty,n0=Object.defineProperties,r0=Object.getOwnPropertyDescriptors,Gu=Object.getOwnPropertySymbols,i0=Object.prototype.hasOwnProperty,s0=Object.prototype.propertyIsEnumerable,Du=(d,f,L)=>f in d?e0(d,f,{enumerable:!0,configurable:!0,writable:!0,value:L}):d[f]=L,Iu=(d,f)=>{for(var L in f||(f={}))i0.call(f,L)&&Du(d,L,f[L]);if(Gu)for(var L of Gu(f))s0.call(f,L)&&Du(d,L,f[L]);return d},a0=(d,f)=>n0(d,r0(f)),Uu,zu;typeof window<"u"&&((Uu=window.document)!=null&&Uu.createElement||((zu=window.navigator)==null?void 0:zu.product)==="ReactNative")?ye.useLayoutEffect:ye.useEffect;function $u(d,f,L){if(!d)return;if(L(d)===!0)return d;let b=d.child;for(;b;){const k=$u(b,f,L);if(k)return k;b=b.sibling}}function th(d){try{return Object.defineProperties(d,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return d}}const Bu=console.error;console.error=function(){const d=[...arguments].join("");if(d?.startsWith("Warning:")&&d.includes("useContext")){console.error=Bu;return}return Bu.apply(this,arguments)};const Oa=th(ye.createContext(null));class eh extends ye.Component{render(){return ye.createElement(Oa.Provider,{value:this._reactInternals},this.props.children)}}function o0(){const d=ye.useContext(Oa);if(d===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const f=ye.useId();return ye.useMemo(()=>{for(const b of[d,d?.alternate]){if(!b)continue;const k=$u(b,!1,_=>{let a=_.memoizedState;for(;a;){if(a.memoizedState===f)return!0;a=a.next}});if(k)return k}},[d,f])}function l0(){const d=o0(),[f]=ye.useState(()=>new Map);f.clear();let L=d;for(;L;){if(L.type&&typeof L.type=="object"){const k=L.type._context===void 0&&L.type.Provider===L.type?L.type:L.type._context;k&&k!==Oa&&!f.has(k)&&f.set(k,ye.useContext(th(k)))}L=L.return}return f}function u0(){const d=l0();return ye.useMemo(()=>Array.from(d.keys()).reduce((f,L)=>b=>ye.createElement(f,null,ye.createElement(L.Provider,a0(Iu({},b),{value:d.get(L)}))),f=>ye.createElement(eh,Iu({},f))),[d])}function h0(d){const f=le.useRef({});return le.useLayoutEffect(()=>{f.current=d}),le.useLayoutEffect(()=>()=>{f.current={}},[]),f.current}const c0=d=>{const f=le.useRef(null),L=le.useRef(null),b=le.useRef(null),k=h0(d),_=u0(),a=h=>{const{forwardedRef:g}=d;g&&(typeof g=="function"?g(h):g.current=h)};return le.useLayoutEffect(()=>(L.current=new ti.Stage({width:d.width,height:d.height,container:f.current}),a(L.current),b.current=$r.createContainer(L.current,Qu.LegacyRoot,!1,null),$r.updateContainer(le.createElement(_,{},d.children),b.current),()=>{ti.isBrowser&&(a(null),$r.updateContainer(null,b.current,null),L.current.destroy())}),[]),le.useLayoutEffect(()=>{a(L.current),Zi(L.current,d,k),$r.updateContainer(le.createElement(_,{},d.children),b.current,null)}),le.createElement("div",{ref:f,id:d.id,accessKey:d.accessKey,className:d.className,role:d.role,style:d.style,tabIndex:d.tabIndex,title:d.title})},P0="Layer",E0="Group",R0="Rect",k0="Circle",T0="Ellipse",N0="Line",F0="Image",A0="Text",M0="Star",L0="RegularPolygon",b0="Transformer",$r=cd(t0);$r.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:le.version,rendererPackageName:"react-konva"});const O0=le.forwardRef((d,f)=>le.createElement(eh,{},le.createElement(c0,{...d,forwardedRef:f})));export{k0 as C,T0 as E,E0 as G,F0 as I,N0 as L,R0 as R,M0 as S,A0 as T,L0 as a,O0 as b,P0 as c,b0 as d};
//# sourceMappingURL=konva-C-3VAw1p.js.map
